!function(e){"use strict";e.HSCore={init:function(){e(document).ready(function(t){e('[data-toggle="tooltip"]').tooltip(),e('[data-toggle="popover"]').popover(),e.HSCore.helpers.detectIE(),e.HSCore.helpers.bootstrapNavOptions.init()})},components:{},helpers:{Math:{getRandomValueFromRange:function(e,t,r){var n=r||!1;return Math.random(),n?Math.random()*(t-e)+e:Math.floor(Math.random()*(t-e+1))+e}},detectIE:function(){var e=window.navigator.userAgent;if(e.indexOf("Trident/")>0){var t=e.indexOf("rv:");parseInt(e.substring(t+3,e.indexOf(".",t)),10),document.querySelector("body").className+=" IE"}var r=e.indexOf("Edge/");if(r>0){parseInt(e.substring(r+5,e.indexOf(".",r)),10);document.querySelector("body").className+=" IE"}return!1},bootstrapNavOptions:{init:function(){this.mobileHideOnScroll()},mobileHideOnScroll:function(){var t=e(".navbar");if(t.length){var r=e(window),n={sm:576,md:768,lg:992,xl:1200};e("body").on("click.HSMobileHideOnScroll",".navbar-toggler",function(t){var n=e(this).closest(".navbar");n.length&&n.data("mobile-menu-scroll-position",r.scrollTop()),t.preventDefault()}),r.on("scroll.HSMobileHideOnScroll",function(o){t.each(function(t,o){var i,a,s,l,u,c=e(o);c.hasClass("navbar-expand-xl")?u=n.xl:c.hasClass("navbar-expand-lg")?u=n.lg:c.hasClass("navbar-expand-md")?u=n.md:c.hasClass("navbar-expand-xs")&&(u=n.xs),r.width()>u||(i=c.find(".navbar-toggler"),a=c.find(".navbar-collapse"),a.data("mobile-scroll-hide")&&a.length&&(s=c.data("mobile-menu-scroll-position"),Math.abs(r.scrollTop()-s)>40&&a.hasClass("show")&&(i.trigger("click"),l=i.find(".is-active"),l.length&&l.removeClass("is-active"))))})})}}}},settings:{rtl:!1}},e.HSCore.init()}(jQuery),function(e){"use strict";e.HSCore.components.HSBgVideo={init:function(t){e(t).hsBgVideo()}}}(jQuery),function(e){"use strict";e.HSCore.components.HSChartistAreaChart={_baseConfig:{},pageCollection:e(),init:function(t,r){if(this.collection=t&&e(t).length?e(t):e(),e(t).length)return this.config=r&&e.isPlainObject(r)?e.extend({},this._baseConfig,r):this._baseConfig,this.config.itemSelector=t,this.initCharts(),this.pageCollection},initCharts:function(){var t=this,r=t.pageCollection;this.collection.each(function(t,n){var o=JSON.parse(n.getAttribute("data-fill-colors")),i=JSON.parse(n.getAttribute("data-points-colors")),a=e(n).data("fill-opacity"),s=e(n).data("stroke-width"),l=e(n).data("stroke-color"),u=e(n).data("stroke-dash-array"),c=e(n).data("text-size-x"),p=e(n).data("text-color-x"),d=e(n).data("text-offset-top-x"),f=e(n).data("text-size-y"),h=e(n).data("text-color-y");e(n).attr("id","areaCharts"+t),e('<style id="areaChartsStyle'+t+'"></style>').insertAfter(e(n));var y="",m=JSON.parse(n.getAttribute("data-series")),g=JSON.parse(n.getAttribute("data-labels")),v=e(n).data("height"),b=e(n).data("mobile-height"),w=e(n).data("high"),S=e(n).data("low"),_=e(n).data("offset-x"),x=e(n).data("offset-y"),O=e(n).data("postfix"),C=e(n).data("align-text-axis-x"),M=Boolean(e(n).data("is-show-area")),T=Boolean(e(n).data("is-show-line")),P=Boolean(e(n).data("is-show-point")),I=Boolean(e(n).data("is-full-width")),E=Boolean(e(n).data("is-stack-bars")),j=Boolean(e(n).data("is-show-axis-x")),k=Boolean(e(n).data("is-show-axis-y")),A=Boolean(e(n).data("is-show-tooltips")),L=e(n).data("tooltip-description-position"),F=e(n).data("tooltip-custom-class"),N={labels:g,series:m},R={height:v,high:w,low:S,showArea:M,showLine:T,showPoint:P,fullWidth:I,stackBars:E,chartPadding:{top:0,right:0,bottom:0,left:0},axisX:{offset:_,showGrid:j,labelOffset:{y:d}},axisY:{offset:x,showGrid:k,labelInterpolationFnc:function(e){return e/1e6+O}},plugins:!!A&&[Chartist.plugins.tooltip({tooltipFnc:function(e,t){return"right"==L?'<span class="chartist-tooltip-value">'+t+'</span> <span class="chartist-tooltip-meta">'+e+"</span>":'<span class="chartist-tooltip-meta">'+e+'</span> <span class="chartist-tooltip-value">'+t+"</span>"},class:F})]},D=[["screen and (max-width: 769px)",{height:b||v,axisX:{offset:0},axisY:{offset:0}}]],U=new Chartist.Line(n,N,R,D),q=1;U.on("created",function(){1==q&&(y+="#areaCharts"+t+" .ct-grid {stroke: "+l+"; stroke-dasharray: "+u+"}#areaCharts"+t+" .ct-line {stroke: "+l+"; stroke-width: "+s+"}#areaCharts"+t+" .ct-area {fill-opacity: "+a+"}#areaCharts"+t+" .ct-horizontal {font-size: "+c+"; color: "+p+"; justify-content: "+C+"}#areaCharts"+t+" .ct-vertical {font-size: "+f+"; color: "+h+"}",e(n).find(".ct-series").each(function(e){y+="#areaCharts"+t+" .ct-series:nth-child("+(e+1)+") .ct-area {fill: "+o[e]+"}#areaCharts"+t+" .ct-series:nth-child("+(e+1)+") .ct-point {stroke: "+i[e]+"}"}),e("#areaChartsStyle"+t).text(y)),q++}),r=r.add(e(n))})}}}(jQuery),function(e){"use strict";e.HSCore.components.HSChartistBarChart={_baseConfig:{},pageCollection:e(),init:function(t,r){if(this.collection=t&&e(t).length?e(t):e(),e(t).length)return this.config=r&&e.isPlainObject(r)?e.extend({},this._baseConfig,r):this._baseConfig,this.config.itemSelector=t,this.initCharts(),this.pageCollection},initCharts:function(){var t=this,r=t.pageCollection;this.collection.each(function(t,n){var o=e(n).data("stroke-width"),i=e(n).data("stroke-color");e(n).attr("id","barCharts"+t),e('<style id="barChartsStyle'+t+'"></style>').insertAfter(e(n));var a="",s=JSON.parse(n.getAttribute("data-series")),l=JSON.parse(n.getAttribute("data-labels")),u=e(n).data("height"),c=e(n).data("high"),p=e(n).data("low"),d=e(n).data("distance"),f=Boolean(e(n).data("is-show-axis-x")),h=Boolean(e(n).data("is-show-axis-y")),y={series:s||!1,labels:l||!1},m={width:"100%",height:u,high:c,low:p,seriesBarDistance:d,axisX:{offset:0,scaleMinSpace:0,showGrid:f,showLabel:!1},axisY:{offset:0,scaleMinSpace:0,showGrid:h,showLabel:!1},chartPadding:{top:0,right:0,bottom:0,left:0}},g=new Chartist.Bar(n,y,m),v=1;g.on("created",function(){1==v&&(e(n).find(".ct-series").each(function(){a+="#barCharts"+t+" .ct-series .ct-bar {stroke-width: "+o+"; stroke: "+i+"}"}),e("#barChartsStyle"+t).text(a)),v++}),g.update(),r=r.add(e(n))})}}}(jQuery),function(e){"use strict";e.HSCore.components.HSChartPie={_baseConfig:{bounds:-100,debounce:10,rtl:!1,wrpClass:"u-circles-wrap",textClass:"u-circles-text",valueStrokeClass:"u-circles-valueStroke",maxValueStrokeClass:"u-circles-maxValueStroke",styleWrapper:!0,styleText:!0},pageCollection:e(),appearCollectionIds:[],init:function(t,r){if(this.collection=t&&e(t).length?e(t):e(),e(t).length)return this.config=r&&e.isPlainObject(r)?e.extend({},this._baseConfig,r):this._baseConfig,this.config.itemSelector=t,this.initCircles(),this.pageCollection},initCircles:function(){var t=this.pageCollection.last(),r=0,n=this;t.length&&(r=+t.attr("id").substring(t.attr("id").lastIndexOf("-")+1)),this.collection.each(function(t,o){var i=e(o),a="hs-pie-"+(r+(t+1)),s=0;i.attr("id",a),i.data("circles-scroll-animate")?(i.data("reminded-value",i.data("circles-value")||0),n.appearCollectionIds.push("#"+a)):s=i.data("circles-value")||0;var l=Circles.create({id:a,radius:i.data("circles-radius")||80,value:s,maxValue:i.data("circles-max-value")||100,width:i.data("circles-stroke-width")||10,text:function(e){return"iconic"==i.data("circles-type")?i.data("circles-icon"):"prefix"===i.data("circles-additional-text-type")?i.data("circles-secondary-text")?(i.data("circles-additional-text")||"")+(i.data("circles-is-hide-value")?"":e)+'<div style="margin-top: '+(i.data("circles-divider-space")/2+"px"||"0")+"; margin-bottom: "+(i.data("circles-divider-space")/2+"px"||"0")+';"></div><div style="font-weight: '+i.data("circles-secondary-font-weight")+"; font-size: "+i.data("circles-secondary-font-size")+"px; color: "+i.data("circles-secondary-color")+';">'+i.data("circles-secondary-text")+"</div>":(i.data("circles-additional-text")||"")+(i.data("circles-is-hide-value")?"":e):i.data("circles-secondary-text")?(i.data("circles-is-hide-value")?"":e)+(i.data("circles-additional-text")||"")+'<div style="margin-top: '+(i.data("circles-divider-space")/2+"px"||"0")+"; margin-bottom: "+(i.data("circles-divider-space")/2+"px"||"0")+';"></div><div style="font-weight: '+i.data("circles-secondary-font-weight")+"; font-size: "+i.data("circles-secondary-font-size")+"px; color: "+i.data("circles-secondary-color")+';">'+i.data("circles-secondary-text")+"</div>":(i.data("circles-is-hide-value")?"":e)+(i.data("circles-additional-text")||"")},colors:[i.data("circles-bg-color")||"#377dff",i.data("circles-fg-color")||"#e7eaf3"],duration:i.data("circles-duration")||1e3,wrpClass:i.data("circles-wrp-class")||n.config.wrpClass,textClass:i.data("circles-text-class")||n.config.textClass,valueStrokeClass:n.config.valueStrokeClass,maxValueStrokeClass:n.config.maxValueStrokeClass,styleWrapper:n.config.styleWrapper,styleText:n.config.styleText});i.data("circle",l),i.find('[class="'+(i.data("circles-text-class")||n.config.textClass)+'"]').css({"font-size":i.data("circles-font-size"),"font-weight":i.data("circles-font-weight"),color:i.data("circles-color"),"line-height":"normal",height:"auto",top:"",left:""}),n.config.rtl&&i.find("svg").css("transform","matrix(-1, 0, 0, 1, 0, 0)"),i.data("circles-fg-stroke-linecap")&&i.find('[class="'+n.config.valueStrokeClass+'"]').attr("stroke-linecap",i.data("circles-fg-stroke-linecap")),i.data("circles-fg-stroke-miterlimit")&&i.find('[class="'+n.config.valueStrokeClass+'"]').attr("stroke-miterlimit",i.data("circles-fg-stroke-miterlimit")),n.pageCollection=n.pageCollection.add(i)}),n.appearCollectionIds.length&&n._initAppear()},_initAppear:function(){var t=this;appear({bounds:t.config.bounds,debounce:t.config.debounce,elements:function(){return document.querySelectorAll(t.appearCollectionIds.join(","))},appear:function(t){t=e(t),t.data("circle").update(t.data("reminded-value"))}})},get:function(t){return t&&e.isNumeric(t)?this.pageCollection.eq(t):this.pageCollection},getById:function(e){return e&&this.pageCollection.filter("#"+e).length?this.pageCollection.filter("#"+e):null},getCircleAPI:function(t){return t&&e.isNumeric(t)&&this.pageCollection.eq(t).length?this.pageCollection.eq(t).data("circle"):null},getCircleAPIById:function(e){return e&&this.pageCollection.filter("#"+e).length?this.pageCollection.filter("#"+e).data("circle"):null}}}(jQuery),function(e){"use strict";e.HSCore.components.HSClipboard={_baseConfig:{},pageCollection:e(),init:function(t,r){if(this.collection=t&&e(t).length?e(t):e(),e(t).length)return this.config=r&&e.isPlainObject(r)?e.extend({},this._baseConfig,r):this._baseConfig,this.config.itemSelector=t,this.initClipboard(),this.pageCollection},initClipboard:function(){var t=this,r=t.pageCollection,n={};e("[data-content-target]").each(function(){var t=e(this),r=t.data("content-target");e(r).is("input, textarea, select")?n[r]=e(r).val():n[r]=e(r).html()}),this.collection.each(function(t,o){var i=(e(window).width(),e(o)),a=i.get(0).lastChild.nodeValue,s=i.data("class-change-target"),l=i.data("default-class"),u=i.data("container"),c=i.attr("title"),p=i.data("type");i.on("click",function(e){e.preventDefault()}),new ClipboardJS(o,{container:!!u&&document.querySelector(u),text:function(t){var r=e(t).data("content-target");return n[r]}}).on("success",function(){var t=i.data("success-text"),r=i.data("success-class");(t||r)&&(t&&("tooltip"!==p?(i.get(0).lastChild.nodeValue=" "+t+" ",setTimeout(function(){i.get(0).lastChild.nodeValue=a},800)):(i.attr("data-original-title",t).tooltip("show"),i.on("mouseleave",function(){i.attr("data-original-title",c)}))),r&&(s?(e(s).removeClass(l).addClass(r),setTimeout(function(){e(s).removeClass(r).addClass(l)},800)):(i.removeClass(l).addClass(r),setTimeout(function(){i.removeClass(r).addClass(l)},800))))}),r=r.add(o)})}}}(jQuery),function(e){"use strict";e.HSCore.components.HSCountdown={_baseConfig:{yearsElSelector:".years",monthsElSelector:".months",daysElSelector:".days",hoursElSelector:".hours",minutesElSelector:".minutes",secondsElSelector:".seconds",circles:!1,wrpClass:"wrpClass",textClass:"textClass",valueStrokeClass:"valueStrokeClass",maxValueStrokeClass:"maxValueStrokeClass",styleWrapper:"styleWrapper",styleText:"styleText"},pageCollection:e(),_circlesIds:[0],init:function(t,r){if(this.collection=t&&e(t).length?e(t):e(),e(t).length)return this.config=r&&e.isPlainObject(r)?e.extend({},this._baseConfig,r):this._baseConfig,this.config.itemSelector=t,this.initCountdowns(),this.pageCollection},initCountdowns:function(){var t=this;this.collection.each(function(r,n){var o=e(n),i={endDate:o.data("end-date")?new Date(o.data("end-date")):new Date,startDate:o.data("start-date")?new Date(o.data("start-date")):new Date,yearsEl:o.find(t.config.yearsElSelector),yearsFormat:o.data("years-format"),monthsEl:o.find(t.config.monthsElSelector),monthsFormat:o.data("months-format"),daysEl:o.find(t.config.daysElSelector),daysFormat:o.data("days-format"),hoursEl:o.find(t.config.hoursElSelector),hoursFormat:o.data("hours-format"),minutesEl:o.find(t.config.minutesElSelector),minutesFormat:o.data("minutes-format"),secondsEl:o.find(t.config.secondsElSelector),secondsFormat:o.data("seconds-format")};t.config.circles&&o.data("start-date")?t._initPiesImplementation(o,i):t._initBaseImplementation(o,i),t.pageCollection=t.pageCollection.add(o)})},_initBaseImplementation:function(e,t){e.countdown(t.endDate,function(e){t.yearsEl.length&&t.yearsEl.text(e.strftime(t.yearsFormat)),t.monthsEl.length&&t.monthsEl.text(e.strftime(t.monthsFormat)),t.daysEl.length&&t.daysEl.text(e.strftime(t.daysFormat)),t.hoursEl.length&&t.hoursEl.text(e.strftime(t.hoursFormat)),t.minutesEl.length&&t.minutesEl.text(e.strftime(t.minutesFormat)),t.secondsEl.length&&t.secondsEl.text(e.strftime(t.secondsFormat))})},_initPiesImplementation:function(e,t){var r=this;t.yearsEl.length&&r._preparePieItem(t.yearsEl,{maxValue:t.endDate.getFullYear()-t.startDate.getFullYear(),radius:e.data("circles-radius"),width:e.data("circles-stroke-width"),"fg-color":e.data("circles-fg-color"),"bg-color":e.data("circles-bg-color"),"additional-text":e.data("circles-additional-text"),"font-size":e.data("circles-font-size")}),t.monthsEl.length&&r._preparePieItem(t.monthsEl,{maxValue:Math.round(Math.abs((t.endDate.getTime()-t.startDate.getTime())/864e5))/12,radius:e.data("circles-radius"),width:e.data("circles-stroke-width"),"fg-color":e.data("circles-fg-color"),"bg-color":e.data("circles-bg-color"),"additional-text":e.data("circles-additional-text"),"font-size":e.data("circles-font-size")}),t.daysEl.length&&r._preparePieItem(t.daysEl,{maxValue:r._getDaysMaxValByFormat(t.daysFormat,t.startDate,t.endDate),radius:e.data("circles-radius"),width:e.data("circles-stroke-width"),"fg-color":e.data("circles-fg-color"),"bg-color":e.data("circles-bg-color"),"additional-text":e.data("circles-additional-text"),"font-size":e.data("circles-font-size")}),t.hoursEl.length&&r._preparePieItem(t.hoursEl,{maxValue:60,radius:e.data("circles-radius"),width:e.data("circles-stroke-width"),"fg-color":e.data("circles-fg-color"),"bg-color":e.data("circles-bg-color"),"additional-text":e.data("circles-additional-text"),"font-size":e.data("circles-font-size")}),t.minutesEl.length&&r._preparePieItem(t.minutesEl,{maxValue:60,radius:e.data("circles-radius"),width:e.data("circles-stroke-width"),"fg-color":e.data("circles-fg-color"),"bg-color":e.data("circles-bg-color"),"additional-text":e.data("circles-additional-text"),"font-size":e.data("circles-font-size")}),t.secondsEl.length&&r._preparePieItem(t.secondsEl,{maxValue:60,radius:e.data("circles-radius"),width:e.data("circles-stroke-width"),"fg-color":e.data("circles-fg-color"),"bg-color":e.data("circles-bg-color"),"additional-text":e.data("circles-additional-text"),"font-size":e.data("circles-font-size")}),e.countdown(t.endDate,function(e){t.yearsEl.length&&t.yearsEl.data("circle").update(e.strftime(t.yearsFormat)),t.monthsEl.length&&t.monthsEl.data("circle").update(e.strftime(t.monthsFormat)),t.daysEl.length&&t.daysEl.data("circle").update(e.strftime(t.daysFormat)),t.hoursEl.length&&t.hoursEl.data("circle").update(e.strftime(t.hoursFormat)),t.minutesEl.length&&t.minutesEl.data("circle").update(e.strftime(t.minutesFormat)),t.secondsEl.length&&t.secondsEl.data("circle").update(e.strftime(t.secondsFormat))})},_preparePieItem:function(e,t){var r=this,n=r._circlesIds[r._circlesIds.length-1]+1;r._circlesIds.push(n),e.attr("id","hs-countdown-element-"+n),e.data("circle",Circles.create({id:"hs-countdown-element-"+n,radius:t.radius||80,value:0,maxValue:t.maxValue||100,width:t.width||10,text:function(e){return e+(t["additional-text"]||"")},colors:[t["bg-color"]||"#eeeeee",t["fg-color"]||"#72c02c"],duration:0,wrpClass:r.config.wrpClass,textClass:r.config.textClass,valueStrokeClass:r.config.valueStrokeClass,maxValueStrokeClass:r.config.maxValueStrokeClass,styleWrapper:r.config.styleWrapper,styleText:r.config.styleText})),t["font-size"]&&e.find("."+r.config.textClass).css("font-size",t["font-size"]+"px")},_getDaysMaxValByFormat:function(e,t,r){switch(e){case"%D":return Math.round(Math.abs((r.getTime()-t.getTime())/864e5));default:return 31}}}}(jQuery),function(e){"use strict";e.HSCore.components.HSCounter={_baseConfig:{bounds:-100,debounce:10,time:6e3,fps:60,commaSeparated:!1},_pageCollection:e(),init:function(t,r){this.collection=e(t)&&e(t).length?e(t):e(),this.collection.length&&(this.config=r&&e.isPlainObject(r)?e.extend({},this._baseConfig,r):this._baseConfig,this.config.itemSelector=t,this.initCounters())},initCounters:function(){var t=this;appear({bounds:t.config.bounds,debounce:t.config.debounce,init:function(){t.collection.each(function(r,n){var o=e(n),i=parseInt(o.text(),10);o.text("0").data("value",i),t._pageCollection=t._pageCollection.add(o)})},elements:function(){return document.querySelectorAll(t.config.itemSelector)},appear:function(r){var n=e(r),o=1,i=n.data("value"),a=parseInt(i/(t.config.time/t.config.fps),10),s=n.data("comma-separated"),l=n.data("reduce-thousands-to");0==a&&(a=1),n.data("intervalId",setInterval(function(){if(s?n.text(t.getCommaSeparatedValue(o+=a)):l?n.text(t.getCommaReducedValue(o+=a,l)):n.text(o+=a),o>i)return clearInterval(n.data("intervalId")),void(s?n.text(t.getCommaSeparatedValue(i)):l?n.text(t.getCommaReducedValue(i,l)):n.text(i))},t.config.time/t.config.fps))}})},getCommaReducedValue:function(e,t){return parseInt(e/1e3,10)+t},getCommaSeparatedValue:function(e){switch(e=new String(e),e.length){case 4:return e.substr(0,1)+","+e.substr(1);case 5:return e.substr(0,2)+","+e.substr(2);case 6:return e.substr(0,3)+","+e.substr(3);case 7:return e=e.substr(0,1)+","+e.substr(1),e.substr(0,5)+","+e.substr(5);case 8:return e=e.substr(0,2)+","+e.substr(2),e.substr(0,6)+","+e.substr(6);case 9:return e=e.substr(0,3)+","+e.substr(3),e.substr(0,7)+","+e.substr(7);case 10:return e=e.substr(0,1)+","+e.substr(1),e=e.substr(0,5)+","+e.substr(5),e.substr(0,9)+","+e.substr(9);default:return e}}}}(jQuery),function(e){"use strict";e.HSCore.components.HSCubeportfolio={_baseConfig:{},pageCollection:e(),init:function(t,r){if(this.collection=t&&e(t).length?e(t):e(),e(t).length)return this.config=r&&e.isPlainObject(r)?e.extend({},this._baseConfig,r):this._baseConfig,this.config.itemSelector=t,this.initCubeportfolio(),this.pageCollection},initCubeportfolio:function(){var t=this,r=(t.config,t.pageCollection);this.collection.each(function(t,n){var o=e(n),i=o.data("controls"),a=o.data("layout"),s=o.data("x-gap"),l=o.data("y-gap"),u=o.data("animation"),c=o.data("caption-animation"),p=e(this).data("load-more-selector"),d=e(this).data("load-more-action"),f=e(this).data("load-items-amount"),h=[{width:1500,cols:3},{width:1100,cols:3},{width:800,cols:3},{width:480,cols:2,options:{caption:"",gapHorizontal:10,gapVertical:10}}],y=JSON.parse(n.getAttribute("data-media-queries"));o.cubeportfolio({filters:i,layoutMode:a,defaultFilter:"*",sortToPreventGaps:!0,gapHorizontal:s,gapVertical:l,animationType:u,gridAdjustment:"responsive",mediaQueries:y||h,caption:c||"overlayBottomAlong",displayType:"sequentially",displayTypeSpeed:100,lightboxDelegate:".cbp-lightbox",lightboxGallery:!0,lightboxTitleSrc:"data-title",lightboxCounter:'<div class="cbp-popup-lightbox-counter">{{current}} of {{total}}</div>',appendItems:'<div class="logo cbp-item">my awesome content to append to plugin</div> <div class="logo cbp-item">my second awesome content to append to plugin</div>',singlePageInlineDelegate:".cbp-singlePageInline",singlePageInlinePosition:"below",singlePageInlineInFocus:!0,singlePageInlineCallback:function(t,r){var n=this;e.ajax({url:t,type:"GET",dataType:"html",timeout:3e4}).done(function(e){n.updateSinglePageInline(e)}).fail(function(){n.updateSinglePageInline("AJAX Error! Please refresh the page!")})},singlePageDelegate:".cbp-singlePage",singlePageDeeplinking:!0,singlePageStickyNavigation:!0,singlePageCounter:'<div class="cbp-popup-singlePage-counter">{{current}} of {{total}}</div>',singlePageCallback:function(t,r){var n=this;e.ajax({url:t,type:"GET",dataType:"html",timeout:1e4}).done(function(e){n.updateSinglePage(e)}).fail(function(){n.updateSinglePage("AJAX Error! Please refresh the page!")})},plugins:{loadMore:{selector:p,action:d,loadItems:f}}}),r=r.add(o)})}}}(jQuery),function(e){"use strict";e.HSCore.components.HSDatatables={_baseConfig:{paging:!0},pageCollection:e(),init:function(t,r){if(this.collection=t&&e(t).length?e(t):e(),e(t).length)return this.config=r&&e.isPlainObject(r)?e.extend({},this._baseConfig,r):this._baseConfig,this.config.itemSelector=t,this.initDatatables(),this.pageCollection},initDatatables:function(){var t=this,r=t.config,n=t.pageCollection;this.collection.each(function(o,i){var a=e(i),s=a.data("dt-info"),l=a.data("dt-search"),u=a.data("dt-entries"),c=a.data("dt-pagination"),p=a.data("dt-details-invoker"),d=a.data("dt-page-length"),f=Boolean(a.data("dt-is-responsive")),h=Boolean(a.data("dt-is-selectable")),y=Boolean(a.data("dt-is-columns-search")),m=Boolean(a.data("dt-is-columns-search-thead-after")),g=a.data("dt-is-show-paging"),v=a.data("dt-is-show-info"),b=a.data("dt-scroll-height"),w=a.data("dt-pagination-classes"),S=a.data("dt-pagination-items-classes"),_=a.data("dt-pagination-links-classes"),x=(a.data("dt-pagination-next-classes"),a.data("dt-pagination-next-link-classes")),O=a.data("dt-pagination-next-link-markup"),C=(a.data("dt-pagination-prev-classes"),a.data("dt-pagination-prev-link-classes")),M=a.data("dt-pagination-prev-link-markup"),T=a.data("dt-select-all-control"),P=a.DataTable({pageLength:d,responsive:f,scrollY:b||"",scrollCollapse:!!b,paging:toString(g)?Boolean(g):r.paging,info:toString(v)?Boolean(v):r.paging,drawCallback:function(t){var r=this.api(),n=r.page.info(),o=e("#"+r.context[0].nTable.id+"_paginate"),i=o.find("> span"),a=o.find(".paginate_button.previous"),l=o.find(".paginate_button.next"),u=o.find(".paginate_button:not(.previous):not(.next), .ellipsis");o.addClass(w),a.wrap('<span class="'+S+'"></span>'),a.addClass(C).html(M),l.wrap('<span class="'+S+'"></span>'),l.addClass(x).html(O),i.css("display","flex"),u.each(function(){e(this).hasClass("current")?e(this).wrap('<span class="'+S+' active"></span>'):e(this).wrap('<span class="'+S+'"></span>')}),u.addClass(_),n.pages<=1?e("#"+c).hide():e("#"+c).show(),e(s).html("Showing "+(n.start+1)+" to "+n.end+" of "+n.recordsDisplay+" Entries")}});P.page.info();e("#"+c).append(e("#"+P.context[0].nTable.id+"_paginate")),b&&e(P.context[0].nScrollBody).mCustomScrollbar({scrollbarPosition:"outside"}),e(l).on("keyup",function(){P.search(this.value).draw()}),!0===y&&P.columns().every(function(){var t=this;!0===m&&e(".dataTables_scrollFoot").insertAfter(".dataTables_scrollHead"),e("input",this.footer()).on("keyup change",function(){t.search()!==this.value&&t.search(this.value).draw()}),e("select",this.footer()).on("change",function(){t.search()!==this.value&&t.search(this.value).draw()})}),e(u).on("change",function(){var t=e(this).val();P.page.len(t).draw()}),!0===h&&e(a).on("change","input",function(){e(this).parents("tr").toggleClass("checked")}),t.details(a,p,P),T&&t.selectAll(T,P,a),n=n.add(a)})},format:function(e){return e},details:function(t,r,n){if(r){var o=this;e(t).on("click",r,function(){var t=e(this).closest("tr"),r=n.row(t);r.child.isShown()?(r.child.hide(),t.removeClass("opened")):(r.child(o.format(t.data("details"))).show(),t.addClass("opened"))})}},selectAll:function(t,r,n){e(t).on("click",function(){var t=r.rows({search:"applied"}).nodes();e('input[type="checkbox"]',t).prop("checked",this.checked)}),e(n).find("tbody").on("change",'input[type="checkbox"]',function(){if(!this.checked){var r=e(t).get(0);r&&r.checked&&"indeterminate"in r&&(r.indeterminate=!0)}})}}}(jQuery),function(e){"use strict";e.HSCore.components.HSDropzone={_baseConfig:{url:"../../assets/vendor/dropzone/upload.html",thumbnailWidth:300,thumbnailHeight:300,previewTemplate:'<div class="col h-100 mb-5">  <div class="dz-preview dz-file-preview">    <div class="d-flex justify-content-end dz-close-icon">      <small class="fa fa-times" data-dz-remove></small>    </div>    <div class="dz-details media">      <div class="dz-img">       <img class="img-fluid" data-dz-thumbnail>      </div>      <div class="media-body dz-file-wrapper">       <h6 class="dz-filename">        <span class="dz-title" data-dz-name></span>       </h6>       <div class="dz-size" data-dz-size></div>      </div>    </div>    <div class="dz-progress progress" style="height: 4px;">      <div class="dz-upload progress-bar bg-success" role="progressbar" style="width: 0" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" data-dz-uploadprogress></div>    </div>    <div class="d-flex align-items-center">      <div class="dz-success-mark">        <span class="fa fa-check-circle"></span>      </div>      <div class="dz-error-mark">        <span class="fa fa-times-circle"></span>      </div>      <div class="dz-error-message">        <small data-dz-errormessage></small>      </div>    </div>  </div></div>',addedfile:function(){},removedfile:function(){}},pageCollection:e(),init:function(t,r){if(this.collection=t&&e(t).length?e(t):e(),e(t).length)return this.config=r&&e.isPlainObject(r)?e.extend({},this._baseConfig,r):this._baseConfig,this.config.itemSelector=t,this.initDropzone(),this.pageCollection},initDropzone:function(){var t=this,r=t.config,n=t.pageCollection;this.collection.each(function(t,o){var i=e(o),a=JSON.parse(o.getAttribute("data-options"));i.dropzone({init:function(){var t=this,n=e(t.element).find(".dz-message");t.on("addedfile",function(t){"image/"!==String(t.type).slice(0,6)&&e(t.previewElement).find(".dz-img").replaceWith('<span class="dz-file-abbr">'+t.name.substring(0,1).toUpperCase()+"</span>"),r.addedfile(),n.hide()}),t.on("removedfile",function(e){t.files.length<=0&&(r.removedfile(),n.show())})},url:a&&a.url?a.url:r.url,thumbnailWidth:a&&a.thumbnailWidth?a.thumbnailWidth:r.thumbnailWidth,thumbnailHeight:a&&a.thumbnailHeight?a.thumbnailHeight:r.thumbnailHeight,previewTemplate:a&&a.previewTemplate?e(a.previewTemplate).html():r.previewTemplate}),n=n.add(i)})}}}(jQuery),function(e){"use strict";e.HSCore.components.HSFancyBox={_baseConfig:{parentEl:"html",baseClass:"u-fancybox-theme",slideClass:"u-fancybox-slide",speed:1e3,slideSpeedCoefficient:1,infobar:!1,fullScreen:!0,thumbs:!0,closeBtn:!0,baseTpl:'<div class="fancybox-container" role="dialog" tabindex="-1"><div class="fancybox-content"><div class="fancybox-bg"></div><div class="fancybox-controls" style="position: relative; z-index: 99999;"><div class="fancybox-infobar"><div class="fancybox-infobar__body"><span data-fancybox-index></span>&nbsp;/&nbsp;<span data-fancybox-count></span></div></div><div class="fancybox-toolbar">{{BUTTONS}}</div></div><div class="fancybox-slider-wrap"><button data-fancybox-prev class="fancybox-arrow fancybox-arrow--left" title="Previous"></button><button data-fancybox-next class="fancybox-arrow fancybox-arrow--right" title="Next"></button><div class="fancybox-stage"></div></div><div class="fancybox-caption-wrap"><div class="fancybox-caption"></div></div></div></div>',animationEffect:"fade"},pageCollection:e(),init:function(t,r){if(t){e(t).length&&(r=r&&e.isPlainObject(r)?e.extend(!0,{},this._baseConfig,r):this._baseConfig,this.initFancyBox(t,r))}},initFancyBox:function(t,r){var n=e(t);n.on("click",function(){var t=e(this),r=t.data("speed"),n=t.data("fancybox"),o=Boolean(t.data("is-infinite")),i=Boolean(t.data("is-slideshow-auto-start")),a=t.data("slideshow-speed");e.fancybox.defaults.animationDuration=r,!0===o&&(e.fancybox.defaults.loop=!0),e.fancybox.defaults.slideShow.autoStart=!0===i,n&&(e.fancybox.defaults.transitionEffect="slide",e.fancybox.defaults.slideShow.speed=a)}),n.fancybox(e.extend(!0,{},r,{beforeShow:function(t,r){var n=(e(t.$refs.container),e(t.$refs.bg[0])),o=e(t.current.$slide),i=t.current.opts.$orig[0].dataset.animateIn,a=t.current.opts.$orig[0].dataset.animateOut,s=t.current.opts.$orig[0].dataset.speed,l=t.current.opts.$orig[0].dataset.overlayBg,u=t.current.opts.$orig[0].dataset.overlayBlurBg;if(i&&e("body").hasClass("u-first-slide-init")){var c=e(t.slides[t.prevPos].$slide);o.addClass("has-animation"),c.addClass("animated "+a),setTimeout(function(){o.addClass("animated "+i)},s/2)}else if(i){var c=e(t.slides[t.prevPos].$slide);o.addClass("has-animation"),o.addClass("animated "+i),e("body").addClass("u-first-slide-init"),o.on("animationend webkitAnimationEnd oAnimationEnd MSAnimationEnd",function(e){o.removeClass(i)})}s?n.css("transition-duration",s+"ms"):n.css("transition-duration","1000ms"),l&&n.css("background-color",l),u&&e("body").addClass("u-blur-30")},beforeClose:function(t,r){var n=(e(t.$refs.container),e(t.current.$slide)),o=t.current.opts.$orig[0].dataset.animateIn,i=t.current.opts.$orig[0].dataset.animateOut,a=t.current.opts.$orig[0].dataset.overlayBlurBg;i&&(n.removeClass(o).addClass(i),e("body").removeClass("u-first-slide-init")),a&&e("body").removeClass("u-blur-30")}}))}}}(jQuery),function(e){"use strict";e.HSCore.components.HSFileAttach={_baseConfig:{},pageCollection:e(),init:function(t,r){if(this.collection=t&&e(t).length?e(t):e(),e(t).length)return this.config=r&&e.isPlainObject(r)?e.extend({},this._baseConfig,r):this._baseConfig,this.config.itemSelector=t,this.initFileAttach(),this.pageCollection},initFileAttach:function(){var t=this,r=(t.config,t.pageCollection);this.collection.each(function(t,n){var o=e(n),i=o.data("result-text-target");o.on("change",function(){var t=e(this).val();console.log(t.replace(/.+[\\\/]/,"")),e(i).text(t.replace(/.+[\\\/]/,""))}),r=r.add(o)})}}}(jQuery),function(e){"use strict";e.HSCore.components.HSFocusState={init:function(){var t=e('.js-focus-state input:not([type="checkbox"], [type="radio"]), .js-focus-state textarea, .js-focus-state select');t.length&&(t.on("focusin",function(){e(this).closest(".js-focus-state").addClass("u-focus-state")}),t.on("focusout",function(){e(this).closest(".js-focus-state").removeClass("u-focus-state")}))}}}(jQuery),function(e){"use strict";e.HSCore.components.HSGMap={_baseConfig:{zoom:14,scrollwheel:!1,infoWindowTemplate:function(e,t,r,n,o){return'<img class="rounded-circle" src="'+e+'" alt="'+t+'"><div class="p-2"><strong class="d-block mb-1">'+r+'</strong><p class="mb-1"><i class="fa fa-map-marker mr-2"></i>'+n+'</p><h2 class="h6 mb-0">'+o+"</h2></div>"}},pageCollection:e(),init:function(t,r){if(this.collection=t&&e(t).length?e(t):e(),e(t).length)return this.config=r&&e.isPlainObject(r)?e.extend({},this._baseConfig,r):this._baseConfig,this.config.itemSelector=t,this.initGMap(),this.pageCollection},initGMap:function(){var t=this,r=t.config,n=t.pageCollection;this.collection.each(function(t,o){var i,a,s=e(o),l=s.attr("id"),u=s.data("type"),c=s.data("lat"),p=s.data("lng"),d=s.data("zoom"),f=s.data("title"),h=JSON.parse(o.getAttribute("data-styles")),y=[],m=Boolean(s.data("polygon")),g=JSON.parse(o.getAttribute("data-polygon-cords")),v=JSON.parse(o.getAttribute("data-polygon-styles")),b=Boolean(s.data("polylines")),w=JSON.parse(o.getAttribute("data-polylines-cords")),S=JSON.parse(o.getAttribute("data-polylines-styles")),_=Boolean(s.data("routes")),x=JSON.parse(o.getAttribute("data-routes-cords")),O=JSON.parse(o.getAttribute("data-routes-styles")),C=Boolean(s.data("geolocation")),M=Boolean(s.data("geocoding")),T=s.data("cords-target"),P=Boolean(s.data("pin")),I=s.data("pin-icon"),E=Boolean(s.data("multiple-markers")),j=JSON.parse(o.getAttribute("data-markers-locations"));if("satellite"==u)a=new google.maps.Map(document.getElementById(l),{zoom:d||r.zoom,scrollwheel:r.scrollwheel}),a.setCenter({lat:c,lng:p}),a.setMapTypeId(google.maps.MapTypeId.SATELLITE);else if("terrain"==u)a=new google.maps.Map(document.getElementById(l),{zoom:d||r.zoom,scrollwheel:r.scrollwheel}),a.setCenter({lat:c,lng:p}),a.setMapTypeId(google.maps.MapTypeId.TERRAIN);else if("street-view"==u)a=new google.maps.StreetViewPanorama(document.getElementById(l),{zoom:d||r.zoom,scrollwheel:r.scrollwheel}),a.setPosition({lat:c,lng:p});else if("static"==u)e(document).ready(function(){a=GMaps.staticMapURL({size:[2048,2048],lat:c,lng:p,zoom:d||r.zoom}),e("#"+l).css("background-image","url("+a+")")});else if("custom"==u){for(var k=h.length,t=0;t<k;t++){var A=h[t][0],L=h[t][1],F=h[t][2],N=e.extend({},y[t]);""!=A&&(N.featureType=A),""!=L&&(N.elementType=L),N.stylers=F,y.push(N)}if(a=new GMaps({div:"#"+l,lat:c,lng:p,zoom:d||r.zoom,scrollwheel:r.scrollwheel,styles:y}),P&&1!=E&&a.addMarker({lat:c,lng:p,title:f,icon:I}),P&&1==E){var R;for(R=0;R<j.length;R++)a.addMarker({title:j[R][1],lat:j[R][2],lng:j[R][3],icon:j[R][0],infoWindow:{content:r.infoWindowTemplate(j[R][4],j[R][5],j[R][6],j[R][7],j[R][8]),maxWidth:150}})}}else a=new GMaps({div:"#"+l,lat:c,lng:p,zoom:d||r.zoom,scrollwheel:r.scrollwheel}),P&&a.addMarker({lat:c,lng:p,title:f,icon:I});if(P&&"satellite"==u||"terrain"==u||"street-view"==u){var D=new google.maps.Marker({position:{lat:c,lng:p},map:a});if(I){var U=new google.maps.MarkerImage(I);D.setIcon(U)}f&&D.setOptions({title:f})}if(1==E&&"terrain"==u){var q,H,V=new google.maps.InfoWindow;for(H=0;H<j.length;H++)q=new google.maps.Marker({position:new google.maps.LatLng(j[H][1],j[H][2]),map:a}),google.maps.event.addListener(q,"click",function(e,t){return function(){V.setContent(j[t][0]),V.open(a,e)}}(q,H))}C||google.maps.event.addDomListener(window,"resize",function(){setTimeout(function(){a.setCenter({lat:c,lng:p})},100)}),m&&e(document).ready(function(){i=a.drawPolygon({paths:g,strokeColor:v.strokeColor,strokeOpacity:v.strokeOpacity,strokeWeight:v.strokeWeight,fillColor:v.fillColor,fillOpacity:v.fillOpacity})}),b&&e(document).ready(function(){a.drawPolyline({path:w,strokeColor:S.strokeColor,strokeOpacity:S.strokeOpacity,strokeWeight:S.strokeWeight})}),_&&e(document).ready(function(){a.drawRoute({origin:x[0],destination:x[1],travelMode:O.travelMode,strokeColor:O.strokeColor,strokeOpacity:O.strokeOpacity,strokeWeight:O.strokeWeight})}),C&&GMaps.geolocate({success:function(e){a.setCenter({lat:e.coords.latitude,lng:e.coords.longitude}),a.addMarker({lat:e.coords.latitude,lng:e.coords.longitude,title:f,icon:I}),google.maps.event.addDomListener(window,"resize",function(){setTimeout(function(){a.setCenter({lat:e.coords.latitude,lng:e.coords.longitude})},100)})},error:function(e){alert("Geolocation failed: "+e.message)},not_supported:function(){alert("Your browser does not support geolocation")}}),M&&e(document).ready(function(){var t=e(T).closest("form");e(t).submit(function(t){t.preventDefault(),GMaps.geocode({address:e(T).val().trim(),callback:function(e,t){if("OK"==t){var r=e[0].geometry.location;a.setCenter(r.lat(),r.lng()),a.addMarker({lat:r.lat(),lng:r.lng()}),c=r.lat(),p=r.lng()}}})})}),n=n.add(s)})}}}(jQuery),function(e){"use strict";e.HSCore.components.HSGoTo={_baseConfig:{},pageCollection:e(),init:function(t,r){if(this.collection=t&&e(t).length?e(t):e(),e(t).length)return this.config=r&&e.isPlainObject(r)?e.extend({},this._baseConfig,r):this._baseConfig,this.config.itemSelector=t,this.initGoTo(),this.pageCollection},initGoTo:function(){var t=this,r=t.pageCollection;this.collection.each(function(t,n){var o=e(n),i=o.data("target"),a=Boolean(o.data("is-referenced-to-page")),s=o.data("type"),l=o.data("show-effect"),u=o.data("hide-effect"),c=JSON.parse(n.getAttribute("data-position")),p=e(o.data("compensation")).outerHeight(),d=o.data("offset-top"),f=function(){return p?i?e(i).offset().top-p:0:i?e(i).offset().top:0};"static"===s?o.css({display:"inline-block"}):o.addClass("animated").css({display:"inline-block",position:s,opacity:0}),"fixed"!==s&&"absolute"!==s||o.css(c),o.on("click",function(t){a||(t.preventDefault(),e("html, body").stop().animate({scrollTop:f()},800))}),o.data("offset-top")||o.hasClass("js-animation-was-fired")||"static"===s||o.offset().top<=e(window).height()&&(o.show(),setTimeout(function(){o.addClass("js-animation-was-fired "+l).css({opacity:""})})),"static"!==s&&(e(window).on("scroll",function(){if(clearTimeout(e.data(this,"scrollTimer")),o.data("offset-top"))e(window).scrollTop()>=d&&!o.hasClass("js-animation-was-fired")?(o.show(),setTimeout(function(){o.addClass("js-animation-was-fired "+l).css({opacity:""})})):e(window).scrollTop()<=d&&o.hasClass("js-animation-was-fired")&&e.data(this,"scrollTimer",setTimeout(function(){o.removeClass("js-animation-was-fired "+l),setTimeout(function(){o.addClass(u).css({opacity:0})},100),setTimeout(function(){o.removeClass(u).hide()},400)},500));else{var t=o.offset().top;o.hasClass("js-animation-was-fired")||e(window).scrollTop()>=t-e(window).height()&&(o.show(),setTimeout(function(){o.addClass("js-animation-was-fired "+l).css({opacity:""})}))}}),e(window).trigger("scroll")),r=r.add(o)})}}}(jQuery),function(e){"use strict";e.HSCore.components.HSHamburgers={_baseConfig:{afterOpen:function(){},afterClose:function(){}},pageCollection:e(),init:function(t,r){if(this.collection=t&&e(t).length?e(t):e(),e(t).length)return this.config=r&&e.isPlainObject(r)?e.extend({},this._baseConfig,r):this._baseConfig,this.config.itemSelector=t,this.initHamburgers(),this.pageCollection},initHamburgers:function(){var t=this,r=t.config,n=t.pageCollection;t&&e(t).length&&this.collection.each(function(t,o){var i=e(o),a=i.parents("button, a"),s=!1;e(a).on("click",function(){!1===s?(i.addClass("is-active"),s=!0,r.afterOpen()):(i.removeClass("is-active"),s=!1,r.afterClose())}),e(document).on("keyup.HSHeaderSide",function(e){e.keyCode&&27===e.keyCode&&(s=!1,r.afterClose())}),n=n.add(i)})}}}(jQuery),function(e){"use strict";function t(t,r,n){t&&t.length&&(this.element=t,this.config=r,this.observers=n&&e.isPlainObject(n)?n:{},this.viewport="xs",this.checkViewport())}function r(e){if(e&&e.length)return this.element=e,this.defaultState=!0,this.reinit=function(){this.destroy().init().check()},!0}function n(e){r.call(this,e)&&this.init()}function o(e){r.call(this,e)&&this.init()}function i(e){r.call(this,e)&&this.init()}function a(t,n){r.call(this,t)&&(this.config={fixPointSelf:!1},n&&e.isPlainObject(n)&&(this.config=e.extend(!0,{},this.config,n)),this.init())}function s(e){r.call(this,e)&&this.init()}function l(t,n){r.call(this,t)&&(this.config={fixPointSelf:!1},n&&e.isPlainObject(n)&&(this.config=e.extend(!0,{},this.config,n)),this.init())}function u(t,n){r.call(this,t)&&(this.config={animated:!0},n&&e.isPlainObject(n)&&(this.config=e.extend(!0,{},this.config,n)),this.init())}function c(t,n){r.call(this,t)&&(this.config=n&&e.isPlainObject(n)?e.extend(!0,{},this.config,n):{},this.init())}function p(e){r.call(this,e)}e.HSCore.components.HSHeader={_baseConfig:{headerFixMoment:0,headerFixEffect:"slide",breakpointsMap:{md:768,sm:576,lg:992,xl:1200}},init:function(r){if(r&&1===r.length&&!r.data("HSHeader")){var n=this;return this.element=r,this.config=e.extend(!0,{},this._baseConfig,r.data()),this.observers=this._detectObservers(),this.fixMediaDifference(this.element),this.element.data("HSHeader",new t(this.element,this.config,this.observers)),e(window).on("scroll.uHeader",function(t){e(window).scrollTop()<e(r).data("header-fix-moment")-100&&!0===e(r).data("effect-compensation")?e(r).css({top:-e(window).scrollTop()}).addClass(e(r).data("effect-compensation-start-class")).removeClass(e(r).data("effect-compensation-end-class")):!0===e(r).data("effect-compensation")&&e(r).css({top:0}).addClass(e(r).data("effect-compensation-end-class")).removeClass(e(r).data("effect-compensation-start-class")),e(window).scrollTop()>5&&!e(r).hasClass(".u-scrolled")?e(r).addClass("u-scrolled"):e(r).removeClass("u-scrolled"),r.data("HSHeader").notify()}).on("resize.uHeader",function(e){n.resizeTimeOutId&&clearTimeout(n.resizeTimeOutId),n.resizeTimeOutId=setTimeout(function(){r.data("HSHeader").checkViewport().update()},100)}).trigger("scroll.uHeader"),this.element}},_detectObservers:function(){if(this.element&&this.element.length){var e={xs:[],sm:[],md:[],lg:[],xl:[]};return this.element.hasClass("u-header--has-hidden-element")&&e.xs.push(new u(this.element)),this.element.hasClass("u-header--sticky-top")&&(this.element.hasClass("u-header--show-hide")?e.xs.push(new o(this.element)):this.element.hasClass("u-header--toggle-section")&&e.xs.push(new s(this.element)),this.element.hasClass("u-header--change-logo")&&e.xs.push(new a(this.element)),this.element.hasClass("u-header--change-appearance")&&e.xs.push(new l(this.element))),this.element.hasClass("u-header--floating")&&e.xs.push(new c(this.element)),this.element.hasClass("u-header--invulnerable")&&e.xs.push(new p(this.element)),this.element.hasClass("u-header--sticky-bottom")&&(this.element.hasClass("u-header--change-appearance")&&e.xs.push(new l(this.element)),this.element.hasClass("u-header--change-logo")&&e.xs.push(new a(this.element))),(this.element.hasClass("u-header--abs-top")||this.element.hasClass("u-header--static"))&&(this.element.hasClass("u-header--show-hide")&&e.xs.push(new i(this.element)),this.element.hasClass("u-header--change-logo")&&e.xs.push(new a(this.element)),this.element.hasClass("u-header--change-appearance")&&e.xs.push(new l(this.element))),(this.element.hasClass("u-header--abs-bottom")||this.element.hasClass("u-header--abs-top-2nd-screen"))&&(e.xs.push(new n(this.element)),this.element.hasClass("u-header--change-appearance")&&e.xs.push(new l(this.element,{fixPointSelf:!0})),this.element.hasClass("u-header--change-logo")&&e.xs.push(new a(this.element,{fixPointSelf:!0}))),this.element.hasClass("u-header--has-hidden-element-sm")&&e.sm.push(new u(this.element)),this.element.hasClass("u-header--sticky-top-sm")&&(this.element.hasClass("u-header--show-hide-sm")?e.sm.push(new o(this.element)):this.element.hasClass("u-header--toggle-section-sm")&&e.sm.push(new s(this.element)),this.element.hasClass("u-header--change-logo-sm")&&e.sm.push(new a(this.element)),this.element.hasClass("u-header--change-appearance-sm")&&e.sm.push(new l(this.element))),this.element.hasClass("u-header--floating-sm")&&e.sm.push(new c(this.element)),this.element.hasClass("u-header--invulnerable-sm")&&e.sm.push(new p(this.element)),this.element.hasClass("u-header--sticky-bottom-sm")&&(this.element.hasClass("u-header--change-appearance-sm")&&e.sm.push(new l(this.element)),this.element.hasClass("u-header--change-logo-sm")&&e.sm.push(new a(this.element))),(this.element.hasClass("u-header--abs-top-sm")||this.element.hasClass("u-header--static-sm"))&&(this.element.hasClass("u-header--show-hide-sm")&&e.sm.push(new i(this.element)),this.element.hasClass("u-header--change-logo-sm")&&e.sm.push(new a(this.element)),this.element.hasClass("u-header--change-appearance-sm")&&e.sm.push(new l(this.element))),(this.element.hasClass("u-header--abs-bottom-sm")||this.element.hasClass("u-header--abs-top-2nd-screen-sm"))&&(e.sm.push(new n(this.element)),this.element.hasClass("u-header--change-appearance-sm")&&e.sm.push(new l(this.element,{fixPointSelf:!0})),this.element.hasClass("u-header--change-logo-sm")&&e.sm.push(new a(this.element,{fixPointSelf:!0}))),this.element.hasClass("u-header--has-hidden-element-md")&&e.md.push(new u(this.element)),this.element.hasClass("u-header--sticky-top-md")&&(console.log(1),this.element.hasClass("u-header--show-hide-md")?e.md.push(new o(this.element)):this.element.hasClass("u-header--toggle-section-md")&&e.md.push(new s(this.element)),this.element.hasClass("u-header--change-logo-md")&&e.md.push(new a(this.element)),this.element.hasClass("u-header--change-appearance-md")&&e.md.push(new l(this.element))),this.element.hasClass("u-header--floating-md")&&e.md.push(new c(this.element)),this.element.hasClass("u-header--invulnerable-md")&&e.md.push(new p(this.element)),this.element.hasClass("u-header--sticky-bottom-md")&&(this.element.hasClass("u-header--change-appearance-md")&&e.md.push(new l(this.element)),this.element.hasClass("u-header--change-logo-md")&&e.md.push(new a(this.element))),(this.element.hasClass("u-header--abs-top-md")||this.element.hasClass("u-header--static-md"))&&(this.element.hasClass("u-header--show-hide-md")&&e.md.push(new i(this.element)),this.element.hasClass("u-header--change-logo-md")&&e.md.push(new a(this.element)),this.element.hasClass("u-header--change-appearance-md")&&e.md.push(new l(this.element))),(this.element.hasClass("u-header--abs-bottom-md")||this.element.hasClass("u-header--abs-top-2nd-screen-md"))&&(e.md.push(new n(this.element)),this.element.hasClass("u-header--change-appearance-md")&&e.md.push(new l(this.element,{fixPointSelf:!0})),this.element.hasClass("u-header--change-logo-md")&&e.md.push(new a(this.element,{fixPointSelf:!0}))),this.element.hasClass("u-header--has-hidden-element-lg")&&e.lg.push(new u(this.element)),this.element.hasClass("u-header--sticky-top-lg")&&(this.element.hasClass("u-header--show-hide-lg")?e.lg.push(new o(this.element)):this.element.hasClass("u-header--toggle-section-lg")&&e.lg.push(new s(this.element)),this.element.hasClass("u-header--change-logo-lg")&&e.lg.push(new a(this.element)),this.element.hasClass("u-header--change-appearance-lg")&&e.lg.push(new l(this.element))),this.element.hasClass("u-header--floating-lg")&&e.lg.push(new c(this.element)),this.element.hasClass("u-header--invulnerable-lg")&&e.lg.push(new p(this.element)),this.element.hasClass("u-header--sticky-bottom-lg")&&(this.element.hasClass("u-header--change-appearance-lg")&&e.lg.push(new l(this.element)),this.element.hasClass("u-header--change-logo-lg")&&e.lg.push(new a(this.element))),(this.element.hasClass("u-header--abs-top-lg")||this.element.hasClass("u-header--static-lg"))&&(this.element.hasClass("u-header--show-hide-lg")&&e.lg.push(new i(this.element)),this.element.hasClass("u-header--change-logo-lg")&&e.lg.push(new a(this.element)),this.element.hasClass("u-header--change-appearance-lg")&&e.lg.push(new l(this.element))),(this.element.hasClass("u-header--abs-bottom-lg")||this.element.hasClass("u-header--abs-top-2nd-screen-lg"))&&(e.lg.push(new n(this.element)),this.element.hasClass("u-header--change-appearance-lg")&&e.lg.push(new l(this.element,{fixPointSelf:!0})),this.element.hasClass("u-header--change-logo-lg")&&e.lg.push(new a(this.element,{fixPointSelf:!0}))),this.element.hasClass("u-header--has-hidden-element-xl")&&e.xl.push(new u(this.element)),this.element.hasClass("u-header--sticky-top-xl")&&(this.element.hasClass("u-header--show-hide-xl")?e.xl.push(new o(this.element)):this.element.hasClass("u-header--toggle-section-xl")&&e.xl.push(new s(this.element)),this.element.hasClass("u-header--change-logo-xl")&&e.xl.push(new a(this.element)),this.element.hasClass("u-header--change-appearance-xl")&&e.xl.push(new l(this.element))),this.element.hasClass("u-header--floating-xl")&&e.xl.push(new c(this.element)),this.element.hasClass("u-header--invulnerable-xl")&&e.xl.push(new p(this.element)),this.element.hasClass("u-header--sticky-bottom-xl")&&(this.element.hasClass("u-header--change-appearance-xl")&&e.xl.push(new l(this.element)),this.element.hasClass("u-header--change-logo-xl")&&e.xl.push(new a(this.element))),(this.element.hasClass("u-header--abs-top-xl")||this.element.hasClass("u-header--static-xl"))&&(this.element.hasClass("u-header--show-hide-xl")&&e.xl.push(new i(this.element)),this.element.hasClass("u-header--change-logo-xl")&&e.xl.push(new a(this.element)),this.element.hasClass("u-header--change-appearance-xl")&&e.xl.push(new l(this.element))),(this.element.hasClass("u-header--abs-bottom-xl")||this.element.hasClass("u-header--abs-top-2nd-screen-xl"))&&(e.xl.push(new n(this.element)),this.element.hasClass("u-header--change-appearance-xl")&&e.xl.push(new l(this.element,{fixPointSelf:!0})),this.element.hasClass("u-header--change-logo-xl")&&e.xl.push(new a(this.element,{fixPointSelf:!0}))),e}},fixMediaDifference:function(e){if(e&&e.length&&e.filter('[class*="u-header--side"]').length){var t;e.hasClass("u-header--side-left-xl")||e.hasClass("u-header--side-right-xl")?(t=e.find(".navbar-expand-xl"),t.length&&t.removeClass("navbar-expand-xl").addClass("navbar-expand-lg")):e.hasClass("u-header--side-left-lg")||e.hasClass("u-header--side-right-lg")?(t=e.find(".navbar-expand-lg"),t.length&&t.removeClass("navbar-expand-lg").addClass("navbar-expand-md")):e.hasClass("u-header--side-left-md")||e.hasClass("u-header--side-right-md")?(t=e.find(".navbar-expand-md"),t.length&&t.removeClass("navbar-expand-md").addClass("navbar-expand-sm")):(e.hasClass("u-header--side-left-sm")||e.hasClass("u-header--side-right-sm"))&&(t=e.find(".navbar-expand-sm"),t.length&&t.removeClass("navbar-expand-sm").addClass("navbar-expand"))}}},t.prototype.checkViewport=function(){var t=e(window);return t.width()>this.config.breakpointsMap.sm&&this.observers.sm.length?(this.prevViewport=this.viewport,this.viewport="sm",this.element[0].dataset.headerFixMoment&&t.scrollTop()>this.element[0].dataset.headerFixMoment&&(void 0===this.config.breakpointsMap.sm?this.element.removeClass("js-header-fix-moment"):this.element.addClass("js-header-fix-moment")),this):t.width()>this.config.breakpointsMap.md&&this.observers.md.length?(this.prevViewport=this.viewport,this.viewport="md",this.element[0].dataset.headerFixMoment&&t.scrollTop()>this.element[0].dataset.headerFixMoment&&(void 0===this.config.breakpointsMap.md?this.element.removeClass("js-header-fix-moment"):this.element.addClass("js-header-fix-moment")),this):t.width()>this.config.breakpointsMap.lg&&this.observers.lg.length?(this.prevViewport=this.viewport,this.viewport="lg",this.element[0].dataset.headerFixMoment&&t.scrollTop()>this.element[0].dataset.headerFixMoment&&(void 0===this.config.breakpointsMap.lg?this.element.removeClass("js-header-fix-moment"):this.element.addClass("js-header-fix-moment")),this):t.width()>this.config.breakpointsMap.xl&&this.observers.xl.length?(this.prevViewport=this.viewport,this.viewport="xl",this.element[0].dataset.headerFixMoment&&t.scrollTop()>this.element[0].dataset.headerFixMoment&&(void 0===this.config.breakpointsMap.xl?this.element.removeClass("js-header-fix-moment"):this.element.addClass("js-header-fix-moment")),this):(this.prevViewport&&(this.prevViewport=this.viewport),this.element[0].dataset.headerFixMoment&&t.scrollTop()>this.element[0].dataset.headerFixMoment&&(void 0===this.config.breakpointsMap.xs?this.element.removeClass("js-header-fix-moment"):this.element.addClass("js-header-fix-moment")),this.viewport="xs",this)},t.prototype.notify=function(){return this.prevViewport&&(this.observers[this.prevViewport].forEach(function(e){e.destroy()}),this.prevViewport=null),this.observers[this.viewport].forEach(function(e){e.check()}),this},t.prototype.update=function(){for(var e in this.observers)this.observers[e].forEach(function(e){e.destroy()});return this.prevViewport=null,this.observers[this.viewport].forEach(function(e){e.reinit()}),this},n.prototype.init=function(){return this.defaultState=!0,this.offset=this.element.offset().top,this},n.prototype.destroy=function(){return this.toDefaultState(),this},n.prototype.check=function(){var t=e(window),r=t.scrollTop();return r>this.offset&&this.defaultState?this.changeState():r<this.offset&&!this.defaultState&&this.toDefaultState(),this},n.prototype.changeState=function(){return this.element.addClass("js-header-fix-moment"),this.defaultState=!this.defaultState,this},n.prototype.toDefaultState=function(){return this.element.removeClass("js-header-fix-moment"),this.defaultState=!this.defaultState,this},o.prototype.init=function(){return this.direction="down",this.delta=0,this.defaultState=!0,this.offset=isFinite(this.element.data("header-fix-moment"))&&0!==this.element.data("header-fix-moment")?this.element.data("header-fix-moment"):5,this.effect=this.element.data("header-fix-effect")?this.element.data("header-fix-effect"):"show-hide",this},o.prototype.destroy=function(){return this.toDefaultState(),this},o.prototype.checkDirection=function(){return e(window).scrollTop()>this.delta?this.direction="down":this.direction="up",this.delta=e(window).scrollTop(),this},o.prototype.toDefaultState=function(){switch(this.effect){case"slide":this.element.removeClass("u-header--moved-up");break;case"fade":this.element.removeClass("u-header--faded");break;default:this.element.removeClass("u-header--invisible")}return this.defaultState=!this.defaultState,this},o.prototype.changeState=function(){switch(this.effect){case"slide":this.element.addClass("u-header--moved-up");break;case"fade":this.element.addClass("u-header--faded");break;default:this.element.addClass("u-header--invisible")}return this.defaultState=!this.defaultState,this},o.prototype.check=function(){var t=e(window).scrollTop();return this.checkDirection(),t>=this.offset&&this.defaultState&&"down"===this.direction?this.changeState():this.defaultState||"up"!==this.direction||this.toDefaultState(),this},i.prototype.init=function(){return!this.defaultState&&e(window).scrollTop()>this.offset?this:(this.defaultState=!0,this.transitionDuration=1e3*parseFloat(getComputedStyle(this.element.get(0))["transition-duration"],10),this.offset=isFinite(this.element.data("header-fix-moment"))&&this.element.data("header-fix-moment")>this.element.outerHeight()?this.element.data("header-fix-moment"):this.element.outerHeight()+100,this.effect=this.element.data("header-fix-effect")?this.element.data("header-fix-effect"):"show-hide",this)},i.prototype.destroy=function(){return!this.defaultState&&e(window).scrollTop()>this.offset?this:(this.element.removeClass("u-header--untransitioned"),this._removeCap(),this)},i.prototype._insertCap=function(){switch(this.element.addClass("js-header-fix-moment u-header--untransitioned"),this.element.hasClass("u-header--static")&&e("html").css("padding-top",this.element.outerHeight()),this.effect){case"fade":this.element.addClass("u-header--faded");break;case"slide":this.element.addClass("u-header--moved-up");break;default:this.element.addClass("u-header--invisible")}this.capInserted=!0},i.prototype._removeCap=function(){var t=this;this.element.removeClass("js-header-fix-moment"),this.element.hasClass("u-header--static")&&e("html").css("padding-top",0),this.removeCapTimeOutId&&clearTimeout(this.removeCapTimeOutId),this.removeCapTimeOutId=setTimeout(function(){t.element.removeClass("u-header--moved-up u-header--faded u-header--invisible")},10),this.capInserted=!1},i.prototype.check=function(){var t=e(window);t.scrollTop()>this.element.outerHeight()&&!this.capInserted?this._insertCap():t.scrollTop()<=this.element.outerHeight()&&this.capInserted&&this._removeCap(),t.scrollTop()>this.offset&&this.defaultState?this.changeState():t.scrollTop()<=this.offset&&!this.defaultState&&this.toDefaultState()},i.prototype.changeState=function(){switch(this.element.removeClass("u-header--untransitioned"),this.animationTimeoutId&&clearTimeout(this.animationTimeoutId),this.effect){case"fade":this.element.removeClass("u-header--faded");break;case"slide":this.element.removeClass("u-header--moved-up");break;default:this.element.removeClass("u-header--invisible")}this.defaultState=!this.defaultState},i.prototype.toDefaultState=function(){var e=this;switch(this.animationTimeoutId=setTimeout(function(){e.element.addClass("u-header--untransitioned")},this.transitionDuration),this.effect){case"fade":this.element.addClass("u-header--faded");break;case"slide":this.element.addClass("u-header--moved-up");break;default:this.element.addClass("u-header--invisible")}this.defaultState=!this.defaultState},a.prototype.init=function(){return this.element.hasClass("js-header-fix-moment")&&(this.hasFixedClass=!0,this.element.removeClass("js-header-fix-moment")),this.config.fixPointSelf?this.offset=this.element.offset().top:this.offset=isFinite(this.element.data("header-fix-moment"))?this.element.data("header-fix-moment"):0,this.hasFixedClass&&(this.hasFixedClass=!1,this.element.addClass("js-header-fix-moment")),this.imgs=this.element.find(".u-header__logo-img"),this.defaultState=!0,this.mainLogo=this.imgs.filter(".u-header__logo-img--main"),this.additionalLogo=this.imgs.not(".u-header__logo-img--main"),this.imgs.length,this},a.prototype.destroy=function(){return this.toDefaultState(),this},a.prototype.check=function(){var t=e(window);return this.imgs.length?(t.scrollTop()>this.offset&&this.defaultState?this.changeState():t.scrollTop()<=this.offset&&!this.defaultState&&this.toDefaultState(),this):this},a.prototype.changeState=function(){return this.mainLogo.length&&this.mainLogo.removeClass("u-header__logo-img--main"),this.additionalLogo.length&&this.additionalLogo.addClass("u-header__logo-img--main"),this.defaultState=!this.defaultState,this},a.prototype.toDefaultState=function(){return this.mainLogo.length&&this.mainLogo.addClass("u-header__logo-img--main"),this.additionalLogo.length&&this.additionalLogo.removeClass("u-header__logo-img--main"),this.defaultState=!this.defaultState,this},s.prototype.init=function(){return this.offset=isFinite(this.element.data("header-fix-moment"))?this.element.data("header-fix-moment"):5,this.section=this.element.find(".u-header__section--hidden"),this.defaultState=!0,this.sectionHeight=this.section.length?this.section.outerHeight():0,this},s.prototype.destroy=function(){return this.section.length&&this.element.css({"margin-top":0}),this},s.prototype.check=function(){if(!this.section.length)return this;var t=e(window),r=t.scrollTop();return r>this.offset&&this.defaultState?this.changeState():r<=this.offset&&!this.defaultState&&this.toDefaultState(),this},s.prototype.changeState=function(){var e=this;return this.element.stop().animate({"margin-top":-1*e.sectionHeight-1}),this.defaultState=!this.defaultState,this},s.prototype.toDefaultState=function(){return this.element.stop().animate({"margin-top":0}),this.defaultState=!this.defaultState,this},l.prototype.init=function(){return this.element.hasClass("js-header-fix-moment")&&(this.hasFixedClass=!0,this.element.removeClass("js-header-fix-moment")),this.config.fixPointSelf?this.offset=this.element.offset().top:this.offset=isFinite(this.element.data("header-fix-moment"))?this.element.data("header-fix-moment"):5,this.hasFixedClass&&(this.hasFixedClass=!1,this.element.addClass("js-header-fix-moment")),this.sections=this.element.find("[data-header-fix-moment-classes]"),this.defaultState=!0,this},l.prototype.destroy=function(){return this.toDefaultState(),this},l.prototype.check=function(){if(!this.sections.length)return this;var t=e(window),r=t.scrollTop();return r>this.offset&&this.defaultState?this.changeState():r<=this.offset&&!this.defaultState&&this.toDefaultState(),this},l.prototype.changeState=function(){return this.sections.each(function(t,r){var n=e(r),o=n.data("header-fix-moment-classes"),i=n.data("header-fix-moment-exclude");(o||i)&&(n.addClass(o+" js-header-change-moment"),n.removeClass(i))}),this.defaultState=!this.defaultState,this},l.prototype.toDefaultState=function(){return this.sections.each(function(t,r){var n=e(r),o=n.data("header-fix-moment-classes"),i=n.data("header-fix-moment-exclude");(o||i)&&(n.removeClass(o+" js-header-change-moment"),n.addClass(i))}),this.defaultState=!this.defaultState,this},u.prototype.init=function(){return this.offset=isFinite(this.element.data("header-fix-moment"))?this.element.data("header-fix-moment"):5,this.elements=this.element.find(".u-header--hidden-element"),this.defaultState=!0,this},u.prototype.destroy=function(){return this.toDefaultState(),this},u.prototype.check=function(){if(!this.elements.length)return this;var t=e(window),r=t.scrollTop();return r>this.offset&&this.defaultState?this.changeState():r<=this.offset&&!this.defaultState&&this.toDefaultState(),this},u.prototype.changeState=function(){return this.config.animated?this.elements.stop().slideUp():this.elements.hide(),this.defaultState=!this.defaultState,this},u.prototype.toDefaultState=function(){return this.config.animated?this.elements.stop().slideDown():this.elements.show(),this.defaultState=!this.defaultState,this},c.prototype.init=function(){return this.offset=this.element.offset().top,this.sections=this.element.find(".u-header__section"),this.defaultState=!0,this},c.prototype.destroy=function(){return this.toDefaultState(),this},c.prototype.check=function(){var t=e(window),r=t.scrollTop();return r>this.offset&&this.defaultState?this.changeState():r<=this.offset&&!this.defaultState&&this.toDefaultState(),this},c.prototype.changeState=function(){return this.element.addClass("js-header-fix-moment").addClass(this.element.data("header-fix-moment-classes")).removeClass(this.element.data("header-fix-moment-exclude")),this.sections.length&&this.sections.each(function(t,r){var n=e(r);n.addClass(n.data("header-fix-moment-classes")).removeClass(n.data("header-fix-moment-exclude"))}),this.defaultState=!this.defaultState,this},c.prototype.toDefaultState=function(){return this.element.removeClass("js-header-fix-moment").removeClass(this.element.data("header-fix-moment-classes")).addClass(this.element.data("header-fix-moment-exclude")),this.sections.length&&this.sections.each(function(t,r){var n=e(r);n.removeClass(n.data("header-fix-moment-classes")).addClass(n.data("header-fix-moment-exclude"))}),this.defaultState=!this.defaultState,this},p.prototype.check=function(){return this},p.prototype.init=function(){return this},p.prototype.destroy=function(){return this},p.prototype.changeState=function(){return this},p.prototype.toDefaultState=function(){return this}}(jQuery),function(e){"use strict";function t(t,r,n){var o=this;this.element=t,this.config=r,this.effect=n,this.overlay=e("<div></div>",{class:o.config.overlayClass}),Object.defineProperty(this,"isShown",{get:function(){return o.effect.isShown()}}),Object.defineProperty(this,"sections",{get:function(){return o.element.find(o.config.sectionsContainerSelector)}}),this.element.append(this.overlay),this.effect.init(this.element,this.overlay,this.config.afterOpen,this.config.afterClose),this._bindEvents(),e.HSCore.components.HSScrollBar&&this.sections.length&&e.HSCore.components.HSScrollBar.init(this.sections)}function r(){this._isShown=!1}e.HSCore.components.HSHeaderFullscreen={_baseConfig:{afterOpen:function(){},afterClose:function(){},overlayClass:"u-fullscreen__overlay",sectionsContainerSelector:".u-fullscreen__content"},_pageCollection:e(),init:function(n,o){var i=this;return n?(n=e(n),n.length?(o=o&&e.isPlainObject(o)?o:{},this._bindGlobalEvents(),n.each(function(n,a){var s=e(this),l=e.extend(!0,{},i._baseConfig,o,s.data());s.data("HSHeaderFullscreen")||(s.data("HSHeaderFullscreen",new t(s,l,new r)),i._pageCollection=i._pageCollection.add(s))})):e()):e()},_bindGlobalEvents:function(){var t=this;e(window).on("resize.HSHeaderFullscreen",function(){t.resizeTimeOutId&&clearTimeout(t.resizeTimeOutId),t.resizeTimeOutId=setTimeout(function(){t._pageCollection.each(function(t,r){var n=e(r),o=n.data("HSHeaderFullscreen");o&&o.update()})},50)}),e(document).on("keyup.HSHeaderFullscreen",function(r){r.keyCode&&27==r.keyCode&&t._pageCollection.each(function(t,r){var n=e(r),o=n.data("HSHeaderFullscreen"),i=o.invoker;o&&(i.length&&i.find(".is-active").length&&i.find(".is-active").removeClass("is-active"),o.hide())})})}},t.prototype._bindEvents=function(){var t=this;return this.invoker=e('[data-target="#'+this.element.attr("id")+'"]'),this.invoker.length&&this.invoker.off("click.HSHeaderFullscreen").on("click.HSHeaderFullscreen",function(e){t[t.isShown?"hide":"show"](),e.preventDefault()}),this},t.prototype.update=function(){return!!this.effect&&(this.effect.update(),this)},t.prototype.show=function(){return!!this.effect&&(this.effect.show(),this)},t.prototype.hide=function(){return!!this.effect&&(this.effect.hide(),this)},r.prototype.init=function(e,t,r,n){var o=this;return this.element=e,this.overlay=t,this.afterOpen=r,this.afterClose=n,this.overlay.on("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",function(e){o.isShown()&&"transform"==e.originalEvent.propertyName?o.afterOpen.call(o.element,o.overlay):o.isShown()||"transform"!=e.originalEvent.propertyName||o.afterClose.call(o.element,o.overlay),e.stopPropagation(),e.preventDefault()}),this.update(),this.overlay.addClass(this.element.data("overlay-classes")),this},r.prototype.destroy=function(){return this.overlay.css({width:"auto",height:"auto"}),this.element.removeClass("u-fullscreen--showed"),this},r.prototype.update=function(){var t=e(window),r=t.width(),n=t.height();return this.overlay.css({width:r>n?1.5*r:1.5*n,height:r>n?1.5*r:1.5*n}),this},r.prototype.show=function(){return this.element.addClass("u-fullscreen--showed"),this._isShown=!0,this},r.prototype.hide=function(){return this.element.removeClass("u-fullscreen--showed"),this._isShown=!1,this},r.prototype.isShown=function(){return this._isShown}}(jQuery),function(e){"use strict";e.HSCore.components.HSInstagram={_baseConfig:{resolution:"standard_resolution",get:"user",limit:"12",template:'<div class="col-md-3"><a href="{{link}}" target="_blank"><img class="img-fluid" src="{{image}}" /></a></div>'},pageCollection:e(),init:function(t,r){if(this.collection=t&&e(t).length?e(t):e(),e(t).length)return this.config=r&&e.isPlainObject(r)?e.extend({},this._baseConfig,r):this._baseConfig,this.config.itemSelector=t,this.instaInit(),this.pageCollection},instaInit:function(){var t,r,n;t=this,r=t.config,n=t.pageCollection,this.collection.each(function(t,o){var i=e(o),a=i.attr("id"),s=i.data("user-id"),l=i.data("client-id"),u=i.data("token"),c=i.data("get"),p=i.data("limit"),d=i.data("template");new Instafeed({resolution:r.resolution,get:void 0!=c?c:r.get,limit:void 0!=p?p:r.limit,template:void 0!=d?d:r.template,userId:s,clientId:l,accessToken:u,target:a}).run(),n=n.add(i)})}}}(jQuery),function(e){"use strict";e.HSCore.components.HSMalihuScrollBar={_baseConfig:{scrollInertia:150,theme:"minimal-dark"},_pageCollection:e(),init:function(t,r){if(t&&t.length){var n=this;return r=r&&e.isPlainObject(r)?e.extend(!0,{},r,this._baseConfig):this._baseConfig,t.each(function(t,o){var i,a,s=e(o),l=e.extend(!0,{},r,s.data());s.mCustomScrollbar(l),i=s.find(".mCSB_scrollTools"),a=s.find(".mCSB_dragger_bar"),i.length&&s.data("scroll-classes")&&i.addClass(s.data("scroll-classes")),a.length&&s.data("scroll-thumb-classes")&&a.addClass(s.data("scroll-thumb-classes")),n._pageCollection=n._pageCollection.add(s)})}},destroy:function(t){if(!t&&!t.length)return e();var r=this;return t.each(function(t,n){var o=e(n);o.mCustomScrollbar("destroy"),r._pageCollection=r._pageCollection.not(o)})}}}(jQuery),function(e){"use strict";e.HSCore.components.HSModalWindow={_baseConfig:{bounds:100,debounce:50,overlayOpacity:.48,overlayColor:"#000000",speed:400,type:"onscroll",effect:"fadein",modalIsClosingByEsc:!0,modalIsClosingByOverlay:!0,onOpen:function(){},onClose:function(){},onComplete:function(){}},_pageCollection:e(),init:function(t,r){var n=e(t);if(n.length)return r=r&&e.isPlainObject(r)?e.extend({},this._baseConfig,r):this._baseConfig,r.selector=t,this._pageCollection=this._pageCollection.add(n.not(this._pageCollection)),r.autonomous?this.initAutonomousModalWindows(n,r):this.initBaseModalWindows(n,r)},initBaseModalWindows:function(t,r){return t.on("click",function(t){if("Custombox"in window){var n=e(this),o=n.data("modal-target"),i=n.data("modal-effect")||r.effect,a=void 0!==n.data("modal-is-closing-by-esc")?Boolean(n.data("modal-is-closing-by-esc")):r.modalIsClosingByEsc,s=void 0!==n.data("modal-is-closing-by-overlay")?Boolean(n.data("modal-is-closing-by-overlay")):r.modalIsClosingByOverlay;o&&e(o).length&&(new Custombox.modal({content:{target:o,effect:i,close:a,onOpen:function(){r.onOpen.call(e(o))},onClose:function(){r.onClose.call(e(o))},onComplete:function(){r.onComplete.call(e(o))}},overlay:{color:n.data("overlay-color")||r.overlayColor,opacity:n.data("overlay-opacity")||r.overlayOpacity,close:s,speedIn:n.data("speed")||r.speed,speedOut:n.data("speed")||r.speed}}).open(),t.preventDefault())}})},initAutonomousModalWindows:function(t,r){var n=this;return t.each(function(t,o){var i=e(o);switch(i.data("modal-type")){case"hashlink":n.initHashLinkPopup(i,r);break;case"onscroll":n.initOnScrollPopup(i,r);break;case"beforeunload":n.initBeforeUnloadPopup(i,r);break;case"ontarget":n.initOnTargetPopup(i,r);break;case"aftersometime":n.initAfterSomeTimePopup(i,r)}})},initHashLinkPopup:function(t,r){var n=e(window.location.hash),o=e("#"+t.attr("id"));n.length&&n.attr("id")==t.attr("id")&&new Custombox.modal({content:{target:"#"+t.attr("id"),effect:t.data("effect")||r.effect,onOpen:function(){r.onOpen.call(e(o))},onClose:function(){r.onClose.call(e(o))},onComplete:function(){r.onComplete.call(e(o))}},overlay:{color:t.data("overlay-color")||r.overlayColor,opacity:t.data("overlay-opacity")||r.overlayOpacity,speedIn:t.data("speed")||r.speed,speedOut:t.data("speed")||r.speed}}).open()},initOnScrollPopup:function(t,r){var n=e(window),o=t.data("breakpoint")?t.data("breakpoint"):0,i=e("#"+t.attr("id"));n.on("scroll.popup",function(){n.scrollTop()+n.height()>=o&&(new Custombox.modal({content:{target:"#"+t.attr("id"),effect:t.data("effect")||r.effect,onOpen:function(){r.onOpen.call(e(i))},onClose:function(){r.onClose.call(e(i))},onComplete:function(){r.onComplete.call(e(i))}},overlay:{color:t.data("overlay-color")||r.overlayColor,opacity:t.data("overlay-opacity")||r.overlayOpacity,speedIn:t.data("speed")||r.speed,speedOut:t.data("speed")||r.speed}}).open(),n.off("scroll.popup"))}),n.trigger("scroll.popup")},initBeforeUnloadPopup:function(t,r){var n,o=0,i=e("#"+t.attr("id"));window.addEventListener("mousemove",function(a){n&&clearTimeout(n),n=setTimeout(function(){a.clientY<10&&!o&&(o++,new Custombox.modal({content:{target:"#"+t.attr("id"),effect:t.data("effect")||r.effect,onOpen:function(){r.onOpen.call(e(i))},onClose:function(){r.onClose.call(e(i))},onComplete:function(){r.onComplete.call(e(i))}},overlay:{color:t.data("overlay-color")||r.overlayColor,opacity:t.data("overlay-opacity")||r.overlayOpacity,speedIn:t.data("speed")||r.speed,speedOut:t.data("speed")||r.speed}}).open())},10)})},initOnTargetPopup:function(t,r){var n=t.data("target");n&&e(n).length&&appear({bounds:r.bounds,debounce:r.debounce,elements:function(){return document.querySelectorAll(n)},appear:function(o){new Custombox.modal({content:{target:"#"+t.attr("id"),effect:t.data("effect")||r.effect,onOpen:function(){r.onOpen.call(e(n))},onClose:function(){r.onClose.call(e(n))},onComplete:function(){r.onComplete.call(e(n))}},overlay:{color:t.data("overlay-color")||r.overlayColor,opacity:t.data("overlay-opacity")||r.overlayOpacity,speedIn:t.data("speed")||r.speed,speedOut:t.data("speed")||r.speed}}).open()}})},initAfterSomeTimePopup:function(t,r){var n=e("#"+t.attr("id"));setTimeout(function(){new Custombox.modal({content:{target:"#"+t.attr("id"),effect:t.data("effect")||r.effect,onOpen:function(){r.onOpen.call(e(n))},onClose:function(){r.onClose.call(e(n))},onComplete:function(){r.onComplete.call(e(n))}},overlay:{color:t.data("overlay-color")||r.overlayColor,opacity:t.data("overlay-opacity")||r.overlayOpacity,speedIn:t.data("speed")||r.speed,speedOut:t.data("speed")||r.speed}}).open()},t.data("delay")?t.data("delay"):10)}}}(jQuery),function(e){"use strict";function t(t,r){if(t&&t.length){var n=this;this.element=t,this.config=r&&e.isPlainObject(r)?e.extend(!0,{},r,t.data()):t.data(),isFinite(this.config.animationDelay)||(this.config.animationDelay=0),isFinite(this.config.animationDuration)||(this.config.animationDuration=1e3),t.css({"animation-duration":n.config.animationDuration+"ms"})}}e.HSCore.components.HSOnScrollAnimation={_baseConfig:{bounds:-100,debounce:50,inViewportClass:"u-in-viewport",animation:"fadeInUp",animationOut:!1,animationDelay:0,animationDuration:1e3,afterShow:function(){},onShown:function(){},onHidden:function(){}},_pageCollection:e(),init:function(r,n){if(r&&e(r).length){var o=this;return this.config=n&&e.isPlainObject(n)?e.extend(!0,{},this._baseConfig,n):this._baseConfig,appear({bounds:o.config.bounds,reappear:!1,debounce:o.config.debounce,elements:function(){return document.querySelectorAll(r)},init:function(){e(r).each(function(r,n){var i=e(n);/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)?i.addClass(o.config.inViewportClass):i.data("HSAnimationElement")||(i.data("HSAnimationElement",new t(i,o.config)),o._pageCollection=o._pageCollection.add(i))})},appear:function(t){var r=e(t);/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)||r.hasClass(o.config.inViewportClass)||r.data("HSAnimationElement").show()}}),this._pageCollection}}},t.prototype.show=function(){var e=this;this.config.animationDelay?this.timeOutId=setTimeout(function(){e.element.removeClass(e.config.animationOut).addClass(e.config.animation+" "+e.config.inViewportClass),e.config.afterShow.call(e.element),e.callbackTimeoutId=setTimeout(function(){e.config.onShown.call(e.element)},e.config.animationDuration)},this.config.animationDelay):(this.element.removeClass(this.config.animationOut).addClass(this.config.animation+" "+this.config.inViewportClass),this.config.afterShow.call(this.element),this.callbackTimeoutId=setTimeout(function(){e.config.onShown.call(e.element)},this.config.animationDuration))},t.prototype.hide=function(){var e=this;this.element.hasClass(this.config.inViewportClass)&&(this.config.animationOut?(this.element.removeClass(this.config.animation).addClass(this.config.animationOut),this.callbackTimeoutId=setTimeout(function(){e.element.removeClass(e.config.inViewportClass),e.config.onHidden.call(e.element)},this.config.animationDuration)):(this.element.removeClass(this.config.inViewportClass+" "+this.config.animation),this.config.onHidden.call(this.element)))}}(jQuery),function(e){"use strict";e.HSCore.components.HSPasswordStrength={_baseConfig:{options:{ui:{verdicts:["Very Weak","Weak","Normal","Medium","Strong","Very Strong"],container:!1,viewports:{progress:!1,verdict:!1},progressExtraCssClasses:!1}}},pageCollection:e(),init:function(t,r){if(this.collection=t&&e(t).length?e(t):e(),e(t).length)return this.config=r&&e.isPlainObject(r)?e.extend({},this._baseConfig,r):this._baseConfig,this.config.itemSelector=t,this.initHSPasswordStrength(),this.pageCollection},initHSPasswordStrength:function(){var t=this,r=t.config,n=t.pageCollection;this.collection.each(function(t,o){var i=e(o),a={ui:{verdicts:i.data("pwstrength-verdicts-texts")?JSON.parse(o.attr("data-pwstrength-verdict-texts")):r.options.ui.verdicts,container:i.data("pwstrength-container")?i.data("pwstrength-container"):r.options.ui.container,viewports:{progress:i.data("pwstrength-progress")?i.data("pwstrength-progress"):r.options.ui.viewports.progress,verdict:i.data("pwstrength-verdict")?i.data("pwstrength-verdict"):r.options.ui.viewports.verdict},progressExtraCssClasses:i.data("pwstrength-progress-extra-classes")?i.data("pwstrength-progress-extra-classes"):r.options.ui.progressExtraCssClasses}};i.pwstrength(a),n=n.add(i)})}}}(jQuery),function(e){"use strict";e.HSCore.components.HSProgressBar={_baseConfig:{bounds:-100,debounce:10,time:1e3,fps:60,rtl:!1,direction:"horizontal",useProgressElement:!1,indicatorSelector:"progress-bar-indicator",moveElementSelector:!1,moveElementTo:"currentPosition",onChange:function(e){},beforeUpdate:function(){},afterUpdate:function(){},onMoveElementChange:function(e){},beforeMoveElementUpdate:function(){},afterMoveElementUpdate:function(){}},_pageCollection:e(),init:function(t,r){if(t&&e(t).length)return this.extendHorizontalProgressBar(),this.extendVerticalProgressBar(),this._initProgressBar(t,r&&e.isPlainObject(r)?e.extend(!0,{},this._baseConfig,r):this._baseConfig)},_initProgressBar:function(t,r){var n=this,o=e();return appear({bounds:r.bounds,debounce:r.debounce,init:function(){e(t).each(function(t,i){var a=e(i);"horizontal"===r.direction?a.data("ProgressBar",new n.HorizontalProgressBar(a,r)):a.data("ProgressBar",new n.VerticalProgressBar(a,r)),o=o.add(a),n._pageCollection=n._pageCollection.add(a)})},elements:function(){return document.querySelectorAll(t)},appear:function(t){e(t).data("ProgressBar").update(e(t).data("value"))}}),o},HorizontalProgressBar:function(t,r){this.element=t,this.indicator=this.element.find(r.indicatorSelector),this.config=r,this.moveElement=r.moveElementSelector?t.parent().find(r.moveElementSelector):e(),this.moveElement.length&&(r.rtl?this.moveElement.css({left:"auto",right:0,"margin-right":this.moveElement.outerWidth()/-2}):this.moveElement.css({left:0,"margin-left":this.moveElement.outerWidth()/-2})),this.config.useProgressElement?(this.element.data("value",this.element.attr("value")),this.element.attr("value",0)):(this.element.data("value",this.indicator.length?Math.round(this.indicator.outerWidth()/this.element.outerWidth()*100):0),this.indicator.css("width","0%"))},VerticalProgressBar:function(e,t){this.element=e,this.config=t,this.indicator=e.find(t.indicatorSelector),this.indicator.length&&(e.data("value",parseInt(this.indicator.css("height"),10)/this.indicator.parent().outerHeight()*100),this.indicator.css("height",0))},extendHorizontalProgressBar:function(){this.HorizontalProgressBar.prototype.update=function(e){var t=this;if(this.config.useProgressElement){var r=this.config.time/this.config.fps,n=parseInt(e/r,10),o=0,t=this;if(0==n&&(n=1),this.config.beforeUpdate.call(this.element),this.moveElement.length&&this.config.beforeMoveElementUpdate.call(this.moveElement),t.config.moveElementSelector&&"end"==t.config.moveElementTo){var i=0,a=parseInt(100/r,10);0==a&&(a=1);var s=setInterval(function(){t.moveSubElement(i+=a),t.moveElement.length&&t.config.onMoveElementChange.call(t.moveElement,i+=a),i>100&&(clearInterval(s),t.moveSubElement(100),t.moveElement.length&&t.config.afterMoveElementUpdate.call(t.moveElement))},r)}this.element.data("intervalId",setInterval(function(){var r=o+=n;t.element.attr("value",r),t.config.onChange.call(t.element,r),t.config.moveElementSelector&&"currentPosition"==t.config.moveElementTo&&t.moveSubElement(r),o>e&&(t.element.attr("value",e),t.config.moveElementSelector&&"currentPosition"==t.config.moveElementTo&&t.moveSubElement(e),clearInterval(t.element.data("intervalId")),t.config.afterUpdate.call(t.element))},r))}else this.indicator.length&&this.indicator.stop().animate({width:e+"%"},{duration:t.config.time,complete:function(){t.config.afterUpdate.call(t.element)}})},this.HorizontalProgressBar.prototype.moveSubElement=function(e,t){if(this.moveElement.length){this.moveElement.css(this.config.rtl?"right":"left",e+"%")}}},extendVerticalProgressBar:function(){this.VerticalProgressBar.prototype.update=function(e){this.indicator.stop().animate({height:e+"%"})}},get:function(){return this._pageCollection},getAPI:function(e){return this._pageCollection.eq(e).length?this._pageCollection.eq(e).data("ProgressBar"):null}}}(jQuery),function(e){"use strict";e.HSCore.components.HSQantityCounter={_baseConfig:{},pageCollection:e(),init:function(t,r){if(this.collection=t&&e(t).length?e(t):e(),e(t).length)return this.config=r&&e.isPlainObject(r)?e.extend({},this._baseConfig,r):this._baseConfig,this.config.itemSelector=t,this.initCountQty(),this.pageCollection},initCountQty:function(){var t=this,r=t.pageCollection;this.collection.each(function(t,n){var o=e(n),i=o.find(".js-plus"),a=o.find(".js-minus"),s=o.find(".js-result"),l=parseInt(s.val());i.on("click",function(e){e.preventDefault(),l+=1,s.val(l)}),a.on("click",function(e){if(e.preventDefault(),!(l>=1))return!1;l-=1,s.val(l)}),r=r.add(o)})}}}(jQuery),function(e){"use strict";e.HSCore.components.HSRangeDatepicker={_baseConfig:{},pageCollection:e(),init:function(t,r){if(this.collection=t&&e(t).length?e(t):e(),e(t).length)return this.config=r&&e.isPlainObject(r)?e.extend({},this._baseConfig,r):this._baseConfig,this.config.itemSelector=t,this.initRangeDatepicker(),this.pageCollection},initRangeDatepicker:function(){var t=this,r=t.pageCollection;this.collection.each(function(t,n){var o=e(n),i=o.data("rp-wrapper"),a=Boolean(o.data("rp-is-inline")),s=o.data("rp-type"),l=o.data("rp-date-format"),u=JSON.parse(n.getAttribute("data-rp-default-date")),c=o.data("rp-is-disable-future-dates");o.flatpickr({inline:a,mode:s||"single",dateFormat:l||"d M Y",defaultDate:u,appendTo:e(i)[0],maxDate:!!c&&"today",locale:{firstDayOfWeek:1,weekdays:{shorthand:["Su","Mo","Tu","We","Th","Fr","Sa"]},rangeSeparator:" - "}}),o.css({width:7.5*o.val().length}),r=r.add(o)})}}}(jQuery);var isEmpty=function(e){return/^function[^{]+\{\s*\}/m.test(e.toString())};!function(e){"use strict";e.HSCore.components.HSRangeSlider={_baseConfig:{hide_min_max:!0,hide_from_to:!0,onStart:function(){},onChange:function(){},onFinish:function(){},onUpdate:function(){}},pageCollection:e(),init:function(t,r){if(this.collection=t&&e(t).length?e(t):e(),e(t).length)return this.config=r&&e.isPlainObject(r)?e.extend({},this._baseConfig,r):this._baseConfig,this.config.itemSelector=t,this.initRangeSlider(),this.pageCollection},initRangeSlider:function(){var t=this,r=t.config,n=t.pageCollection;this.collection.each(function(t,o){var i=e(o),a=i.data("type"),s=i.data("result-min"),l=i.data("result-max"),u=i.data("result-secondary"),c=i.data("secondary-value"),p=Boolean(i.data("grid")),d=i.data("foreground-target");i.ionRangeSlider({hide_min_max:r.hide_min_max,hide_from_to:r.hide_from_to,onStart:!0===isEmpty(r.onStart)?function(t){if(d){var r=100-(t.from_percent+(100-t.to_percent));e(d).css({left:t.from_percent+"%",width:r+"%"}),e(d+"> *").css({width:e(d).parent().width(),transform:"translateX(-"+t.from_percent+"%)"})}if(s&&"single"===a?e(s).is("input")?e(s).val(t.from):e(s).text(t.from):(s||l&&"double"===a)&&(e(s).is("input")?e(s).val(t.from):e(s).text(t.from),e(s).is("input")?e(l).val(t.to):e(l).text(t.to)),p&&"single"===a&&e(t.slider).find(".irs-grid-text").each(function(r){var n=e(this);e(n).text()===t.from&&(e(t.slider).find(".irs-grid-text").removeClass("current"),e(n).addClass("current"))}),u){c.steps.push(t.max+1),c.values.push(c.values[c.values.length-1]+1);for(var n=0;n<c.steps.length;n++)t.from>=c.steps[n]&&t.from<c.steps[n+1]&&(e(u).is("input")?e(u).val(c.values[n]):e(u).text(c.values[n]))}}:r.onStart,onChange:!0===isEmpty(r.onChange)?function(t){if(d){var r=100-(t.from_percent+(100-t.to_percent));e(d).css({left:t.from_percent+"%",width:r+"%"}),e(d+"> *").css({width:e(d).parent().width(),transform:"translateX(-"+t.from_percent+"%)"})}if(s&&"single"===a?e(s).is("input")?e(s).val(t.from):e(s).text(t.from):(s||l&&"double"===a)&&(e(s).is("input")?e(s).val(t.from):e(s).text(t.from),e(s).is("input")?e(l).val(t.to):e(l).text(t.to)),p&&"single"===a&&e(t.slider).find(".irs-grid-text").each(function(r){var n=e(this);e(n).text()===t.from&&(e(t.slider).find(".irs-grid-text").removeClass("current"),e(n).addClass("current"))}),u)for(var n=0;n<c.steps.length;n++)t.from>=c.steps[n]&&t.from<c.steps[n+1]&&(e(u).is("input")?e(u).val(c.values[n]):e(u).text(c.values[n]))}:r.onChange,onFinish:!0===isEmpty(r.onFinish)?function(e){}:r.onFinish,onUpdate:!0===isEmpty(r.onUpdate)?function(e){}:r.onUpdate});var f=i.data("ionRangeSlider");s&&"single"===a&&e(s).is("input")?e(s).on("change",function(){f.update({from:e(this).val()})}):(s||l&&"double"===a&&e(s).is("input")||e(l).is("input"))&&(e(s).on("change",function(){f.update({from:e(this).val()})}),e(l).on("change",function(){f.update({to:e(this).val()})})),e(window).on("resize",function(){e(d+"> *").css({width:e(d).parent().width()})}),n=n.add(i)})}}}(jQuery),function(e){"use strict";e.HSCore.components.HSScrollEffect={_baseConfig:{},pageCollection:e(),init:function(t,r){if(this.collection=t&&e(t).length?e(t):e(),e(t).length)return this.config=r&&e.isPlainObject(r)?e.extend({},this._baseConfig,r):this._baseConfig,this.config.itemSelector=t,this.initScrollEffect(),this.pageCollection},initScrollEffect:function(){var t=this,r=t.pageCollection;this.collection.each(function(n,o){var i=e(o),a=i.offset().top,s=i.data("scroll-effect"),l=i.data("scroll-effect-speed");console.log(a),e(window).on("scroll",function(){if(e(window).scrollTop()>a){var r=i.offset().top;"smoothFadeToBottom"===s&&t.effectSmoothFadeToBottom(i,r,l)}else t.killEffectSmoothFadeToBottom(i)}),e('a[href="#"],a[href="#!"]').on("click",function(){t.killEffectSmoothFadeToBottom(i)}),r=r.add(i)})},effectSmoothFadeToBottom:function(t,r,n){e(t).css({opacity:1-(e(window).scrollTop()-r)/n,top:(e(window).scrollTop()-r)/2})},killEffectSmoothFadeToBottom:function(t){e(t).css({opacity:1,top:""})}}}(jQuery),function(e){"use strict";function t(t,r){this.element=t,this.config=r,this._items=e(),this._makeItems(),this._bindEvents()}function r(t,r){var n=this;this.element=t,this.config=r,Object.defineProperty(this,"section",{value:e(n.element.attr("href"))}),Object.defineProperty(this,"offset",{get:function(){var e=r.parent,t=getComputedStyle(e.get(0)),o=t.position,i=n.section.offset().top;return!e.length||"fixed"!=o&&"absolute"!=o||0!=parseInt(t.top)||(i=i-e.outerHeight()-parseInt(t.marginTop)),n.config.over.length&&(i-=n.config.over.outerHeight()),i}})}e.HSCore.components.HSScrollNav={_baseConfig:{duration:400,easing:"linear",over:e(),sectionClass:"u-scroll-nav-section",customOffsetTop:0,activeItemClass:"active",activeSectionClass:"active",afterShow:function(){},beforeShow:function(){},parent:e(".u-header")},_pageCollection:e(),init:function(r,n){var o=this;return r&&r.length?(r.each(function(r,i){var a=e(i),s=n&&e.isPlainObject(n)?e.extend(!0,{},o._baseConfig,n,a.data()):e.extend(!0,{},o._baseConfig,a.data());a.data("HSScrollNav")||(a.data("HSScrollNav",new t(a,s)),o._pageCollection=o._pageCollection.add(a))}),e(window).on("scroll.HSScrollNav",function(){o._pageCollection.each(function(t,r){e(r).data("HSScrollNav").highlight()})}).trigger("scroll.HSScrollNav"),r):e()}},t.prototype._makeItems=function(){var t=this;this.element.find('a[href^="#"]').each(function(n,o){var i=e(o);i.data("HSScrollNavSection")||(i.data("HSScrollNavSection",new r(i,t.config)),t._items=t._items.add(i))})},t.prototype._bindEvents=function(){var t=this;this.element.on("click.HSScrollNav",'a[href^="#"]',function(r){var n=this,o=e(this).data("HSScrollNavSection"),i=e(t.element).parent(),a=i.attr("id"),s=window.innerWidth,l=Boolean(t.element[0].dataset.mobileDestroy);s<=769&&!0===l?(e('[data-target="#'+a+'"]').trigger("click"),e('[data-target="#'+a+'"] > .u-hamburger__box').removeClass("is-active"),i.on("hidden.bs.collapse",function(){t._lockHightlight=!0,t.current&&t.current.unhighlight(),n.blur(),t.current=e(n).data("HSScrollNavSection"),t.current.highlight(),o.show(function(){t._lockHightlight=!1})})):(t._lockHightlight=!0,t.current&&t.current.unhighlight(),n.blur(),t.current=e(n).data("HSScrollNavSection"),t.current.highlight(),o.show(function(){t._lockHightlight=!1})),r.preventDefault()})},t.prototype.highlight=function(){var t,r;if(this._items.length&&!this._lockHightlight){if((r=e(window).scrollTop())+e(window).height()===e(document).height())return this.current=this._items.last().data("HSScrollNavSection"),this.unhighlight(),this.current.highlight(),void this.current.changeHash();this._items.each(function(n,o){var i=e(o).data("HSScrollNavSection");i.section;r>i.offset&&(t=i)}),t&&this.current!==t&&(this.unhighlight(),t.highlight(),this.current&&t.changeHash(),this.current=t)}},t.prototype.unhighlight=function(){this._items.each(function(t,r){e(r).data("HSScrollNavSection").unhighlight()})},r.prototype.show=function(t){var r=this;this.section.length&&(r.config.beforeShow.call(r.section),this.changeHash(),e("html, body").stop().animate({scrollTop:r.offset+r.config.customOffsetTop},{duration:r.config.duration,easing:r.config.easing,complete:function(){e("html, body").stop().animate({scrollTop:r.offset+r.config.customOffsetTop},{duration:r.config.duration,easing:r.config.easing,complete:function(){r.config.afterShow.call(r.section),e.isFunction(t)&&t()}})}}))},r.prototype.changeHash=function(){this.section.attr("id",""),e(this.config.sectionClass).removeClass(this.config.activeSectionClass),this.section.addClass(this.config.activeSectionClass),window.location.hash=this.element.attr("href"),this.section.attr("id",this.element.attr("href").slice(1))},r.prototype.highlight=function(){var e=this.element.parent("li");e.length&&e.addClass(this.config.activeItemClass)},r.prototype.unhighlight=function(){var e=this.element.parent("li");e.length&&e.removeClass(this.config.activeItemClass)}}(jQuery),function(e){"use strict";e.HSCore.components.HSSelectPicker={_baseConfig:{},pageCollection:e(),init:function(t,r){if(this.collection=t&&e(t).length?e(t):e(),e(t).length)return this.config=r&&e.isPlainObject(r)?e.extend({},this._baseConfig,r):this._baseConfig,this.config.itemSelector=t,this.initSelectPicker(),this.pageCollection},initSelectPicker:function(){var t=this,r=t.pageCollection;this.collection.each(function(t,n){var o=e(n);o.selectpicker(),o.on("loaded.bs.select",function(e){var t=o.siblings(".dropdown-menu ").find(".bs-searchbox"),r=o.data("searchbox-classes");r&&t.addClass(r)}),r=r.add(o)})},method:function(){for(var t=this,r=[],n=1;n<arguments.length;n++)r.push(arguments[n]);t.collection.each(function(t,n){var o=e(n);o.selectpicker.apply(o,r)})}}}(jQuery),function(e){"use strict";e.HSCore.components.HSShowAnimation={_baseConfig:{afterShow:function(){}},pageCollection:e(),init:function(t,r){if(this.collection=t&&e(t).length?e(t):e(),e(t).length)return this.config=r&&e.isPlainObject(r)?e.extend({},this._baseConfig,r):this._baseConfig,this.config.itemSelector=t,this.initShowEffect(),this.pageCollection},initShowEffect:function(){var t=this,r=t.config,n=t.pageCollection;this.collection.each(function(o,i){var a=e(i),s=a.data("link-group"),l=e(a.data("target")),u=l.data("target-group"),c=a.data("animation-in");a.on("click",function(n){n.preventDefault(),e(this).hasClass("active")||(e('[data-link-group="'+s+'"]').removeClass("active"),a.addClass("active"),c?t.addAnimation(l,u,c,r):t.hideShow(l,u,r))}),n=n.add(a)})},hideShow:function(t,r,n){e('[data-target-group="'+r+'"]').hide().css("opacity",0),t.show().css("opacity",1),n.afterShow()},addAnimation:function(t,r,n,o){e('[data-target-group="'+r+'"]').hide().css("opacity",0).removeClass("animated "+n),t.show(),o.afterShow(),setTimeout(function(){t.css("opacity",1).addClass("animated "+n)},50)}}}(jQuery),function(e){"use strict";e.HSCore.components.HSSlickCarousel={_baseConfig:{autoplay:!1,infinite:!0},pageCollection:e(),init:function(t,r){if(this.collection=t&&e(t).length?e(t):e(),e(t).length)return this.config=r&&e.isPlainObject(r)?e.extend({},this._baseConfig,r):this._baseConfig,this.config.itemSelector=t,this.initSlickCarousel(),this.pageCollection},initSlickCarousel:function(){var t=this,r=(t.config,t.pageCollection);this.collection.each(function(n,o){var i=e(o),a=i.attr("id"),s=i.data("nav-for"),l=i.data("is-thumbs"),u=Boolean(i.data("is-thumbs-progress")),c=JSON.parse(o.getAttribute("data-thumbs-progress-options")),p=0,d=i.data("thumbs-progress-container"),f=i.data("arrows-classes"),h=i.data("arrow-left-classes"),y=i.data("arrow-right-classes"),m=i.data("pagi-classes"),g=i.data("pagi-helper"),v=i.data("pagi-icons"),b='<div class="js-prev '+f+" "+h+'"></div>',w='<div class="js-next '+f+" "+y+'"></div>',S=i.data("slides-show"),_=i.data("slides-scroll"),x=i.data("autoplay"),O=i.data("animation"),C=i.data("easing"),M=i.data("fade"),T=i.data("autoplay-speed"),P=i.data("rows"),I=i.data("center-mode"),E=i.data("center-padding"),j=i.data("pause-hover"),k=i.data("variable-width"),A=i.data("initial-slide"),L=i.data("vertical"),F=i.data("rtl"),N=i.data("in-effect"),R=i.data("out-effect"),D=i.data("infinite"),U=i.data("title-pos-inside"),q=i.data("focus-on-select"),H=i.data("lazy-load"),V=i.data("adaptive-height"),z=i.data("numbered-pagination"),B=JSON.parse(o.getAttribute("data-responsive"));i.find("[data-slide-type]").length&&t.videoSupport(i),i.on("init",function(t,r){e(r.$slides).css("height","auto"),l&&S>=e(r.$slides).length&&i.addClass("slick-transform-off")}),i.on("init",function(t,r){var n=e(r.$slides)[r.currentSlide],o=e(n).find("[data-scs-animation-in]");e(o).each(function(){var t=e(this).data("scs-animation-in"),r=e(this).data("scs-animation-delay"),n=e(this).data("scs-animation-duration");e(this).css({"animation-delay":r+"ms","animation-duration":n+"ms"}),e(this).addClass("animated "+t).css("opacity",1)})}),N&&R&&i.on("init",function(t,r){e(r.$slides).addClass("single-slide")}),g&&i.on("init",function(e,t){var r=i.find(".js-pagination");r.length&&r.append('<span class="u-dots-helper"></span>')}),l&&(u&&i.on("init",function(t,r){e(r.$slides).each(function(){var t="#000",n=4,o='<span class="u-slick-thumb-progress"><svg version="1.1" viewBox="0 0 160 160"><path class="u-slick-thumb-progress__path" fill="transparent" stroke="'+(c&&c.color?c.color:t)+'" stroke-width="'+(c&&c.width?c.width:n)+'" d="M 79.98452083651917 4.000001576345426 A 76 76 0 1 1 79.89443752470656 4.0000733121155605 Z"></path></svg></span>',i=e(o),a=i.find("svg"),s=a.find("path"),l='<style type="text/css"></style>',u=e(l);p=parseInt(s[0].getTotalLength()),s.css({"stroke-dashoffset":p,"stroke-dasharray":p}),u.text(".slick-current:not(.slick-initial-slide) .u-slick-thumb-progress__path {animation: dash "+(r.options.autoplaySpeed+r.options.speed)+"ms linear alternate}@keyframes dash {from {stroke-dashoffset: "+p+";} to {stroke-dashoffset: 0;}}"),i.appendTo(e(this).find(d)),u.appendTo(e(this).find(d))})}),e("#"+a).on("click",".slick-slide",function(t){t.stopPropagation();var r=e(this).data("slick-index");e("#"+a).slick("slickCurrentSlide")!==r&&e("#"+a).slick("slickGoTo",r)})),i.on("init",function(t,r){var n=i.find(".js-pagination");n.length&&e(n[0].children[0]).addClass("slick-current")}),i.on("init",function(t,r){var n=e(r.$slides)[0],o=e(n).find("[data-scs-animation-in]");e(o).each(function(){var t=e(this).data("scs-animation-in");e(this).addClass("animated "+t).css("opacity",1)})}),z&&i.on("init",function(t,r){e(z).html('<span class="u-paging__current">1</span><span class="u-paging__divider"></span><span class="u-paging__total">'+r.slideCount+"</span>")}),i.slick({autoplay:!!(x||e(s)[0]&&e(s)[0].dataset.isThumbsProgress),autoplaySpeed:T||3e3,cssEase:O||"ease",easing:C||"linear",fade:!!M,infinite:!!D,initialSlide:A?A-1:0,slidesToShow:S||1,slidesToScroll:_||1,centerMode:!!I,variableWidth:!!k,pauseOnHover:!!j,rows:P||1,vertical:!!L,verticalSwiping:!!L,rtl:!!F,centerPadding:E||0,focusOnSelect:!!q,lazyLoad:H||!1,asNavFor:s||!1,prevArrow:!!f&&b,nextArrow:!!f&&w,dots:!!m,dotsClass:"js-pagination "+m,adaptiveHeight:!!V,customPaging:function(t,r){var n=e(t.$slides[r]).data("title");return n&&v?"<span>"+n+"</span>"+v:v?"<span></span>"+v:n&&U?"<span>"+n+"</span>":n&&!U?'<span></span><strong class="u-dot-title">'+n+"</strong>":"<span></span>"},responsive:B}),e(s)[0]&&e(s)[0].dataset.isThumbsProgress&&(i.slick("slickPause"),setTimeout(function(){i.slick("slickPlay")},600)),i.on("beforeChange",function(t,r,n,o){var a=e(r.$slides)[o],s=e(r.$slides)[n],l=i.find(".js-pagination"),u=e(a).find("[data-scs-animation-in]"),c=e(s).find("[data-scs-animation-in]");e(c).each(function(){var t=e(this).data("scs-animation-in");e(this).removeClass("animated "+t)}),e(u).each(function(){e(this).css("opacity",0)}),l.length&&(n>o?(e(l[0].children).removeClass("slick-active-right"),e(l[0].children[o]).addClass("slick-active-right")):e(l[0].children).removeClass("slick-active-right"),e(l[0].children).removeClass("slick-current"),setTimeout(function(){e(l[0].children[o]).addClass("slick-current")},.25))}),z&&i.on("beforeChange",function(t,r,n,o){var i=(o||0)+1;e(z).html('<span class="u-paging__current">'+i+'</span><span class="u-paging__divider"></span><span class="u-paging__total">'+r.slideCount+"</span>")}),i.on("afterChange",function(t,r,n){var o=e(r.$slides)[n],i=e(o).find("[data-scs-animation-in]");e(i).each(function(){var t=e(this).data("scs-animation-in"),r=e(this).data("scs-animation-delay"),n=e(this).data("scs-animation-duration");e(this).css({"animation-delay":r+"ms","animation-duration":n+"ms"}),e(this).addClass("animated "+t).css("opacity",1)})}),N&&R&&(i.on("afterChange",function(t,r,n,o){e(r.$slides).removeClass("animated set-position "+N+" "+R)}),i.on("beforeChange",function(t,r,n){e(r.$slides[n]).addClass("animated "+R)}),i.on("setPosition",function(t,r){e(r.$slides[r.currentSlide]).addClass("animated set-position "+N)})),r=r.add(i)})},videoSupport:function(t){t.length&&t.on("beforeChange",function(t,r,n,o){var i,a=e(r.$slides[n]).data("slide-type"),s=e(r.$slides[n]).find("iframe").get(0);if("vimeo"==a)i={method:"pause",value:"true"};else{if("youtube"!=a)return!1;i={event:"command",func:"pauseVideo"}}void 0!=s&&s.contentWindow.postMessage(JSON.stringify(i),"*")})},initTextAnimation:function(t,r){if(window.TextFx&&window.anime&&t.length){var n=t.find(r);n.length&&(n.each(function(t,r){var n=e(r);n.data("TextFx")||n.data("TextFx",new TextFx(n.get(0)))}),t.on("beforeChange",function(e,t,n,o){var i=t.$slider.find(".slick-track").children(),a=i.eq(n),s=i.eq(o);a=a.find(r),s=s.find(r),a.length&&a.data("TextFx").hide(a.data("effect")?a.data("effect"):"fx1"),s.length&&s.data("TextFx").show(s.data("effect")?s.data("effect"):"fx1")}))}}}}(jQuery),function(e){"use strict";e.HSCore.components.HSStepForm={_baseConfig:{},pageCollection:e(),init:function(t,r){if(this.collection=t&&e(t).length?e(t):e(),e(t).length)return this.config=r&&e.isPlainObject(r)?e.extend({},this._baseConfig,r):this._baseConfig,this.config.itemSelector=t,this.initStepForm(),this.pageCollection},initStepForm:function(){var t=this,r=t.pageCollection;this.collection.each(function(t,n){var o=e(n),i=o.data("progress-id"),a=e(i).find("> *"),s=o.data("steps-id"),l=e(s).find("> *"),u=e(s).find("> .active");l.not(".active").hide(),a.eq(u.index()).addClass("active"),e("[data-next-step]").on("click",function(t){if(!e(n).valid())return!1;t.preventDefault();var r=e(this),o=r.data("next-step");a.removeClass("active"),a.eq(e(o).index()-1).addClass("u-checked"),a.eq(e(o).index()).addClass("active"),l.hide().removeClass("active"),e(o).fadeIn(400).addClass("active")}),e("[data-previous-step]").on("click",function(t){t.preventDefault();var r=e(this),n=r.data("previous-step");a.removeClass("active"),a.eq(e(n).index()-1).addClass("u-checked"),a.eq(e(n).index()).addClass("active"),l.hide().removeClass("active"),e(n).fadeIn(400).addClass("active")}),r=r.add(o)})}}}(jQuery),function(e){"use strict";e.HSCore.components.HSStickyBlock={_baseConfig:{},pageCollection:e(),init:function(t,r){if(this.collection=t&&e(t).length?e(t):e(),e(t).length)return this.config=r&&e.isPlainObject(r)?e.extend({},this._baseConfig,r):this._baseConfig,this.config.itemSelector=t,this.initStickyBlock(),this.pageCollection},initStickyBlock:function(){var t=this,r=t.pageCollection;this.collection.each(function(n,o){var i=e(o),a=i.outerHeight(),s=e(window).scrollTop(),l=window.innerWidth,u=e.isNumeric(i.data("start-point"))?i.data("start-point"):e(i.data("start-point")).offset().top,c=e.isNumeric(i.data("end-point"))?i.data("end-point"):e(i.data("end-point")).offset().top,p=e(i.data("parent")),d=p.width(),f=parseInt(p.css("padding-left")),h=p.offset().left,y=i.data("offset-target"),m=y?e(y).outerHeight():0,g=i.data("offset-top")?i.data("offset-top"):0,v=i.data("offset-bottom")?i.data("offset-bottom"):0,b=i.data("sticky-view");t.killSticky(i,b,l),i.hasClass("kill-sticky")||(s>=u-m-g&&s<=c-m-g?(t.addSticky(i,h,d,f),t.stickyTop(i,g,m),t.parentSetHeight(p,a)):(t.removeSticky(i),t.parentRemoveHeight(p)),s>=c-m-a-g-v&&t.stickyBottom(i,c,s,a,v));var w=function(){s=e(window).scrollTop(),l=window.innerWidth,a=i.outerHeight(),u=e.isNumeric(i.data("start-point"))?i.data("start-point"):e(i.data("start-point")).offset().top,c=e.isNumeric(i.data("end-point"))?i.data("end-point"):e(i.data("end-point")).offset().top,h=p.offset().left,d=p.width(),f=parseInt(p.css("padding-left")),m=y?e(y).outerHeight():0,t.killSticky(i,b,l),i.hasClass("kill-sticky")||(s>=u-m-g&&s<=c-m-g?(t.addSticky(i,h,d,f),t.stickyTop(i,g,m),t.parentSetHeight(p,a)):(t.removeSticky(i),t.parentRemoveHeight(p)),s>=c-m-a-g-v&&t.stickyBottom(i,c,s,a,v))};e(window).on("scroll",function(){w()}),e(window).on("resize",function(){w()}),r=r.add(i)})},addSticky:function(t,r,n,o){e(t).css({position:"fixed",left:r+o,width:n})},stickyTop:function(t,r,n){e(t).css({top:r+n})},stickyBottom:function(t,r,n,o,i){e(t).css({top:r-n-o-i})},removeSticky:function(t){e(t).css({position:"",top:"",bottom:"",left:"",width:""})},killSticky:function(t,r,n){var o=this,i=e(t.data("parent"));"sm"===r&&n<=576?(t.addClass("kill-sticky"),o.removeSticky(t),o.parentRemoveHeight(i)):"md"===r&&n<=768?(t.addClass("kill-sticky"),o.removeSticky(t),o.parentRemoveHeight(i)):"lg"===r&&n<=992?(t.addClass("kill-sticky"),o.removeSticky(t),o.parentRemoveHeight(i)):"xl"===r&&n<=1200?(t.addClass("kill-sticky"),o.removeSticky(t),o.parentRemoveHeight(i)):t.removeClass("kill-sticky")},parentSetHeight:function(e,t){e.css({height:t})},parentRemoveHeight:function(e){e.css({height:""})}}}(jQuery),function(e){"use strict";e.HSCore.components.HSSummernoteEditor={_baseConfig:{buttons:{},lang:"en-US",toolbar:[["style",["style"]],["font",["bold","underline","clear"]],["fontname",["fontname"]],["fontsize",["fontsize"]],["color",["color"]],["para",["ul","ol","paragraph"]],["table",["table"]],["insert",["link","picture","video"]],["view",["fullscreen","codeview","help"]]],popover:{image:[["imagesize",["imageSize100","imageSize50","imageSize25"]],["float",["floatLeft","floatRight","floatNone"]],["remove",["removeMedia"]]],link:[["link",["linkDialogShow","unlink"]]],table:[["add",["addRowDown","addRowUp","addColLeft","addColRight"]],["delete",["deleteRow","deleteCol","deleteTable"]]],air:[["color",["color"]],["font",["bold","underline","clear"]],["para",["ul","paragraph"]],["table",["table"]],["insert",["link","picture"]]]},airMode:!1,width:null,height:100,linkTargetBlank:!0,focus:!1,tabSize:4,blockquoteBreakingLevel:2,styleWithSpan:!0,shortcuts:!0,textareaAutoSync:!0,hintDirection:"bottom",tooltip:"auto",container:"body",maxTextLength:0,styleTags:["p","blockquote","pre","h1","h2","h3","h4","h5","h6"],fontNames:["Arial","Arial Black","Comic Sans MS","Courier New","Helvetica Neue","Helvetica","Impact","Lucida Grande","Tahoma","Times New Roman","Verdana"],fontNamesIgnoreCheck:null,fontSizes:["8","9","10","11","12","14","18","24","36"],colors:[["#000","#424242","#636363","#9c9c94","#cec6ce","#efefef","#f7f7f7","#fff"],["#f00","#ff9c00","#ff0","#0f0","#0ff","#00f","#9c00ff","#f0f"],["#f7c6ce","#ffe7ce","#ffefc6","#d6efd6","#cedee7","#cee7f7","#d6d6e7","#e7d6de"],["#e79c9c","#ffc69c","#ffe79c","#b5d6a5","#a5c6ce","#9cc6ef","#b5a5d6","#d6a5bd"],["#e76363","#f7ad6b","#ffd663","#94bd7b","#73a5ad","#6badde","#8c7bc6","#c67ba5"],["#ce0000","#e79439","#efc631","#6ba54a","#4a7b8c","#3984c6","#634aa5","#a54a7b"],["#9c0000","#b56308","#bd9400","#397b21","#104a5a","#085294","#311873","#731842"],["#630000","#7b3900","#846300","#295218","#083139","#003163","#21104a","#4a1031"]],colorsName:[["Black","Tundora","Dove Gray","Star Dust","Pale Slate","Gallery","Alabaster","White"],["Red","Orange Peel","Yellow","Green","Cyan","Blue","Electric Violet","Magenta"],["Azalea","Karry","Egg White","Zanah","Botticelli","Tropical Blue","Mischka","Twilight"],["Tonys Pink","Peach Orange","Cream Brulee","Sprout","Casper","Perano","Cold Purple","Careys Pink"],["Mandy","Rajah","Dandelion","Olivine","Gulf Stream","Viking","Blue Marguerite","Puce"],["Guardsman Red","Fire Bush","Golden Dream","Chelsea Cucumber","Smalt Blue","Boston Blue","Butterfly Bush","Cadillac"],["Sangria","Mai Tai","Buddha Gold","Forest Green","Eden","Venice Blue","Meteorite","Claret"],["Rosewood","Cinnamon","Olive","Parsley","Tiber","Midnight Blue","Valentino","Loulou"]],lineHeights:["1.0","1.2","1.4","1.5","1.6","1.8","2.0","3.0"],tableClassName:"table table-bordered",insertTableMaxSize:{col:10,row:10},dialogsInBody:!1,dialogsFade:!1,disableDragAndDrop:!1,maximumImageFileSize:null,codemirror:{mode:"text/html",htmlMode:!0,lineNumbers:!0},keyMap:{pc:{ENTER:"insertParagraph","CTRL+Z":"undo","CTRL+Y":"redo",TAB:"tab","SHIFT+TAB":"untab","CTRL+B":"bold","CTRL+I":"italic","CTRL+U":"underline","CTRL+SHIFT+S":"strikethrough","CTRL+BACKSLASH":"removeFormat","CTRL+SHIFT+L":"justifyLeft","CTRL+SHIFT+E":"justifyCenter","CTRL+SHIFT+R":"justifyRight","CTRL+SHIFT+J":"justifyFull","CTRL+SHIFT+NUM7":"insertUnorderedList","CTRL+SHIFT+NUM8":"insertOrderedList","CTRL+LEFTBRACKET":"outdent","CTRL+RIGHTBRACKET":"indent","CTRL+NUM0":"formatPara","CTRL+NUM1":"formatH1","CTRL+NUM2":"formatH2","CTRL+NUM3":"formatH3","CTRL+NUM4":"formatH4","CTRL+NUM5":"formatH5","CTRL+NUM6":"formatH6","CTRL+ENTER":"insertHorizontalRule","CTRL+K":"linkDialog.show"},mac:{ENTER:"insertParagraph","CMD+Z":"undo","CMD+SHIFT+Z":"redo",TAB:"tab","SHIFT+TAB":"untab","CMD+B":"bold","CMD+I":"italic","CMD+U":"underline","CMD+SHIFT+S":"strikethrough","CMD+BACKSLASH":"removeFormat","CMD+SHIFT+L":"justifyLeft","CMD+SHIFT+E":"justifyCenter","CMD+SHIFT+R":"justifyRight","CMD+SHIFT+J":"justifyFull","CMD+SHIFT+NUM7":"insertUnorderedList","CMD+SHIFT+NUM8":"insertOrderedList","CMD+LEFTBRACKET":"outdent","CMD+RIGHTBRACKET":"indent","CMD+NUM0":"formatPara","CMD+NUM1":"formatH1","CMD+NUM2":"formatH2","CMD+NUM3":"formatH3","CMD+NUM4":"formatH4","CMD+NUM5":"formatH5","CMD+NUM6":"formatH6","CMD+ENTER":"insertHorizontalRule","CMD+K":"linkDialog.show"}},icons:{align:"note-icon-align",alignCenter:"note-icon-align-center",alignJustify:"note-icon-align-justify",alignLeft:"note-icon-align-left",alignRight:"note-icon-align-right",rowBelow:"note-icon-row-below",colBefore:"note-icon-col-before",colAfter:"note-icon-col-after",rowAbove:"note-icon-row-above",rowRemove:"note-icon-row-remove",colRemove:"note-icon-col-remove",indent:"note-icon-align-indent",outdent:"note-icon-align-outdent",arrowsAlt:"note-icon-arrows-alt",bold:"note-icon-bold",caret:"note-icon-caret",circle:"note-icon-circle",close:"note-icon-close",code:"note-icon-code",eraser:"note-icon-eraser",font:"note-icon-font",frame:"note-icon-frame",italic:"note-icon-italic",link:"note-icon-link",unlink:"note-icon-chain-broken",magic:"note-icon-magic",menuCheck:"note-icon-menu-check",minus:"note-icon-minus",orderedlist:"note-icon-orderedlist",pencil:"note-icon-pencil",picture:"note-icon-picture",question:"note-icon-question",redo:"note-icon-redo",square:"note-icon-square",strikethrough:"note-icon-strikethrough",subscript:"note-icon-subscript",superscript:"note-icon-superscript",table:"note-icon-table",textHeight:"note-icon-text-height",trash:"note-icon-trash",underline:"note-icon-underline",undo:"note-icon-undo",unorderedlist:"note-icon-unorderedlist",video:"note-icon-video"},placeholder:"",mentions:[],callbacks:{onInit:null,onFocus:null,onBlur:null,onBlurCodeview:null,onEnter:null,onKeyup:null,onKeydown:null,onImageUpload:null,onImageUploadError:null}},pageCollection:e(),init:function(t,r){if(this.collection=t&&e(t).length?e(t):e(),e(t).length)return this.config=r&&e.isPlainObject(r)?e.extend({},this._baseConfig,r):this._baseConfig,this.config.itemSelector=t,this.initSummernoteEditor(),this.pageCollection},initSummernoteEditor:function(){var t=this,r=t.config,n=t.pageCollection;this.collection.each(function(t,o){var i=e(o),a=i.data("buttons")?i.data("buttons"):r.buttons,s=i.data("lang")?i.data("lang"):r.lang,l=i.data("toolbar")?JSON.parse(o.getAttribute("data-toolbar")):r.toolbar,u=i.data("popover")?JSON.parse(o.getAttribute("data-popover")):r.popover,c=i.data("air-mode")?i.data("air-mode"):r.airMode,p=i.data("width")?i.data("width"):r.width,d=i.data("height")?i.data("height"):r.height,f=i.data("link-target-blank")?i.data("link-target-blank"):r.linkTargetBlank,h=i.data("focus")?i.data("focus"):r.focus,y=i.data("tab-size")?i.data("tab-size"):r.tabSize,m=i.data("blockquote-breaking-level")?i.data("blockquote-breaking-level"):r.blockquoteBreakingLevel,g=i.data("style-with-span")?i.data("style-with-span"):r.styleWithSpan,v=i.data("shortcuts")?i.data("shortcuts"):r.shortcuts,b=i.data("textarea-auto-sync")?i.data("textarea-auto-sync"):r.textareaAutoSync,w=i.data("hint-direction")?i.data("hint-direction"):r.hintDirection,S=i.data("tooltip")?i.data("tooltip"):r.tooltip,_=i.data("container")?i.data("container"):r.container,x=i.data("max-text-length")?i.data("max-text-length"):r.maxTextLength,O=i.data("style-tags")?JSON.parse(o.getAttribute("data-style-tags")):r.styleTags,C=i.data("font-names")?JSON.parse(o.getAttribute("data-font-names")):r.fontNames,M=i.data("font-names-ignore-check")?JSON.parse(o.getAttribute("font-names-ignore-check")):r.fontNamesIgnoreCheck,T=i.data("font-sizes")?JSON.parse(o.getAttribute("data-font-sizes")):r.fontSizes,P=i.data("colors")?JSON.parse(o.getAttribute("data-colors")):r.colors,I=i.data("colors-name")?JSON.parse(o.getAttribute("data-colors-name")):r.colorsName,E=i.data("line-heights")?JSON.parse(o.getAttribute("data-line-heights")):r.lineHeights,j=i.data("table-class-name")?i.data("table-class-name"):r.tableClassName,k=i.data("insert-table-max-size")?JSON.parse(o.getAttribute("data-insert-table-max-size")):r.insertTableMaxSize,A=i.data("dialogs-in-body")?i.data("dialogs-in-body"):r.dialogsInBody,L=i.data("dialogs-fade")?i.data("dialogs-fade"):r.dialogsFade,F=i.data("disable-drag-and-drop")?i.data("disable-drag-and-drop"):r.disableDragAndDrop,N=i.data("maximum-image-file-size")?i.data("maximum-image-file-size"):r.maximumImageFileSize,R=i.data("codemirror")?JSON.parse(o.getAttribute("data-codemirror")):r.codemirror,D=i.data("key-map")?JSON.parse(o.getAttribute("data-key-map")):r.keyMap,U=i.data("icons")?JSON.parse(o.getAttribute("data-icons")):r.icons,q=i.data("placeholder")?i.data("placeholder"):r.placeholder,H=i.data("mentions")?JSON.parse(o.getAttribute("data-mentions")):r.mentions;i.summernote({buttons:a,lang:s,toolbar:l,popover:u,airMode:c,width:p,height:d,linkTargetBlank:f,focus:h,tabSize:y,blockquoteBreakingLevel:m,styleWithSpan:g,shortcuts:v,textareaAutoSync:b,hintDirection:w,tooltip:S,container:_,maxTextLength:x,styleTags:O,fontNames:C,fontNamesIgnoreCheck:M,fontSizes:T,colors:P,colorsName:I,lineHeights:E,tableClassName:j,insertTableMaxSize:k,dialogsInBody:A,dialogsFade:L,disableDragAndDrop:F,maximumImageFileSize:N,codemirror:R,keyMap:D,icons:U,placeholder:q,callbacks:{onInit:r.callbacks.onInit,onFocus:r.callbacks.onFocus,onBlur:r.callbacks.onBlur,onBlurCodeview:r.callbacks.onBlurCodeview,onEnter:r.callbacks.onEnter,onKeyup:r.callbacks.onKeyup,onKeydown:r.callbacks.onKeydown,onImageUpload:r.callbacks.onImageUpload,onImageUploadError:r.callbacks.onImageUploadError},hint:!!i.data("mentions")&&{mentions:H,match:/\B@(\w*)$/,search:function(t,r){r(e.grep(this.mentions,function(e){return 0==e.indexOf(t)}))},content:function(e){return"@"+e}}}),n=n.add(i)})},method:function(){for(var t=this,r=[],n=1;n<arguments.length;n++)r.push(arguments[n]);t.collection.each(function(t,n){var o=e(n);o.summernote.apply(o,r)})}}}(jQuery),function(e){"use strict";e.HSCore.components.HSSVGIngector={_baseConfig:{},pageCollection:e(),init:function(t,r){if(this.collection=t&&e(t).length?e(t):e(),e(t).length)return this.config=r&&e.isPlainObject(r)?e.extend({},this._baseConfig,r):this._baseConfig,this.config.itemSelector=t,this.initSVGInjector(),this.pageCollection},initSVGInjector:function(){var t=this,r=t.pageCollection;this.collection.each(function(t,n){var o,i,a=e(n),s=JSON.parse(n.getAttribute("data-img-paths")),l=s?s.length:0,u=e(a.data("parent"));u.css("height",u.outerHeight()),SVGInjector(a,{each:function(r){if(l>0)for(t=0;t<l;t++)o=s[t].targetId,i=s[t].newPath,e(r).find(o).attr("xlink:href",i);u.removeClass("svg-preloader").css("height","")}}),r=r.add(a)})}}}(jQuery),function(e){"use strict";e.HSCore.components.HSToggleState={_baseConfig:{},pageCollection:e(),init:function(t,r){if(this.collection=t&&e(t).length?e(t):e(),e(t).length)return this.config=r&&e.isPlainObject(r)?e.extend({},this._baseConfig,r):this._baseConfig,this.config.itemSelector=t,this.initToggleState(),this.pageCollection},initToggleState:function(){var t=this,r=t.pageCollection;this.collection.each(function(n,o){var i=e(o),a=i.data("target"),s=i.data("slaves");i.on("click",function(r){r.preventDefault(),i.toggleClass("toggled"),s&&(i.hasClass("toggled")?e(s).addClass("toggled"):e(s).removeClass("toggled")),t.checkedState(i,a,"toggled")}),e(s).on("click",function(t){t.preventDefault(),e('[data-slaves="'+s+'"]').removeClass("toggled")}),r=r.add(i)})},checkedState:function(t,r,n){e(t).hasClass(n)?e(r).prop("checked",!0):e(r).prop("checked",!1)}}}(jQuery),function(e){"use strict";function t(){return"ontouchstart"in window}function r(t,r){var n=this;return!!t.length&&(n.element=t,n.config=r,n.target=e(n.element.data("unfold-target")),n.allInvokers=e('[data-unfold-target="'+n.element.data("unfold-target")+'"]'),n.toggle=function(){if(!n.target.length)return n;var t=n.element[0].dataset,r=!!t.unfoldOverlay&&JSON.parse(t.unfoldOverlay);return n.defaultState?(t.unfoldOverlay&&(e("."+r.className).length||e('<div class="'+r.className+'" style="background-color: '+r.background+'"></div>').prependTo("body"),e("."+r.className).length&&e("."+r.className).fadeIn(r.animationSpeed?r.animationSpeed:200)),n.show()):(e("."+r.className).length&&(n.config.unfoldTimeOut=setTimeout(function(){e("."+r.className).fadeOut(r.animationSpeed?r.animationSpeed:200)},n.config.unfoldDelay)),n.hide()),n},this.smartPosition=function(t){t.data("baseDirection")&&t.css(t.data("baseDirection").direction,t.data("baseDirection").value),t.removeClass("u-unfold--reverse-y");var r=e(window),n=getComputedStyle(t.get(0)),o=Math.abs(parseInt(n.left,10))<40?"left":"right",i=t.offset();"right"===o?(t.data("baseDirection")||t.data("baseDirection",{direction:"right",value:parseInt(n.right,10)}),i.left<0&&t.css("right",-1*(parseInt(t.css("right"),10)-(i.left-10)))):(t.data("baseDirection")||t.data("baseDirection",{direction:"left",value:parseInt(n.left,10)}),i.left+t.outerWidth()>r.width()&&t.css("left",parseInt(t.css("left"),10)-(i.left+t.outerWidth()+10-r.width()))),i.top+t.outerHeight()-r.scrollTop()>r.height()&&t.addClass("u-unfold--reverse-y")},this.getOption=function(e){return this.config[e]?this.config[e]:null},!0)}function n(e,t){r.call(this,e,t)&&(Object.defineProperty(this,"defaultState",{get:function(){return this.target.hasClass("u-unfold--hidden")}}),this.target.addClass("u-unfold--simple"),this.hide())}function o(e,t){if(r.call(this,e,t)){var n=this;this.target.addClass("u-unfold--css-animation u-unfold--hidden").css("animation-duration",n.config.unfoldDuration+"ms"),Object.defineProperty(this,"defaultState",{get:function(){return this.target.hasClass("u-unfold--hidden")}}),this.target.length&&this.target.on("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(e){n.target.hasClass(n.config.unfoldAnimationOut)&&(n.target.removeClass(n.config.unfoldAnimationOut).addClass("u-unfold--hidden"),n.allInvokers.length&&n.allInvokers.attr("aria-expanded","false"),n.config.afterClose.call(n.target,n.element)),n.target.hasClass(n.config.unfoldAnimationIn)&&(n.allInvokers.length&&n.allInvokers.attr("aria-expanded","true"),n.config.afterOpen.call(n.target,n.element)),e.preventDefault(),e.stopPropagation()})}}function i(e,t){r.call(this,e,t)&&(this.target.addClass("u-unfold--jquery-slide u-unfold--hidden").hide(),Object.defineProperty(this,"defaultState",{get:function(){return this.target.hasClass("u-unfold--hidden")}}))}e.HSCore.components.HSUnfold={_baseConfig:{unfoldEvent:"click",unfoldType:"simple",unfoldDuration:300,unfoldEasing:"linear",unfoldAnimationIn:"fadeIn",unfoldAnimationOut:"fadeOut",unfoldHideOnScroll:!0,unfoldHideOnBlur:!1,unfoldDelay:350,unfoldOpenedElement:"init",unfoldOverlay:!1,afterOpen:function(e){},beforeClose:function(e){},afterClose:function(e){}},_pageCollection:e(),init:function(t,r){var a;if(t&&t.length){a=this;var s;return t.each(function(t,l){var u,c=e(l);if(!c.data("HSUnfold")){switch(u=r&&e.isPlainObject(r)?e.extend(!0,{},a._baseConfig,r,c.data()):e.extend(!0,{},a._baseConfig,c.data()),u.unfoldType){case"css-animation":c.data("HSUnfold",new o(c,u));break;case"jquery-slide":c.data("HSUnfold",new i(c,u));break;default:c.data("HSUnfold",new n(c,u))}a._pageCollection=a._pageCollection.add(c),a._bindEvents(c,u.unfoldEvent,u.unfoldDelay);var p=e(l).data("HSUnfold");s=e(p.target).find("input, textarea").length,e(p.target).find("[data-unfold-target]").length&&c.addClass("target-of-invoker-has-unfolds")}}),e(document).on("click touchstart","body",function(t){t.target.id!==a._baseConfig.unfoldOpenedElement&&(e(t.target).closest("#"+a._baseConfig.unfoldOpenedElement).length||a._pageCollection.each(function(t,r){var n=window.innerWidth,o=Boolean(e(r).data("is-mobile-only"));o?o&&n<769&&e(r).data("HSUnfold").hide():e(r).data("HSUnfold").hide(),e(r).data("HSUnfold").config.unfoldOverlay&&(e(r).data("HSUnfold").config.unfoldDelay=setTimeout(function(){e("."+e(r).data("HSUnfold").config.unfoldOverlay.className).fadeOut(e(r).data("HSUnfold").config.unfoldOverlay.animationSpeed?e(r).data("HSUnfold").config.unfoldOverlay.animationSpeed:200)},e(r).data("HSUnfold").config.unfoldDelay)),e(r).data("HSUnfold").config.beforeClose.call(a.target,a.element)}))}),e(window).on("scroll.HSUnfold",function(){a._pageCollection.each(function(t,r){var n=e(r).data("HSUnfold");n.getOption("unfoldHideOnScroll")&&0===s?n.hide():n.getOption("unfoldHideOnScroll")&&!/iPhone|iPad|iPod/i.test(navigator.userAgent)&&n.hide()})}),e(window).on("resize.HSUnfold",function(){a._resizeTimeOutId&&clearTimeout(a._resizeTimeOutId),a._resizeTimeOutId=setTimeout(function(){a._pageCollection.each(function(t,r){var n=e(r).data("HSUnfold");n.smartPosition(n.target)})},50)}),e(document).on("keydown.HSUnfold",function(t){e("body").hasClass("u-unfold-opened")&&((t.keyCode&&38===t.keyCode||t.keyCode&&40===t.keyCode)&&t.preventDefault(),t.keyCode&&27===t.keyCode&&(a._pageCollection.each(function(t,r){e(r).data("HSUnfold").hide(),e("."+e(r).data("HSUnfold").config.unfoldOverlay.className).fadeOut(e(r).data("HSUnfold").config.unfoldOverlay.animationSpeed?e(r).data("HSUnfold").config.unfoldOverlay.animationSpeed:200)}),e("body").removeClass("u-unfold-opened")))}),t}},_bindEvents:function(r,n,o){var i=this,a=e(r.data("unfold-target"));if("hover"!==n||t()){if(r.on("click.HSUnfold",function(t){var r=e(this),n=e("[data-unfold-target].active:not(.target-of-invoker-has-unfolds)"),o=e("[data-unfold-target].active.target-of-invoker-has-unfolds");i._baseConfig.unfoldOpenedElement=r.data("HSUnfold").target[0].id,r.data("HSUnfold")&&(r.hasClass("target-of-invoker-has-unfolds")?o.length&&o.data("HSUnfold").toggle():n.length&&n.data("HSUnfold").toggle(),r.data("HSUnfold").toggle(),e("body").toggleClass("u-unfold-opened"),t.stopPropagation(),t.preventDefault())}),Boolean(r.data("unfold-target-is-menu"))){var s=e(r.data("unfold-target")),l=s.children();l.on("click",function(){r.data("HSUnfold").toggle()})}}else r.on("mouseenter.HSUnfold",function(){var t=e(this),r=t.data("HSUnfold");r&&(r.unfoldTimeOut&&clearTimeout(r.unfoldTimeOut),r.show(),e("body").addClass("u-unfold-opened"))}).on("mouseleave.HSUnfold",function(){var t=e(this),r=t.data("HSUnfold");r&&(r.unfoldTimeOut=setTimeout(function(){r.hide(),e("body").removeClass("u-unfold-opened")},o))}),a.length&&a.on("mouseenter.HSUnfold",function(){var e=r.data("HSUnfold");e.unfoldTimeOut&&clearTimeout(e.unfoldTimeOut),e.show()}).on("mouseleave.HSUnfold",function(){var e=r.data("HSUnfold");e.unfoldTimeOut=setTimeout(function(){e.hide()},o)})}},n.prototype.show=function(){var t=e(this)[0].config.unfoldTarget;return e('[data-unfold-target="'+t+'"]').addClass("active"),this.smartPosition(this.target),this.target.removeClass("u-unfold--hidden"),this.allInvokers.length&&this.allInvokers.attr("aria-expanded","true"),this.config.afterOpen.call(this.target,this.element),this},n.prototype.hide=function(){var t=e(this)[0].config.unfoldTarget;return e('[data-unfold-target="'+t+'"]').removeClass("active"),this.target.addClass("u-unfold--hidden"),this.allInvokers.length&&this.allInvokers.attr("aria-expanded","false"),this.config.afterClose.call(this.target,this.element),this},o.prototype.show=function(){var t=this,r=e(t)[0].config.unfoldTarget;e('[data-unfold-target="'+r+'"]').addClass("active"),t.smartPosition(t.target),t.target.removeClass("u-unfold--hidden").removeClass(t.config.unfoldAnimationOut),t.config.unfoldOverlay?setTimeout(function(){t.target.addClass(t.config.unfoldAnimationIn)}):t.target.addClass(t.config.unfoldAnimationIn),t.config.afterOpen.call(t.target,t.element)},o.prototype.hide=function(){var t=e(this)[0].config.unfoldTarget;e('[data-unfold-target="'+t+'"]').removeClass("active"),this.target.removeClass(this.config.unfoldAnimationIn).addClass(this.config.unfoldAnimationOut)},i.prototype.show=function(){var t=this,r=e(this)[0].config.unfoldTarget;e('[data-unfold-target="'+r+'"]').addClass("active"),this.smartPosition(this.target),this.target.removeClass("u-unfold--hidden").stop().slideDown({duration:t.config.unfoldDuration,easing:t.config.unfoldEasing,complete:function(){t.config.afterOpen.call(t.target,t.element)}})},i.prototype.hide=function(){var t=this,r=e(this)[0].config.unfoldTarget;e('[data-unfold-target="'+r+'"]').removeClass("active"),this.target.slideUp({duration:t.config.unfoldDuration,easing:t.config.unfoldEasing,complete:function(){t.config.afterClose.call(t.target,t.element),t.target.addClass("u-unfold--hidden")}})}}(jQuery);var isEmpty=function(e){return/^function[^{]+\{\s*\}/m.test(e.toString())};!function(e){"use strict";e.HSCore.components.HSValidation={_baseConfig:{errorElement:"div",errorClass:"invalid-feedback",rules:{},onkeyup:function(t){e(t).valid()},errorPlacement:function(){},highlight:function(){},unhighlight:function(){},submitHandler:function(){}},pageCollection:e(),init:function(t,r){if(this.collection=t&&e(t).length?e(t):e(),e(t).length)return this.config=r&&e.isPlainObject(r)?e.extend({},this._baseConfig,r):this._baseConfig,this.config.itemSelector=t,this.initValidation(),this.pageCollection},initValidation:function(){var t=this,r=t.config,n=t.pageCollection;this.collection.each(function(o,i){var a=e(i);a.hasClass("js-step-form")?e.validator.setDefaults({ignore:":hidden:not(.active select)"}):e.validator.setDefaults({ignore:":hidden:not(select)"}),a.validate({errorElement:r.errorElement,errorClass:r.errorClass,rules:r.rules,onkeyup:r.onkeyup,errorPlacement:!0===isEmpty(r.errorPlacement)?t.errorPlacement:r.errorPlacement,highlight:!0===isEmpty(r.highlight)?t.highlight:r.highlight,unhighlight:!0===isEmpty(r.unhighlight)?t.unHighlight:r.unhighlight,submitHandler:!0===isEmpty(r.submitHandler)?t.submitHandler:r.submitHandler}),a.find("select").length&&e("select").change(function(){e(this).valid()}),n=n.add(a)})},errorPlacement:function(t,r){var n=e(r),o=n.data("error-msg-classes");t.addClass(o),t.appendTo(r.parents(".js-form-message"))},highlight:function(t){var r=e(t),n=r.data("error-class"),o=r.data("success-class");r.parents(".js-form-message").removeClass(o).addClass(n)},unHighlight:function(t){var r=e(t),n=r.data("error-class"),o=r.data("success-class");r.parents(".js-form-message").removeClass(n).addClass(o)},submitHandler:function(e){e.submit()}}}(jQuery),function(e){"use strict";e.HSCore.components.HSVideoPlayer={_baseConfig:{},pageCollection:e(),init:function(t,r){if(this.collection=t&&e(t).length?e(t):e(),e(t).length)return this.config=r&&e.isPlainObject(r)?e.extend({},this._baseConfig,r):this._baseConfig,this.config.itemSelector=t,this.videoPlayerInit(),this.pageCollection},videoPlayerInit:function(){var t=this,r=t.pageCollection;this.collection.each(function(n,o){var i=e(o),a=i.data("parent"),s=i.data("target"),l=i.data("video-id"),u=i.data("video-type"),c=i.data("classes"),p=Boolean(i.data("is-autoplay"));"vimeo"!==u&&t.youTubeAPIReady(),i.on("click",function(r){r.preventDefault(),e("#"+a).toggleClass(c),"vimeo"===u?t.vimeoPlayer(s,l,p):t.youTubePlayer(s,l,p)}),r=r.add(i)})},youTubeAPIReady:function(){var e=document.createElement("script");e.src="//www.youtube.com/player_api";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)},youTubePlayer:function(e,t,r){new YT.Player(e,{videoId:t,playerVars:{origin:window.location.origin,autoplay:!0===r?1:0}})},vimeoPlayer:function(e,t,r){var n=document.getElementById(e);new Vimeo.Player(n,{id:t,autoplay:!0===r?1:0})}}}(jQuery),function(e,t){var r,n=function(){return void 0!==m&&"function"!=typeof m?m:"undefined"!=typeof window?window:"undefined"!=typeof self?self:this}(),o=function(){},i=function(e){for(var t in e)return 0;return 1},a={}.toString,s=function(e){return"[object Function]"==a.call(e)},l=function(e){return"[object String]"==a.call(e)},u=function(e){return"[object Array]"==a.call(e)},c=function(e,t){if(e)for(var r=0;r<e.length;)t(e[r++])},p=function(e,t){for(var r in t)e[r]=t[r];return e},d=function(e,t){return p(Error(e),{src:"dojoLoader",info:t})},f=1,h=function(){return"_"+f++},y=function(e,t,r){return K(e,t,r,0,y)},m=n,g=m.document,v=g&&g.createElement("DiV"),b=y.has=function(e){return s(w[e])?w[e]=w[e](m,g,v):w[e]},w=b.cache=t.hasCache;s(e)&&(e=e(n)),b.add=function(e,t,r,n){return(void 0===w[e]||n)&&(w[e]=t),r&&b(e)},b.add("host-webworker","undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope),b("host-webworker")&&(p(t.hasCache,{"host-browser":0,dom:0,"dojo-dom-ready-api":0,"dojo-sniff":0,"dojo-inject-api":1,"host-webworker":1,"dojo-guarantee-console":0}),t.loaderPatch={injectUrl:function(e,t){try{importScripts(e),t()}catch(t){console.info("failed to load resource ("+e+")"),console.error(t)}}});for(var S in e.has)b.add(S,e.has[S],0,1);y.async=1;var _=b("csp-restrictions")?function(){}:new Function("return eval(arguments[0]);");y.eval=function(e,t){return _(e+"\r\n//# sourceURL="+t)};var x={},O=y.signal=function(e,t){e=x[e],c(e&&e.slice(0),function(e){e.apply(null,u(t)?t:[t])})};S=y.on=function(e,t){var r=x[e]||(x[e]=[]);return r.push(t),{remove:function(){for(var e=0;e<r.length;e++)if(r[e]===t){r.splice(e,1);break}}}};var C=[],M={},T=[],P={},I=y.map={},E=[],j={},k="",A={},L={},n={},F=0;if(!b("foreign-loader"))var N=function(e,t){t=!1!==t;var r,n,o,i;for(r in L)n=L[r],(o=r.match(/^url\:(.+)/))?A["url:"+de(o[1],e)]=n:"*now"==r?i=n:"*noref"!=r&&(o=se(r,e,!0),A[o.mid]=A["url:"+o.url]=n);i&&i(Z(e)),t&&(L={})};var R=function(e){return e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,function(e){return"\\"+e})},D=function(e,t){t.splice(0,t.length);for(var r in e)t.push([r,e[r],new RegExp("^"+R(r)+"(/|$)"),r.length]);return t.sort(function(e,t){return t[3]-e[3]}),t},U=function(e,t){c(e,function(e){t.push([l(e[0])?new RegExp("^"+R(e[0])+"$"):e[0],e[1]])})},q=function(e){var t=e.name;t||(t=e,e={name:t}),e=p({main:"main"},e),e.location=e.location?e.location:t,e.packageMap&&(I[t]=e.packageMap),e.main.indexOf("./")||(e.main=e.main.substring(2)),P[t]=e},H=[],V=function(e,t,r){for(var n in e)"waitSeconds"==n&&(y.waitms=1e3*(e[n]||0)),"cacheBust"==n&&(k=e[n]?l(e[n])?e[n]:(new Date).getTime()+"":""),"baseUrl"!=n&&"combo"!=n||(y[n]=e[n]),e[n]!==w&&(y.rawConfig[n]=e[n],"has"!=n&&b.add("config-"+n,e[n],0,t));y.baseUrl||(y.baseUrl="./"),/\/$/.test(y.baseUrl)||(y.baseUrl+="/");for(n in e.has)b.add(n,e.has[n],0,t);c(e.packages,q);for(var o in e.packagePaths)c(e.packagePaths[o],function(e){var t=o+"/"+e;l(e)&&(e={name:e}),e.location=t,q(e)});if(D(p(I,e.map),E),c(E,function(e){e[1]=D(e[1],[]),"*"==e[0]&&(E.star=e)}),D(p(M,e.paths),T),U(e.aliases,C),!b("foreign-loader")){if(t)H.push({config:e.config});else for(n in e.config)t=ce(n,r),t.config=p(t.config||{},e.config[n]);e.cache&&(N(),L=e.cache,N(0,!!e.cache["*noref"]))}O("config",[e,y.rawConfig])};if(b("dojo-cdn")){var z=g.getElementsByTagName("script");r=0;for(var B,G,W,J;r<z.length;)B=z[r++],(W=B.getAttribute("src"))&&(J=W.match(/(((.*)\/)|^)dojo\.js(\W|$)/i))&&(G=J[3]||"",t.baseUrl=t.baseUrl||G,F=B),(W=B.getAttribute("data-dojo-config")||B.getAttribute("djConfig"))&&(n=y.eval("({ "+W+" })","data-dojo-config"),F=B)}if(y.rawConfig={},V(t,1),b("dojo-cdn")&&((P.dojo.location=G)&&(G+="/"),P.dijit.location=G+"../dijit/",P.dojox.location=G+"../dojox/"),V(e,1),V(n,1),!b("foreign-loader"))var Q=function(e){Ce(function(){c(e.deps,je)})},K=function(e,t,r,n,i){var a;if(l(e)){if((a=ce(e,n,!0))&&a.executed)return a.result;throw d("undefinedModule",e)}if(u(e)||(V(e,0,n),e=t,t=r),u(e))if(e.length){r="require*"+h();for(var s,c=[],f=0;f<e.length;)s=e[f++],c.push(ce(s,n));a=p(ie("",r,0,""),{injected:2,deps:c,def:t||o,require:n?n.require:y,gc:1}),j[a.mid]=a,Q(a);var m=Oe&&!0;Ce(function(){xe(a,m)}),a.executed||Y.push(a),Me()}else t&&t();return i},Z=function(e){if(!e)return y;var t=e.require;return t||(t=function(r,n,o){return K(r,n,o,e,t)},e.require=p(t,y),t.module=e,t.toUrl=function(t){return de(t,e)},t.toAbsMid=function(t){return pe(t,e)}),t},Y=[],$=[],X={},ee=function(e){e.injected=1,X[e.mid]=1,e.url&&(X[e.url]=e.pack||1),Fe()},te=function(e){e.injected=2,delete X[e.mid],e.url&&delete X[e.url],i(X)&&Le()},re=y.idle=function(){return!$.length&&i(X)&&!Y.length&&!Oe};var ne=function(e,t){if(t)for(var r=0;r<t.length;r++)if(t[r][2].test(e))return t[r];return 0},oe=function(e){var t,r,n=[];for(e=e.replace(/\\/g,"/").split("/");e.length;)t=e.shift(),".."==t&&n.length&&".."!=r?(n.pop(),r=n[n.length-1]):"."!=t&&n.push(r=t);return n.join("/")},ie=function(e,t,r,n){return{pid:e,mid:t,pack:r,url:n,executed:0,def:0}},ae=function(e,t,r,n,o,i,a,l,u,p){var f,h,y,m;if(m=/^\./.test(e),/(^\/)|(\:)|(\.js$)/.test(e)||m&&!t)return ie(0,e,0,e);if(e=oe(m?t.mid+"/../"+e:e),/^\./.test(e))throw d("irrationalPath",e);p||m||!i.star||(y=ne(e,i.star[1])),!y&&t&&(y=(y=ne(t.mid,i))&&ne(e,y[1])),y&&(e=y[1]+e.substring(y[3])),t=(J=e.match(/^([^\/]+)(\/(.+))?$/))?J[1]:"",(f=r[t])?e=t+"/"+(h=J[3]||f.main):t="";var g=0;return c(l,function(t){var r=e.match(t[0]);r&&0<r.length&&(g=s(t[1])?e.replace(t[0],t[1]):t[1])}),g?ae(g,0,r,n,o,i,a,l,u):(r=n[e])?u?ie(r.pid,r.mid,r.pack,r.url):n[e]:(n=(y=ne(e,a))?y[1]+e.substring(y[3]):t?("/"===f.location.slice(-1)?f.location.slice(0,-1):f.location)+"/"+h:e,/(^\/)|(\:)/.test(n)||(n=o+n),ie(t,e,f,oe(n+".js")))},se=function(e,t,r){return ae(e,t,P,j,y.baseUrl,E,T,C,void 0,r)};if(!b("foreign-loader"))var le=function(e,t,r){return e.normalize?e.normalize(t,function(e){return pe(e,r)}):pe(t,r)},ue=0,ce=function(e,t,r){var n,o;return(n=e.match(/^(.+?)\!(.*)$/))?(o=ce(n[1],t,r),5!==o.executed||o.load||be(o),o.load?(n=le(o,n[2],t),e=o.mid+"!"+(o.dynamic?++ue+"!":"")+n):(n=n[2],e=o.mid+"!"+ ++ue+"!waitingForPlugin"),e={plugin:o,mid:e,req:Z(t),prid:n}):e=se(e,t),j[e.mid]||!r&&(j[e.mid]=e)};var pe=y.toAbsMid=function(e,t){return se(e,t).mid},de=y.toUrl=function(e,t){t=se(e+"/x",t);var r=t.url;return Te(0===t.pid?e:r.substring(0,r.length-5))};if(!b("foreign-loader")){var fe={injected:2,executed:5,def:3,result:3};G=function(e){return j[e]=p({mid:e},fe)};var he=G("require"),ye=G("exports"),me=G("module"),ge={},ve=0,be=function(e){var t=e.result;return e.dynamic=t.dynamic,e.normalize=t.normalize,e.load=t.load,e},we=function(e){var t={};c(e.loadQ,function(r){var n=le(e,r.prid,r.req.module),o=e.dynamic?r.mid.replace(/waitingForPlugin$/,n):e.mid+"!"+n,n=p(p({},r),{mid:o,prid:n,injected:0});j[o]&&j[o].injected||Pe(j[o]=n),t[r.mid]=j[o],te(r),delete j[r.mid]}),e.loadQ=0;var r,n=function(e){for(var r=e.deps||[],n=0;n<r.length;n++)(e=t[r[n].mid])&&(r[n]=e)};for(r in j)n(j[r]);c(Y,n)},Se=function(e){for(y.trace("loader-finish-exec",[e.mid]),e.executed=5,e.defOrder=ve++,e.loadQ&&(be(e),we(e)),r=0;r<Y.length;)Y[r]===e?Y.splice(r,1):r++;/^require\*/.test(e.mid)&&delete j[e.mid]},_e=[],xe=function(e,t){if(4===e.executed)return y.trace("loader-circular-dependency",[_e.concat(e.mid).join("->")]),!e.def||t?ge:e.cjs&&e.cjs.exports;if(!e.executed){if(!e.def)return ge;var r,n=e.mid,o=e.deps||[],i=[],a=0;for(e.executed=4;r=o[a++];){if((r=r===he?Z(e):r===ye?e.cjs.exports:r===me?e.cjs:xe(r,t))===ge)return e.executed=0,y.trace("loader-exec-module",["abort",n]),ge;i.push(r)}y.trace("loader-run-factory",[e.mid]),t=e.def,i=s(t)?t.apply(null,i):t,e.result=void 0===i&&e.cjs?e.cjs.exports:i,Se(e)}return e.result},Oe=0,Ce=function(e){try{Oe++,e()}catch(e){throw e}finally{Oe--}re()&&O("idle",[])},Me=function(){Oe||Ce(function(){for(var e,t,r=0;r<Y.length;)e=ve,t=Y[r],xe(t),e!=ve?r=0:r++})}}var Te="function"==typeof e.fixupUrl?e.fixupUrl:function(e){return(e+="")+(k?(/\?/.test(e)?"&":"?")+k:"")};void 0===b("dojo-loader-eval-hint-url")&&b.add("dojo-loader-eval-hint-url",1);var Pe=function(e){var t=e.plugin;5!==t.executed||t.load||be(t);var r=function(t){e.result=t,te(e),Se(e),Me()};t.load?t.load(e.prid,e.req,r):t.loadQ?t.loadQ.push(e):(t.loadQ=[e],Y.unshift(t),je(t))},Ie=0,Ee=function(e,t){b("config-stripStrict")&&(e=e.replace(/(["'])use strict\1/g,"")),e===Ie?Ie.call(null):y.eval(e,b("dojo-loader-eval-hint-url")?t.url:t.mid)},je=function(e){var t=e.mid,r=e.url;if(!(e.executed||e.injected||X[t]||e.url&&(e.pack&&X[e.url]===e.pack||1==X[e.url])))if(ee(e),e.plugin)Pe(e);else{var n=function(){if(Ae(e),2!==e.injected){if(b("dojo-enforceDefine"))return void O("error",d("noDefine",e));te(e),p(e,fe),y.trace("loader-define-nonmodule",[e.url])}Me()};(Ie=A[t]||A["url:"+e.url])?(y.trace("loader-inject",["cache",e.mid,r]),Ee(Ie,e),n()):(y.trace("loader-inject",["script",e.mid,r]),y.injectUrl(Te(r),n,e))}},ke=function(e,t,r){if(y.trace("loader-define-module",[e.mid,t]),2===e.injected)return O("error",d("multipleDefine",e)),e;p(e,{deps:t,def:r,cjs:{id:e.mid,uri:e.url,exports:e.result={},setExports:function(t){e.cjs.exports=t},config:function(){return e.config}}});for(var n=0;t[n];n++)t[n]=ce(t[n],e);return te(e),s(r)||t.length||(e.result=r,Se(e)),e},Ae=function(e,t){for(var r,n,o=[];$.length;)n=$.shift(),t&&(n[0]=t.shift()),r=n[0]&&ce(n[0])||e,o.push([r,n[1],n[2]]);N(e),c(o,function(e){Q(ke.apply(null,e))})},Le=o,Fe=o;if(b("dom"),b("dom")){var Ne=function(e,t,r,n){return e.addEventListener(t,n,!1),function(){e.removeEventListener(t,n,!1)}},Re=Ne(window,"load","onload",function(){y.pageLoaded=1;try{"complete"!=g.readyState&&(g.readyState="complete")}catch(e){}Re()}),z=g.getElementsByTagName("script");for(r=0;!F;)/^dojo/.test((B=z[r++])&&B.type)||(F=B);y.injectUrl=function(e,t,r){r=r.node=g.createElement("script");var n=Ne(r,"load","onreadystatechange",function(e){e=e||window.event;var r=e.target||e.srcElement;("load"===e.type||/complete|loaded/.test(r.readyState))&&(n(),o(),t&&t())}),o=Ne(r,"error","onerror",function(t){n(),o(),O("error",d("scriptError: "+e,[e,t]))});return r.type="text/javascript",r.charset="utf-8",r.src=e,F.parentNode.insertBefore(r,F),r}}y.log=o,y.trace=o,b("foreign-loader")?B=o:(B=function(e,t,r){var n=arguments.length,o=["require","exports","module"],i=[0,e,t];1==n?i=[0,s(e)?o:[],e]:2==n&&l(e)?i=[e,s(t)?o:[],t]:3==n&&(i=[e,t,r]),y.trace("loader-define",i.slice(0,2)),(n=i[0]&&ce(i[0]))&&!X[n.mid]?Q(ke(n,i[1],i[2])):$.push(i)},B.amd={vendor:"dojotoolkit.org"}),p(p(y,t.loaderPatch),e.loaderPatch),S("error",function(e){try{if(console.error(e),e instanceof Error){for(var t in e)console.log(t+":",e[t]);console.log(".")}}catch(e){}}),p(y,{uid:h,cache:A,packs:P}),m.define||(m.define=B,m.require=y,b("foreign-loader")||(c(H,function(e){V(e)}),B=n.deps||e.deps||t.deps,e=n.callback||e.callback||t.callback,y.boot=B||e?[B||[],e]:0))}(function(e){return e.dojoConfig||e.djConfig||e.require||{}},{aliases:[[/^webgl-engine/,function(){return"esri/views/3d/webgl-engine"}],[/^engine/,function(){return"esri/views/3d/webgl-engine"}],[/^esri-hydra/,function(){return"esri"}]],async:1,baseUrl:"https://js.arcgis.com/4.14/dojo",hasCache:{"config-deferredInstrumentation":0,"config-selectorEngine":"lite","config-tlmSiblingOfDojo":1,"dojo-built":1,"dojo-has-api":1,"dojo-loader":1,"dojo-undef-api":0,dom:1,"esri-built":1,"esri-console-log-version":1,"host-browser":1},map:{globalize:{cldr:"cldrjs/dist/cldr","cldr/event":"cldrjs/dist/cldr/event","cldr/supplemental":"cldrjs/dist/cldr/supplemental","cldr/unresolved":"cldrjs/dist/cldr/unresolved"}},packages:[{location:".",name:"dojo"},{location:"../dijit",name:"dijit"},{location:"../dojox",name:"dojox"},{location:"../dgrid",main:"OnDemandGrid",name:"dgrid"},{location:"../dstore",main:"Store",name:"dstore"},{location:"../esri",name:"esri"},{location:"../moment",main:"moment",name:"moment"},{location:"../@dojo",name:"@dojo"},{location:"../cldrjs",main:"dist/cldr",name:"cldrjs"},{location:"../globalize",main:"dist/globalize",name:"globalize"},{location:"../intersection-observer",main:"intersection-observer",name:"intersection-observer"},{location:"../maquette-css-transitions",main:"dist/maquette-css-transitions.umd",name:"maquette-css-transitions"},{location:"../maquette-jsx",main:"dist/maquette-jsx.umd",name:"maquette-jsx"},{location:"../tslib",main:"tslib",name:"tslib"},{location:"../whatwg-fetch",main:"dist/fetch.umd",name:"whatwg-fetch"}]}),require({cache:{"dojo/domReady":function(){define(["./global","./has"],function(e,t){function r(e){u.push(e),l&&n()}function n(){if(!o){for(o=!0;u.length;)try{u.shift()(i)}catch(e){console.error(e,"in domReady callback",e.stack)}o=!1,r._onQEmpty()}}var o,i=document,a={loaded:1,complete:1},s="string"!=typeof i.readyState,l=!!a[i.readyState],u=[];if(r.load=function(e,t,n){r(n)},r._Q=u,r._onQEmpty=function(){},s&&(i.readyState="loading"),!l){var c=[],p=function(t){t=t||e.event,l||"readystatechange"==t.type&&!a[i.readyState]||(s&&(i.readyState="complete"),l=1,n())};if(t=function(e,t){e.addEventListener(t,p,!1),u.push(function(){e.removeEventListener(t,p,!1)})},t(i,"DOMContentLoaded"),t(e,"load"),"onreadystatechange"in i?t(i,"readystatechange"):s||c.push(function(){return a[i.readyState]}),c.length){var d=function(){if(!l){for(var e=c.length;e--;)if(c[e]())return void p("poller");setTimeout(d,30)}};d()}}return r})},"dojo/global":function(){define(function(){return"undefined"!=typeof global&&"function"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:this})},"dojo/has":function(){define(["./global","require","module"],function(e,t,r){var n=t.has||function(){};if(!n("dojo-has-api")){var o=(t="undefined"!=typeof window&&"undefined"!=typeof location&&"undefined"!=typeof document&&window.location==location&&window.document==document)&&document,i=o&&o.createElement("DiV"),a=r.config&&r.config()||{},n=function(t){return"function"==typeof a[t]?a[t]=a[t](e,o,i):a[t]};n.cache=a,n.add=function(e,t,r,o){return(void 0===a[e]||o)&&(a[e]=t),r&&n(e)},n.add("host-browser",t),n.add("dom",t)}return n("host-browser")&&(n.add("touch","ontouchstart"in document||"onpointerdown"in document&&0<navigator.maxTouchPoints||window.navigator.msMaxTouchPoints),n.add("touch-events","ontouchstart"in document),n.add("pointer-events","pointerEnabled"in window.navigator?window.navigator.pointerEnabled:"PointerEvent"in window),n.add("device-width",screen.availWidth||innerWidth),r=document.createElement("form"),n.add("dom-attributes-specified-flag",0<r.attributes.length&&40>r.attributes.length)),n.clearElement=function(e){return e.innerHTML="",e},n.normalize=function(e,t){var r=e.match(/[\?:]|[^:\?]*/g),o=0,i=function(e){var t=r[o++];return":"==t?0:"?"==r[o++]?!e&&n(t)?i():(i(!0),i(e)):t||0};return(e=i())&&t(e)},n.load=function(e,t,r){e?t([e],r):r()},n})},"dojo/_base/browser":function(){require.has&&require.has.add("config-selectorEngine","acme"),define("../ready ./kernel ./connect ./unload ./window ./event ./html ./NodeList ../query ./xhr ./fx".split(" "),function(e){return e})},"dojo/ready":function(){define(["./_base/kernel","./has","require","./has!host-browser?./domReady","./_base/lang"],function(e,t,r,n,o){var i=0,a=[],s=0;t=function(){i=1,e._postLoad=e.config.afterOnLoad=!0,l()};var l=function(){if(!s){for(s=1;i&&(!n||0==n._Q.length)&&(r.idle?r.idle():1)&&a.length;){var e=a.shift();try{e()}catch(e){if(e.info=e.message,!r.signal)throw e;r.signal("error",e)}}s=0}};r.on&&r.on("idle",l),n&&(n._onQEmpty=l);var u=e.ready=e.addOnLoad=function(t,r,n){var i=o._toArray(arguments);for("number"!=typeof t?(n=r,r=t,t=1e3):i.shift(),n=n?o.hitch.apply(e,i):function(){r()},n.priority=t,i=0;i<a.length&&t>=a[i].priority;i++);a.splice(i,0,n),l()},c=e.config.addOnLoad;return c&&u[o.isArray(c)?"apply":"call"](e,c),n?n(t):t(),u})},"dojo/_base/kernel":function(){define(["../global","../has","./config","require","module"],function(e,t,r,n,o){var i,a={},s={},l={config:r,global:e,dijit:a,dojox:s},a={dojo:["dojo",l],dijit:["dijit",a],dojox:["dojox",s]};o=n.map&&n.map[o.id.match(/[^\/]+/)[0]];for(i in o)a[i]?a[i][0]=o[i]:a[i]=[o[i],{}];for(i in a)o=a[i],o[1]._scopeName=o[0],r.noGlobals||(e[o[0]]=o[1]);l.scopeMap=a,l.baseUrl=l.config.baseUrl=n.baseUrl,l.isAsync=n.async,l.locale=r.locale,e="$Rev: d6e8ff38 $".match(/[0-9a-f]{7,}/),l.version={major:1,minor:14,patch:2,flag:"",revision:e?e[0]:NaN,toString:function(){var e=l.version;return e.major+"."+e.minor+"."+e.patch+e.flag+" ("+e.revision+")"}},t("csp-restrictions")||Function("d","d.eval = function(){return d.global.eval ? d.global.eval(arguments[0]) : eval(arguments[0]);}")(l),l.exit=function(){},t("host-webworker"),"undefined"!=typeof console||(console={}),e="assert count debug dir dirxml error group groupEnd info profile profileEnd time timeEnd trace warn log".split(" ");var u;for(t=0;u=e[t++];)console[u]?console[u]=Function.prototype.bind.call(console[u],console):function(){var e=u+"";console[e]="log"in console?function(){var t=Array.prototype.slice.call(arguments);t.unshift(e+":"),console.log(t.join(" "))}:function(){},console[e]._fake=!0}();return l.deprecated=l.experimental=function(){},l._hasResource={},l})},"dojo/_base/config":function(){define(["../global","../has","require"],function(e,t,r){e={},r=r.rawConfig;for(var n in r)e[n]=r[n];return!e.locale&&"undefined"!=typeof navigator&&(n=navigator.languages&&navigator.languages.length?navigator.languages[0]:navigator.language||navigator.userLanguage)&&(e.locale=n.toLowerCase()),e})},"dojo/_base/lang":function(){define(["./kernel","../has","../sniff"],function(e,t){var r=function(t,r,n){n||(n=t[0]&&e.scopeMap[t[0]]?e.scopeMap[t.shift()][1]:e.global);try{for(var o=0;o<t.length;o++){var i=t[o];if(!(i in n)){if(!r)return;n[i]={}}n=n[i]}return n}catch(e){}},n=Object.prototype.toString,o=function(e,t,r){return(r||[]).concat(Array.prototype.slice.call(e,t||0))},i=/\{([^\}]+)\}/g,a={_extraNames:[],_mixin:function(e,t,r){var n,o,i={};for(n in t)o=t[n],n in e&&(e[n]===o||n in i&&i[n]===o)||(e[n]=r?r(o):o);return e},mixin:function(e,t){e||(e={});for(var r=1,n=arguments.length;r<n;r++)a._mixin(e,arguments[r]);return e},setObject:function(e,t,n){var o=e.split(".");return e=o.pop(),(n=r(o,!0,n))&&e?n[e]=t:void 0},getObject:function(e,t,n){return e?r(e.split("."),t,n):n},exists:function(e,t){return void 0!==a.getObject(e,!1,t)},isString:function(e){return"string"==typeof e||e instanceof String},isArray:Array.isArray||function(e){return"[object Array]"==n.call(e)},isFunction:function(e){return"[object Function]"===n.call(e)},isObject:function(e){return void 0!==e&&(null===e||"object"==typeof e||a.isArray(e)||a.isFunction(e))},isArrayLike:function(e){return!!e&&!a.isString(e)&&!a.isFunction(e)&&!(e.tagName&&"form"==e.tagName.toLowerCase())&&(a.isArray(e)||isFinite(e.length))},isAlien:function(e){return e&&!a.isFunction(e)&&/\{\s*\[native code\]\s*\}/.test(String(e))},extend:function(e,t){for(var r=1,n=arguments.length;r<n;r++)a._mixin(e.prototype,arguments[r]);return e},_hitchArgs:function(t,r){var n=a._toArray(arguments,2),o=a.isString(r);return function(){var i=a._toArray(arguments),s=o?(t||e.global)[r]:r;return s&&s.apply(t||this,n.concat(i))}},hitch:function(t,r){if(2<arguments.length)return a._hitchArgs.apply(e,arguments);if(r||(r=t,t=null),a.isString(r)){if(t=t||e.global,!t[r])throw['lang.hitch: scope["',r,'"] is null (scope="',t,'")'].join("");return function(){return t[r].apply(t,arguments||[])}}return t?function(){return r.apply(t,arguments||[])}:r},delegate:function(){function e(){}return function(t,r){return e.prototype=t,t=new e,e.prototype=null,r&&a._mixin(t,r),t}}(),_toArray:t("ie")?function(){function e(e,t,r){for(r=r||[],t=t||0;t<e.length;t++)r.push(e[t]);return r}return function(t){return(t.item?e:o).apply(this,arguments)}}():o,partial:function(t){return a.hitch.apply(e,[null].concat(a._toArray(arguments)))},clone:function(e){if(!e||"object"!=typeof e||a.isFunction(e))return e;if(e.nodeType&&"cloneNode"in e)return e.cloneNode(!0);if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp)return new RegExp(e);var t,r,n;if(a.isArray(e))for(t=[],r=0,n=e.length;r<n;++r)r in e&&(t[r]=a.clone(e[r]));else t=e.constructor?new e.constructor:{};return a._mixin(t,e,a.clone)},trim:String.prototype.trim?function(e){return e.trim()}:function(e){return e.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},replace:function(e,t,r){return e.replace(r||i,a.isFunction(t)?t:function(e,r){return a.getObject(r,!1,t)})}};return a.mixin(e,a),a})},"dojo/sniff":function(){define(["./has"],function(e){if(e("host-browser")){var t=navigator,r=t.userAgent,t=t.appVersion,n=parseFloat(t);if(e.add("edge",parseFloat(r.split("Edge/")[1])||void 0),e.add("webkit",!e("edge")&&parseFloat(r.split("WebKit/")[1])||void 0),e.add("chrome",!e("edge")&&!0&&parseFloat(r.split("Chrome/")[1])||void 0),e.add("safari",0<=t.indexOf("Safari")&&!e("chrome")&&!e("edge")?parseFloat(t.split("Version/")[1]):void 0),e.add("mac",0<=t.indexOf("Macintosh")),r.match(/(iPhone|iPod|iPad)/)){var o=RegExp.$1.replace(/P/,"p"),i=r.match(/OS ([\d_]+)/)?RegExp.$1:"1",i=parseFloat(i.replace(/_/,".").replace(/_/g,""));e.add(o,i),e.add("ios",i)}e.add("trident",parseFloat(t.split("Trident/")[1])||void 0),e("webkit")||(0<=r.indexOf("Opera")&&e.add("opera",9.8<=n?parseFloat(r.split("Version/")[1])||n:n),0<=r.indexOf("Gecko")&&!e("trident")&&!e("edge")&&e.add("mozilla",n),e("mozilla")&&e.add("ff",parseFloat(r.split("Firefox/")[1]||r.split("Minefield/")[1])||void 0),document.all&&!e("opera")&&(r=parseFloat(t.split("MSIE ")[1])||void 0,(t=document.documentMode)&&5!=t&&Math.floor(r)!=t&&(r=t),e.add("ie",r)))}return e})},"dojo/_base/connect":function(){define("./kernel ../on ../topic ../aspect ./event ../mouse ./sniff ./lang ../keys".split(" "),function(e,t,r,n,o,i,a,s){function l(r,o,a,l,u){if(l=s.hitch(a,l),!r||!r.addEventListener&&!r.attachEvent)return n.after(r||e.global,o,l,!0);if("string"==typeof o&&"on"==o.substring(0,2)&&(o=o.substring(2)),r||(r=e.global),!u)switch(o){case"keypress":o=c;break;case"mouseenter":o=i.enter;break;case"mouseleave":o=i.leave}return t(r,o,l,u)}function u(e){e.keyChar=e.charCode?String.fromCharCode(e.charCode):"",e.charOrCode=e.keyChar||e.keyCode}a.add("events-keypress-typed",function(){var e={charCode:0};try{e=document.createEvent("KeyboardEvent"),(e.initKeyboardEvent||e.initKeyEvent).call(e,"keypress",!0,!0,null,!1,!1,!1,!1,9,3)}catch(e){}return 0==e.charCode&&!a("opera")});var c,p={106:42,111:47,186:59,187:43,188:44,189:45,190:46,191:47,192:96,219:91,220:92,221:93,222:39,229:113},d=a("mac")?"metaKey":"ctrlKey",f=function(e,t){return t=s.mixin({},e,t),u(t),t.preventDefault=function(){e.preventDefault()},t.stopPropagation=function(){e.stopPropagation()},t};c=a("events-keypress-typed")?function(e,r){var n=t(e,"keydown",function(e){var t=e.keyCode,n=13!=t&&32!=t&&(27!=t||!a("ie"))&&(48>t||90<t)&&(96>t||111<t)&&(186>t||192<t)&&(219>t||222<t)&&229!=t;if(n||e.ctrlKey){if(n=n?0:t,e.ctrlKey){if(3==t||13==t)return r.call(e.currentTarget,e);n=95<n&&106>n?n-48:!e.shiftKey&&65<=n&&90>=n?n+32:p[n]||n}if(t=f(e,{type:"keypress",faux:!0,charCode:n}),r.call(e.currentTarget,t),a("ie"))try{e.keyCode=t.keyCode}catch(e){}}}),o=t(e,"keypress",function(e){var t=e.charCode;return e=f(e,{charCode:32<=t?t:0,faux:!0}),r.call(this,e)});return{remove:function(){n.remove(),o.remove()}}}:a("opera")?function(e,r){return t(e,"keypress",function(e){var t=e.which;return 3==t&&(t=99),t=32>t&&!e.shiftKey?0:t,e.ctrlKey&&!e.shiftKey&&65<=t&&90>=t&&(t+=32),r.call(this,f(e,{charCode:t}))})}:function(e,r){return t(e,"keypress",function(e){return u(e),r.call(this,e)})};var h={_keypress:c,connect:function(e,t,r,n,o){var i=arguments,a=[],s=0;a.push("string"==typeof i[0]?null:i[s++],i[s++]);var u=i[s+1];for(a.push("string"==typeof u||"function"==typeof u?i[s++]:null,i[s++]),u=i.length;s<u;s++)a.push(i[s]);return l.apply(this,a)},disconnect:function(e){e&&e.remove()},subscribe:function(e,t,n){return r.subscribe(e,s.hitch(t,n))},publish:function(e,t){return r.publish.apply(r,[e].concat(t))},connectPublisher:function(e,t,r){var n=function(){h.publish(e,arguments)};return r?h.connect(t,r,n):h.connect(t,n)},isCopyKey:function(e){return e[d]}};return h.unsubscribe=h.disconnect,s.mixin(e,h),h})},"dojo/on":function(){define(["require","./_base/kernel","./sniff"],function(e,t,r){function n(e,t,n,o,i){if(o=t.match(/(.*):(.*)/))return t=o[2],o=o[1],a.selector(o,t).call(i,e,n);if(r("touch")&&s.test(t)&&(n=d(n)),e.addEventListener){var l=t in c,u=l?c[t]:t;return e.addEventListener(u,n,l),{remove:function(){e.removeEventListener(u,n,l)}}}throw Error("Target must be an event emitter")}function o(){this.cancelable=!1,this.defaultPrevented=!0}function i(){this.bubbles=!1}r("dom")&&r("touch");var a=function(e,t,r,o){return"function"!=typeof e.on||"function"==typeof t||e.nodeType?a.parse(e,t,r,n,o,this):e.on(t,r)};a.pausable=function(e,t,r,n){var o;return e=a(e,t,function(){if(!o)return r.apply(this,arguments)},n),e.pause=function(){o=!0},e.resume=function(){o=!1},e},a.once=function(e,t,r,n){var o=a(e,t,function(){return o.remove(),r.apply(this,arguments)});return o},a.parse=function(e,t,r,n,o,i){var s;if(t.call)return t.call(i,e,r);if(t instanceof Array?s=t:-1<t.indexOf(",")&&(s=t.split(/\s*,\s*/)),s){var l=[];t=0;for(var u;u=s[t++];)l.push(a.parse(e,u,r,n,o,i));return l.remove=function(){for(var e=0;e<l.length;e++)l[e].remove()},l}return n(e,t,r,o,i)};var s=/^touch/;a.matches=function(e,r,n,o,i){for(i=i&&"function"==typeof i.matches?i:t.query,o=!1!==o,1!=e.nodeType&&(e=e.parentNode);!i.matches(e,r,n);)if(e==n||!1===o||!(e=e.parentNode)||1!=e.nodeType)return!1;return e},a.selector=function(e,t,r){return function(n,o){function i(t){return a.matches(t,e,n,r,s)}var s="function"==typeof e?{matches:e}:this,l=t.bubble;return l?a(n,l(i),o):a(n,t,function(e){var t=i(e.target);if(t)return e.selectorTarget=t,o.call(t,e)})}};var l=[].slice,u=a.emit=function(e,t,r){var n=l.call(arguments,2),a="on"+t;if("parentNode"in e){var s,u=n[0]={};for(s in r)u[s]=r[s];u.preventDefault=o,u.stopPropagation=i,u.target=e,u.type=t,r=u}do{e[a]&&e[a].apply(e,n)}while(r&&r.bubbles&&(e=e.parentNode));return r&&r.cancelable&&r},c={};if(a.emit=function(e,t,r){if(e.dispatchEvent&&document.createEvent){var n=(e.ownerDocument||document).createEvent("HTMLEvents");n.initEvent(t,!!r.bubbles,!!r.cancelable);for(var o in r)o in n||(n[o]=r[o]);return e.dispatchEvent(n)&&n}return u.apply(a,arguments)},r("touch"))var p=window.orientation,d=function(e){return function(t){var r=t.corrected;if(!r){var n=t.type;try{delete t.type}catch(e){}if(t.type){var o,r={};for(o in t)r[o]=t[o];r.preventDefault=function(){t.preventDefault()},r.stopPropagation=function(){t.stopPropagation()}}else r=t,r.type=n;if(t.corrected=r,"resize"==n)return p==window.orientation?null:(p=window.orientation,r.type="orientationchange",e.call(this,r));if("rotation"in r||(r.rotation=0,r.scale=1),window.TouchEvent&&t instanceof TouchEvent){var i,n=r.changedTouches[0];for(i in n)delete r[i],r[i]=n[i]}}return e.call(this,r)}};return a})},"dojo/topic":function(){define(["./Evented"],function(e){var t=new e;return{publish:function(e,r){return t.emit.apply(t,arguments)},subscribe:function(e,r){return t.on.apply(t,arguments)}}})},"dojo/Evented":function(){define(["./aspect","./on"],function(e,t){function r(){}var n=e.after;return r.prototype={on:function(e,r){return t.parse(this,e,r,function(e,t){return n(e,"on"+t,r,!0)})},emit:function(e,r){var n=[this];return n.push.apply(n,arguments),t.emit.apply(t,n)}},r})},"dojo/aspect":function(){define([],function(){function e(e,t,r,n){var o,i=e[t],a="around"==t;if(a){var s=r(function(){return i.advice(this,arguments)});o={remove:function(){s&&(s=e=r=null)},advice:function(e,t){return s?s.apply(e,t):i.advice(e,t)}}}else o={remove:function(){if(o.advice){var n=o.previous,i=o.next;i||n?(n?n.next=i:e[t]=i,i&&(i.previous=n)):delete e[t],e=r=o.advice=null}},id:e.nextId++,advice:r,receiveArguments:n};if(i&&!a)if("after"==t){for(;i.next&&(i=i.next););i.next=o,o.previous=i}else"before"==t&&(e[t]=o,o.next=i,i.previous=o);else e[t]=o;return o}function t(t){return function(n,o,i,a){var s,l=n[o];return l&&l.target==n||(n[o]=s=function(){for(var e=s.nextId,t=arguments,n=s.before;n;)n.advice&&(t=n.advice.apply(this,t)||t),n=n.next;if(s.around)var o=s.around.advice(this,t);for(n=s.after;n&&n.id<e;){if(n.advice)if(n.receiveArguments)var i=n.advice.apply(this,t),o=i===r?o:i;else o=n.advice.call(this,o,t);n=n.next}return o},l&&(s.around={advice:function(e,t){return l.apply(e,t)}}),s.target=n,s.nextId=s.nextId||0),n=e(s||l,t,i,a),i=null,n}}var r,n=t("after");return{before:t("before"),around:t("around"),after:n}})},"dojo/_base/event":function(){define(["./kernel","../on","../has","../dom-geometry"],function(e,t,r,n){if(t._fixEvent){var o=t._fixEvent;t._fixEvent=function(e,t){return(e=o(e,t))&&n.normalizeEvent(e),e}}return r={fix:function(e,r){return t._fixEvent?t._fixEvent(e,r):e},stop:function(e){e.preventDefault(),e.stopPropagation()}},e.fixEvent=r.fix,e.stopEvent=r.stop,r})},"dojo/dom-geometry":function(){define(["./sniff","./_base/window","./dom","./dom-style"],function(e,t,r,n){function o(e,t,r,n,o,i){i=i||"px",e=e.style,isNaN(t)||(e.left=t+i),isNaN(r)||(e.top=r+i),0<=n&&(e.width=n+i),0<=o&&(e.height=o+i)}function i(e){return"button"==e.tagName.toLowerCase()||"input"==e.tagName.toLowerCase()&&"button"==(e.getAttribute("type")||"").toLowerCase()}function a(e){return"border-box"==s.boxModel||"table"==e.tagName.toLowerCase()||i(e)}var s={boxModel:"content-box"};e("ie")&&(s.boxModel="BackCompat"==document.compatMode?"border-box":"content-box"),s.getPadExtents=function(e,t){e=r.byId(e);var o=t||n.getComputedStyle(e),i=n.toPixelValue;t=i(e,o.paddingLeft);var a=i(e,o.paddingTop),s=i(e,o.paddingRight);return e=i(e,o.paddingBottom),{l:t,t:a,r:s,b:e,w:t+s,h:a+e}},s.getBorderExtents=function(e,t){e=r.byId(e);var o=n.toPixelValue,i=t||n.getComputedStyle(e);t="none"!=i.borderLeftStyle?o(e,i.borderLeftWidth):0;var a="none"!=i.borderTopStyle?o(e,i.borderTopWidth):0,s="none"!=i.borderRightStyle?o(e,i.borderRightWidth):0;return e="none"!=i.borderBottomStyle?o(e,i.borderBottomWidth):0,{l:t,t:a,r:s,b:e,w:t+s,h:a+e}},s.getPadBorderExtents=function(e,t){e=r.byId(e);var o=t||n.getComputedStyle(e);return t=s.getPadExtents(e,o),e=s.getBorderExtents(e,o),{l:t.l+e.l,t:t.t+e.t,r:t.r+e.r,b:t.b+e.b,w:t.w+e.w,h:t.h+e.h}},s.getMarginExtents=function(e,t){e=r.byId(e);var o=t||n.getComputedStyle(e),i=n.toPixelValue;t=i(e,o.marginLeft);var a=i(e,o.marginTop),s=i(e,o.marginRight);return e=i(e,o.marginBottom),{l:t,t:a,r:s,b:e,w:t+s,h:a+e}},s.getMarginBox=function(t,o){t=r.byId(t),o=o||n.getComputedStyle(t),o=s.getMarginExtents(t,o);var i=t.offsetLeft-o.l,a=t.offsetTop-o.t,l=t.parentNode,u=n.toPixelValue;return 8==e("ie")&&l&&(l=n.getComputedStyle(l),i-="none"!=l.borderLeftStyle?u(t,l.borderLeftWidth):0,a-="none"!=l.borderTopStyle?u(t,l.borderTopWidth):0),{l:i,t:a,w:t.offsetWidth+o.w,h:t.offsetHeight+o.h}},s.getContentBox=function(t,o){t=r.byId(t);var i=o||n.getComputedStyle(t);o=t.clientWidth;var a,l=s.getPadExtents(t,i);a=s.getBorderExtents(t,i);var i=t.offsetLeft+l.l+a.l,u=t.offsetTop+l.t+a.t;if(o?a=t.clientHeight:(o=t.offsetWidth-a.w,a=t.offsetHeight-a.h),8==e("ie")){var c=t.parentNode,p=n.toPixelValue;c&&(c=n.getComputedStyle(c),i-="none"!=c.borderLeftStyle?p(t,c.borderLeftWidth):0,u-="none"!=c.borderTopStyle?p(t,c.borderTopWidth):0)}return{l:i,t:u,w:o-l.w,h:a-l.h}},s.setContentSize=function(e,t,n){e=r.byId(e);var i=t.w;t=t.h,a(e)&&(n=s.getPadBorderExtents(e,n),0<=i&&(i+=n.w),0<=t&&(t+=n.h)),o(e,NaN,NaN,i,t)};var l={l:0,t:0,w:0,h:0};return s.setMarginBox=function(t,u,c){t=r.byId(t);var p=c||n.getComputedStyle(t);c=u.w;var d=u.h,f=a(t)?l:s.getPadBorderExtents(t,p),p=s.getMarginExtents(t,p);if(e("webkit")&&i(t)){var h=t.style;0<=c&&!h.width&&(h.width="4px"),0<=d&&!h.height&&(h.height="4px")}0<=c&&(c=Math.max(c-f.w-p.w,0)),0<=d&&(d=Math.max(d-f.h-p.h,0)),o(t,u.l,u.t,c,d)},s.isBodyLtr=function(e){return e=e||t.doc,"ltr"==(t.body(e).dir||e.documentElement.dir||"ltr").toLowerCase()},s.docScroll=function(e){e=e||t.doc;var r=t.doc.parentWindow||t.doc.defaultView;return"pageXOffset"in r?{x:r.pageXOffset,y:r.pageYOffset}:(r=e.documentElement)&&{x:s.fixIeBiDiScrollLeft(r.scrollLeft||0,e),y:r.scrollTop||0}},s.getIeDocumentElementOffset=function(e){return{x:0,y:0}},s.fixIeBiDiScrollLeft=function(r,n){n=n||t.doc;var o=e("ie");if(o&&!s.isBodyLtr(n)){n=n.documentElement;var i=t.global;return 6==o&&i.frameElement&&n.scrollHeight>n.clientHeight&&(r+=n.clientLeft),8>o?r+n.clientWidth-n.scrollWidth:-r}return r},s.position=function(n,o){n=r.byId(n),t.body(n.ownerDocument);var i=n.getBoundingClientRect(),i={x:i.left,y:i.top,w:i.right-i.left,h:i.bottom-i.top};return 9>e("ie")&&(i.x-=0,i.y-=0),o&&(n=s.docScroll(n.ownerDocument),i.x+=n.x,i.y+=n.y),i},s.getMarginSize=function(e,t){return e=r.byId(e),t=s.getMarginExtents(e,t||n.getComputedStyle(e)),e=e.getBoundingClientRect(),{w:e.right-e.left+t.w,h:e.bottom-e.top+t.h}},s.normalizeEvent=function(e){if("layerX"in e||(e.layerX=e.offsetX,e.layerY=e.offsetY),!("pageX"in e)){var t=e.target,t=t&&t.ownerDocument||document,r=t.documentElement;e.pageX=e.clientX+s.fixIeBiDiScrollLeft(r.scrollLeft||0,t),e.pageY=e.clientY+(r.scrollTop||0)}},s})},"dojo/_base/window":function(){define(["./kernel","./lang","../sniff"],function(e,t,r){var n={global:e.global,doc:e.global.document||null,body:function(t){return t=t||e.doc,t.body||t.getElementsByTagName("body")[0]},setContext:function(t,r){e.global=n.global=t,e.doc=n.doc=r},withGlobal:function(t,r,o,i){var a=e.global;try{return e.global=n.global=t,n.withDoc.call(null,t.document,r,o,i)}finally{e.global=n.global=a}},withDoc:function(t,o,i,a){var s,l,u,c=n.doc,p=r("ie");try{return e.doc=n.doc=t,e.isQuirks=0,r("ie")&&(u=t.parentWindow)&&u.navigator&&(s=parseFloat(u.navigator.appVersion.split("MSIE ")[1])||void 0,(l=t.documentMode)&&5!=l&&Math.floor(s)!=l&&(s=l),e.isIE=r.add("ie",s,!0,!0)),i&&"string"==typeof o&&(o=i[o]),o.apply(i,a||[])}finally{e.doc=n.doc=c,e.isQuirks=0,e.isIE=r.add("ie",p,!0,!0)}}};return t.mixin(e,n),n})},"dojo/dom":function(){define(["./sniff","./_base/window","./_base/kernel"],function(e,t,r){if(7>=e("ie"))try{document.execCommand("BackgroundImageCache",!1,!0)}catch(e){}var n={};e("ie")?n.byId=function(e,r){if("string"!=typeof e)return e;var n=r||t.doc;if((r=e&&n.getElementById(e))&&(r.attributes.id.value==e||r.id==e))return r;(n=n.all[e])&&!n.nodeName||(n=[n]);for(var o=0;r=n[o++];)if(r.attributes&&r.attributes.id&&r.attributes.id.value==e||r.id==e)return r}:n.byId=function(e,r){return("string"==typeof e?(r||t.doc).getElementById(e):e)||null},r=r.global.document||null,e.add("dom-contains",!(!r||!r.contains)),n.isDescendant=e("dom-contains")?function(e,t){return!(!(t=n.byId(t))||!t.contains(n.byId(e)))}:function(e,t){try{for(e=n.byId(e),t=n.byId(t);e;){if(e==t)return!0;e=e.parentNode}}catch(e){}return!1},e.add("css-user-select",function(e,t,r){if(!r)return!1;e=r.style,t=["Khtml","O","Moz","Webkit"],r=t.length;var n="userSelect";do{if(void 0!==e[n])return n}while(r--&&(n=t[r]+"UserSelect"));return!1});var o=e("css-user-select");return n.setSelectable=o?function(e,t){n.byId(e).style[o]=t?"":"none"}:function(e,t){e=n.byId(e);var r=e.getElementsByTagName("*"),o=r.length;if(t)for(e.removeAttribute("unselectable");o--;)r[o].removeAttribute("unselectable");else for(e.setAttribute("unselectable","on");o--;)r[o].setAttribute("unselectable","on")},n})},"dojo/dom-style":function(){define(["./sniff","./dom","./_base/window"],function(e,t,r){function n(e,t,r){if(t=t.toLowerCase(),"auto"==r){if("height"==t)return e.offsetHeight;if("width"==t)return e.offsetWidth}if("fontweight"==t)switch(r){case 700:return"bold";default:return"normal"}return t in c||(c[t]=p.test(t)),c[t]?a(e,r):r}var o,i={};o=e("webkit")?function(e){var t;if(1==e.nodeType){var r=e.ownerDocument.defaultView;t=r.getComputedStyle(e,null),!t&&e.style&&(e.style.display="",t=r.getComputedStyle(e,null))}return t||{}}:e("ie")&&9>e("ie")?function(e){return 1==e.nodeType&&e.currentStyle?e.currentStyle:{}}:function(e){if(1===e.nodeType){var t=e.ownerDocument.defaultView;return(t.opener?t:r.global.window).getComputedStyle(e,null)}return{}},i.getComputedStyle=o;var a;a=e("ie")?function(e,t){if(!t)return 0;if("medium"==t)return 4;if(t.slice&&"px"==t.slice(-2))return parseFloat(t);var r=e.style,n=e.runtimeStyle,o=r.left,i=n.left;n.left=e.currentStyle.left;try{r.left=t,t=r.pixelLeft}catch(e){t=0}return r.left=o,n.left=i,t}:function(e,t){return parseFloat(t)||0},i.toPixelValue=a;var s=function(e,t){try{return e.filters.item("DXImageTransform.Microsoft.Alpha")}catch(e){return t?{}:null}},l=9>e("ie")||(e("ie"),0)?function(e){try{return s(e).Opacity/100}catch(e){return 1}}:function(e){return o(e).opacity},u=9>e("ie")||(e("ie"),0)?function(e,t){""===t&&(t=1);var r=100*t;if(1===t?(e.style.zoom="",s(e)&&(e.style.filter=e.style.filter.replace(/\s*progid:DXImageTransform.Microsoft.Alpha\([^\)]+?\)/i,""))):(e.style.zoom=1,s(e)?s(e,1).Opacity=r:e.style.filter+=" progid:DXImageTransform.Microsoft.Alpha(Opacity="+r+")",s(e,1).Enabled=!0),"tr"==e.tagName.toLowerCase())for(e=e.firstChild;e;e=e.nextSibling)"td"==e.tagName.toLowerCase()&&u(e,t);return t}:function(e,t){return e.style.opacity=t},c={left:!0,top:!0},p=/margin|padding|width|height|max|min|offset/,d={cssFloat:1,styleFloat:1,float:1};return i.get=function(e,r){var o=t.byId(e),a=arguments.length;if(2==a&&"opacity"==r)return l(o);r=d[r]?"cssFloat"in o.style?"cssFloat":"styleFloat":r;var s=i.getComputedStyle(o);return 1==a?s:n(o,r,s[r]||o.style[r])},i.set=function(e,r,n){var o=t.byId(e),a=arguments.length,s="opacity"==r;if(r=d[r]?"cssFloat"in o.style?"cssFloat":"styleFloat":r,3==a)return s?u(o,n):o.style[r]=n;for(var l in r)i.set(e,l,r[l]);return i.getComputedStyle(o)},i})},"dojo/mouse":function(){define(["./_base/kernel","./on","./has","./dom","./_base/window"],function(e,t,r,n,o){function i(e,r){var o=function(o,i){return t(o,e,function(e){return r?r(e,i):n.isDescendant(e.relatedTarget,o)?void 0:i.call(this,e)})};return o.bubble=function(t){return i(e,function(e,r){var n=t(e.target),o=e.relatedTarget;if(n&&n!=(o&&1==o.nodeType&&t(o)))return r.call(n,e)})},o}return r={LEFT:0,MIDDLE:1,RIGHT:2,isButton:function(e,t){return e.button==t},isLeft:function(e){return 0==e.button},isMiddle:function(e){return 1==e.button},isRight:function(e){return 2==e.button}},e.mouseButtons=r,{_eventHandler:i,enter:i("mouseover"),leave:i("mouseout"),wheel:"mousewheel",isLeft:r.isLeft,isMiddle:r.isMiddle,isRight:r.isRight}})},"dojo/_base/sniff":function(){define(["./kernel","./lang","../sniff"],function(e,t,r){return r("host-browser")?(e._name="browser",t.mixin(e,{isBrowser:!0,isFF:r("ff"),isIE:r("ie"),isKhtml:0,isWebKit:r("webkit"),isMozilla:r("mozilla"),isMoz:r("mozilla"),isOpera:r("opera"),isSafari:r("safari"),isChrome:r("chrome"),isMac:r("mac"),isIos:r("ios"),isAndroid:0,isWii:0,isQuirks:0,isAir:0}),r):r})},"dojo/keys":function(){define(["./_base/kernel","./sniff"],function(e,t){return e.keys={BACKSPACE:8,TAB:9,CLEAR:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,META:t("webkit")?91:224,PAUSE:19,CAPS_LOCK:20,ESCAPE:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,INSERT:45,DELETE:46,HELP:47,LEFT_WINDOW:91,RIGHT_WINDOW:92,SELECT:93,NUMPAD_0:96,NUMPAD_1:97,NUMPAD_2:98,NUMPAD_3:99,NUMPAD_4:100,NUMPAD_5:101,NUMPAD_6:102,NUMPAD_7:103,NUMPAD_8:104,NUMPAD_9:105,NUMPAD_MULTIPLY:106,NUMPAD_PLUS:107,NUMPAD_ENTER:108,NUMPAD_MINUS:109,NUMPAD_PERIOD:110,NUMPAD_DIVIDE:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,F13:124,F14:125,F15:126,NUM_LOCK:144,SCROLL_LOCK:145,UP_DPAD:175,DOWN_DPAD:176,LEFT_DPAD:177,RIGHT_DPAD:178,copyKey:t("mac")?t("safari")?91:224:17}})},"dojo/_base/unload":function(){define(["./kernel","./lang","../on"],function(e,t,r){var n=window,o={addOnWindowUnload:function(o,i){e.windowUnloaded||r(n,"unload",e.windowUnloaded=function(){}),r(n,"unload",t.hitch(o,i))},addOnUnload:function(e,o){r(n,"beforeunload",t.hitch(e,o))}};return e.addOnWindowUnload=o.addOnWindowUnload,e.addOnUnload=o.addOnUnload,o})},"dojo/_base/html":function(){define("./kernel ../dom ../dom-style ../dom-attr ../dom-prop ../dom-class ../dom-construct ../dom-geometry".split(" "),function(e,t,r,n,o,i,a,s){return e.byId=t.byId,e.isDescendant=t.isDescendant,e.setSelectable=t.setSelectable,e.getAttr=n.get,e.setAttr=n.set,e.hasAttr=n.has,e.removeAttr=n.remove,e.getNodeProp=n.getNodeProp,e.attr=function(e,t,r){return 2==arguments.length?n["string"==typeof t?"get":"set"](e,t):n.set(e,t,r)},e.hasClass=i.contains,e.addClass=i.add,e.removeClass=i.remove,e.toggleClass=i.toggle,e.replaceClass=i.replace,e._toDom=e.toDom=a.toDom,e.place=a.place,e.create=a.create,e.empty=function(e){a.empty(e)},e._destroyElement=e.destroy=function(e){a.destroy(e)},e._getPadExtents=e.getPadExtents=s.getPadExtents,e._getBorderExtents=e.getBorderExtents=s.getBorderExtents,e._getPadBorderExtents=e.getPadBorderExtents=s.getPadBorderExtents,e._getMarginExtents=e.getMarginExtents=s.getMarginExtents,e._getMarginSize=e.getMarginSize=s.getMarginSize,e._getMarginBox=e.getMarginBox=s.getMarginBox,e.setMarginBox=s.setMarginBox,e._getContentBox=e.getContentBox=s.getContentBox,e.setContentSize=s.setContentSize,e._isBodyLtr=e.isBodyLtr=s.isBodyLtr,e._docScroll=e.docScroll=s.docScroll,e._getIeDocumentElementOffset=e.getIeDocumentElementOffset=s.getIeDocumentElementOffset,e._fixIeBiDiScrollLeft=e.fixIeBiDiScrollLeft=s.fixIeBiDiScrollLeft,e.position=s.position,e.marginBox=function(e,t){return t?s.setMarginBox(e,t):s.getMarginBox(e)},e.contentBox=function(e,t){return t?s.setContentSize(e,t):s.getContentBox(e)},e.coords=function(n,o){e.deprecated("dojo.coords()","Use dojo.position() or dojo.marginBox()."),n=t.byId(n);var i=r.getComputedStyle(n),i=s.getMarginBox(n,i);return n=s.position(n,o),i.x=n.x,i.y=n.y,i},e.getProp=o.get,e.setProp=o.set,e.prop=function(e,t,r){return 2==arguments.length?o["string"==typeof t?"get":"set"](e,t):o.set(e,t,r)},e.getStyle=r.get,e.setStyle=r.set,e.getComputedStyle=r.getComputedStyle,e.__toPixelValue=e.toPixelValue=r.toPixelValue,e.style=function(e,t,n){switch(arguments.length){case 1:return r.get(e);case 2:return r["string"==typeof t?"get":"set"](e,t)}return r.set(e,t,n)},e})},"dojo/dom-attr":function(){define("exports ./sniff ./_base/lang ./dom ./dom-style ./dom-prop".split(" "),function(e,t,r,n,o,i){function a(e,t){return!!(e=e.getAttributeNode&&e.getAttributeNode(t))&&e.specified}var s={innerHTML:1,textContent:1,className:1,htmlFor:t("ie"),value:1},l={classname:"class",htmlfor:"for",tabindex:"tabIndex",readonly:"readOnly"};e.has=function(e,t){var r=t.toLowerCase();return s[i.names[r]||t]||a(n.byId(e),l[r]||t)},e.get=function(e,t){e=n.byId(e);var o=t.toLowerCase(),u=i.names[o]||t,c=e[u];return s[u]&&void 0!==c?c:"textContent"==u?i.get(e,u):"href"==u||"boolean"!=typeof c&&!r.isFunction(c)?(t=l[o]||t,a(e,t)?e.getAttribute(t):null):c},e.set=function(t,a,u){if(t=n.byId(t),2==arguments.length){for(var c in a)e.set(t,c,a[c]);return t}c=a.toLowerCase();var p=i.names[c]||a,d=s[p];return"style"==p&&"string"!=typeof u?(o.set(t,u),t):d||"boolean"==typeof u||r.isFunction(u)?i.set(t,a,u):(t.setAttribute(l[c]||a,u),t)},e.remove=function(e,t){n.byId(e).removeAttribute(l[t.toLowerCase()]||t)},e.getNodeProp=function(e,t){e=n.byId(e);var r=t.toLowerCase(),o=i.names[r]||t;return o in e&&"href"!=o?e[o]:(t=l[r]||t,a(e,t)?e.getAttribute(t):null)}})},"dojo/dom-prop":function(){define("exports ./_base/kernel ./sniff ./_base/lang ./dom ./dom-style ./dom-construct ./_base/connect".split(" "),function(e,t,r,n,o,i,a,s){var l={},u=1,c=t._scopeName+"attrid";e.names={class:"className",for:"htmlFor",tabindex:"tabIndex",readonly:"readOnly",colspan:"colSpan",frameborder:"frameBorder",rowspan:"rowSpan",textcontent:"textContent",valuetype:"valueType"},e.get=function(t,r){t=o.byId(t);var n=r.toLowerCase();return t[e.names[n]||r]},e.set=function(t,p,d){if(t=o.byId(t),2==arguments.length&&"string"!=typeof p){for(var f in p)e.set(t,f,p[f]);return t}if(f=p.toLowerCase(),"style"==(f=e.names[f]||p)&&"string"!=typeof d)return i.set(t,d),t;if("innerHTML"==f)return r("ie")&&t.tagName.toLowerCase()in{col:1,colgroup:1,table:1,tbody:1,tfoot:1,thead:1,tr:1,title:1}?(a.empty(t),t.appendChild(a.toDom(d,t.ownerDocument))):t[f]=d,t;if(n.isFunction(d)){var h=t[c];h||(h=u++,t[c]=h),l[h]||(l[h]={});var y=l[h][f];if(y)s.disconnect(y);else try{delete t[f]}catch(e){}return d?l[h][f]=s.connect(t,f,d):t[f]=null,t}return t[f]=d,t}})},"dojo/dom-construct":function(){define("exports ./_base/kernel ./sniff ./_base/window ./dom ./dom-attr".split(" "),function(e,t,r,n,o,i){function a(e,t){var r=t.parentNode;r&&r.insertBefore(e,t)}function s(e){if("innerHTML"in e)try{return void(e.innerHTML="")}catch(e){}for(var t;t=e.lastChild;)e.removeChild(t)}var l,u={option:["select"],tbody:["table"],thead:["table"],tfoot:["table"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","thead","tr"],legend:["fieldset"],caption:["table"],colgroup:["table"],col:["table","colgroup"],li:["ul"]},c=/<\s*([\w\:]+)/,p={},d=0,f="__"+t._scopeName+"ToDomId";for(l in u)u.hasOwnProperty(l)&&(t=u[l],t.pre="option"==l?'<select multiple="multiple">':"<"+t.join("><")+">",t.post="</"+t.reverse().join("></")+">");var h;8>=r("ie")&&(h=function(e){e.__dojo_html5_tested="yes";var t=y("div",{innerHTML:"<nav>a</nav>",style:{visibility:"hidden"}},e.body);1!==t.childNodes.length&&"abbr article aside audio canvas details figcaption figure footer header hgroup mark meter nav output progress section summary time video".replace(/\b\w+\b/g,function(t){e.createElement(t)}),m(t)}),e.toDom=function(e,t){t=t||n.doc;var o=t[f];o||(t[f]=o=++d+"",p[o]=t.createElement("div")),8>=r("ie")&&!t.__dojo_html5_tested&&t.body&&h(t),e+="";var i=e.match(c),a=i?i[1].toLowerCase():"",o=p[o];if(i&&u[a])for(i=u[a],o.innerHTML=i.pre+e+i.post,e=i.length;e;--e)o=o.firstChild;else o.innerHTML=e;if(1==o.childNodes.length)return o.removeChild(o.firstChild);for(e=t.createDocumentFragment();t=o.firstChild;)e.appendChild(t);return e},e.place=function(t,r,n){if(r=o.byId(r),"string"==typeof t&&(t=/^\s*</.test(t)?e.toDom(t,r.ownerDocument):o.byId(t)),"number"==typeof n){var i=r.childNodes;!i.length||i.length<=n?r.appendChild(t):a(t,i[0>n?0:n])}else switch(n){case"before":a(t,r);break;case"after":n=t,(i=r.parentNode)&&(i.lastChild==r?i.appendChild(n):i.insertBefore(n,r.nextSibling));break;case"replace":r.parentNode.replaceChild(t,r);break;case"only":e.empty(r),r.appendChild(t);break;case"first":if(r.firstChild){a(t,r.firstChild);break}default:r.appendChild(t)}return t};var y=e.create=function(t,r,a,s){var l=n.doc;return a&&(a=o.byId(a),l=a.ownerDocument),"string"==typeof t&&(t=l.createElement(t)),r&&i.set(t,r),a&&e.place(t,a,s),t};e.empty=function(e){s(o.byId(e))};var m=e.destroy=function(e){if(e=o.byId(e)){var t=e;e=e.parentNode,t.firstChild&&s(t),e&&(r("ie")&&e.canHaveChildren&&"removeNode"in t?t.removeNode(!1):e.removeChild(t))}}})},"dojo/dom-class":function(){define(["./_base/lang","./_base/array","./dom"],function(e,t,r){function n(e){return"string"==typeof e||e instanceof String?e&&!i.test(e)?(a[0]=e,a):(e=e.split(i),e.length&&!e[0]&&e.shift(),e.length&&!e[e.length-1]&&e.pop(),e):e?t.filter(e,function(e){return e}):[]}var o,i=/\s+/,a=[""],s={};return o={contains:function(e,t){return 0<=(" "+r.byId(e).className+" ").indexOf(" "+t+" ")},add:function(e,t){e=r.byId(e),t=n(t);var o,i=e.className,i=i?" "+i+" ":" ";o=i.length;for(var a,s=0,l=t.length;s<l;++s)(a=t[s])&&0>i.indexOf(" "+a+" ")&&(i+=a+" ");o<i.length&&(e.className=i.substr(1,i.length-2))},remove:function(t,o){t=r.byId(t);var i;if(void 0!==o){o=n(o),i=" "+t.className+" ";for(var a=0,s=o.length;a<s;++a)i=i.replace(" "+o[a]+" "," ");i=e.trim(i)}else i="";t.className!=i&&(t.className=i)},replace:function(e,t,n){e=r.byId(e),s.className=e.className,o.remove(s,n),o.add(s,t),e.className!==s.className&&(e.className=s.className)},toggle:function(e,t,i){if(e=r.byId(e),void 0===i){t=n(t);for(var a,s=0,l=t.length;s<l;++s)a=t[s],o[o.contains(e,a)?"remove":"add"](e,a)}else o[i?"add":"remove"](e,t);return i}}})},"dojo/_base/array":function(){define(["./kernel","../has","./lang"],function(e,t,r){function n(e){return s[e]=new Function("item","index","array",e)}function o(e){var t=!e;return function(r,o,i){var a,l=0,u=r&&r.length||0;if(u&&"string"==typeof r&&(r=r.split("")),"string"==typeof o&&(o=s[o]||n(o)),i){for(;l<u;++l)if(a=!o.call(i,r[l],l,r),e^a)return!a}else for(;l<u;++l)if(a=!o(r[l],l,r),e^a)return!a;return t}}function i(e){var t=1,r=0,n=0;return e||(t=r=n=-1),function(o,i,s,u){if(u&&0<t)return l.lastIndexOf(o,i,s);u=o&&o.length||0;var c=e?u+n:r;for(s===a?s=e?r:u+n:0>s?0>(s=u+s)&&(s=r):s=s>=u?u+n:s,u&&"string"==typeof o&&(o=o.split(""));s!=c;s+=t)if(o[s]==i)return s;return-1}}var a,s={},l={every:o(!1),some:o(!0),indexOf:i(!0),lastIndexOf:i(!1),forEach:function(e,t,r){var o=0,i=e&&e.length||0;if(i&&"string"==typeof e&&(e=e.split("")),"string"==typeof t&&(t=s[t]||n(t)),r)for(;o<i;++o)t.call(r,e[o],o,e);else for(;o<i;++o)t(e[o],o,e)},map:function(e,t,r,o){var i=0,a=e&&e.length||0;if(o=new(o||Array)(a),a&&"string"==typeof e&&(e=e.split("")),"string"==typeof t&&(t=s[t]||n(t)),r)for(;i<a;++i)o[i]=t.call(r,e[i],i,e);else for(;i<a;++i)o[i]=t(e[i],i,e);return o},filter:function(e,t,r){var o,i=0,a=e&&e.length||0,l=[];if(a&&"string"==typeof e&&(e=e.split("")),"string"==typeof t&&(t=s[t]||n(t)),r)for(;i<a;++i)o=e[i],t.call(r,o,i,e)&&l.push(o);else for(;i<a;++i)o=e[i],t(o,i,e)&&l.push(o);return l},clearCache:function(){s={}}};return r.mixin(e,l),l})},"dojo/_base/NodeList":function(){define(["./kernel","../query","./array","./html","../NodeList-dom"],function(e,t,r){t=t.NodeList;var n=t.prototype;return n.connect=t._adaptAsForEach(function(){return e.connect.apply(this,arguments)}),n.coords=t._adaptAsMap(e.coords),t.events="blur focus change click error keydown keypress keyup load mousedown mouseenter mouseleave mousemove mouseout mouseover mouseup submit".split(" "),r.forEach(t.events,function(e){var t="on"+e;n[t]=function(e,r){return this.connect(t,e,r)}}),e.NodeList=t})},"dojo/query":function(){define("./_base/kernel ./has ./dom ./on ./_base/array ./_base/lang ./selector/_loader ./selector/_loader!default".split(" "),function(e,t,r,n,o,i,a,s){function l(e,t){var n=function(n,o){return"string"!=typeof o||(o=r.byId(o))?(n="string"==typeof n?e(n,o):n?n.end&&n.on?n:[n]:[],n.end&&n.on?n:new t(n)):new t([])};if(n.matches=e.match||function(e,t,r){return 0<n.filter([e],t,r).length},n.filter=e.filter||function(e,t,r){return n(t,r).filter(function(t){return-1<o.indexOf(e,t)})},"function"!=typeof e){var i=e.search;e=function(e,t){return i(t||document,e)}}return n}var u=Array.prototype,c=u.slice,p=u.concat,d=o.forEach,f=function(t,r,n){return r=[0].concat(c.call(r,0)),n=n||e.global,function(e){return r[0]=e,t.apply(n,r)}},h=function(e){var t=this instanceof y&&1;"number"==typeof e&&(e=Array(e));var r=e&&"length"in e?e:arguments;if(t||!r.sort){for(var n=t?this:[],o=n.length=r.length,a=0;a<o;a++)n[a]=r[a];if(t)return n;r=n}return i._mixin(r,m),r._NodeListCtor=function(e){return y(e)},r},y=h,m=y.prototype=[];y._wrap=m._wrap=function(e,t,r){return e=new(r||this._NodeListCtor||y)(e),t?e._stash(t):e},y._adaptAsMap=function(e,t){return function(){return this.map(f(e,arguments,t))}},y._adaptAsForEach=function(e,t){return function(){return this.forEach(f(e,arguments,t)),this}},y._adaptAsFilter=function(e,t){return function(){return this.filter(f(e,arguments,t))}},y._adaptWithCondition=function(t,r,n){return function(){var o=arguments,i=f(t,o,n);return r.call(n||e.global,o)?this.map(i):(this.forEach(i),this)}},d(["slice","splice"],function(e){var t=u[e];m[e]=function(){return this._wrap(t.apply(this,arguments),"slice"==e?this:null)}}),d(["indexOf","lastIndexOf","every","some"],function(t){var r=o[t];m[t]=function(){return r.apply(e,[this].concat(c.call(arguments,0)))}}),i.extend(h,{constructor:y,_NodeListCtor:y,toString:function(){return this.join(",")},_stash:function(e){return this._parent=e,this},on:function(e,t){var r=this.map(function(r){return n(r,e,t)});return r.remove=function(){for(var e=0;e<r.length;e++)r[e].remove()},r},end:function(){return this._parent?this._parent:new this._NodeListCtor(0)},concat:function(e){var t=c.call(this,0),r=o.map(arguments,function(e){return c.call(e,0)});return this._wrap(p.apply(t,r),this)},map:function(e,t){return this._wrap(o.map(this,e,t),this)},forEach:function(e,t){return d(this,e,t),this},filter:function(e){var t=arguments,r=this,n=0;if("string"==typeof e){if(r=g._filterResult(this,t[0]),1==t.length)return r._stash(this);n=1}return this._wrap(o.filter(r,t[n],t[n+1]),this)},instantiate:function(e,t){var r=i.isFunction(e)?e:i.getObject(e);return t=t||{},this.forEach(function(e){new r(t,e)})},at:function(){var e=new this._NodeListCtor(0);return d(arguments,function(t){0>t&&(t=this.length+t),this[t]&&e.push(this[t])},this),e._stash(this)}});var g=l(s,h);return e.query=l(s,function(e){return h(e)}),g.load=function(e,t,r){a.load(e,t,function(e){r(l(e,h))})},e._filterQueryResult=g._filterResult=function(e,t,r){return new h(g.filter(e,t,r))},e.NodeList=g.NodeList=h,g})},"dojo/selector/_loader":function(){define(["../has","require"],function(e,t){"undefined"!=typeof document&&document.createElement("div");var r;return{load:function(n,o,i,a){if(a&&a.isBuild)i();else{if(a=t,n="default"==n?e("config-selectorEngine")||"css3":n,n="css2"==n||"lite"==n?"./lite":"css2.1"==n?"./lite":"css3"==n?"./lite":"acme"==n?"./acme":(a=o)&&n,"?"==n.charAt(n.length-1)){n=n.substring(0,n.length-1);var s=!0}if(s&&(e("dom-compliant-qsa")||r))return i(r);a([n],function(e){"./lite"!=n&&(r=e),i(e)})}}}})},"dojo/selector/lite":function(){define(["../has","../_base/kernel"],function(e,t){var r=document.createElement("div"),n=r.matches||r.webkitMatchesSelector||r.mozMatchesSelector||r.msMatchesSelector||r.oMatchesSelector,o=r.querySelectorAll,i=/([^\s,](?:"(?:\\.|[^"])+"|'(?:\\.|[^'])+'|[^,])*)/g,a=function(r,n){var i=n?n.ownerDocument||n:t.doc||document,l=(o?/^([\w]*)#([\w\-]+$)|^(\.)([\w\-\*]+$)|^(\w+$)/:/^([\w]*)#([\w\-]+)(?:\s+(.*))?$|(?:^|(>|.+\s+))([\w\-\*]+)(\S*$)/).exec(r);if(n=n||i,l){var u=(e("ie"),null!==n.parentNode&&9!==n.nodeType&&n.parentNode===i);if(l[2]&&u){var c=t.byId?t.byId(l[2],i):i.getElementById(l[2]);if(!c||l[1]&&l[1]!=c.tagName.toLowerCase())return[];if(n!=i)for(r=c;r!=n;)if(!(r=r.parentNode))return[];return l[3]?a(l[3],c):[c]}if(l[3]&&n.getElementsByClassName)return n.getElementsByClassName(l[4]);if(l[5]){if(c=n.getElementsByTagName(l[5]),!l[4]&&!l[6])return c;r=(l[4]||"")+l[6]}}if(o)return 1===n.nodeType&&"object"!==n.nodeName.toLowerCase()?s(n,r,n.querySelectorAll):n.querySelectorAll(r);for(c||(c=n.getElementsByTagName("*")),l=[],i=0,u=c.length;i<u;i++){var p=c[i];1==p.nodeType&&(void 0)(p,r,n)&&l.push(p)}return l},s=function(e,t,r){var n=e,o=e.getAttribute("id"),a=o||"__dojo__",s=e.parentNode,l=/^\s*[+~]/.test(t);if(l&&!s)return[];for(o?a=a.replace(/'/g,"\\$&"):e.setAttribute("id",a),l&&s&&(e=e.parentNode),t=t.match(i),s=0;s<t.length;s++)t[s]="[id='"+a+"'] "+t[s];t=t.join(",");try{return r.call(e,t)}finally{o||n.removeAttribute("id")}};return a.match=n?function(e,t,r){return r&&9!=r.nodeType?s(r,t,function(t){return n.call(e,t)}):n.call(e,t)}:void 0,a})},"dojo/NodeList-dom":function(){define("./_base/kernel ./query ./_base/array ./_base/lang ./dom-class ./dom-construct ./dom-geometry ./dom-attr ./dom-style".split(" "),function(e,t,r,n,o,i,a,s,l){function u(e){return function(t,r,n){return 2==arguments.length?e["string"==typeof r?"get":"set"](t,r):e.set(t,r,n)}}var c=function(e){return 1==e.length&&"string"==typeof e[0]},p=function(e){var t=e.parentNode;t&&t.removeChild(e)},d=t.NodeList,f=d._adaptWithCondition,h=d._adaptAsForEach,y=d._adaptAsMap;return n.extend(d,{_normalize:function(t,r){var o=!0===t.parse;if("string"==typeof t.template){var a=t.templateFunc||e.string&&e.string.substitute;t=a?a(t.template,t):t}return a=typeof t,"string"==a||"number"==a?(t=i.toDom(t,r&&r.ownerDocument),t=11==t.nodeType?n._toArray(t.childNodes):[t]):n.isArrayLike(t)?n.isArray(t)||(t=n._toArray(t)):t=[t],o&&(t._runParse=!0),t},_cloneNode:function(e){return e.cloneNode(!0)},_place:function(t,r,n,o){if(1==r.nodeType||"only"!=n)for(var a,s=t.length,l=s-1;0<=l;l--){var u=o?this._cloneNode(t[l]):t[l];if(t._runParse&&e.parser&&e.parser.parse)for(a||(a=r.ownerDocument.createElement("div")),a.appendChild(u),e.parser.parse(a),u=a.firstChild;a.firstChild;)a.removeChild(a.firstChild);l==s-1?i.place(u,r,n):r.parentNode.insertBefore(u,r),r=u}},position:y(a.position),attr:f(u(s),c),style:f(u(l),c),addClass:h(o.add),removeClass:h(o.remove),toggleClass:h(o.toggle),replaceClass:h(o.replace),empty:h(i.empty),removeAttr:h(s.remove),marginBox:y(a.getMarginBox),place:function(e,r){var n=t(e)[0];return this.forEach(function(e){i.place(e,n,r)})},orphan:function(e){return(e?t._filterResult(this,e):this).forEach(p)},adopt:function(e,r){return t(e).place(this[0],r)._stash(this)},query:function(e){if(!e)return this;var r=new d;return this.map(function(n){t(e,n).forEach(function(e){void 0!==e&&r.push(e)})}),r._stash(this)},filter:function(e){var n=arguments,o=this,i=0;if("string"==typeof e){if(o=t._filterResult(this,n[0]),1==n.length)return o._stash(this);i=1}return this._wrap(r.filter(o,n[i],n[i+1]),this)},addContent:function(e,t){e=this._normalize(e,this[0]);for(var r,n=0;r=this[n];n++)e.length?this._place(e,r,t,0<n):i.empty(r);return this}}),d})},"dojo/_base/xhr":function(){define("./kernel ./sniff require ../io-query ../dom ../dom-form ./Deferred ./config ./json ./lang ./array ../on ../aspect ../request/watch ../request/xhr ../request/util".split(" "),function(e,t,r,n,o,i,a,s,l,u,c,p,d,f,h,y){e._xhrObj=h._create;var m=e.config;e.objectToQuery=n.objectToQuery,e.queryToObject=n.queryToObject,e.fieldToObject=i.fieldToObject,e.formToObject=i.toObject,e.formToQuery=i.toQuery,e.formToJson=i.toJson,e._blockAsync=!1;var g=e._contentHandlers=e.contentHandlers={text:function(e){return e.responseText},json:function(e){return l.fromJson(e.responseText||null)},"json-comment-filtered":function(e){s.useCommentedJson||console.warn("Consider using the standard mimetype:application/json. json-commenting can introduce security issues. To decrease the chances of hijacking, use the standard the 'json' handler and prefix your json with: {}&&\nUse djConfig.useCommentedJson=true to turn off this message."),e=e.responseText;var t=e.indexOf("/*"),r=e.lastIndexOf("*/");if(-1==t||-1==r)throw Error("JSON was not comment filtered");return l.fromJson(e.substring(t+2,r))},javascript:function(t){return e.eval(t.responseText)},xml:function(e){var r=e.responseXML;if(r&&!r.querySelectorAll&&(r=(new DOMParser).parseFromString(e.responseText,"application/xml")),t("ie")&&(!r||!r.documentElement)){var n=function(e){return"MSXML"+e+".DOMDocument"},n=["Microsoft.XMLDOM",n(6),n(4),n(3),n(2)];c.some(n,function(t){try{var n=new ActiveXObject(t);n.async=!1,n.loadXML(e.responseText),r=n}catch(e){return!1}return!0})}return r},"json-comment-optional":function(e){return e.responseText&&/^[^{\[]*\/\*/.test(e.responseText)?g["json-comment-filtered"](e):g.json(e)}};g.arraybuffer=g.blob=g.document=function(e,t){return e.response},e._ioSetArgs=function(t,r,s,l){var c={args:t,url:t.url},p=null;if(t.form){var p=o.byId(t.form),d=p.getAttributeNode("action");c.url=c.url||(d?d.value:e.doc?e.doc.URL:null),p=i.toObject(p)}d={},p&&u.mixin(d,p),t.content&&u.mixin(d,t.content),t.preventCache&&(d["dojo.preventCache"]=(new Date).valueOf()),c.query=n.objectToQuery(d),c.handleAs=t.handleAs||"text";var f=new a(function(e){e.canceled=!0,r&&r(e);var t=e.ioArgs.error;return t||(t=Error("request cancelled"),t.dojoType="cancel",e.ioArgs.error=t),t});f.addCallback(s);var h=t.load;h&&u.isFunction(h)&&f.addCallback(function(e){return h.call(t,e,c)});var y=t.error;y&&u.isFunction(y)&&f.addErrback(function(e){return y.call(t,e,c)});var g=t.handle;return g&&u.isFunction(g)&&f.addBoth(function(e){return g.call(t,e,c)}),f.addErrback(function(e){return l(e,f)}),m.ioPublish&&e.publish&&!1!==c.args.ioPublish&&(f.addCallbacks(function(t){return e.publish("/dojo/io/load",[f,t]),t},function(t){return e.publish("/dojo/io/error",[f,t]),t}),f.addBoth(function(t){return e.publish("/dojo/io/done",[f,t]),t})),f.ioArgs=c,f};var v=function(e){return e=g[e.ioArgs.handleAs](e.ioArgs.xhr,e.ioArgs),void 0===e?null:e},b=function(e,t){return t.ioArgs.args.failOk||console.error(e),e},w=function(t){0>=S&&(S=0,m.ioPublish&&e.publish&&(!t||t&&!1!==t.ioArgs.args.ioPublish)&&e.publish("/dojo/io/stop"))},S=0;return d.after(f,"_onAction",function(){--S}),d.after(f,"_onInFlight",w),e._ioCancelAll=f.cancelAll,e._ioNotifyStart=function(t){m.ioPublish&&e.publish&&!1!==t.ioArgs.args.ioPublish&&(S||e.publish("/dojo/io/start"),S+=1,e.publish("/dojo/io/send",[t]))},e._ioWatch=function(e,t,r,n){e.ioArgs.options=e.ioArgs.args,u.mixin(e,{response:e.ioArgs,isValid:function(r){return t(e)},isReady:function(t){return r(e)},handleResponse:function(t){return n(e)}}),f(e),w(e)},e._ioAddQueryToUrl=function(e){e.query.length&&(e.url+=(-1==e.url.indexOf("?")?"?":"&")+e.query,e.query=null)},e.xhr=function(t,r,n){var o,i=e._ioSetArgs(r,function(e){o&&o.cancel()},v,b),a=i.ioArgs;"postData"in r?a.query=r.postData:"putData"in r?a.query=r.putData:"rawBody"in r?a.query=r.rawBody:(2<arguments.length&&!n||-1==="POST|PUT".indexOf(t.toUpperCase()))&&e._ioAddQueryToUrl(a);var s={method:t,handleAs:{arraybuffer:1,blob:1,document:1}[r.handleAs]?r.handleAs:"text",responseType:r.responseType,timeout:r.timeout,withCredentials:r.withCredentials,ioArgs:a};void 0!==r.headers&&(s.headers=r.headers),void 0!==r.contentType&&(s.headers||(s.headers={}),s.headers["Content-Type"]=r.contentType),void 0!==a.query&&(s.data=a.query),void 0!==r.sync&&(s.sync=r.sync),e._ioNotifyStart(i);try{o=h(a.url,s,!0)}catch(e){return i.cancel(),i}return i.ioArgs.xhr=o.response.xhr,o.then(function(){i.resolve(i)}).otherwise(function(e){a.error=e,e.response&&(e.status=e.response.status,e.responseText=e.response.text,e.xhr=e.response.xhr),i.reject(e)}),i},e.xhrGet=function(t){return e.xhr("GET",t)},e.rawXhrPost=e.xhrPost=function(t){return e.xhr("POST",t,!0)},e.rawXhrPut=e.xhrPut=function(t){return e.xhr("PUT",t,!0)},e.xhrDelete=function(t){return e.xhr("DELETE",t)},e._isDocumentOk=function(e){return y.checkStatus(e.status)},e._getText=function(t){var r;return e.xhrGet({url:t,sync:!0,load:function(e){r=e}}),r},u.mixin(e.xhr,{_xhrObj:e._xhrObj,fieldToObject:i.fieldToObject,formToObject:i.toObject,objectToQuery:n.objectToQuery,formToQuery:i.toQuery,formToJson:i.toJson,queryToObject:n.queryToObject,contentHandlers:g,_ioSetArgs:e._ioSetArgs,_ioCancelAll:e._ioCancelAll,_ioNotifyStart:e._ioNotifyStart,_ioWatch:e._ioWatch,_ioAddQueryToUrl:e._ioAddQueryToUrl,_isDocumentOk:e._isDocumentOk,_getText:e._getText,get:e.xhrGet,post:e.xhrPost,put:e.xhrPut,del:e.xhrDelete}),e.xhr})},"dojo/io-query":function(){define(["./_base/lang"],function(e){var t={};return{objectToQuery:function(r){var n,o=encodeURIComponent,i=[];for(n in r){var a=r[n];if(a!=t[n]){var s=o(n)+"=";if(e.isArray(a))for(var l=0,u=a.length;l<u;++l)i.push(s+o(a[l]));else i.push(s+o(a))}}return i.join("&")},queryToObject:function(t){var r=decodeURIComponent;t=t.split("&");for(var n,o,i={},a=0,s=t.length;a<s;++a)if(o=t[a],o.length){var l=o.indexOf("=");0>l?(n=r(o),o=""):(n=r(o.slice(0,l)),o=r(o.slice(l+1))),"string"==typeof i[n]&&(i[n]=[i[n]]),e.isArray(i[n])?i[n].push(o):i[n]=o}return i}}})},"dojo/dom-form":function(){define(["./_base/lang","./dom","./io-query","./json"],function(e,t,r,n){var o={fieldToObject:function(e){var r=null;if(e=t.byId(e)){var n=e.name,o=(e.type||"").toLowerCase();if(n&&o&&!e.disabled)if("radio"==o||"checkbox"==o)e.checked&&(r=e.value);else if(e.multiple)for(r=[],e=[e.firstChild];e.length;)for(n=e.pop();n;n=n.nextSibling){if(1!=n.nodeType||"option"!=n.tagName.toLowerCase()){n.nextSibling&&e.push(n.nextSibling),n.firstChild&&e.push(n.firstChild);break}n.selected&&r.push(n.value)}else r=e.value}return r},toObject:function(r){var n={};r=t.byId(r).elements;for(var i=0,a=r.length;i<a;++i){var s=r[i],l=s.name,u=(s.type||"").toLowerCase();if(l&&u&&0>"file|submit|image|reset|button".indexOf(u)&&!s.disabled){var c=n,p=l,s=o.fieldToObject(s);if(null!==s){var d=c[p];"string"==typeof d?c[p]=[d,s]:e.isArray(d)?d.push(s):c[p]=s}"image"==u&&(n[l+".x"]=n[l+".y"]=n[l].x=n[l].y=0)}}return n},toQuery:function(e){return r.objectToQuery(o.toObject(e))},toJson:function(e,t){return n.stringify(o.toObject(e),null,t?4:0)}};return o})},"dojo/json":function(){define(["./has"],function(e){return JSON})},"dojo/_base/Deferred":function(){define("./kernel ../Deferred ../promise/Promise ../errors/CancelError ../has ./lang ../when".split(" "),function(e,t,r,n,o,i,a){var s=function(){},l=Object.freeze||function(){},u=e.Deferred=function(e){function a(e){if(d)throw Error("This deferred has already been resolved");p=e,d=!0,c()}function c(){for(var e;!e&&g;){var r=g;g=g.next,(e=r.progress==s)&&(d=!1);var n=y?r.error:r.resolved;if(o("config-useDeferredInstrumentation")&&y&&t.instrumentRejected&&t.instrumentRejected(p,!!n),n)try{var a=n(p);a&&"function"==typeof a.then?a.then(i.hitch(r.deferred,"resolve"),i.hitch(r.deferred,"reject"),i.hitch(r.deferred,"progress")):(n=e&&void 0===a,e&&!n&&(y=a instanceof Error),r.deferred[n&&y?"reject":"resolve"](n?p:a))}catch(e){r.deferred.reject(e)}else y?r.deferred.reject(p):r.deferred.resolve(p)}}var p,d,f,h,y,m,g,v=this.promise=new r;this.isResolved=v.isResolved=function(){return 0==h},this.isRejected=v.isRejected=function(){return 1==h},this.isFulfilled=v.isFulfilled=function(){return 0<=h},this.isCanceled=v.isCanceled=function(){return f},this.resolve=this.callback=function(e){this.fired=h=0,this.results=[e,null],a(e)},this.reject=this.errback=function(e){y=!0,this.fired=h=1,o("config-useDeferredInstrumentation")&&t.instrumentRejected&&t.instrumentRejected(e,!!g),a(e),this.results=[null,e]},this.progress=function(e){for(var t=g;t;){var r=t.progress;r&&r(e),t=t.next}},this.addCallbacks=function(e,t){return this.then(e,t,s),this},v.then=this.then=function(e,t,r){var n=r==s?this:new u(v.cancel);return e={resolved:e,error:t,progress:r,deferred:n},g?m=m.next=e:g=m=e,d&&c(),n.promise};var b=this;v.cancel=this.cancel=function(){if(!d){var t=e&&e(b);d||(t instanceof Error||(t=new n(t)),t.log=!1,b.reject(t))}f=!0},l(v)};return i.extend(u,{addCallback:function(t){return this.addCallbacks(i.hitch.apply(e,arguments))},addErrback:function(t){return this.addCallbacks(null,i.hitch.apply(e,arguments))},addBoth:function(t){var r=i.hitch.apply(e,arguments);return this.addCallbacks(r,r)},fired:-1}),u.when=e.when=a,u})},"dojo/Deferred":function(){define(["./has","./_base/lang","./errors/CancelError","./promise/Promise","./has!config-deferredInstrumentation?./promise/instrumentation"],function(e,t,r,n,o){var i=Object.freeze||function(){},a=function(t,r,n,o,i){for(e("config-deferredInstrumentation")&&2===r&&c.instrumentRejected&&0===t.length&&c.instrumentRejected(n,!1,o,i),i=0;i<t.length;i++)s(t[i],r,n,o)},s=function(t,r,n,o){var i=t[r],a=t.deferred;if(i)try{var s=i(n);if(0===r)void 0!==s&&u(a,r,s);else{if(s&&"function"==typeof s.then)return t.cancel=s.cancel,void s.then(l(a,1),l(a,2),l(a,0));u(a,1,s)}}catch(e){u(a,2,e)}else u(a,r,n);e("config-deferredInstrumentation")&&2===r&&c.instrumentRejected&&c.instrumentRejected(n,!!i,o,a.promise)},l=function(e,t){return function(r){u(e,t,r)}},u=function(e,t,r){if(!e.isCanceled())switch(t){case 0:e.progress(r);break;case 1:e.resolve(r);break;case 2:e.reject(r)}},c=function(t){var o,l,u,p=this.promise=new n,d=this,f=!1,h=[];e("config-deferredInstrumentation")&&Error.captureStackTrace&&(Error.captureStackTrace(d,c),Error.captureStackTrace(p,c)),this.isResolved=p.isResolved=function(){return 1===o},this.isRejected=p.isRejected=function(){return 2===o},this.isFulfilled=p.isFulfilled=function(){return!!o},this.isCanceled=p.isCanceled=function(){return f},this.progress=function(e,t){if(o){if(!0===t)throw Error("This deferred has already been fulfilled.");return p}return a(h,0,e,null,d),p},this.resolve=function(e,t){if(o){if(!0===t)throw Error("This deferred has already been fulfilled.");return p}return a(h,o=1,l=e,null,d),h=null,p};var y=this.reject=function(t,r){if(o){if(!0===r)throw Error("This deferred has already been fulfilled.");return p}return e("config-deferredInstrumentation")&&Error.captureStackTrace&&Error.captureStackTrace(u={},y),a(h,o=2,l=t,u,d),h=null,p};this.then=p.then=function(e,t,r){var n=[r,e,t];return n.cancel=p.cancel,n.deferred=new c(function(e){return n.cancel&&n.cancel(e)}),o&&!h?s(n,o,l,u):h.push(n),n.deferred.promise},this.cancel=p.cancel=function(e,n){if(o){if(!0===n)throw Error("This deferred has already been fulfilled.")}else{if(t&&(n=t(e),e=void 0===n?e:n),f=!0,!o)return void 0===e&&(e=new r),y(e),e;if(2===o&&l===e)return e}},i(p)};return c.prototype.toString=function(){return"[object Deferred]"},o&&o(c),c})},"dojo/errors/CancelError":function(){define(["./create"],function(e){return e("CancelError",null,null,{dojoType:"cancel",log:!1})})},"dojo/errors/create":function(){define(["../_base/lang"],function(e){return function(t,r,n,o){n=n||Error;var i=function(e){if(n===Error){Error.captureStackTrace&&Error.captureStackTrace(this,i);var t,o=Error.call(this,e);for(t in o)o.hasOwnProperty(t)&&(this[t]=o[t]);this.message=e,this.stack=o.stack}else n.apply(this,arguments);r&&r.apply(this,arguments)};return i.prototype=e.delegate(n.prototype,o),i.prototype.name=t,i.prototype.constructor=i}})},"dojo/promise/Promise":function(){define(["../_base/lang"],function(e){function t(){throw new TypeError("abstract")}return e.extend(function(){},{then:function(e,r,n){t()},cancel:function(e,r){t()},isResolved:function(){t()},isRejected:function(){t()},isFulfilled:function(){t()},isCanceled:function(){t()},finally:function(e){return this.then(function(t){var r=e();return r&&"function"==typeof r.then?r.then(function(){return t}):t},function(t){var r=e();if(r&&"function"==typeof r.then)return r.then(function(){throw t});throw t})},always:function(e){return this.then(e,e)},catch:function(e){return this.then(null,e)},otherwise:function(e){return this.then(null,e)},trace:function(){return this},traceRejected:function(){return this},toString:function(){return"[object Promise]"}})})},"dojo/when":function(){define(["./Deferred","./promise/Promise"],function(e,t){return function(r,n,o,i){var a=r&&"function"==typeof r.then,s=a&&r instanceof t;return a?(s||(a=new e(r.cancel),r.then(a.resolve,a.reject,a.progress),r=a.promise),n||o||i?r.then(n,o,i):r):1<arguments.length?n?n(r):r:(new e).resolve(r)}})},"dojo/_base/json":function(){define(["./kernel","../json"],function(c,a){return c.fromJson=function(a){return eval("("+a+")")},c._escapeString=a.stringify,c.toJsonIndentStr="\t",c.toJson=function(e,t){return a.stringify(e,function(e,t){return t&&"function"==typeof(e=t.__json__||t.json)?e.call(t):t},t&&c.toJsonIndentStr)},c})},"dojo/request/watch":function(){define("./util ../errors/RequestTimeoutError ../errors/CancelError ../_base/array ../has!host-browser?../_base/window: ../has!host-browser?dom-addeventlistener?:../on:".split(" "),function(e,t,r,n,o,i){function a(){for(var e,r=+new Date,n=0;n<u.length&&(e=u[n]);n++){var o=e.response,i=o.options;e.isCanceled&&e.isCanceled()||e.isValid&&!e.isValid(o)?(u.splice(n--,1),s._onAction&&s._onAction()):e.isReady&&e.isReady(o)?(u.splice(n--,1),e.handleResponse(o),s._onAction&&s._onAction()):e.startTime&&e.startTime+(i.timeout||0)<r&&(u.splice(n--,1),e.cancel(new t("Timeout exceeded",o)),s._onAction&&s._onAction())}s._onInFlight&&s._onInFlight(e),u.length||(clearInterval(l),l=null)}function s(e){e.response.options.timeout&&(e.startTime=+new Date),e.isFulfilled()||(u.push(e),l||(l=setInterval(a,50)),e.response.options.sync&&a())}var l=null,u=[];return s.cancelAll=function(){try{n.forEach(u,function(e){try{e.cancel(new r("All requests canceled."))}catch(e){}})}catch(e){}},o&&i&&o.doc.attachEvent&&i(o.global,"unload",function(){s.cancelAll()}),s})},"dojo/request/util":function(){define("exports ../errors/RequestError ../errors/CancelError ../Deferred ../io-query ../_base/array ../_base/lang ../promise/Promise ../has".split(" "),function(e,t,r,n,o,i,a,s,l){function u(e){return p(e)}function c(e){return void 0!==e.data?e.data:e.text}e.deepCopy=function(t,r){for(var n in r){var o=t[n],i=r[n];o!==i&&(o&&"object"==typeof o&&i&&"object"==typeof i?i instanceof Date?t[n]=new Date(i):e.deepCopy(o,i):t[n]=i)}return t},e.deepCreate=function(t,r){r=r||{};var n,o,i=a.delegate(t);for(n in t)(o=t[n])&&"object"==typeof o&&(i[n]=e.deepCreate(o,r[n]));return e.deepCopy(i,r)};var p=Object.freeze||function(e){return e};e.deferred=function(o,i,l,d,f,h){var y=new n(function(e){return i&&i(y,o),e&&(e instanceof t||e instanceof r)?e:new r("Request canceled",o)});y.response=o,y.isValid=l,y.isReady=d,y.handleResponse=f,l=y.then(u).otherwise(function(e){throw e.response=o,e}),e.notify&&l.then(a.hitch(e.notify,"emit","load"),a.hitch(e.notify,"emit","error")),d=l.then(c),f=new s;for(var m in d)d.hasOwnProperty(m)&&(f[m]=d[m]);return f.response=l,p(f),h&&y.then(function(e){h.call(y,e)},function(e){h.call(y,o,e)}),y.promise=f,y.then=f.then,y},e.addCommonMethods=function(e,t){i.forEach(t||["GET","POST","PUT","DELETE"],function(t){e[("DELETE"===t?"DEL":t).toLowerCase()]=function(r,n){return n=a.delegate(n||{}),n.method=t,e(r,n)}})},e.parseArgs=function(e,t,r){var n=t.data,i=t.query;return!n||r||"object"!=typeof n||n instanceof ArrayBuffer||n instanceof Blob||(t.data=o.objectToQuery(n)),i?("object"==typeof i&&(i=o.objectToQuery(i)),t.preventCache&&(i+=(i?"&":"")+"request.preventCache="+ +new Date)):t.preventCache&&(i="request.preventCache="+ +new Date),e&&i&&(e+=(~e.indexOf("?")?"&":"?")+i),{url:e,options:t,getHeader:function(e){return null}}},e.checkStatus=function(e){return 200<=(e=e||0)&&300>e||304===e||1223===e||!e}})},"dojo/errors/RequestError":function(){define(["./create"],function(e){return e("RequestError",function(e,t){this.response=t})})},"dojo/errors/RequestTimeoutError":function(){define(["./create","./RequestError"],function(e,t){return e("RequestTimeoutError",null,t,{dojoType:"timeout"})})},"dojo/request/xhr":function(){define(["../errors/RequestError","./watch","./handlers","./util","../has"],function(e,t,r,n,o){function i(t,o){var i=t.xhr;t.status=t.xhr.status;try{t.text=i.responseText}catch(e){}"xml"===t.options.handleAs&&(t.data=i.responseXML);var a;if(o)this.reject(o);else{try{r(t)}catch(e){a=e}n.checkStatus(i.status)?a?this.reject(a):this.resolve(t):(o=a?new e("Unable to load "+t.url+" status: "+i.status+" and an error in handleAs: transformation of response",t):new e("Unable to load "+t.url+" status: "+i.status,t),this.reject(o))}}function a(e){return this.xhr.getResponseHeader(e)}function s(r,y,m){var g=y&&y.data&&y.data instanceof FormData,v=n.parseArgs(r,n.deepCreate(h,y),g);r=v.url,y=v.options;var b=!y.data&&"POST"!==y.method&&"PUT"!==y.method;10>=o("ie")&&(r=r.split("#")[0]);var w,S=n.deferred(v,p,l,u,i,function(){w&&w()}),_=v.xhr=s._create();if(!_)return S.cancel(new e("XHR was not created")),m?S:S.promise;v.getHeader=a,c&&(w=c(_,S,v,y.uploadProgress));var x=void 0===y.data?null:y.data,O=!y.sync,C=y.method;try{_.open(C,r,O,y.user||f,y.password||f),y.withCredentials&&(_.withCredentials=y.withCredentials),y.handleAs in d&&(_.responseType=d[y.handleAs]);var M=y.headers;if(r=!g&&!b&&"application/x-www-form-urlencoded",M)for(var T in M)"content-type"===T.toLowerCase()?r=M[T]:M[T]&&_.setRequestHeader(T,M[T]);r&&!1!==r&&_.setRequestHeader("Content-Type",r),M&&"X-Requested-With"in M||_.setRequestHeader("X-Requested-With","XMLHttpRequest"),n.notify&&n.notify.emit("send",v,S.promise.cancel),_.send(x)}catch(e){S.reject(e)}return t(S),_=null,m?S:S.promise}o.add("dojo-force-activex-xhr",function(){return 0});var l,u,c,p,d={blob:"blob",document:"document",arraybuffer:"arraybuffer"};l=function(e){return!this.isFulfilled()},p=function(e,t){t.xhr.abort()},c=function(t,r,n,o){function i(e){r.handleResponse(n)}function a(t){t=new e("Unable to load "+n.url+" status: "+t.target.status,n),r.handleResponse(n,t)}function s(e,t){n.transferType=e,t.lengthComputable?(n.loaded=t.loaded,n.total=t.total,r.progress(n)):3===n.xhr.readyState&&(n.loaded="loaded"in t?t.loaded:t.position,r.progress(n))}function l(e){return s("download",e)}function u(e){return s("upload",e)}return t.addEventListener("load",i,!1),t.addEventListener("error",a,!1),t.addEventListener("progress",l,!1),o&&t.upload&&t.upload.addEventListener("progress",u,!1),function(){t.removeEventListener("load",i,!1),t.removeEventListener("error",a,!1),t.removeEventListener("progress",l,!1),t.upload.removeEventListener("progress",u,!1),t=null}};var f,h={data:null,query:null,sync:!1,method:"GET"};return s._create=function(){throw Error("XMLHTTP not available")},o("dojo-force-activex-xhr")||(s._create=function(){return new XMLHttpRequest}),n.addCommonMethods(s),s})},"dojo/request/handlers":function(){define(["../json","../_base/kernel","../_base/array","../has","../has!dom?../selector/_loader"],function(e,t,r,n){function o(e){var t=i[e.options.handleAs];return e.data=t?t(e):e.data||e.text,e}r=function(e){return e.xhr.response};var i={javascript:function(e){return t.eval(e.text||"")},json:function(t){return e.parse(t.text||null)},xml:void 0,blob:r,arraybuffer:r,document:r};return o.register=function(e,t){i[e]=t},o})},"dojo/_base/fx":function(){define("./kernel ./config ./lang ../Evented ./Color ../aspect ../sniff ../dom ../dom-style".split(" "),function(e,t,r,n,o,i,a,s,l){var u=r.mixin,c={},p=c._Line=function(e,t){this.start=e,this.end=t};p.prototype.getValue=function(e){return(this.end-this.start)*e+this.start};var d=c.Animation=function(e){u(this,e),r.isArray(this.curve)&&(this.curve=new p(this.curve[0],this.curve[1]))};d.prototype=new n,r.extend(d,{duration:350,repeat:0,rate:20,_percent:0,_startRepeatCount:0,_getStep:function(){var e=this._percent,t=this.easing;return t?t(e):e},_fire:function(e,r){if(r=r||[],this[e])if(t.debugAtAllCosts)this[e].apply(this,r);else try{this[e].apply(this,r)}catch(t){console.error("exception in animation handler for:",e),console.error(t)}return this},play:function(e,t){if(this._delayTimer&&this._clearTimer(),t)this._stopTimer(),this._active=this._paused=!1,this._percent=0;else if(this._active&&!this._paused)return this;return this._fire("beforeBegin",[this.node]),e=e||this.delay,t=r.hitch(this,"_play",t),0<e?(this._delayTimer=setTimeout(t,e),this):(t(),this)},_play:function(e){return this._delayTimer&&this._clearTimer(),this._startTime=(new Date).valueOf(),this._paused&&(this._startTime-=this.duration*this._percent),this._active=!0,this._paused=!1,e=this.curve.getValue(this._getStep()),this._percent||(this._startRepeatCount||(this._startRepeatCount=this.repeat),this._fire("onBegin",[e])),this._fire("onPlay",[e]),this._cycle(),this},pause:function(){return this._delayTimer&&this._clearTimer(),this._stopTimer(),this._active?(this._paused=!0,this._fire("onPause",[this.curve.getValue(this._getStep())]),this):this},gotoPercent:function(e,t){return this._stopTimer(),this._active=this._paused=!0,this._percent=e,t&&this.play(),this},stop:function(e){return this._delayTimer&&this._clearTimer(),this._timer?(this._stopTimer(),e&&(this._percent=1),this._fire("onStop",[this.curve.getValue(this._getStep())]),this._active=this._paused=!1,this):this},destroy:function(){this.stop()},status:function(){return this._active?this._paused?"paused":"playing":"stopped"},_cycle:function(){if(this._active){var e=(new Date).valueOf(),e=0===this.duration?1:(e-this._startTime)/this.duration;1<=e&&(e=1),this._percent=e,this.easing&&(e=this.easing(e)),this._fire("onAnimate",[this.curve.getValue(e)]),1>this._percent?this._startTimer():(this._active=!1,0<this.repeat?(this.repeat--,this.play(null,!0)):-1==this.repeat?this.play(null,!0):this._startRepeatCount&&(this.repeat=this._startRepeatCount,this._startRepeatCount=0),this._percent=0,this._fire("onEnd",[this.node]),!this.repeat&&this._stopTimer())}return this},_clearTimer:function(){clearTimeout(this._delayTimer),delete this._delayTimer}});var f=0,h=null,y={run:function(){}};r.extend(d,{_startTimer:function(){this._timer||(this._timer=i.after(y,"run",r.hitch(this,"_cycle"),!0),f++),h||(h=setInterval(r.hitch(y,"run"),this.rate))},_stopTimer:function(){this._timer&&(this._timer.remove(),this._timer=null,f--),0>=f&&(clearInterval(h),h=null,f=0)}});var m=a("ie")?function(e){var t=e.style;t.width.length||"auto"!=l.get(e,"width")||(t.width="auto")}:function(){};c._fade=function(e){e.node=s.byId(e.node);var t=u({properties:{}},e);return e=t.properties.opacity={},e.start="start"in t?t.start:function(){return+l.get(t.node,"opacity")||0},e.end=t.end,e=c.animateProperty(t),i.after(e,"beforeBegin",r.partial(m,t.node),!0),e},c.fadeIn=function(e){return c._fade(u({end:1},e))},c.fadeOut=function(e){return c._fade(u({end:0},e))},c._defaultEasing=function(e){return.5+Math.sin((e+1.5)*Math.PI)/2};var g=function(e){this._properties=e;for(var t in e){var r=e[t];r.start instanceof o&&(r.tempColor=new o)}};return g.prototype.getValue=function(e){var t,n={};for(t in this._properties){var i=this._properties[t],a=i.start;a instanceof o?n[t]=o.blendColors(a,i.end,e,i.tempColor).toCss():r.isArray(a)||(n[t]=(i.end-a)*e+a+("opacity"!=t?i.units||"px":0))}return n},c.animateProperty=function(t){var n=t.node=s.byId(t.node);return t.easing||(t.easing=e._defaultEasing),t=new d(t),i.after(t,"beforeBegin",r.hitch(t,function(){var e,t={};for(e in this.properties){var i=function(e,t){var r={height:e.offsetHeight,width:e.offsetWidth}[t];return void 0!==r?r:(r=l.get(e,t),"opacity"==t?+r:s?r:parseFloat(r))};"width"!=e&&"height"!=e||(this.node.display="block");var a=this.properties[e];r.isFunction(a)&&(a=a(n)),a=t[e]=u({},r.isObject(a)?a:{end:a}),r.isFunction(a.start)&&(a.start=a.start(n)),r.isFunction(a.end)&&(a.end=a.end(n));var s=0<=e.toLowerCase().indexOf("color");"end"in a?"start"in a||(a.start=i(n,e)):a.end=i(n,e),s?(a.start=new o(a.start),a.end=new o(a.end)):a.start="opacity"==e?+a.start:parseFloat(a.start)}this.curve=new g(t)}),!0),i.after(t,"onAnimate",r.hitch(l,"set",t.node),!0),t},c.anim=function(e,t,r,n,o,i){return c.animateProperty({node:e,duration:r||d.prototype.duration,properties:t,easing:n,onEnd:o}).play(i||0)},u(e,c),e._Animation=d,c})},"dojo/_base/Color":function(){define(["./kernel","./lang","./array","./config"],function(e,t,r,n){var o=e.Color=function(e){e&&this.setColor(e)};return o.named={black:[0,0,0],silver:[192,192,192],gray:[128,128,128],white:[255,255,255],maroon:[128,0,0],red:[255,0,0],purple:[128,0,128],fuchsia:[255,0,255],green:[0,128,0],lime:[0,255,0],olive:[128,128,0],yellow:[255,255,0],navy:[0,0,128],blue:[0,0,255],teal:[0,128,128],aqua:[0,255,255],transparent:n.transparentColor||[0,0,0,0]},t.extend(o,{r:255,g:255,b:255,a:1,_set:function(e,t,r,n){this.r=e,this.g=t,this.b=r,this.a=n},setColor:function(e){return t.isString(e)?o.fromString(e,this):t.isArray(e)?o.fromArray(e,this):(this._set(e.r,e.g,e.b,e.a),e instanceof o||this.sanitize()),this},sanitize:function(){return this},toRgb:function(){return[this.r,this.g,this.b]},toRgba:function(){return[this.r,this.g,this.b,this.a]},toHex:function(){return"#"+r.map(["r","g","b"],function(e){return e=this[e].toString(16),2>e.length?"0"+e:e},this).join("")},toCss:function(e){var t=this.r+", "+this.g+", "+this.b;return(e?"rgba("+t+", "+this.a:"rgb("+t)+")"},toString:function(){return this.toCss(!0)}}),o.blendColors=e.blendColors=function(e,t,r,n){return n=n||new o,n.r=Math.round(e.r+(t.r-e.r)*r),n.g=Math.round(e.g+(t.g-e.g)*r),n.b=Math.round(e.b+(t.b-e.b)*r),n.a=e.a+(t.a-e.a)*r,n.sanitize()},o.fromRgb=e.colorFromRgb=function(e,t){return(e=e.toLowerCase().match(/^rgba?\(([\s\.,0-9]+)\)/))&&o.fromArray(e[1].split(/\s*,\s*/),t)},o.fromHex=e.colorFromHex=function(e,t){var n=t||new o,i=4==e.length?4:8,a=(1<<i)-1;return e=Number("0x"+e.substr(1)),isNaN(e)?null:(r.forEach(["b","g","r"],function(t){var r=e&a;e>>=i,n[t]=4==i?17*r:r}),n.a=1,n)},o.fromArray=e.colorFromArray=function(e,t){return t=t||new o,t._set(Number(e[0]),Number(e[1]),Number(e[2]),Number(e[3])),isNaN(t.a)&&(t.a=1),t.sanitize()},o.fromString=e.colorFromString=function(e,t){var r=o.named[e];return r&&o.fromArray(r,t)||o.fromRgb(e,t)||o.fromHex(e,t)},o})},"dojo/request":function(){define(["./request/default!"],function(e){return e})},"dojo/request/default":function(){define(["exports","require","../has"],function(e,t,r){var n,o=r("config-requestProvider");(r("host-browser")||r("host-webworker"))&&(n="./xhr"),o||(o=n),e.getPlatformDefaultId=function(){return n},e.load=function(e,r,i,a){t(["platform"==e?n:o],function(e){i(e)})}})},"esri/Map":function(){define("require exports ./core/tsSupport/declareExtendsHelper ./core/tsSupport/decorateHelper ./Basemap ./Ground ./core/Accessor ./core/CollectionFlattener ./core/Evented ./core/Logger ./core/accessorSupport/decorators ./support/basemapUtils ./support/groundUtils ./support/LayersMixin".split(" "),function(e,t,r,n,o,i,a,s,l,u,c,p,d,f){var h=u.getLogger("esri.Map");return function(e){function t(t){return t=e.call(this,t)||this,t.basemap=null,t.ground=new i,t._basemapCache=p.createCache(),t}return r(t,e),Object.defineProperty(t.prototype,"allLayers",{get:function(){return new s({root:this,rootCollectionNames:["basemap.baseLayers","ground.layers","layers","basemap.referenceLayers"],getChildrenFunction:function(e){return e.layers}})},enumerable:!0,configurable:!0}),t.prototype.castBasemap=function(e){return p.ensureType(e,this._basemapCache)},t.prototype.castGround=function(e){return(e=d.ensureType(e))||(h.error("Map.ground may not be set to null or undefined"),this._get("ground"))},t.prototype.findLayerById=function(e){return this.allLayers.find(function(t){return t.id===e})},n([c.property({readOnly:!0})],t.prototype,"allLayers",null),n([c.property({type:o})],t.prototype,"basemap",void 0),n([c.cast("basemap")],t.prototype,"castBasemap",null),n([c.property({type:i,nonNullable:!0})],t.prototype,"ground",void 0),n([c.cast("ground")],t.prototype,"castGround",null),t=n([c.subclass("esri.Map")],t)}(c.declared(f.LayersMixin(l.EventedMixin(a))))})},"esri/core/tsSupport/declareExtendsHelper":function(){define(["require","exports"],function(e,t){return function(e,t){e.__bases__=t.__bases__}})},"esri/core/tsSupport/decorateHelper":function(){define([],function(){return function(e,t,r,n){var o,i=arguments.length,a=3>i?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;0<=s;s--)(o=e[s])&&(a=(3>i?o(a):3<i?o(t,r,a):o(t,r))||a);return 3<i&&a&&Object.defineProperty(t,r,a),a}})},"esri/Basemap":function(){define("require exports ./core/tsSupport/assignHelper ./core/tsSupport/declareExtendsHelper ./core/tsSupport/decorateHelper ./geometry ./core/arrayUtils ./core/Collection ./core/collectionUtils ./core/JSONSupport ./core/lang ./core/Loadable ./core/loadAll ./core/Logger ./core/maybe ./core/promiseUtils ./core/urlUtils ./core/accessorSupport/decorators ./portal/Portal ./portal/PortalItem ./support/basemapDefinitions ./webdoc/support/writeUtils".split(" "),function(e,t,r,n,o,i,a,s,l,u,c,p,d,f,h,y,m,g,v,b,w,S){var _=0,x=f.getLogger("esri.Basemap");return function(t){function u(e){var r=t.call(this,e)||this;r.id=null,r.portalItem=null,r.spatialReference=null,r.thumbnailUrl=null,r.title="Basemap",r.id=Date.now().toString(16)+"-basemap-"+_++,r.baseLayers=new s,r.referenceLayers=new s;var n=function(e){e.parent&&e.parent!==r&&"remove"in e.parent&&e.parent.remove(e),e.parent=r,"elevation"===e.type&&x.error("Layer '"+e.title+", id:"+e.id+"' of type '"+e.type+"' is not supported as a basemap layer and will therefore be ignored.")};return r.baseLayers.on("after-add",function(e){return n(e.item)}),r.referenceLayers.on("after-add",function(e){return n(e.item)}),r.baseLayers.on("after-remove",function(e){e.item.parent=null}),r.referenceLayers.on("after-remove",function(e){e.item.parent=null}),r}n(u,t),p=u,u.prototype.initialize=function(){var e=this;this.when().catch(function(t){x.error("#load()","Failed to load basemap (title: '"+e.title+"', id: '"+e.id+"')",t)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)},u.prototype.normalizeCtorArgs=function(e){return e&&"resourceInfo"in e&&(this._set("resourceInfo",e.resourceInfo),e=r({},e),delete e.resourceInfo),e},Object.defineProperty(u.prototype,"baseLayers",{set:function(e){this._set("baseLayers",l.referenceSetter(e,this._get("baseLayers")))},enumerable:!0,configurable:!0}),u.prototype.writeBaseLayers=function(e,t,n,o){var i=this,a=[];e&&(o=r({},o,{layerContainerType:"basemap"}),this.baseLayers.forEach(function(e){e=S.getLayerJSON(e,i._getLayerJSONFromResourceInfo(e),o),h.isSome(e)&&a.push(e)}),this.referenceLayers.forEach(function(e){e=S.getLayerJSON(e,i._getLayerJSONFromResourceInfo(e),o),h.isSome(e)&&(e.isReference=!0,a.push(e))})),t[n]=a},Object.defineProperty(u.prototype,"referenceLayers",{set:function(e){this._set("referenceLayers",l.referenceSetter(e,this._get("referenceLayers")))},enumerable:!0,configurable:!0}),u.prototype.writeTitle=function(e,t){t.title=e||"Basemap"},u.prototype.load=function(e){return this.addResolvingPromise(this._loadFromSource(e)),this.when()},u.prototype.loadAll=function(){var e=this;return d.loadAll(this,function(t){t(e.baseLayers,e.referenceLayers)})},u.prototype.clone=function(){var e={id:this.id,title:this.title,portalItem:this.portalItem,baseLayers:this.baseLayers.slice(),referenceLayers:this.referenceLayers.slice()};return this.loaded&&(e.loadStatus="loaded"),new p({resourceInfo:this.resourceInfo}).set(e)},u.prototype.read=function(e,t){this.resourceInfo||this._set("resourceInfo",{data:e,context:t}),this.inherited(arguments)},u.prototype.write=function(e,t){return e=e||{},t&&t.origin||(t=r({origin:"web-map"},t)),this.inherited(arguments,[e,t]),!this.loaded&&this.resourceInfo&&this.resourceInfo.data.baseMapLayers&&(e.baseMapLayers=this.resourceInfo.data.baseMapLayers.map(function(e){return e=c.clone(e),e.url&&m.isProtocolRelative(e.url)&&(e.url="https:"+e.url),e.templateUrl&&m.isProtocolRelative(e.templateUrl)&&(e.templateUrl="https:"+e.templateUrl),e})),e},u.prototype._loadFromSource=function(e){var t=this.resourceInfo,r=this.portalItem;return y.throwIfAborted(e),t?this._loadLayersFromJSON(t.data,t.context?t.context.url:null,e):r?this._loadFromItem(r,e):y.resolve(null)},u.prototype._loadLayersFromJSON=function(t,r,n){var o=this,i=this.resourceInfo&&this.resourceInfo.context,a=this.portalItem&&this.portalItem.portal||i&&i.portal||null,s=i&&"web-scene"===i.origin?"web-scene":"web-map";return y.create(function(t){return e(["./portal/support/layersCreator"],t)}).then(function(e){var i=[];if(y.throwIfAborted(n),t.baseMapLayers&&Array.isArray(t.baseMapLayers)){var l={context:{origin:s,url:r,portal:a,layerContainerType:"basemap"},defaultLayerType:"DefaultTileLayer"},u=e.populateOperationalLayers(o.baseLayers,t.baseMapLayers.filter(function(e){return!e.isReference}),l);i.push(u),e=e.populateOperationalLayers(o.referenceLayers,t.baseMapLayers.filter(function(e){return e.isReference}),l),i.push(e)}return y.eachAlways(i)}).then(function(){})},u.prototype._loadFromItem=function(e,t){var r=this;return e.load(t).then(function(e){return e.fetchData("json",t)}).then(function(n){var o=m.urlToObject(e.itemUrl);return r._set("resourceInfo",{data:n.baseMap,context:{origin:"web-map",portal:e.portal||v.getDefault(),url:o}}),r.read(r.resourceInfo.data,r.resourceInfo.context),r.read({spatialReference:n.spatialReference},r.resourceInfo.context),r.read({title:e.title,thumbnailUrl:e.thumbnailUrl},{origin:"portal-item",portal:e.portal||v.getDefault(),url:o}),r._loadLayersFromJSON(r.resourceInfo.data,o,t)})},u.prototype._getLayerJSONFromResourceInfo=function(e){var t=this.get("resourceInfo.data.baseMapLayers");return h.isSome(t)?a.find(t,function(t){return t.id===e.id}):null},u.fromId=function(e){return(e=w.esriBasemapDefinitions[e])?p.fromJSON(e):null};var p;return o([g.property({json:{write:{ignoreOrigin:!0,target:"baseMapLayers"}}})],u.prototype,"baseLayers",null),o([g.writer("baseLayers")],u.prototype,"writeBaseLayers",null),o([g.property({type:String,json:{origins:{"web-scene":{write:!0}}}})],u.prototype,"id",void 0),o([g.property({type:b})],u.prototype,"portalItem",void 0),o([g.property()],u.prototype,"referenceLayers",null),o([g.property({readOnly:!0})],u.prototype,"resourceInfo",void 0),o([g.property({type:i.SpatialReference})],u.prototype,"spatialReference",void 0),o([g.property()],u.prototype,"thumbnailUrl",void 0),o([g.property({type:String,json:{origins:{"web-scene":{write:{isRequired:!0}}}}})],u.prototype,"title",void 0),o([g.writer("title")],u.prototype,"writeTitle",null),u=p=o([g.subclass("esri.Basemap")],u)}(g.declared(u.JSONSupportMixin(p)))})},"esri/core/tsSupport/assignHelper":function(){define([],function(){return Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e}})},"esri/geometry":function(){define("require exports ./core/jsonMap ./core/accessorSupport/ensureType ./geometry/Extent ./geometry/Geometry ./geometry/Multipoint ./geometry/Point ./geometry/Polygon ./geometry/Polyline ./geometry/SpatialReference ./geometry/support/jsonUtils".split(" "),function(e,t,r,n,o,i,a,s,l,u,c,p){Object.defineProperty(t,"__esModule",{value:!0}),t.Extent=o,t.BaseGeometry=i,t.Multipoint=a,t.Point=s,t.Polygon=l,t.Polyline=u,t.SpatialReference=c,t.isGeometry=function(e){return e instanceof t.BaseGeometry},t.fromJSON=p.fromJSON,t.typeKebabDictionary=r.strict()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh"}),t.isFeatureGeometryType=function(e){return"point"===e||"multipoint"===e||"polyline"===e||"polygon"===e},t.featureGeometryTypeKebabDictionary=r.strict()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon"}),t.geometryTypes={base:t.BaseGeometry,key:"type",typeMap:{extent:t.Extent,multipoint:t.Multipoint,point:t.Point,polyline:t.Polyline,polygon:t.Polygon}},t.ensureType=n.ensureOneOfType(t.geometryTypes)})},"esri/core/jsonMap":function(){define(["require","exports"],function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){void 0===t&&(t={ignoreUnknown:!1});var r=this;this.jsonToAPI=e,this.options=t,this.apiValues=[],this.jsonValues=[],this.apiToJSON=this.invertMap(e),this.apiValues=this.getKeysSorted(this.apiToJSON),this.jsonValues=this.getKeysSorted(this.jsonToAPI),this.read=function(e){return r.fromJSON(e)},this.write=function(e,t,n){void 0!==(e=r.toJSON(e))&&(t[n]=e)}}return e.prototype.toJSON=function(e){return this.apiToJSON.hasOwnProperty(e)?this.apiToJSON[e]:this.options.ignoreUnknown?void 0:e},e.prototype.fromJSON=function(e){return this.jsonToAPI.hasOwnProperty(e)?this.jsonToAPI[e]:this.options.ignoreUnknown?void 0:e},e.prototype.invertMap=function(e){var t,r={};for(t in e)r[e[t]]=t;return r},e.prototype.getKeysSorted=function(e){var t,r=[];for(t in e)r.push(t);return r.sort(),r},e}();t.JSONMap=r,t.strict=function(){return function(e){return new r(e,{ignoreUnknown:!0})}},t.default=r})},"esri/core/accessorSupport/ensureType":function(){define(["require","exports","../compilerUtils","../Logger"],function(e,t,r,n){function o(e){return null==e?e:new Date(e)}function i(e){return null==e?e:!!e}function a(e){return null==e?e:e.toString()}function s(e){return null==e?e:"number"==typeof e&&isNaN(e)?0:parseFloat(e)}function l(e){return null==e?e:Math.round(parseFloat(e))}function u(e){return e&&e.constructor&&void 0!==e.constructor._meta}function c(e,t){return null!=t&&e&&!(t instanceof e)}function p(e){return e&&("isCollection"in e||e._meta&&e._meta.bases&&e._meta.bases.some(function(e){return"isCollection"in e}))}function d(e){return e&&e.Type?"function"==typeof e.Type?e.Type:e.Type.base:null}function f(e,t){if(!t||!t.constructor||!p(t.constructor))return h(e,t)?t:new e(t);var r=d(e.prototype.itemType),n=d(t.constructor.prototype.itemType);return r?n?r===n?t:(n=n._meta&&n._meta.bases)&&-1!==n.indexOf(r)?new e(t):(h(e,t),t):new e(t):t}function h(e,t){return!!u(t)&&(P.error("Accessor#set","Assigning an instance of '"+(t.declaredClass||"unknown")+"' which is not a subclass of '"+m(e)+"'"),!0)}function y(e,t){return null==t?t:p(e)?f(e,t):c(e,t)?h(e,t)?t:new e(t):t}function m(e){return e&&e.prototype&&e.prototype.declaredClass||"unknown"}function g(e){switch(e){case Number:return s;case I:return l;case Boolean:return i;case String:return a;case Date:return o;default:return y.bind(null,e)}}function v(e,t){var r=g(e);return 1===arguments.length?r:r(t)}function b(e,t,r){return 1===arguments.length?b.bind(null,e):t?Array.isArray(t)?t.map(function(t){return e(t,r)}):[e(t,r)]:t}function w(e,t,r){return 0!==t&&Array.isArray(r)?r.map(function(r){return w(e,t-1,r)}):e(r)}function S(e,t,r){if(2===arguments.length)return S.bind(null,e,t);if(!r)return r;r=w(e,t,r);for(var n=t,o=r;0<n&&Array.isArray(o);)n--,o=o[0];if(void 0!==o)for(o=0;o<n;o++)r=[r];return r}function _(e,t){if(2===arguments.length)return _(e).call(null,t);for(var r=new Set,n=e.filter(function(e){return"function"!=typeof e}),o=e.filter(function(e){return"function"==typeof e}),i=0;i<e.length;i++){var a=e[i];"string"!=typeof a&&"number"!=typeof a||r.add(a)}var s=null,l=null;return function(e,t){if(null==e)return e;var i=typeof e,a="string"===i||"number"===i;return a&&(r.has(e)||o.some(function(e){return"string"===i&&e===String||"number"===i&&e===Number}))||"object"===i&&o.some(function(t){return!c(e,t)})?e:(a&&n.length?(s||(s=n.map(function(e){return"string"==typeof e?"'"+e+"'":""+e}).join(", ")),P.error("Accessor#set","'"+e+"' is not a valid value for this property, only the following values are valid: "+s)):"object"==typeof e&&o.length?(l||(l=o.map(function(e){return m(e)}).join(", ")),P.error("Accessor#set","'"+e+"' is not a valid value for this property, value must be one of "+l)):P.error("Accessor#set","'"+e+"' is not a valid value for this property"),t&&(t.valid=!1),null)}}function x(e,t){if(2===arguments.length)return x(e).call(null,t);var r,n={},o=[],i=[];for(r in e.typeMap){var a=e.typeMap[r];n[r]=v(a),o.push(m(a)),i.push(r)}var s="string"==typeof e.key?function(t){return t[e.key]}:e.key;return function(t){if(e.base&&!c(e.base,t)||null==t)return t;var r=s(t)||e.defaultKeyValue,a=n[r];if(!a)return P.error("Accessor#set","Invalid property value, value needs to be one of '"+o.join("', '")+"', or a plain object that can autocast (having .type = '"+i.join("', '")+"')"),null;if(!c(e.typeMap[r],t))return t;if("string"==typeof e.key&&!u(t)){var l,r={};for(l in t)l!==e.key&&(r[l]=t[l]);return a(r)}return a(t)}}function O(e){switch(e.type){case"native":return v(e.value);case"array":return b(O(e.value));case"one-of":return C(e);default:r.neverReached(e)}return null}function C(e){var t=null;return function(r,n){return T(r,e)?r:(null==t&&(t=M(e)),P.error("Accessor#set","Invalid property value, value needs to be of type "+t),n&&(n.valid=!1),null)}}function M(e){switch(e.type){case"native":switch(e.value){case Number:return"number";case String:return"string";case Boolean:return"boolean";case I:return"integer";case Date:return"date";default:return m(e.value)}case"array":return"array of "+M(e.value);case"one-of":return e=e.values.map(function(e){return M(e)}),"one of "+e.slice(0,e.length-1)+" or "+e[e.length-1];default:r.neverReached(e)}return"unknown"}function T(e,t){if(null==e)return!0;switch(t.type){case"native":switch(t.value){case Number:case I:return"number"==typeof e;case Boolean:return"boolean"==typeof e;case String:return"string"==typeof e}return e instanceof t.value;case"array":return!!Array.isArray(e)&&!e.some(function(e){return!T(e,t.value)});case"one-of":return t.values.some(function(t){return T(e,t)})}}Object.defineProperty(t,"__esModule",{value:!0});var P=n.getLogger("esri.core.Accessor");t.ensureDate=o,t.ensureBoolean=i,t.ensureString=a,t.ensureNumber=s,t.ensureInteger=l,t.isClassedType=u,t.requiresType=c,t.ensureClass=y,t.ensureType=v,t.ensureArrayTyped=b,t.ensureArray=function(e,t){return 1===arguments.length?b(v.bind(null,e)):b(v.bind(null,e),t)},t.ensureNArrayTyped=S,t.ensureNArray=function(e,t,r){return 2===arguments.length?S(v.bind(null,e),t):S(v.bind(null,e),t,r)},t.isOneOf=function(e){return!!Array.isArray(e)&&!e.some(function(t){return!("string"===(t=typeof t)||"number"===t||"function"===t&&1<e.length)})},t.ensureOneOf=_,t.ensureOneOfType=x;var I=function(){return function(){}}();t.Integer=I,t.types={native:function(e){return{type:"native",value:e}},array:function(e){return{type:"array",value:e}},oneOf:function(e){return{type:"one-of",values:e}}},t.isLongFormType=function(e){if(!(e&&"type"in e))return!1;switch(e.type){case"native":case"array":case"one-of":return!0;default:r.neverReachedSilent(e)}return!1},t.ensureLongFormType=O,t.default=v})},"esri/core/compilerUtils":function(){define(["require","exports","./has"],function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.neverReached=function(e){},t.neverReachedSilent=function(e){},t.typeCast=function(e){return function(){return e}},t.tuple=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e}})},"esri/core/has":function(){define(["require","exports","dojo/sniff","./global","../views/webgl/context-util"],function(e,t,r,n,o){function i(){if(s)return s;s={available:!1,majorPerformanceCaveat:!1,maxTextureSize:0,supportsHighPrecisionFragment:!1,supportsVertexShaderSamplers:!1,supportsElementIndexUint:!1,supportsStandardDerivatives:!1,supportsInstancedArrays:!1,supportsTextureFloat:!1,version:0};var e=document.createElement("canvas");if(!e)return s;var t=o.createContext(e,{failIfMajorPerformanceCaveat:!0},"webgl");return!t&&(t=o.createContext(e,{},"webgl"))&&(s.majorPerformanceCaveat=!0),t&&(e=t.getParameter(t.VERSION))?((e=e.match(/^WebGL\s+([\d.]*)/))&&(s.version=parseFloat(e[1]),s.available=.94<=s.version,(e=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT))&&(s.supportsHighPrecisionFragment=0<e.precision),s.supportsVertexShaderSamplers=0<t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS),s.supportsElementIndexUint=null!==t.getExtension("OES_element_index_uint"),s.supportsStandardDerivatives=null!==t.getExtension("OES_standard_derivatives"),s.supportsInstancedArrays=null!==t.getExtension("ANGLE_instanced_arrays"),s.supportsTextureFloat=null!==t.getExtension("OES_texture_float")),s.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE),s):s}function a(){if(l)return l;l={available:!1,version:0};var e=document.createElement("canvas");return e&&(e=o.createContext(e,{},"webgl2"))?(l.available=!0,(e=e.getParameter(e.VERSION))?((e=e.match(/^WebGL\s+([\d.]*)/))&&(l.version=parseFloat(e[1])),l):l):l}!function(){var e=navigator.userAgent,t=e.match(/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i),e=e.match(/iPhone/i);t&&r.add("esri-mobile",t),e&&r.add("esri-iPhone",e),r.add("esri-geolocation",function(){return!!navigator.geolocation}),r.add("esri-canvas-svg-support",function(){return!(r("trident")||r("ie"))}),r.add("esri-secure-context",function(){return"isSecureContext"in n?n.isSecureContext:n.location&&n.location.origin?0===n.location.origin.indexOf("https:"):void 0}),r.add("esri-wasm","WebAssembly"in n),r.add("esri-shared-array-buffer",function(){var e=!1===n.crossOriginIsolated;return"SharedArrayBuffer"in n&&!e}),r.add("esri-atomics","Atomics"in n),r.add("esri-workers","Worker"in n),r.add("esri-text-decoder","TextDecoder"in n),r.add("esri-deprecation-warnings",!0),r("host-webworker")||(r.add("esri-abortable-fetch","fetch"in n&&"signal"in new Request("https://www.arcgis.com")),r.add("esri-image-decode",function(){if(!("decode"in new Image))return!1;var e=new Image;e.src='data:image/svg+xml;charset=UTF-8,<svg version="1.1" xmlns="http://www.w3.org/2000/svg"></svg>',e.decode().then(function(){r.add("esri-image-decode",!0,!0,!0)}).catch(function(){r.add("esri-image-decode",!1,!0,!0)})}),r.add("esri-url-encodes-apostrophe",function(){var e=n.document.createElement("a");return e.href="?'",-1<e.href.indexOf("?%27")}),r.add("esri-webgl",function(){return i().available}),r.add("esri-webgl-high-precision-fragment",function(){return i().supportsHighPrecisionFragment}),r.add("esri-webgl-vertex-shader-samplers",function(){return i().supportsVertexShaderSamplers}),r.add("esri-webgl-element-index-uint",function(){return i().supportsElementIndexUint}),r.add("esri-webgl-standard-derivatives",function(){return i().supportsStandardDerivatives}),r.add("esri-webgl-texture-float",function(){return i().supportsTextureFloat}),r.add("esri-webgl-instanced-arrays",function(){return i().supportsInstancedArrays}),r.add("esri-webgl-major-performance-caveat",function(){return i().majorPerformanceCaveat}),r.add("esri-featurelayer-webgl",!0),r.add("esri-featurelayer-webgl-labeling",!0),r.add("esri-webgl2",function(){return a().available}),r.add("esri-webgl-max-texture-size",function(){return i().maxTextureSize}))}();var s=null,l=null;return r})},"esri/core/global":function(){define(["require","exports"],function(e,t){return function(){return"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:void 0}()})},"esri/views/webgl/context-util":function(){define(["require","exports"],function(e,t){function r(e,t,r){void 0===t&&(t={});var n;switch(r){case"webgl":n=["webgl","experimental-webgl","webkit-3d","moz-webgl"];break;case"webgl2":n=["webgl2"];break;default:n=["webgl","experimental-webgl","webkit-3d","moz-webgl"]}r=null;for(var o=0;o<n.length;o++){var i=n[o];try{r=e.getContext(i,t)}catch(e){}if(r)break}return r}function n(e,t){(e=e.parentNode)&&(e.innerHTML='<table style="background-color: #8CE; width: 100%; height: 100%;"><tr><td align="center"><div style="display: table-cell; vertical-align: middle;"><div style="">'+t+"</div></div></td></tr></table>")}Object.defineProperty(t,"__esModule",{value:!0}),t.createContextOrErrorHTML=function(e,t,a){return void 0===t&&(t={}),window.WebGLRenderingContext?(t=r(e,t,a))||(n(e,i),null):(n(e,o),null)},t.createContext=r;var o='This page requires a browser that supports WebGL.<br/><a href="http://get.webgl.org">Click here to upgrade your browser.</a>',i='It doesn\'t appear your computer can support WebGL.<br/><a href="http://get.webgl.org/troubleshooting/">Click here for more information.</a>'})},"esri/core/Logger":function(){define(["require","exports","./has","./string","@dojo/framework/shim/Promise"],function(e,t,r,n){var o={info:0,warn:1,error:2};return e=function(){function e(t){void 0===t&&(t={}),this._loggedMessages={error:new Map,warn:new Map,info:new Map},this.module=t.module||"",this.writer=t.writer||null,this.level=t.level||null,null!=t.enabled&&(this.enabled=!!t.enabled),e._loggers[this.module]=this,-1!==(t=this.module.lastIndexOf("."))&&(this.parent=e.getLogger(this.module.slice(0,t)))}return e.prototype.log=function(t,r){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];if(this._isEnabled()&&this._matchLevel(t)){if("always"!==r&&!e._throttlingDisabled){var o=this._argsToKey(n),i=this._loggedMessages[t].get(o);if("once"===r&&null!=i||"oncePerTick"===r&&i>=e._tickCounter)return;this._loggedMessages[t].set(o,e._tickCounter),e._scheduleTickCounterIncrement()}(o=this._inheritedWriter())&&o.apply(void 0,[t,this.module].concat(n))}},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.log.apply(this,["error","always"].concat(e))},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.log.apply(this,["warn","always"].concat(e))},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.log.apply(this,["info","always"].concat(e))},e.prototype.errorOnce=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.log.apply(this,["error","once"].concat(e))},e.prototype.warnOnce=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.log.apply(this,["warn","once"].concat(e))},e.prototype.infoOnce=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.log.apply(this,["info","once"].concat(e))},e.prototype.errorOncePerTick=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.log.apply(this,["error","oncePerTick"].concat(e))},e.prototype.warnOncePerTick=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.log.apply(this,["warn","oncePerTick"].concat(e))},e.prototype.infoOncePerTick=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.log.apply(this,["info","oncePerTick"].concat(e))},e.prototype.getLogger=function(t){return e.getLogger(this.module+"."+t)},Object.defineProperty(e,"test",{get:function(){return{resetLoggers:function(t){void 0===t&&(t={});var r=e._loggers;return e._loggers=t,r},set throttlingDisabled(t){e._throttlingDisabled=t}}},enumerable:!0,configurable:!0}),e.getLogger=function(t){var r=e._loggers[t];return r||(r=new e({module:t})),r},e.prototype._parentWithMember=function(e,t){for(var r=this;r&&null==r[e];)r=r.parent;return r?r[e]:t},e.prototype._inheritedWriter=function(){return this._parentWithMember("writer",this._consoleWriter)},e.prototype._consoleWriter=function(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];console[e].apply(console,["["+t+"]"].concat(r))},e.prototype._matchLevel=function(e){return o[this._parentWithMember("level","error")]<=o[e]},e.prototype._isEnabled=function(){return this._parentWithMember("enabled",!0)},e.prototype._argsToKey=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return n.numericHash(JSON.stringify(e,function(e,t){return"object"!=typeof t||Array.isArray(t)?t:"[Object]"}))},e._scheduleTickCounterIncrement=function(){e._tickCounterScheduled||(e._tickCounterScheduled=!0,Promise.resolve().then(function(){e._tickCounter++,e._tickCounterScheduled=!1}))},e._loggers={},e._tickCounter=0,e._tickCounterScheduled=!1,e._throttlingDisabled=!1,e}(),e.getLogger("esri").level="warn",e})},"esri/core/string":function(){define(["require","exports","./object","@dojo/framework/shim/string"],function(e,t,r,n){Object.defineProperty(t,"__esModule",{value:!0});var o=/\{([^\}]+)\}/g;t.endsWith=n.endsWith,t.startsWith=n.startsWith,t.replace=function(e,t){return e.replace(o,"object"==typeof t?function(e,n){return r.getDeepValue(n,t)}:function(e,r){return t(r)})},t.escapeRegExpString=function(e){return e.replace(/([\.$?*|{}\(\)\[\]\\\/\+\-^])/g,function(e){return"\\"+e})},t.numericHash=function(e){for(var t=0,r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t|=0;return t}})},"esri/core/object":function(){define(["require","exports"],function(e,t){function r(e,t,r){for(var n=0;n<e.length;n++){var o=e[n];if(null==r)return;if(!(o in r)){if(!t)return;r[o]={}}r=r[o]}return r}Object.defineProperty(t,"__esModule",{value:!0}),t.getDeepValue=function(e,t){if(null!=t)return t[e]||r(e.split("."),!1,t)},t.setDeepValue=function(e,t,n){var o=e.split(".");e=o.pop(),(n=r(o,!0,n))&&e&&(n[e]=t)}})},"@dojo/framework/shim/string":function(){!function(e){"object"==typeof module&&"object"==typeof module.exports?void 0!==(e=e(require,exports))&&(module.exports=e):"function"==typeof define&&define.amd&&define("require exports tslib ./global ../has/has ./support/util".split(" "),e)}(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=e("tslib"),n=e("./global"),o=e("../has/has");if(e=e("./support/util"),t.HIGH_SURROGATE_MIN=55296,t.HIGH_SURROGATE_MAX=56319,t.LOW_SURROGATE_MIN=56320,t.LOW_SURROGATE_MAX=57343,o.default("es6-string")&&o.default("es6-string-raw"))t.fromCodePoint=n.default.String.fromCodePoint,t.raw=n.default.String.raw,t.codePointAt=e.wrapNative(n.default.String.prototype.codePointAt),t.endsWith=e.wrapNative(n.default.String.prototype.endsWith),t.includes=e.wrapNative(n.default.String.prototype.includes),t.normalize=e.wrapNative(n.default.String.prototype.normalize),t.repeat=e.wrapNative(n.default.String.prototype.repeat),t.startsWith=e.wrapNative(n.default.String.prototype.startsWith);else{var i=function(e,t,r,n,o){if(void 0===o&&(o=!1),null==t)throw new TypeError("string."+e+" requires a valid string to search against.");return e=t.length,[t,String(r),Math.min(Math.max(n!==n?o?e:0:n,0),e)]};t.fromCodePoint=function(){for(var e=0;e<arguments.length;e++);if(!(e=arguments.length))return"";for(var r=String.fromCharCode,n=[],o=-1,i="";++o<e;){var a=Number(arguments[o]);if(!(isFinite(a)&&Math.floor(a)===a&&0<=a&&1114111>=a))throw RangeError("string.fromCodePoint: Invalid code point "+a);65535>=a?n.push(a):(a-=65536,n.push((a>>10)+t.HIGH_SURROGATE_MIN,a%1024+t.LOW_SURROGATE_MIN)),(o+1===e||16384<n.length)&&(i+=r.apply(null,n),n.length=0)}return i},t.raw=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var r=e.raw,n="",o=t.length;if(null==e||null==e.raw)throw new TypeError("string.raw requires a valid callSite object with a raw value");for(var i=0,a=r.length;i<a;i++)n+=r[i]+(i<o&&i<a-1?t[i]:"");return n},t.codePointAt=function(e,r){if(void 0===r&&(r=0),null==e)throw new TypeError("string.codePointAt requries a valid string.");var n=e.length;if(r!==r&&(r=0),!(0>r||r>=n)){var o=e.charCodeAt(r);return o>=t.HIGH_SURROGATE_MIN&&o<=t.HIGH_SURROGATE_MAX&&n>r+1&&(e=e.charCodeAt(r+1))>=t.LOW_SURROGATE_MIN&&e<=t.LOW_SURROGATE_MAX?1024*(o-t.HIGH_SURROGATE_MIN)+e-t.LOW_SURROGATE_MIN+65536:o}},t.endsWith=function(e,t,n){if(""===t)return!0;if(void 0===n)n=e.length;else if(null===n||isNaN(n))return!1;n=r.__read(i("endsWith",e,t,n,!0),3),e=n[0],t=n[1],n=n[2];var o=n-t.length;return!(0>o)&&e.slice(o,n)===t},t.includes=function(e,t,n){return void 0===n&&(n=0),n=r.__read(i("includes",e,t,n),3),e=n[0],t=n[1],n=n[2],-1!==e.indexOf(t,n)},t.repeat=function(e,t){if(void 0===t&&(t=0),null==e)throw new TypeError("string.repeat requires a valid string.");if(t!==t&&(t=0),0>t||1/0===t)throw new RangeError("string.repeat requires a non-negative finite count.");for(var r="";t;)t%2&&(r+=e),1<t&&(e+=e),t>>=1;return r},t.startsWith=function(e,t,n){void 0===n&&(n=0),t=String(t),n=r.__read(i("startsWith",e,t,n),3),e=n[0],t=n[1],n=n[2];var o=n+t.length;return!(o>e.length)&&e.slice(n,o)===t}}o.default("es2017-string")?(t.padEnd=e.wrapNative(n.default.String.prototype.padEnd),t.padStart=e.wrapNative(n.default.String.prototype.padStart)):(t.padEnd=function(e,r,n){if(void 0===n&&(n=" "),null===e||void 0===e)throw new TypeError("string.repeat requires a valid string.");if(1/0===r)throw new RangeError("string.padEnd requires a non-negative finite count.");return(null===r||void 0===r||0>r)&&(r=0),e=String(e),r-=e.length,0<r&&(e+=t.repeat(n,Math.floor(r/n.length))+n.slice(0,r%n.length)),e},t.padStart=function(e,r,n){if(void 0===n&&(n=" "),null===e||void 0===e)throw new TypeError("string.repeat requires a valid string.");if(1/0===r)throw new RangeError("string.padStart requires a non-negative finite count.");return(null===r||void 0===r||0>r)&&(r=0),e=String(e),r-=e.length,0<r&&(e=t.repeat(n,Math.floor(r/n.length))+n.slice(0,r%n.length)+e),e})})},"tslib/tslib":function(){var e,t,r,n,o,i,a,s,l,u,c,p,d,f,h,y,m,g,v;!function(e){function t(e,t){return e!==r&&("function"==typeof Object.create?Object.defineProperty(e,"__esModule",{value:!0}):e.__esModule=!0),function(r,n){return e[r]=t?t(r,n):n}}var r="object"==typeof global?global:"object"==typeof self?self:"object"==typeof this?this:{};"function"==typeof define&&define.amd?define("tslib",["exports"],function(n){e(t(r,t(n)))}):e("object"==typeof module&&"object"==typeof module.exports?t(r,t(module.exports)):t(r))}(function(b){var w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};e=function(e,t){function r(){this.constructor=e}w(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},t=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},r=function(e,t){var r,n={};for(r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)0>t.indexOf(r[o])&&(n[r[o]]=e[r[o]])}return n},n=function(e,t,r,n){var o,i=arguments.length,a=3>i?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;0<=s;s--)(o=e[s])&&(a=(3>i?o(a):3<i?o(t,r,a):o(t,r))||a);return 3<i&&a&&Object.defineProperty(t,r,a),a},o=function(e,t){return function(r,n){t(r,n,e)}},i=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=function(e,t,r,n){return new(r||(r=Promise))(function(o,i){function a(e){try{l(n.next(e))}catch(e){i(e)}}function s(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){e.done?o(e.value):new r(function(t){t(e.value)}).then(a,s)}l((n=n.apply(e,t||[])).next())})},s=function(e,t){function r(e){return function(t){return n([e,t])}}function n(r){if(o)throw new TypeError("Generator is already executing.");for(;l;)try{if(o=1,i&&(a=2&r[0]?i.return:r[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,r[1])).done)return a;switch(i=0,a&&(r=[2&r[0],a.value]),r[0]){case 0:case 1:a=r;break;case 4:return l.label++,{value:r[1],done:!1};case 5:l.label++,i=r[1],r=[0];continue;case 7:r=l.ops.pop(),l.trys.pop();continue;default:if(a=l.trys,!(a=0<a.length&&a[a.length-1])&&(6===r[0]||2===r[0])){l=0;continue}if(3===r[0]&&(!a||r[1]>a[0]&&r[1]<a[3]))l.label=r[1];else if(6===r[0]&&l.label<a[1])l.label=a[1],a=r;else{if(!(a&&l.label<a[2])){a[2]&&l.ops.pop(),l.trys.pop();continue}l.label=a[2],l.ops.push(r)}}r=t.call(e,l)}catch(e){r=[6,e],i=0}finally{o=a=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}var o,i,a,s,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},l=function(e,t){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])},u=function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}},c=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;e=r.call(e);var n,o,i=[];try{for(;(void 0===t||0<t--)&&!(n=e.next()).done;)i.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=e.return)&&r.call(e)}finally{if(o)throw o.error}}return i},p=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(c(arguments[t]));return e},d=function(e){return this instanceof d?(this.v=e,this):new d(e)},f=function(e,t,r){function n(e){u[e]&&(l[e]=function(t){return new Promise(function(r,n){1<c.push([e,t,r,n])||o(e,t)})})}function o(e,t){try{var r=u[e](t);r.value instanceof d?Promise.resolve(r.value.v).then(i,a):s(c[0][2],r)}catch(e){s(c[0][3],e)}}function i(e){o("next",e)}function a(e){o("throw",e)}function s(e,t){e(t),c.shift(),c.length&&o(c[0][0],c[0][1])}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var l,u=r.apply(e,t||[]),c=[];return l={},n("next"),n("throw"),n("return"),l[Symbol.asyncIterator]=function(){return this},l},h=function(e){function t(t,o){r[t]=e[t]?function(r){return(n=!n)?{value:d(e[t](r)),done:"return"===t}:o?o(r):r}:o}var r,n;return r={},t("next"),t("throw",function(e){throw e}),t("return"),r[Symbol.iterator]=function(){return this},r},y=function(e){function t(t){n[t]=e[t]&&function(n){return new Promise(function(o,i){n=e[t](n),r(o,i,n.done,n.value)})}}function r(e,t,r,n){Promise.resolve(n).then(function(t){e({value:t,done:r})},t)}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,o=e[Symbol.asyncIterator];return o?o.call(e):(e="function"==typeof u?u(e):e[Symbol.iterator](),n={},t("next"),t("throw"),t("return"),n[Symbol.asyncIterator]=function(){return this},n)},m=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},g=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t},v=function(e){return e&&e.__esModule?e:{default:e}},b("__extends",e),b("__assign",t),b("__rest",r),b("__decorate",n),b("__param",o),b("__metadata",i),b("__awaiter",a),b("__generator",s),b("__exportStar",l),b("__values",u),b("__read",c),b("__spread",p),b("__await",d),b("__asyncGenerator",f),b("__asyncDelegator",h),b("__asyncValues",y),b("__makeTemplateObject",m),b("__importStar",g),b("__importDefault",v)})},"@dojo/framework/shim/global":function(){!function(e){"object"==typeof module&&"object"==typeof module.exports?void 0!==(e=e(require,exports))&&(module.exports=e):"function"==typeof define&&define.amd&&define(["require","exports"],e)}(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),e=function(){return"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:void 0}(),t.default=e})},"@dojo/framework/has/has":function(){!function(e){"object"==typeof module&&"object"==typeof module.exports?void 0!==(e=e(require,exports))&&(module.exports=e):"function"==typeof define&&define.amd&&define(["require","exports","tslib","../shim/global"],e)}(function(e,t){function r(e){return!!((e=e.toLowerCase())in s||e in t.testCache||t.testFunctions[e])}function n(e,n,o){void 0===o&&(o=!1);var i=e.toLowerCase();if(r(i)&&!o&&!(i in s))throw new TypeError('Feature "'+e+'" exists and overwrite not true.');"function"==typeof n?t.testFunctions[i]=n:(t.testCache[i]=n,delete t.testFunctions[i])}function o(e){var r=e.toLowerCase();if(r in s)e=s[r];else if(t.testFunctions[r])e=t.testCache[r]=t.testFunctions[r].call(null),delete t.testFunctions[r];else{if(!(r in t.testCache))throw new TypeError('Attempt to detect unregistered has feature "'+e+'"');e=t.testCache[r]}return e}Object.defineProperty(t,"__esModule",{value:!0});var i=e("tslib"),a=e("../shim/global");t.testCache={},t.testFunctions={},e=(a.default.DojoHasEnvironment||{}).staticFeatures,"DojoHasEnvironment"in a.default&&delete a.default.DojoHasEnvironment;var s=e?"function"==typeof e?e.apply(a.default):e:{};t.load=function(e,t,r,n){e?t([e],r):r()},t.normalize=function(e,t){function r(e){var t=n[i++];return":"===t?null:"?"===n[i++]?!e&&o(t)?r():(r(!0),r(e)):t}var n=e.match(/[\?:]|[^:\?]*/g)||[],i=0;return(e=r())&&t(e)},t.exists=r,t.add=n,t.default=o,n("public-path",void 0),n("dojo-debug",!1),n("host-browser","undefined"!=typeof document&&"undefined"!=typeof location),n("host-node",function(){if("object"==typeof process&&process.versions&&process.versions.node)return process.versions.node}),n("fetch","fetch"in a.default&&"function"==typeof a.default.fetch,!0),n("es6-array",function(){return["from","of"].every(function(e){return e in a.default.Array})&&["findIndex","find","copyWithin"].every(function(e){return e in a.default.Array.prototype})},!0),n("es6-array-fill",function(){return"fill"in a.default.Array.prototype&&1===[1].fill(9,Number.POSITIVE_INFINITY)[0]},!0),n("es7-array",function(){return"includes"in a.default.Array.prototype},!0),n("es6-map",function(){if("function"==typeof a.default.Map)try{var e=new a.default.Map([[0,1]]);return e.has(0)&&"function"==typeof e.keys&&o("es6-symbol")&&"function"==typeof e.values&&"function"==typeof e.entries}catch(e){}return!1},!0),n("es6-math",function(){return"clz32 sign log10 log2 log1p expm1 cosh sinh tanh acosh asinh atanh trunc fround cbrt hypot".split(" ").every(function(e){return"function"==typeof a.default.Math[e]})},!0),n("es6-math-imul",function(){return"imul"in a.default.Math&&-5===Math.imul(4294967295,5)},!0),n("es6-object",function(){return o("es6-symbol")&&["assign","is","getOwnPropertySymbols","setPrototypeOf"].every(function(e){return"function"==typeof a.default.Object[e]})},!0),n("es2017-object",function(){return["values","entries","getOwnPropertyDescriptors"].every(function(e){return"function"==typeof a.default.Object[e]})},!0),n("es-observable",function(){return void 0!==a.default.Observable},!0),n("es6-promise",function(){return void 0!==a.default.Promise&&o("es6-symbol")},!0),n("es2018-promise-finally",function(){return o("es6-promise")&&void 0!==a.default.Promise.prototype.finally},!0),n("es6-set",function(){if("function"==typeof a.default.Set){var e=new a.default.Set([1]);return e.has(1)&&"keys"in e&&"function"==typeof e.keys&&o("es6-symbol")}return!1},!0),n("es6-string",function(){return["fromCodePoint"].every(function(e){return"function"==typeof a.default.String[e]})&&"codePointAt normalize repeat startsWith endsWith includes".split(" ").every(function(e){return"function"==typeof a.default.String.prototype[e]})},!0),n("es6-string-raw",function(){function e(e){for(var t=1;t<arguments.length;t++);return t=i.__spread(e),t.raw=e.raw,t}if("raw"in a.default.String){var t=e(l||(l=i.__makeTemplateObject(["a\n",""],["a\\n",""])),1);return t.raw=["a\\n"],"a\\n"===a.default.String.raw(t,42)}return!1},!0),n("es2017-string",function(){return["padStart","padEnd"].every(function(e){return"function"==typeof a.default.String.prototype[e]})},!0),n("es6-symbol",function(){return void 0!==a.default.Symbol&&"symbol"==typeof Symbol()},!0),n("es6-weakmap",function(){if(void 0!==a.default.WeakMap){var e={},t={},r=new a.default.WeakMap([[e,1]]);return Object.freeze(e),1===r.get(e)&&r.set(t,2)===r&&o("es6-symbol")}return!1},!0),n("microtasks",function(){return o("es6-promise")||0||o("dom-mutationobserver")},!0),n("postmessage",function(){return void 0!==a.default.window&&"function"==typeof a.default.postMessage},!0),n("raf",function(){return"function"==typeof a.default.requestAnimationFrame},!0),n("setimmediate",function(){return void 0!==a.default.setImmediate},!0),n("dom-mutationobserver",function(){if(o("host-browser")&&(a.default.MutationObserver||a.default.WebKitMutationObserver)){var e=document.createElement("div"),t=new(a.default.MutationObserver||a.default.WebKitMutationObserver)(function(){});return t.observe(e,{attributes:!0}),e.style.setProperty("display","block"),!!t.takeRecords().length}return!1},!0),n("dom-webanimation",function(){return o("host-browser")&&void 0!==a.default.Animation&&void 0!==a.default.KeyframeEffect},!0),n("abort-controller",function(){return void 0!==a.default.AbortController}),n("abort-signal",function(){return void 0!==a.default.AbortSignal}),n("dom-intersection-observer",function(){return o("host-browser")&&void 0!==a.default.IntersectionObserver},!0),n("dom-resize-observer",function(){return o("host-browser")&&void 0!==a.default.ResizeObserver},!0),n("dom-pointer-events",function(){return o("host-browser")&&void 0!==a.default.onpointerdown},!0),n("build-elide",!1);var l})},"@dojo/framework/shim/support/util":function(){!function(e){"object"==typeof module&&"object"==typeof module.exports?void 0!==(e=e(require,exports))&&(module.exports=e):"function"==typeof define&&define.amd&&define(["require","exports"],e)}(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.getValueDescriptor=function(e,t,r,n){return void 0===t&&(t=!1),void 0===r&&(r=!0),void 0===n&&(n=!0),{value:e,enumerable:t,writable:r,configurable:n}},t.wrapNative=function(e){return function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];return e.apply(t,r)}}})},"@dojo/framework/shim/Promise":function(){!function(e){"object"==typeof module&&"object"==typeof module.exports?void 0!==(e=e(require,exports))&&(module.exports=e):"function"==typeof define&&define.amd&&define("require exports tslib ./global ./support/queue ./Symbol ../has/has".split(" "),e)}(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=e("tslib"),n=e("./global"),o=e("./support/queue");e("./Symbol"),e=e("../has/has"),t.ShimPromise=n.default.Promise,t.isThenable=function(e){return e&&"function"==typeof e.then},e.default("es6-promise")||(n.default.Promise=t.ShimPromise=(i=function(){function e(r){var n=this;this.state=1,this[Symbol.toStringTag]="Promise";var i=!1,a=[],s=function(e){a&&a.push(e)},l=function(e,t){1===n.state&&(n.state=e,n.resolvedValue=t,s=o.queueMicroTask,a&&0<a.length&&o.queueMicroTask(function(){if(a){for(var e=a.length,t=0;t<e;++t)a[t].call(null);a=null}}))},u=function(e,r){1!==n.state||i||(t.isThenable(r)?(r.then(l.bind(null,0),l.bind(null,2)),i=!0):l(e,r))};this.then=function(t,r){return new e(function(e,o){s(function(){var i=2===n.state?r:t;if("function"==typeof i)try{e(i(n.resolvedValue))}catch(e){o(e)}else 2===n.state?o(n.resolvedValue):e(n.resolvedValue)})})};try{r(u.bind(null,0),u.bind(null,2))}catch(e){l(2,e)}}return e.all=function(n){return new this(function(o,i){function a(e,t){l[e]=t,++u,p||u<c||o(l)}function s(r,n){++c,t.isThenable(n)?n.then(a.bind(null,r),i):e.resolve(n).then(a.bind(null,r))}var l=[],u=0,c=0,p=!0,d=0;try{for(var f=r.__values(n),h=f.next();!h.done;h=f.next())s(d,h.value),d++}catch(e){y={error:e}}finally{try{h&&!h.done&&(m=f.return)&&m.call(f)}finally{if(y)throw y.error}}p=!1,u<c||o(l);var y,m})},e.race=function(t){return new this(function(n,o){try{for(var i=r.__values(t),a=i.next();!a.done;a=i.next()){var s=a.value;s instanceof e?s.then(n,o):e.resolve(s).then(n)}}catch(e){l={error:e}}finally{try{a&&!a.done&&(u=i.return)&&u.call(i)}finally{if(l)throw l.error}}var l,u})},e.reject=function(e){return new this(function(t,r){r(e)})},e.resolve=function(e){return new this(function(t){t(e)})},e.prototype.catch=function(e){return this.then(void 0,e)},e}(),i[Symbol.species]=t.ShimPromise,i)),e.default("es2018-promise-finally")||(n.default.Promise.prototype.finally=function(e){return this.then(e&&function(t){return Promise.resolve(e()).then(function(){return t})},e&&function(t){return Promise.resolve(e()).then(function(){throw t})})}),t.default=t.ShimPromise;var i})},"@dojo/framework/shim/support/queue":function(){!function(e){"object"==typeof module&&"object"==typeof module.exports?void 0!==(e=e(require,exports))&&(module.exports=e):"function"==typeof define&&define.amd&&define(["require","exports","../global","../../has/has"],e)}(function(e,t){function r(e){e&&e.isActive&&e.callback&&e.callback()}function n(e,t){return{destroy:function(){this.destroy=function(){},e.isActive=!1,e.callback=null,t&&t()}}}Object.defineProperty(t,"__esModule",{value:!0});var o,i,a=e("../global"),s=e("../../has/has");if(t.queueTask=function(){function e(e){e={isActive:!0,callback:e};var r=i(e);return n(e,t&&function(){t(r)})}var t,i;if(s.default("postmessage")){var l=[];a.default.addEventListener("message",function(e){e.source===a.default&&"dojo-queue-message"===e.data&&(e.stopPropagation(),l.length&&r(l.shift()))}),i=function(e){l.push(e),a.default.postMessage("dojo-queue-message","*")}}else s.default("setimmediate")?(t=a.default.clearImmediate,i=function(e){return setImmediate(r.bind(null,e))}):(t=a.default.clearTimeout,i=function(e){return setTimeout(r.bind(null,e),0)});return s.default("microtasks")?e:function(t){return o(),e(t)}}(),!s.default("microtasks")){var l=!1;i=[],o=function(){l||(l=!0,t.queueTask(function(){if(l=!1,i.length)for(var e=void 0;e=i.shift();)r(e)}))}}t.queueAnimationTask=function(){function e(e){e={isActive:!0,callback:e};var t=requestAnimationFrame(r.bind(null,e));return n(e,function(){cancelAnimationFrame(t)})}return s.default("raf")?s.default("microtasks")?e:function(t){return o(),e(t)}:t.queueTask}(),t.queueMicroTask=function(){var e;if(s.default("host-node"))e=function(e){a.default.process.nextTick(r.bind(null,e))};else if(s.default("es6-promise"))e=function(e){a.default.Promise.resolve(e).then(r)};else if(s.default("dom-mutationobserver")){var t=a.default.MutationObserver||a.default.WebKitMutationObserver,l=document.createElement("div"),u=[];new t(function(){for(;0<u.length;){var e=u.shift();e&&e.isActive&&e.callback&&e.callback()}}).observe(l,{attributes:!0}),e=function(e){u.push(e),l.setAttribute("queueStatus","1")}}else e=function(e){o(),i.push(e)};return function(t){return t={isActive:!0,callback:t},e(t),n(t)}}()})},"@dojo/framework/shim/Symbol":function(){!function(e){"object"==typeof module&&"object"==typeof module.exports?void 0!==(e=e(require,exports))&&(module.exports=e):"function"==typeof define&&define.amd&&define(["require","exports","../has/has","./global","./support/util"],e)}(function(e,t){function r(e){return e&&("symbol"==typeof e||"Symbol"===e["@@toStringTag"])||!1}Object.defineProperty(t,"__esModule",{value:!0});var n=e("../has/has"),o=e("./global"),i=e("./support/util");if(t.Symbol=o.default.Symbol,!n.default("es6-symbol")){var a=function(e){if(!r(e))throw new TypeError(e+" is not a symbol");return e},s=Object.defineProperties,l=Object.defineProperty,u=Object.create,c=Object.prototype,p={},d=function(){var e=u(null);return function(t){for(var r,n=0;e[String(t)+(n||"")];)++n;return t+=String(n||""),e[t]=!0,r="@@"+t,Object.getOwnPropertyDescriptor(c,r)||l(c,r,{set:function(e){l(this,r,i.getValueDescriptor(e))}}),r}}(),f=function e(t){if(this instanceof f)throw new TypeError("TypeError: Symbol is not a constructor");return e(t)};t.Symbol=o.default.Symbol=function e(t){if(this instanceof e)throw new TypeError("TypeError: Symbol is not a constructor");var r=Object.create(f.prototype);return t=void 0===t?"":String(t),s(r,{__description__:i.getValueDescriptor(t),__name__:i.getValueDescriptor(d(t))})},l(t.Symbol,"for",i.getValueDescriptor(function(e){return p[e]?p[e]:p[e]=t.Symbol(String(e))})),s(t.Symbol,{keyFor:i.getValueDescriptor(function(e){var t;a(e);for(t in p)if(p[t]===e)return t}),hasInstance:i.getValueDescriptor(t.Symbol.for("hasInstance"),!1,!1),isConcatSpreadable:i.getValueDescriptor(t.Symbol.for("isConcatSpreadable"),!1,!1),iterator:i.getValueDescriptor(t.Symbol.for("iterator"),!1,!1),match:i.getValueDescriptor(t.Symbol.for("match"),!1,!1),observable:i.getValueDescriptor(t.Symbol.for("observable"),!1,!1),replace:i.getValueDescriptor(t.Symbol.for("replace"),!1,!1),search:i.getValueDescriptor(t.Symbol.for("search"),!1,!1),species:i.getValueDescriptor(t.Symbol.for("species"),!1,!1),split:i.getValueDescriptor(t.Symbol.for("split"),!1,!1),toPrimitive:i.getValueDescriptor(t.Symbol.for("toPrimitive"),!1,!1),toStringTag:i.getValueDescriptor(t.Symbol.for("toStringTag"),!1,!1),unscopables:i.getValueDescriptor(t.Symbol.for("unscopables"),!1,!1)}),s(f.prototype,{constructor:i.getValueDescriptor(t.Symbol),toString:i.getValueDescriptor(function(){return this.__name__},!1,!1)}),s(t.Symbol.prototype,{toString:i.getValueDescriptor(function(){return"Symbol ("+a(this).__description__+")"}),valueOf:i.getValueDescriptor(function(){return a(this)})}),l(t.Symbol.prototype,t.Symbol.toPrimitive,i.getValueDescriptor(function(){return a(this)})),l(t.Symbol.prototype,t.Symbol.toStringTag,i.getValueDescriptor("Symbol",!1,!1,!0)),l(f.prototype,t.Symbol.toPrimitive,i.getValueDescriptor(t.Symbol.prototype[t.Symbol.toPrimitive],!1,!1,!0)),l(f.prototype,t.Symbol.toStringTag,i.getValueDescriptor(t.Symbol.prototype[t.Symbol.toStringTag],!1,!1,!0))}t.isSymbol=r,"hasInstance isConcatSpreadable iterator species replace search split match toPrimitive toStringTag unscopables observable".split(" ").forEach(function(e){t.Symbol[e]||Object.defineProperty(t.Symbol,e,i.getValueDescriptor(t.Symbol.for(e),!1,!1))}),t.default=t.Symbol})},"esri/geometry/Extent":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/maybe ../core/string ../core/accessorSupport/decorators ./Geometry ./Point ./SpatialReference ./support/contains ./support/intersects ./support/spatialReferenceUtils ./support/webMercatorUtils".split(" "),function(e,t,r,n,o,i,a,s,l,u,c,p,d,f){function h(e,t,r){return null==t?r:null==r?t:e(t,r)}return e=function(e){function t(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return t=e.apply(this,t)||this,t.type="extent",t.xmin=0,t.ymin=0,t.mmin=void 0,t.zmin=void 0,t.xmax=0,t.ymax=0,t.mmax=void 0,t.zmax=void 0,t}r(t,e),s=t,t.prototype.normalizeCtorArgs=function(e,t,r,n,o){return!e||"esri.geometry.SpatialReference"!==e.declaredClass&&null==e.wkid?"object"==typeof e?(e.spatialReference=null==e.spatialReference?u.WGS84:e.spatialReference,e):{xmin:e,ymin:t,xmax:r,ymax:n,spatialReference:null==o?u.WGS84:o}:{spatialReference:e,xmin:0,ymin:0,xmax:0,ymax:0}},t.fromBounds=function(e,t){return new s({xmin:e[0],ymin:e[1],xmax:e[2],ymax:e[3],spatialReference:t})},Object.defineProperty(t.prototype,"center",{get:function(){var e=new l({x:.5*(this.xmin+this.xmax),y:.5*(this.ymin+this.ymax),spatialReference:this.spatialReference});return this.hasZ&&(e.z=.5*(this.zmin+this.zmax)),this.hasM&&(e.m=.5*(this.mmin+this.mmax)),e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"extent",{get:function(){return this.clone()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hasM",{get:function(){return null!=this.mmin&&null!=this.mmax},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hasZ",{get:function(){return null!=this.zmin&&null!=this.zmax},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return Math.abs(this.ymax-this.ymin)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return Math.abs(this.xmax-this.xmin)},enumerable:!0,configurable:!0}),t.prototype.centerAt=function(e){var t=this.center;return null!=e.z&&this.hasZ?this.offset(e.x-t.x,e.y-t.y,e.z-t.z):this.offset(e.x-t.x,e.y-t.y)},t.prototype.clone=function(){var e=new s;return e.xmin=this.xmin,e.ymin=this.ymin,e.xmax=this.xmax,e.ymax=this.ymax,e.spatialReference=this.spatialReference,null!=this.zmin&&(e.zmin=this.zmin,e.zmax=this.zmax),null!=this.mmin&&(e.mmin=this.mmin,e.mmax=this.mmax),e},t.prototype.contains=function(e){if(!e)return!1;var t=this.spatialReference,r=e.spatialReference;return t&&r&&!t.equals(r)&&f.canProject(t,r)&&(e=t.isWebMercator?f.geographicToWebMercator(e):f.webMercatorToGeographic(e,!0)),"point"===e.type?c.extentContainsPoint(this,e):"extent"===e.type&&c.extentContainsExtent(this,e)},t.prototype.equals=function(e){if(!e)return!1;var t=this.spatialReference,r=e.spatialReference;return t&&r&&!t.equals(r)&&f.canProject(t,r)&&(e=t.isWebMercator?f.geographicToWebMercator(e):f.webMercatorToGeographic(e,!0)),this.xmin===e.xmin&&this.ymin===e.ymin&&this.zmin===e.zmin&&this.mmin===e.mmin&&this.xmax===e.xmax&&this.ymax===e.ymax&&this.zmax===e.zmax&&this.mmax===e.mmax},t.prototype.expand=function(e){e=.5*(1-e);var t=this.width*e,r=this.height*e;return this.xmin+=t,this.ymin+=r,this.xmax-=t,this.ymax-=r,this.hasZ&&(t=(this.zmax-this.zmin)*e,this.zmin+=t,this.zmax-=t),this.hasM&&(e*=this.mmax-this.mmin,this.mmin+=e,this.mmax-=e),this},t.prototype.intersects=function(e){if(o.isNone(e))return!1;var t=this.spatialReference,r=e.spatialReference;return t&&r&&!t.equals(r)&&f.canProject(t,r)&&(e=t.isWebMercator?f.geographicToWebMercator(e):f.webMercatorToGeographic(e,!0)),t=p.getExtentIntersector(e.type),"mesh"!==e.type?t(this,e):t(this,e.extent)},t.prototype.normalize=function(){var e=this._normalize(!1,!0);return Array.isArray(e)?e:[e]},t.prototype.offset=function(e,t,r){return this.xmin+=e,this.ymin+=t,this.xmax+=e,this.ymax+=t,null!=r&&(this.zmin+=r,this.zmax+=r),this},t.prototype.shiftCentralMeridian=function(){return this._normalize(!0)},t.prototype.union=function(e){return this.xmin=Math.min(this.xmin,e.xmin),this.ymin=Math.min(this.ymin,e.ymin),this.xmax=Math.max(this.xmax,e.xmax),this.ymax=Math.max(this.ymax,e.ymax),(this.hasZ||e.hasZ)&&(this.zmin=h(Math.min,this.zmin,e.zmin),this.zmax=h(Math.max,this.zmax,e.zmax)),(this.hasM||e.hasM)&&(this.mmin=h(Math.min,this.mmin,e.mmin),this.mmax=h(Math.max,this.mmax,e.mmax)),this},t.prototype.intersection=function(e){return this.intersects(e)?(this.xmin=Math.max(this.xmin,e.xmin),this.ymin=Math.max(this.ymin,e.ymin),this.xmax=Math.min(this.xmax,e.xmax),this.ymax=Math.min(this.ymax,e.ymax),(this.hasZ||e.hasZ)&&(this.zmin=h(Math.max,this.zmin,e.zmin),this.zmax=h(Math.min,this.zmax,e.zmax)),(this.hasM||e.hasM)&&(this.mmin=h(Math.max,this.mmin,e.mmin),this.mmax=h(Math.min,this.mmax,e.mmax)),this):null},t.prototype.toJSON=function(e){return this.write(null,e)},t.prototype._shiftCM=function(e){if(void 0===e&&(e=d.getInfo(this.spatialReference)),!e||!this.spatialReference)return this;var t=this.spatialReference,r=this._getCM(e);if(r){var n=t.isWebMercator?f.webMercatorToGeographic(r):r;this.xmin-=r.x,this.xmax-=r.x,t.isWebMercator||(n.x=this._normalizeX(n.x,e).x),this.spatialReference=new u(i.replace(t.isWGS84?e.altTemplate:e.wkTemplate,{Central_Meridian:n.x}))}return this},t.prototype._getCM=function(e){var t=null,r=e.valid;e=r[0];var r=r[1],n=this.xmin,o=this.xmax;return n>=e&&n<=r&&o>=e&&o<=r||(t=this.center),t},t.prototype._normalize=function(e,t,r){var n=this.spatialReference;if(!n)return this;if(!(r=r||d.getInfo(n)))return this;var o=this._getParts(r).map(function(e){return e.extent});if(2>o.length)return o[0]||this;if(2<o.length)return e?this._shiftCM(r):this.set({xmin:r.valid[0],xmax:r.valid[1]});if(e)return this._shiftCM(r);if(t)return o;var i=!0,a=!0;return o.forEach(function(e){e.hasZ||(i=!1),e.hasM||(a=!1)}),{rings:o.map(function(e){var t=[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]];if(i)for(var r=(e.zmax-e.zmin)/2,n=0;n<t.length;n++)t[n].push(r);if(a)for(e=(e.mmax-e.mmin)/2,n=0;n<t.length;n++)t[n].push(e);return t}),hasZ:i,hasM:a,spatialReference:n}},t.prototype._getParts=function(e){var t=this.cache._parts;if(!t){var t=[],r=this.ymin,n=this.ymax,o=this.spatialReference,i=this.width,a=this.xmin,l=this.xmax,u=void 0;e=e||d.getInfo(o);var c=e.valid,p=c[0],f=c[1],u=this._normalizeX(this.xmin,e),h=u.x,c=u.frameId,u=this._normalizeX(this.xmax,e),y=u.x;if(e=u.frameId,u=h===y&&0<i,i>2*f){for(i=new s(a<l?h:y,r,f,n,o),a=new s(p,r,a<l?y:h,n,o),l=new s(0,r,f,n,o),r=new s(p,r,0,n,o),n=[],o=[],i.contains(l)&&n.push(c),i.contains(r)&&o.push(c),a.contains(l)&&n.push(e),a.contains(r)&&o.push(e),p=c+1;p<e;p++)n.push(p),o.push(p);t.push({extent:i,frameIds:[c]},{extent:a,frameIds:[e]},{extent:l,frameIds:n},{extent:r,frameIds:o})}else h>y||u?t.push({extent:new s(h,r,f,n,o),frameIds:[c]},{extent:new s(p,r,y,n,o),frameIds:[e]}):t.push({extent:new s(h,r,y,n,o),frameIds:[c]});this.cache._parts=t}if(e=this.hasZ,r=this.hasM,e||r)for(c={},e&&(c.zmin=this.zmin,c.zmax=this.zmax),r&&(c.mmin=this.mmin,c.mmax=this.mmax),e=0;e<t.length;e++)t[e].extent.set(c);return t},t.prototype._normalizeX=function(e,t){var r=t.valid;t=r[0];var n=r[1],r=2*n,o=0;return e>n?(t=Math.ceil(Math.abs(e-n)/r),e-=t*r,o=t):e<t&&(t=Math.ceil(Math.abs(e-t)/r),e+=t*r,o=-t),{x:e,frameId:o}};var s;return n([a.property({dependsOn:"xmin ymin zmin mmin xmax ymax zmax mmax spatialReference".split(" ")})],t.prototype,"cache",void 0),n([a.property({readOnly:!0,dependsOn:["cache"]})],t.prototype,"center",null),n([a.property({readOnly:!0,dependsOn:["cache"]})],t.prototype,"extent",null),n([a.property({readOnly:!0,dependsOn:["mmin","mmax"],json:{write:{enabled:!1,overridePolicy:null}}})],t.prototype,"hasM",null),n([a.property({readOnly:!0,dependsOn:["zmin","zmax"],json:{write:{enabled:!1,overridePolicy:null}}})],t.prototype,"hasZ",null),n([a.property({readOnly:!0,dependsOn:["ymin","ymax"]})],t.prototype,"height",null),n([a.property({readOnly:!0,dependsOn:["xmin","xmax"]})],t.prototype,"width",null),n([a.property({type:Number,json:{type:[Number,String],write:{enabled:!0,allowNull:!0}}})],t.prototype,"xmin",void 0),n([a.property({type:Number,json:{write:!0}})],t.prototype,"ymin",void 0),n([a.property({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy:function(){return{enabled:this.hasM}}}}})],t.prototype,"mmin",void 0),n([a.property({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy:function(){return{enabled:this.hasZ}}}}})],t.prototype,"zmin",void 0),n([a.property({type:Number,json:{write:!0}})],t.prototype,"xmax",void 0),n([a.property({type:Number,json:{write:!0}})],t.prototype,"ymax",void 0),n([a.property({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy:function(){return{enabled:this.hasM}}}}})],t.prototype,"mmax",void 0),n([a.property({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy:function(){return{enabled:this.hasZ}}}}})],t.prototype,"zmax",void 0),t=s=n([a.subclass("esri.geometry.Extent")],t)}(a.declared(s)),e.prototype.toJSON.isDefaultToJSON=!0,e})},"esri/core/maybe":function(){define(["require","exports","./has"],function(e,t,r){function n(e,t,r){return null!=e?r(e):t}Object.defineProperty(t,"__esModule",{value:!0}),t.isSome=function(e){return null!=e},t.isNone=function(e){return null==e},t.applySome=function(e,t){return null!=e?t(e):null},t.unwrap=function(e){return e},t.unwrapOr=function(e,t){return null!=e?e:"function"==typeof t?t():t},t.expect=function(e){return e},t.mapSome=function(e,t){var r=[];return e.forEach(function(e){null!=(e=t(e))&&r.push(e)}),r},t.mapMany=function(e,t){for(var r=[],o=0;o<e.length;o++)r.push(n(e[o],null,t));return r},t.forEachSome=function(e,t){for(var r=0;r<e.length;r++)n(e[r],null,t)},t.mapOr=n,t.andThen=function(e,t){return null!=e?t(e):null},t.mapSomeFirst=function(e,t){for(var r=0;r<e.length;r++){var n=t(e[r]);if(null!=n)return n}return null},t.get=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];for(var r=e,n=0;n<t.length&&r;)r=r[t[n++]];return r}})},"esri/core/accessorSupport/decorators":function(){define("require exports ./decorators/aliasOf ./decorators/autoDestroy ./decorators/cast ./decorators/declared ./decorators/enumeration ./decorators/property ./decorators/reader ./decorators/shared ./decorators/subclass ./decorators/writer".split(" "),function(e,t,r,n,o,i,a,s,l,u,c,p){function d(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),d(r),d(n),d(o),d(i),d(a),d(s),d(l),d(u),d(c),d(p)})},"esri/core/accessorSupport/decorators/aliasOf":function(){define(["require","exports","../metadata"],function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.aliasOf=function(e){return function(t,n){r.getPropertyMetadata(t,n).aliasOf=e}}})},"esri/core/accessorSupport/metadata":function(){define(["require","exports","./utils"],function(e,t,r){function n(e){return null!=e.__accessorMetadata__}function o(e){return n(e)&&null!=i(e).properties}function i(e){return e.__accessorMetadata__||Object.defineProperty(e,"__accessorMetadata__",{value:{},enumerable:!0,configurable:!0,writable:!0}),e.__accessorMetadata__}function a(e){e=i(e);var t=e.properties;return t||(t=e.properties={}),t}function s(e,t){var r=i(e);return e=r.parameters,e||(e=r.parameters={}),r=e[t],r||(r=[],e[t]=r),r}function l(e){return c.test(e)?"replace":"merge"}function u(e){return p.test(e)?l(e.slice(11)):"merge"}Object.defineProperty(t,"__esModule",{value:!0}),t.hasMetadata=n,t.hasPropertiesMetadata=o,t.hasPropertyMetadata=function(e,t){return o(e)&&null!=a(e)[t]},t.hasParametersMetadata=function(e,t){return n(e)&&null!=i(e).parameters&&null!=i(e).parameters[t]},t.getMetadata=i,t.getPropertiesMetadata=a,t.getPropertyMetadata=function(e,t){e=a(e);var r=e[t];return r||(r=e[t]={}),r},t.setPropertyMetadata=function(e,t,r){a(e)[t]=r},t.getParametersMetadata=s,t.getParameterMetadata=function(e,t,r){var n=s(e,t)[r];return n||(s(e,t)[r]=n={index:r}),n},t.merge=function(e,t){return r.merge(e,t,u)},t.mergeProperty=function(e,t){return r.merge(e,t,l)};var c=/^[^.]+\.(?:value|type|(?:json\.type|json\.origins\.[^.]\.type))$/,p=/^properties\./})},"esri/core/accessorSupport/utils":function(){define(["require","exports","../lang"],function(e,t,r){function n(e,t,o){return t?Object.keys(t).reduce(function(e,i){var a=null,s="merge";if(o&&(a=o.path?o.path+"."+i:i,s=o.policy(a)),"replace"===s)return e[i]=t[i],e;if(void 0===e[i])return e[i]=r.clone(t[i]),e;var l=e[i],s=t[i];if(l===s)return e;if(Array.isArray(s)||Array.isArray(e))l=l?Array.isArray(l)?e[i]=l.concat():e[i]=[l]:e[i]=[],s&&(Array.isArray(s)||(s=[s]),s.forEach(function(e){-1===l.indexOf(e)&&l.push(e)}));else if(s&&"object"==typeof s)if(o){var u=o.path;o.path=a,e[i]=n(l,s,o),o.path=u}else e[i]=n(l,s,null);else e.hasOwnProperty(i)&&!t.hasOwnProperty(i)||(e[i]=s);return e},e||{}):e}function o(e){return Array.isArray(e)?e:e.split(".")}function i(e){if(Array.isArray(e)||-1<e.indexOf(",")){e=Array.isArray(e)?e:e.split(",");for(var t=0;t<e.length;t++)e[t]=e[t].trim();return 1===e.length?e[0]:e}return e.trim()}function a(e){return{remove:s(function(){return e.forEach(function(e){return e.remove()})})}}function s(e){var t=!1;return function(){t||(t=!0,e())}}Object.defineProperty(t,"__esModule",{value:!0}),t.getProperties=function(e){return e?e.__accessor__?e.__accessor__:e.propertyInvalidated?e:null:null},t.isPropertyDeclared=function(e,t){return e&&e.metadatas&&null!=e.metadatas[t]},t.merge=function(e,t,r){return r?n(e,t,{policy:r,path:""}):n(e,t,null)},t.pathToStringOrArray=function(e){return!e||"string"==typeof e&&-1===e.indexOf(".")?e:o(e)},t.pathToArray=o,t.splitPath=i,t.parseConditionalPath=function(e){if(-1===e.indexOf("?"))return null;e=o(e);for(var t=Array(e.length),r=0;r<e.length;r++){var n=e[r];t[r]="?"===n[n.length-1],t[r]&&(e[r]=n.slice(0,-1))}return{fullPath:e.join("."),conditional:t}},t.handlesGroup=a,t.parse=function(e,t,r,n){return t=i(t),Array.isArray(t)?(t=t.map(function(t){return n(e,t.trim(),r)}),a(t)):n(e,t.trim(),r)},t.once=s})},"esri/core/lang":function(){define(["require","exports","./typedArrayUtil"],function(e,t,r){function n(e,t){var r;if(t)for(r in e)e.hasOwnProperty(r)&&(void 0===e[r]?delete e[r]:e[r]instanceof Object&&n(e[r],!0));else for(r in e)e.hasOwnProperty(r)&&void 0===e[r]&&delete e[r];return e}function o(e){return e&&"object"==typeof e&&"function"!=typeof e?r.isInt8Array(e)||r.isUint8Array(e)||r.isUint8ClampedArray(e)||r.isInt16Array(e)||r.isUint16Array(e)||r.isInt32Array(e)||r.isUint32Array(e)||r.isFloat32Array(e)||r.isFloat64Array(e)?r.slice(e):e instanceof Date?new Date(e.getTime()):e instanceof ArrayBuffer?e.slice(0,e.byteLength):"function"==typeof e.clone?e.clone():"function"==typeof e.map&&"function"==typeof e.forEach?e.map(o):"function"==typeof e.notifyChange&&"function"==typeof e.watch?e.clone():i({},e,o):e}function i(e,t,r){var n,o,i={};for(n in t){o=t[n];var a=!(n in i)||i[n]!==o;n in e&&(e[n]===o||!a)||(e[n]=r?r(o):o)}return e}Object.defineProperty(t,"__esModule",{value:!0}),t.fixJson=n,t.clone=o,t.equals=function(e,t){return e===t||"number"==typeof e&&isNaN(e)&&"number"==typeof t&&isNaN(t)||"function"==typeof(e||{}).getTime&&"function"==typeof(t||{}).getTime&&e.getTime()===t.getTime()||!1},t.mixin=function(e){void 0===e&&(e={});for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];for(r=0;r<t.length;r++)i(e,t[r]);return e}})},"esri/core/typedArrayUtil":function(){define(["require","exports"],function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.forEach=function(e,t){if(e.forEach)e.forEach(t);else for(var r=0;r<e.length;r++)t(e[r],r,e)},t.slice=function(e,t,r){if(e.slice)return e.slice(t,r);void 0===t?t=0:(0>t&&(t+=e.length),t=Math.min(e.length,Math.max(0,t))),void 0===r?r=e.length:(0>r&&(r+=e.length),r=Math.min(e.length,Math.max(0,r))),r=Math.max(0,r-t);for(var n=new e.constructor(r),o=0;o<r;o++)n[o]=e[t+o];return n},t.isArrayBuffer=function(e){return e instanceof ArrayBuffer||e&&e.constructor&&"ArrayBuffer"===e.constructor.name},t.isInt8Array=function(e){return e instanceof Int8Array||e&&e.constructor&&"Int8Array"===e.constructor.name},t.isUint8Array=function(e){return e instanceof Uint8Array||e&&e.constructor&&"Uint8Array"===e.constructor.name},t.isUint8ClampedArray=function(e){return e instanceof Uint8ClampedArray||e&&e.constructor&&"Uint8ClampedArray"===e.constructor.name},t.isInt16Array=function(e){return e instanceof Int16Array||e&&e.constructor&&"Int16Array"===e.constructor.name},t.isUint16Array=function(e){return e instanceof Uint16Array||e&&e.constructor&&"Uint16Array"===e.constructor.name},t.isInt32Array=function(e){return e instanceof Int32Array||e&&e.constructor&&"Int32Array"===e.constructor.name},t.isUint32Array=function(e){return e instanceof Uint32Array||e&&e.constructor&&"Uint32Array"===e.constructor.name},t.isFloat32Array=function(e){return e instanceof Float32Array||e&&e.constructor&&"Float32Array"===e.constructor.name},t.isFloat64Array=function(e){return e instanceof Float64Array||e&&e.constructor&&"Float64Array"===e.constructor.name},t.toArray=function(e){for(var t=Array(e.length),r=0;r<e.length;r++)t[r]=e[r];return t},t.estimateSize=function(e){return e?128+e.buffer.byteLength+64:0}})},"esri/core/accessorSupport/decorators/autoDestroy":function(){define(["require","exports","../metadata"],function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.autoDestroy=function(){return function(e,t){return r.getMetadata(e).autoDestroy=!0,e[t]}}})},"esri/core/accessorSupport/decorators/cast":function(){define("require exports ../../deprecate ../../Logger ../ensureType ../metadata".split(" "),function(e,t,r,n,o,i){function a(e){var t="_meta"in e?o.ensureType(e):e;return function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return e.push(t),"number"==typeof e[2]?l.apply(this,e):s.apply(this,e)}}function s(e,t,r,n){i.getPropertyMetadata(e,t).cast=n}function l(e,t,o,a){r.deprecated(n.getLogger("esri.core.accessorSupport.decorators.cast"),"@cast decorator on method parameters is deprecated for compatibility with ES decorator spec",{version:"4.14",see:"https://arcg.is/vvbW8"}),i.getParameterMetadata(e,t,o).cast=a}function u(e){return function(t,r){i.getPropertyMetadata(t,e).cast=t[r]}}Object.defineProperty(t,"__esModule",{value:!0});var c=Object.prototype.toString;t.autocastMethod=function(e,t,r){if(i.hasParametersMetadata(e,t)){var n=i.getParametersMetadata(e,t).filter(function(e){return null!=e.cast});if(n.length){var o=r.value;return r.value=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(t=0;t<n.length;t++){var r=n[t];e[r.index]=r.cast(e[r.index])}return o.apply(this,e)},r}console.warn("Method "+e.declaredClass+"::"+t+" is decorated with @cast but no parameters are decorated")}},t.cast=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(3!==e.length||"string"!=typeof e[1]){if(1===e.length&&"[object Function]"===c.call(e[0]))return a(e[0]);if(1===e.length&&"string"==typeof e[0])return u(e[0])}}})},"esri/core/deprecate":function(){define(["require","exports","./has"],function(e,t,r){function n(e,t,n){if(void 0===n&&(n={}),r("esri-deprecation-warnings")){var i=n.replacement,a=n.version,s=n.see;n=n.warnOnce,i&&(t+="\n\t🛠️ Replacement: "+i),a&&(t+="\n\t⚙️ Version: "+a),s&&(t+="\n\t🔗 See "+s+" for more details."),i=t,a=n,void 0===a&&(a=!1),a&&o.has(i)||(a&&o.add(i),e.warn("🛑 DEPRECATED - "+i))}}Object.defineProperty(t,"__esModule",{value:!0});var o=new Set;t.deprecatedModule=function(e,t,o){void 0===o&&(o={}),r("esri-deprecation-warnings")&&n(e,"Module: "+t,o)},t.deprecatedFunction=function(e,t,o){if(void 0===o&&(o={}),r("esri-deprecation-warnings")){var i=o.moduleName;n(e,"Function: "+(i?i+"::":"")+t+"()",o)}},t.deprecated=n})},"esri/core/accessorSupport/decorators/declared":function(){define(["require","exports","../../declare"],function(e,t,r){function n(e){var t=Object.getPrototypeOf(e.prototype),r=e._meta&&e._meta.bases;if(e=e._meta&&e._meta.parents,t&&r&&e&&!(1>=e.length))for(var n=1;n<r.length;n++){var o=r[n],i=o.__accessorMetadata__&&o.__accessorMetadata__.properties,a=t,t=Object.getPrototypeOf(t);if(-1!==e.indexOf(o))for(var s=0,l=Object.getOwnPropertyNames(o.prototype);s<l.length;s++){var u=l[s];if("initialized"!==u&&"constructed"!==u&&"destroyed"!==u&&!(i&&u in i)){var c=Object.getOwnPropertyDescriptor(o.prototype,u);c&&(c.get||c.set)&&Object.defineProperty(a,u,c)}}}}Object.defineProperty(t,"__esModule",{value:!0}),t.declared=function(e){var t=function(){return this||{}};if(1<arguments.length){for(var o=[],i=0;i<arguments.length;i++)o.push(arguments[i]);e=r(o),n(e)}return t.__bases__=[e],t}})},"esri/core/declare":function(){define(["require","exports","dojo/_base/declare","./deprecate","./Logger"],function(e,t,r,n,o){function i(e,t){return e&&!Array.isArray(e)&&"function"!=typeof e&&(t=e,e=null),e=e||[],t=t||{},a([this].concat(e),t)}function a(e,t){e&&!Array.isArray(e)&&"function"!=typeof e&&(t=e,e=null),"function"==typeof e?e=[e]:e||(e=[]),1<e.length&&n.deprecated(s,"Extending multiple classes with Accessor",{version:"4.13",see:"https://arcg.is/T8fr4"}),t=t||{};var o,a;for(o=0,a=l.length;o<a;o++)l[o](e,t);e=r(e,t),e.createSubclass=i;var c=e.prototype.isInstanceOf;for(e.prototype.isInstanceOf=function(){return n.deprecatedFunction(s,"isInstanceOf",{moduleName:"Accessor",replacement:"Use `instanceof` or check for property presence `'property' in instance`",version:"4.13"}),c.apply(this,arguments)},o=0,a=u.length;o<a;o++)u[o](e);return e}var s=o.getLogger("esri.core.Accessor"),l=[],u=[];return function(e){e.hasMixin=function(e,t){if(!(e=Array.isArray(e)?e.reduce(function(e,t){return t._meta?e.concat(t._meta.bases):e},[]):e._meta?e._meta.bases:e))return!1;if("string"==typeof t)for(var r=e.length-1;0<=r;r--)if(e[r].prototype.declaredClass===t)return!0;return-1!==e.indexOf(t)},e.safeMixin=function(e,t){return r.safeMixin(e,t)},e.before=function(e){l.push(e)},e.after=function(e){u.push(e)}}(a||(a={})),a})},"dojo/_base/declare":function(){define(["./kernel","../has","./lang"],function(e,t,r){function n(e,t){throw Error("declare"+(t?" "+t:"")+": "+e)}function o(e,t){for(var r,o,i,a,s,l=[],u=[{cls:0,refs:[]}],c={},p=1,d=e.length,f=0;f<d;++f){for((r=e[f])?"[object Function]"!=_.call(r)&&n("mixin #"+f+" is not a callable constructor.",t):n("mixin #"+f+" is unknown. Did you use dojo.require to pull it in?",t),o=r._meta?r._meta.bases:[r],i=0,r=o.length-1;0<=r;--r)a=o[r].prototype,a.hasOwnProperty("declaredClass")||(a.declaredClass="uniqName_"+x++),a=a.declaredClass,c.hasOwnProperty(a)||(c[a]={count:0,refs:[],cls:o[r]},++p),a=c[a],i&&i!==a&&(a.refs.push(i),++i.count),i=a;++i.count,u[0].refs.push(i)}for(;u.length;){for(i=u.pop(),l.push(i.cls),--p;s=i.refs,1==s.length;){if(!(i=s[0])||--i.count){i=0;break}l.push(i.cls),--p}if(i)for(f=0,d=s.length;f<d;++f)i=s[f],--i.count||u.push(i)}return p&&n("can't build consistent linearization",t),r=e[0],l[0]=r?r._meta&&r===l[l.length-r._meta.bases.length]?r._meta.bases.length:1:0,l}function i(e,t,r,o){var i,a,s,l,u,c,p=this._inherited=this._inherited||{};if("string"==typeof e&&(i=e,e=t,t=r,r=o),"function"==typeof e)s=e,e=t,t=r;else try{s=e.callee}catch(e){if(!(e instanceof TypeError))throw e;n("strict mode inherited() requires the caller function to be passed before arguments",this.declaredClass)}if((i=i||s.nom)||n("can't deduce a name to call inherited()",this.declaredClass),r=o=0,l=this.constructor._meta,o=l.bases,c=p.p,"constructor"!=i){if(p.c!==s&&(c=0,u=o[0],l=u._meta,l.hidden[i]!==s)){(a=l.chains)&&"string"==typeof a[i]&&n("calling chained method with inherited: "+i,this.declaredClass);do{if(l=u._meta,a=u.prototype,l&&(a[i]===s&&a.hasOwnProperty(i)||l.hidden[i]===s))break}while(u=o[++c]);c=u?c:-1}if(u=o[++c])if(a=u.prototype,u._meta&&a.hasOwnProperty(i))r=a[i];else{s=S[i];do{if(a=u.prototype,(r=a[i])&&(u._meta?a.hasOwnProperty(i):r!==s))break}while(u=o[++c])}r=u&&r||S[i]}else{if(p.c!==s&&(c=0,(l=o[0]._meta)&&l.ctor!==s)){for((a=l.chains)&&"manual"===a.constructor||n("calling chained constructor with inherited",this.declaredClass);(u=o[++c])&&(!(l=u._meta)||l.ctor!==s););c=u?c:-1}for(;(u=o[++c])&&!(r=(l=u._meta)?l.ctor:u););r=u&&r}if(p.c=r,p.p=c,r)return!0===t?r:r.apply(this,t||e)}function a(e,t,r){return"string"==typeof e?"function"==typeof t?this.__inherited(e,t,r,!0):this.__inherited(e,t,!0):"function"==typeof e?this.__inherited(e,t,!0):this.__inherited(e,!0)}function s(e,t,r,n){var o=this.getInherited(e,t,r);if(o)return o.apply(this,n||r||t||e)}function l(e){for(var t=this.constructor._meta.bases,r=0,n=t.length;r<n;++r)if(t[r]===e)return!0;return this instanceof e}function u(e,t){for(var r in t)"constructor"!=r&&t.hasOwnProperty(r)&&(e[r]=t[r])}function c(e){return v.safeMixin(this.prototype,e),this}function p(e,t){return e instanceof Array||"function"==typeof e||(t=e,e=void 0),t=t||{},e=e||[],v([this].concat(e),t)}function d(e,t){return function(){var r,n,o=arguments,i=o,a=o[0];n=e.length;var s;if(!(this instanceof o.callee))return g(o);if(t&&(a&&a.preamble||this.preamble))for(s=Array(e.length),s[0]=o,r=0;(a=o[0])&&(a=a.preamble)&&(o=a.apply(this,o)||o),a=e[r].prototype,(a=a.hasOwnProperty("preamble")&&a.preamble)&&(o=a.apply(this,o)||o),++r!=n;)s[r]=o;for(r=n-1;0<=r;--r)a=e[r],(a=(n=a._meta)?n.ctor:a)&&a.apply(this,s?s[r]:o);(a=this.postscript)&&a.apply(this,i)}}function f(e,t){return function(){var r=arguments,n=r,o=r[0];if(!(this instanceof r.callee))return g(r);t&&(o&&(o=o.preamble)&&(n=o.apply(this,n)||n),(o=this.preamble)&&o.apply(this,n)),e&&e.apply(this,r),(o=this.postscript)&&o.apply(this,r)}}function h(e){return function(){var t,r,n=arguments,o=0;if(!(this instanceof n.callee))return g(n);for(;t=e[o];++o)if(t=(r=t._meta)?r.ctor:t){t.apply(this,n);break}(t=this.postscript)&&t.apply(this,n)}}function y(e,t,r){return function(){var n,o,i=0,a=1;for(r&&(i=t.length-1,a=-1);n=t[i];i+=a)o=n._meta,(n=(o?o.hidden:n.prototype)[e])&&n.apply(this,arguments)}}function m(e){return b.prototype=e.prototype,e=new b,b.prototype=null,e}function g(e){var t=e.callee,r=m(t);return t.apply(r,e),r}function v(e,s,g){"string"!=typeof e&&(g=s,s=e,e=""),g=g||{};var b,x,C,M,T,P,I,E=1,j=s;if("[object Array]"==_.call(s)?(P=o(s,e),C=P[0],E=P.length-C,s=P[E]):(P=[0],s?"[object Function]"==_.call(s)?(C=s._meta,P=P.concat(C?C.bases:s)):n("base class is not a callable constructor.",e):null!==s&&n("unknown base class. Did you use dojo.require to pull it in?",e)),s)for(x=E-1;b=m(s),x;--x)C=P[x],(C._meta?u:w)(b,C.prototype),M=t("csp-restrictions")?function(){}:new Function,M.superclass=s,M.prototype=b,s=b.constructor=M;else b={};for(v.safeMixin(b,g),C=g.constructor,C!==S.constructor&&(C.nom="constructor",b.constructor=C),x=E-1;x;--x)(C=P[x]._meta)&&C.chains&&(I=w(I||{},C.chains));if(b["-chains-"]&&(I=w(I||{},b["-chains-"])),s&&s.prototype&&s.prototype["-chains-"]&&(I=w(I||{},s.prototype["-chains-"])),C=!I||!I.hasOwnProperty("constructor"),P[0]=M=I&&"manual"===I.constructor?h(P):1==P.length?f(g.constructor,C):d(P,C),M._meta={bases:P,hidden:g,chains:I,parents:j,ctor:g.constructor},M.superclass=s&&s.prototype,M.extend=c,M.createSubclass=p,M.prototype=b,b.constructor=M,b.getInherited=a,b.isInstanceOf=l,b.inherited=O,b.__inherited=i,e&&(b.declaredClass=e,r.setObject(e,M)),I)for(T in I)b[T]&&"string"==typeof I[T]&&"constructor"!=T&&(C=b[T]=y(T,P,"after"===I[T]),C.nom=T);return M}var b,w=r.mixin,S=Object.prototype,_=S.toString,x=0;b=t("csp-restrictions")?function(){}:new Function;var O=e.config.isDebug?s:i;return e.safeMixin=v.safeMixin=function(e,t){var r,n;for(r in t)(n=t[r])===S[r]&&r in S||"constructor"==r||("[object Function]"==_.call(n)&&(n.nom=r),e[r]=n);return e},e.declare=v})},"esri/core/accessorSupport/decorators/enumeration":function(){define(["require","exports","../../jsonMap","./property"],function(e,t,r,n){function o(e){return n.property({type:e})}Object.defineProperty(t,"__esModule",{value:!0}),t.enumeration=o,function(e){e.serializable=function(){return function(e,t){return void 0===t&&(t={ignoreUnknown:!0}),e=e instanceof r.JSONMap?e:new r.JSONMap(e,t),n.property({type:t&&t.ignoreUnknown?e.apiValues:String,json:{type:e.jsonValues,read:{reader:e.read},write:{writer:e.write}}})}}}(o=t.enumeration||(t.enumeration={}))})},"esri/core/accessorSupport/decorators/property":function(){define("require exports ../../has ../../lang ../../Logger ../metadata".split(" "),function(e,t,r,n,o,i){Object.defineProperty(t,"__esModule",{value:!0}),o.getLogger("esri.core.accessorSupport.decorators.property"),t.property=function(e){return void 0===e&&(e={}),function(t,r){var o=t.constructor.prototype;o!==Function.prototype&&((t=Object.getOwnPropertyDescriptor(t,r))&&(t.get||t.set)?(e=n.clone(e),t.set&&(e.set=t.set),t.get&&(e.get=t.get)):t&&t.hasOwnProperty("value")&&(e=n.clone(e),e.value=t.value),r=i.getPropertyMetadata(o,r),i.mergeProperty(r,e))}},t.propertyJSONMeta=function(e,t,r){return e=i.getPropertyMetadata(e.constructor.prototype,r),e.json||(e.json={}),e=e.json,void 0!==t&&(e.origins||(e.origins={}),e.origins[t]||(e.origins[t]={}),e=e.origins[t]),e}})},"esri/core/accessorSupport/decorators/reader":function(){define(["require","exports","../../object","./property"],function(e,t,r,n){Object.defineProperty(t,"__esModule",{value:!0}),t.reader=function(e,t,o){var i,a;return void 0===t||Array.isArray(t)?(a=e,o=t,i=[void 0]):(a=t,i=Array.isArray(e)?e:[e]),function(e,t){var s=e.constructor.prototype;i.forEach(function(i){i=n.propertyJSONMeta(e,i,a),i.read&&"object"!=typeof i.read&&(i.read={}),r.setDeepValue("read.reader",s[t],i),o&&(i.read.source=(i.read.source||[]).concat(o))})}}})},"esri/core/accessorSupport/decorators/shared":function(){define(["require","exports"],function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.shared=function(e){return function(t,r){t[r]=e}}})},"esri/core/accessorSupport/decorators/subclass":function(){define(["require","exports","../../declare","../metadata"],function(e,t,r,n){function o(e,t){e.read&&("function"==typeof e.read?t.push(e.read):"object"==typeof e.read&&e.read.reader&&t.push(e.read.reader))}function i(e,t){e.write&&("function"==typeof e.write?t.push(e.write):"object"==typeof e.write&&e.write.writer&&t.push(e.write.writer))}function a(e){var t=[];if(!(e=n.getPropertiesMetadata(e.prototype)))return t;for(var r in e){var a=e[r];if(a.cast&&t.push(a.cast),a.copy&&t.push(a.copy),(a=a.json)&&(o(a,t),i(a,t),a=a.origins))for(var s in a){var l=a[s];o(l,t),i(l,t)}}return t}function s(e){var t={values:{},descriptors:{}},r=["__bases__"],o=n.getPropertiesMetadata(e.prototype),i=a(e);return Object.getOwnPropertyNames(e.prototype).filter(function(t){return!(-1!==r.indexOf(t)||o&&o.hasOwnProperty(t)||!u(Object.getOwnPropertyDescriptor(e.prototype,t))&&-1!==i.indexOf(e.prototype[t]))}).forEach(function(r){var n=Object.getOwnPropertyDescriptor(e.prototype,r);u(n)?t.descriptors[r]=n:t.values[r]=e.prototype[r]}),t}function l(e){var t=Object.getOwnPropertyNames(e),r=Object.getPrototypeOf(e.prototype).constructor,n=Object.getOwnPropertyNames(Function);n.push("__bases__","caller","arguments");var o=Object.getOwnPropertyNames(r),i={values:{},descriptors:{}};return t.filter(function(t){return-1===n.indexOf(t)&&(-1===o.indexOf(t)||r[t]!==e[t])}).forEach(function(t){var r=Object.getOwnPropertyDescriptor(e,t);u(r)?i.descriptors[t]=r:i.values[t]=e[t]}),i}function u(e){return e&&!(!e.get&&!e.set)}Object.defineProperty(t,"__esModule",{value:!0}),t.subclass=function(e){return function(t){var n=s(t),o=l(t);null!=e&&(n.values.declaredClass=e),t=r(t.__bases__,n.values);var i=Object.getPrototypeOf(t.prototype),a=t._meta&&t._meta.bases,c=t._meta&&t._meta.parents;if(i&&a&&c&&!(1>=c.length))for(var p=1;p<a.length;p++){var d=a[p],f=d.__accessorMetadata__&&d.__accessorMetadata__.properties,h=i,i=Object.getPrototypeOf(i);if(-1!==c.indexOf(d))for(var y=0,m=Object.getOwnPropertyNames(d.prototype);y<m.length;y++){var g=m[y];if("initialized"!==g&&"constructed"!==g&&"destroyed"!==g&&!(f&&g in f)){var v=Object.getOwnPropertyDescriptor(d.prototype,g);u(v)&&Object.defineProperty(h,g,v)}}}Object.defineProperties(t.prototype,n.descriptors);for(var b in o.values)t[b]=o.values[b];return Object.defineProperties(t,o.descriptors),t}}})},"esri/core/accessorSupport/decorators/writer":function(){define(["require","exports","../../object","./property"],function(e,t,r,n){Object.defineProperty(t,"__esModule",{value:!0}),t.writer=function(e,t,o){var i,a;return void 0===t?(a=e,i=[void 0]):"string"!=typeof t?(a=e,i=[void 0],o=t):(a=t,i=Array.isArray(e)?e:[e]),function(e,t){var s=e.constructor.prototype;i.forEach(function(i){i=n.propertyJSONMeta(e,i,a),i.write&&"object"!=typeof i.write&&(i.write={}),o&&r.setDeepValue("write.target",o,i),r.setDeepValue("write.writer",s[t],i)})}}})},"esri/geometry/Geometry":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/JSONSupport ../core/accessorSupport/decorators ./SpatialReference".split(" "),function(e,t,r,n,o,i,a){return function(e){function t(t){return t=e.call(this,t)||this,t.type=null,t.extent=null,t.hasM=!1,t.hasZ=!1,t.spatialReference=a.WGS84,t}return r(t,e),Object.defineProperty(t.prototype,"cache",{get:function(){return{}},enumerable:!0,configurable:!0}),t.prototype.readSpatialReference=function(e,t){if(e instanceof a)return e;if(null!=e){var r=new a;return r.read(e,t),r}return e},t.prototype.clone=function(){return console.warn(".clone() is not implemented for "+this.declaredClass),null},t.prototype.clearCache=function(){this.notifyChange("cache")},t.prototype.getCacheValue=function(e){return this.cache[e]},t.prototype.setCacheValue=function(e,t){this.cache[e]=t},n([i.property()],t.prototype,"type",void 0),n([i.property({readOnly:!0,dependsOn:["spatialReference"]})],t.prototype,"cache",null),n([i.property({readOnly:!0,dependsOn:["spatialReference"]})],t.prototype,"extent",void 0),n([i.property({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],t.prototype,"hasM",void 0),n([i.property({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],t.prototype,"hasZ",void 0),n([i.property({type:a,json:{write:!0}})],t.prototype,"spatialReference",void 0),n([i.reader("spatialReference")],t.prototype,"readSpatialReference",null),t=n([i.subclass("esri.geometry.Geometry")],t)}(i.declared(o.JSONSupport))})},"esri/core/JSONSupport":function(){define("require exports ./tsSupport/declareExtendsHelper ./tsSupport/decorateHelper ./Accessor ./declare ./accessorSupport/decorators ./accessorSupport/read ./accessorSupport/write".split(" "),function(e,t,r,n,o,i,a,s,l){function u(e,t){if(!e)return null;if(e.declaredClass)throw Error("JSON object is already hydrated");var r=new this;return r.read(e,t),r}function c(e){return e&&"read"in e&&"write"in e&&"toJSON"in e}Object.defineProperty(t,"__esModule",{value:!0}),t.JSONSupportMixin=function(e){return e=function(e){function t(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return e.apply(this,t)||this}return r(t,e),t.prototype.read=function(e,t){s.default(this,e,t)},t.prototype.write=function(e,t){return l.default(this,e||{},t)},t.prototype.toJSON=function(e){return this.write(null,e)},t.fromJSON=function(e,t){return u.call(this,e,t)},t=n([a.subclass("esri.core.JSONSupport")],t)}(a.declared(e)),e.prototype.toJSON.isDefaultToJSON=!0,e},t.isJSONSupport=c,i.after(function(e){for(var t=e.prototype;;){if(c(t)){e.fromJSON=u.bind(e);break}if(!(t=Object.getPrototypeOf(t)))break}}),e=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t=n([a.subclass("esri.core.JSONSupport")],t)}(a.declared(t.JSONSupportMixin(o))),t.JSONSupport=e})},"esri/core/Accessor":function(){define("./declare ./accessorSupport/Properties ./accessorSupport/get ./accessorSupport/introspection ./accessorSupport/set ./accessorSupport/watch ./accessorSupport/testSupport".split(" "),function(e,t,r,n,o,i,a){t=t.default,e.before(function(t,r){e.hasMixin(t,s)&&n.processPrototype(r)}),e.after(function(t){e.hasMixin(t,s)&&(n.processClass(t),Object.defineProperties(t.prototype,{initialized:{get:function(){return this.__accessor__&&this.__accessor__.initialized||!1}},constructed:{get:function(){return this.__accessor__&&2===this.__accessor__.lifecycle||!1}},destroyed:{get:function(){return this.__accessor__&&this.__accessor__.destroyed||!1}}}))});var s=e(null,{declaredClass:"esri.core.Accessor","-chains-":{initialize:"after",destroy:"before"},constructor:function(){if(this.constructor===s)throw Error("[accessor] cannot instantiate Accessor. This can be fixed by creating a subclass of Accessor");if(Object.defineProperty(this,"__accessor__",{value:new t(this)}),0<arguments.length&&this.normalizeCtorArgs){for(var e=[],r=0;r<arguments.length;r++)e.push(arguments[r]);this.__accessor__.ctorArgs=this.normalizeCtorArgs.apply(this,e)}a.interceptor&&a.interceptor.onInstanceConstruct(this)},__accessor__:null,postscript:function(e){var t=this.__accessor__;e=t.ctorArgs||e,t.initialize(),e&&(this.set(e),t.ctorArgs=null),t.constructed(),this.initialize()},initialize:function(){},destroy:function(){if(this.destroyed)try{throw Error("instance is already destroyed")}catch(e){console.warn(e.stack)}else i.removeTarget(this),this.__accessor__.destroy(),a.interceptor&&a.interceptor.onInstanceDestroy(this)},get:function(e){return r.get(this,e)},hasOwnProperty:function(e){return this.__accessor__?this.__accessor__.has(e):Object.prototype.hasOwnProperty.call(this,e)},keys:function(){return this.__accessor__?this.__accessor__.keys():[]},set:function(e,t){return o.set(this,e,t),this},watch:function(e,t,r){return i.watch(this,e,t,r)},_clearOverride:function(e){return this.__accessor__.clearOverride(e)},_override:function(e,t){return this.__accessor__.override(e,t)},_isOverridden:function(e){return this.__accessor__.isOverridden(e)},notifyChange:function(e){this.__accessor__.propertyInvalidated(e)},_get:function(e){return this.__accessor__.internalGet(e)},_set:function(e,t){return this.__accessor__.internalSet(e,t)}});return s})},"esri/core/accessorSupport/Properties":function(){define("require exports ../has ../lang ../Logger ../ObjectPool ./extensions ./PropertyOrigin ./Store".split(" "),function(e,t,r,n,o,i,a,s,l){Object.defineProperty(t,"__esModule",{value:!0}),o.getLogger("esri.core.accessorSupport.Properties"),e=function(){function e(e){this.host=e,this._origin=6,this.ctorArgs=this.cursors=null,this.destroyed=!1,this.dirties={},this.lifecycle=0,this.overridden=null,this.store=new l.Store,e=this.host.constructor.__accessorMetadata__,this.metadatas=e.properties,this.autoDestroy=e.autoDestroy}return e.prototype.initialize=function(){this.lifecycle=1,a.instanceCreated(this.host,this.metadatas)},e.prototype.constructed=function(){this.lifecycle=2},e.prototype.destroy=function(){this.destroyed=!0;var e=this.cursors;if(e)for(var t=0,r=Object.getOwnPropertyNames(e);t<r.length;t++){var n=r[t],o=e[n];if(o){for(;0<o.length;)o.pop().propertyDestroyed(this,n);e[n]=null}}if(this.autoDestroy)for(n in this.metadatas)(e=this.internalGet(n))&&e&&"function"==typeof e.destroy&&(e.destroy(),this.metadatas[n].nonNullable||this.internalSet(n,null))},Object.defineProperty(e.prototype,"initialized",{get:function(){return 0!==this.lifecycle},enumerable:!0,configurable:!0}),e.prototype.clearOverride=function(e){this.isOverridden(e)&&(this.overridden[e]=!1,this.propertyInvalidated(e))},e.prototype.get=function(e){var t=this.metadatas[e],r=t.get;return!this.store.has(e)||r&&this.dirties[e]?r?(t=r.call(this.host),this.store.set(e,t,1),this.propertyCommitted(e),t):t.value:this.store.get(e)},e.prototype.getterStatic=function(e,t){return this.store.has(e)?this.store.get(e):t.value},e.prototype.getterComputed=function(e,t){return this.store.has(e)&&!this.dirties[e]?this.store.get(e):(t=t.get.call(this.host),this.store.set(e,t,1),this.propertyCommitted(e),t)},e.prototype.originOf=function(e){var t=this.store.originOf(e);return void 0===t&&(e=this.metadatas[e])&&e.hasOwnProperty("value")?"defaults":s.idToName(t)},e.prototype.has=function(e){return!!this.metadatas[e]&&this.store.has(e)},e.prototype.internalGet=function(e){if(this.metadatas[e]){var t=this.store;return t.has(e)?t.get(e):this.metadatas[e].value}},e.prototype.internalSet=function(e,t){if(this.metadatas[e]){var r=this.initialized?this._origin:0,o=this.store.get(e);n.equals(t,o)&&r===this.store.originOf(e)&&this.store.has(e,r)&&!this.isOverridden(e)||(this.propertyInvalidated(e),this.store.set(e,t,r),this.propertyCommitted(e))}},e.prototype.isOverridden=function(e){return null!=this.overridden&&!0===this.overridden[e]},e.prototype.keys=function(){return Object.keys(this.metadatas)},e.prototype.override=function(e,t){if(this.metadatas[e]){this.overridden||(this.overridden={});var r=this.metadatas[e];if(!r.nonNullable||null!=t){if(r=r.cast){t=this.cast(r,t);var r=t.valid,n=t.value;if(u.release(t),!r)return;t=n}this.overridden[e]=!0,this.internalSet(e,t)}}},e.prototype.set=function(e,t){if(this.metadatas[e]){var r=this.metadatas[e];if(!r.nonNullable||null!=t){var n=r.set;if(r=r.cast){t=this.cast(r,t);var r=t.valid,o=t.value;if(u.release(t),!r)return;t=o}n?n.call(this.host,t):this.internalSet(e,t)}}},e.prototype.setDefaultOrigin=function(e){this._origin=s.nameToId(e)},e.prototype.propertyInvalidated=function(e){var t=this.dirties;if(this.isOverridden(e)||(t[e]=!0),t=this.cursors&&this.cursors[e])for(var r=0;r<t.length;r++)t[r].propertyInvalidated(this,e)},e.prototype.propertyCommitted=function(e){var t=this.cursors&&this.cursors[e];if(this.dirties[e]=!1,t)for(var r=0;r<t.length;r++)t[r].propertyCommitted(this,e)},e.prototype.addCursor=function(e,t){this.cursors||(this.cursors={});var r=this.cursors[e];r||(this.cursors[e]=r=[]),r.push(t)},e.prototype.removeCursor=function(e,t){var r=this.cursors[e];this.cursors[e]&&(r.splice(r.indexOf(t),1),0===r.length&&(this.cursors[e]=null))},e.prototype.cast=function(e,t){var r=u.acquire();return r.valid=!0,r.value=t,e&&(r.value=e.call(this.host,t,r)),r},e}(),r=function(){function e(){this.value=null,this.valid=!0}return e.prototype.acquire=function(){this.valid=!0},e.prototype.release=function(){this.value=null},e}();var u=new i(r);t.default=e})},"esri/core/ObjectPool":function(){define(["require","exports"],function(e,t){var r=function(){return function(){}}();return function(){function e(e,t,r,n,o){if(void 0===n&&(n=1),void 0===o&&(o=0),this.classConstructor=e,this.acquireFunctionOrWithConstructor=t,this.releaseFunction=r,this.growthSize=n,!0===t?this.acquireFunction=this._constructorAcquireFunction:"function"==typeof t&&(this.acquireFunction=t),this._pool=Array(o),this._initialSize=o,this.classConstructor)for(e=0;e<o;e++)this._pool[e]=new this.classConstructor;this.growthSize=Math.max(n,1)}return e.prototype.destroy=function(){this.prune(0)},e.prototype.acquire=function(){var t;if(t=this.classConstructor||r,e.test.disabled)t=new t;else{if(0===this._pool.length)for(var n=this.growthSize,o=0;o<n;o++)this._pool[o]=new t;t=this._pool.pop()}if(this.acquireFunction){for(o=arguments.length;0<o;o--)arguments[o]=arguments[o-1];arguments[0]=t,arguments.length++,this.acquireFunction.apply(this,arguments)}else t&&t.acquire&&"function"==typeof t.acquire&&t.acquire.apply(t,arguments);return t},e.prototype.release=function(t){t&&!e.test.disabled&&(this.releaseFunction?this.releaseFunction(t):t&&t.release&&"function"==typeof t.release&&t.release(),this._pool.push(t))},e.prototype.prune=function(e){if(void 0===e&&(e=this._initialSize),!(e>=this._pool.length)){for(var t=e;t<this._pool.length;++t)this._dispose(this._pool[t]);this._pool.length=e}},e.prototype._dispose=function(e){e.dispose&&"function"==typeof e.dispose&&e.dispose()},e.prototype._constructorAcquireFunction=function(){this.classConstructor&&this.classConstructor.call.apply(this.classConstructor,arguments)},e.test={disabled:!1},e}()})},"esri/core/accessorSupport/extensions":function(){define(["require","exports","./extensions/aliasedProperty","./extensions/computedProperty","./extensions/serializableProperty"],function(e,t,r,n,o){Object.defineProperty(t,"__esModule",{value:!0});var i=[r.default,n.default,o.default];t.processPrototypeMetadatas=function(e,t){for(var r=0;r<i.length;r++){var n=i[r];if(n.processPrototypePropertyMetadata)for(var o in e)n.processPrototypePropertyMetadata(o,e[o],e,t)}},t.processClassMetadatas=function(e,t){for(var r=0;r<i.length;r++){var n=i[r];if(n.processClassPropertyMetadata)for(var o in e)n.processClassPropertyMetadata(o,e[o],e,t)}},t.instanceCreated=function(e,t){for(var r=Object.getOwnPropertyNames(t),n=0;n<i.length;n++){var o=i[n];o.instanceCreated&&o.instanceCreated(e,t,r)}}})},"esri/core/accessorSupport/extensions/aliasedProperty":function(){define("require exports ../../has ../get ../set ../utils ../wire".split(" "),function(e,t,r,n,o,i,a){function s(e,t,r){var n=i.getProperties(e);return a.wire(e,r.aliasOf,function(){n.propertyInvalidated(t)})}Object.defineProperty(t,"__esModule",{value:!0}),t.AliasedPropertyExtension={processClassPropertyMetadata:function(e,t,r,i){var a=t.aliasOf;if(a&&(e=a.split(".")[0],null!=r[e]&&!t.set&&!t.get)){var s;t.get=function(){var e=n.default(this,a);if("function"==typeof e){s||(s=a.split(".").slice(0,-1).join("."));var t=n.default(this,s);t&&(e=e.bind(t))}return e},t.readOnly||(t.set=function(e){return o.default(this,a,e)})}},instanceCreated:function(e,t,r){for(var n=0;n<r.length;n++){var o=r[n],i=t[o];i.aliasOf&&s(e,o,i)}}},t.default=t.AliasedPropertyExtension})},"esri/core/accessorSupport/get":function(){define(["require","exports","./utils"],function(e,t,r){function n(e,t,n){if(e="?"===e[e.length-1]?e.slice(0,-1):e,null!=n.getItemAt||Array.isArray(n)){var o=parseInt(e,10);if(!isNaN(o))return Array.isArray(n)?n[o]:n.getItemAt(o)}return o=r.getProperties(n),t?r.isPropertyDeclared(o,e)?o.get(e):n[e]:r.isPropertyDeclared(o,e)?o.internalGet(e):n[e]}function o(e,t,r,i){return null==e?e:!(e=n(t[i],r,e))&&i<t.length-1?void 0:i===t.length-1?e:o(e,t,r,i+1)}function i(e,t,i,a){return void 0===i&&(i=!1),void 0===a&&(a=0),"string"==typeof t&&-1===t.indexOf(".")?n(t,i,e):o(e,r.pathToArray(t),i,a)}function a(e,t){return i(e,t,!0)}Object.defineProperty(t,"__esModule",{value:!0}),t.valueOf=i,t.get=a,t.exists=function(e,t){return void 0!==i(t,e,!0)},t.default=a})},"esri/core/accessorSupport/set":function(){define(["require","exports","../has","../Logger","./get"],function(e,t,r,n,o){function i(e,t,r){if(e&&t)if("object"==typeof t){r=0;for(var n=Object.getOwnPropertyNames(t);r<n.length;r++){var a=n[r];i(e,a,t[a])}}else"_"!==t[0]&&(-1!==t.indexOf(".")?(t=t.split("."),a=t.splice(t.length-1,1)[0],i(o.default(e,t),a,r)):e[t]=r)}Object.defineProperty(t,"__esModule",{value:!0}),n.getLogger("esri.core.accessorSupport.set"),t.set=i,t.default=i})},"esri/core/accessorSupport/wire":function(){define(["require","exports","./utils"],function(e,t,r){function n(e,t,n){if(t=r.splitPath(t),Array.isArray(t)){for(var i=[],a=0;a<t.length;a++)i.push(new o(t[a],n).install(e));return new s(i)}return e=new o(t,n).install(e),new l(e)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){return this.path=e,this.callback=t,this.conditional=this.chain=null,-1<e.indexOf(".")?((e=r.parseConditionalPath(e))&&(this.path=e.fullPath,this.conditional=e.conditional),this.chain=r.pathToArray(this.path)):"?"===e[e.length-1]&&(this.path=e.slice(0,e.length-1),this.conditional=[!0],this.chain=[this.path]),this.callback=t,this}return e.prototype.install=function(e){return e=this.chain?new a(this,e):new i(this,e)},e.prototype.notify=function(e){this.callback(e,this.path)},e}(),i=function(){function e(e,t){this.binding=e,this.target=t,r.getProperties(t).addCursor(this.binding.path,this)}return e.prototype.destroy=function(){this.target&&(r.getProperties(this.target).removeCursor(this.binding.path,this),this.target=this.binding=null)},e.prototype.propertyDestroyed=function(e,t){r.getProperties(this.target).removeCursor(t,this)},e.prototype.propertyInvalidated=function(){this.binding&&this.binding.notify(this.target)},e.prototype.propertyCommitted=function(){this.binding&&this.binding.notify(this.target)},e}(),a=function(){function e(e,t){return this.binding=e,this.target=t,this.stack=[],this.properties=r.getProperties(t),this.stack.push({properties:this.properties,propertyName:e.chain[0]}),this.properties.addCursor(e.chain[0],this),this.moveForward(),this}return e.prototype.destroy=function(){for(;;){var e=this.stack.pop();if(null==e)break;e.properties.removeCursor(e.propertyName,this)}this.target=this.binding=null},e.prototype.propertyDestroyed=function(e,t){this.moveBackward(e,t)},e.prototype.propertyInvalidated=function(){this.binding&&this.binding.notify(this.target)},e.prototype.propertyCommitted=function(e,t){this.binding&&(this.moveBackward(e,t),this.moveForward(),this.binding.notify(this.target))},e.prototype.moveBackward=function(e,t){for(var r=this.stack,n=r[r.length-1];n.properties!==e&&n.propertyName!==t;)n.properties.removeCursor(n.propertyName,this),r.pop(),n=r[r.length-1]},e.prototype.moveForward=function(){var e=this.stack,t=e[e.length-1];if((1!==e.length||!this.binding.conditional||!this.binding.conditional[e.length-1]||t.properties.metadatas[t.propertyName])&&(t=t.properties.internalGet(t.propertyName),(t=r.getProperties(t))&&e.length<this.binding.chain.length)){var n=this.binding.chain[e.length];this.binding.conditional&&this.binding.conditional[e.length]&&!t.metadatas[n]||(this.stack.push({properties:t,propertyName:n}),t.addCursor(n,this),this.moveForward())}},e}(),s=function(){function e(e){this.cursors=e}return e.prototype.remove=function(){for(var e=this.cursors;0<e.length;)e.pop().destroy();this.cursors=null},e}(),l=function(){function e(e){this.cursor=e}return e.prototype.remove=function(){this.cursor.destroy(),this.cursor=null},e}();t.create=function(e,t){if(e=r.splitPath(e),Array.isArray(e)){for(var n=[],i=0;i<e.length;i++)n.push(new o(e[i],t));return function(e){for(var t=[],r=0;r<n.length;r++)t[r]=n[r].install(e);return new s(t)}}var a=new o(e,t);return function(e){return new l(a.install(e))}},t.wire=n,t.default=n})},"esri/core/accessorSupport/extensions/computedProperty":function(){define("require exports ../../has ../../Logger ../utils ../wire".split(" "),function(e,t,r,n,o,i){Object.defineProperty(t,"__esModule",{value:!0}),n.getLogger("esri.core.accessorSupport.extensions.computedProperty"),t.ComputedPropertyExtension={processClassPropertyMetadata:function(e,t,r,n){t.dependsOn&&t.dependsOn.length&&(t.wire=i.create(t.dependsOn,function(t){return o.getProperties(t).propertyInvalidated(e)}))},instanceCreated:function(e,t,r){for(var n=0;n<r.length;n++){var o=t[r[n]];o.wire&&o.wire(e)}}},t.default=t.ComputedPropertyExtension})},"esri/core/accessorSupport/extensions/serializableProperty":function(){define("require exports ../ensureType ./serializableProperty/originAliases ./serializableProperty/reader ./serializableProperty/shorthands ./serializableProperty/writer".split(" "),function(e,t,r,n,o,i,a){function s(e,t,r){var n=e&&e.json;return e&&e.json&&e.json.origins&&r&&(e=e.json.origins[r.origin])&&("any"===t||t in e)&&(n=e),n}Object.defineProperty(t,"__esModule",{value:!0}),t.originSpecificReadPropertyDefinition=function(e,t){return s(e,"read",t)},t.originSpecificWritePropertyDefinition=function(e,t){return s(e,"write",t)},t.originSpecificPropertyDefinition=s,t.SerializablePropertyExtension={processPrototypePropertyMetadata:function(e,t){if(i.process(t)){n.process(t);for(var s=t.type,l=0;Array.isArray(s)&&!r.isOneOf(s);)s=s[0],l++;if(t.json.origins)for(var u in t.json.origins){var c=t.json.origins[u];o.create(s,l,e,c),a.create(s,l,e,c)}o.create(s,l,e,t.json),a.create(s,l,e,t.json)}}},t.default=t.SerializablePropertyExtension})},"esri/core/accessorSupport/extensions/serializableProperty/originAliases":function(){define(["require","exports"],function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.process=function(e){if(e.json&&e.json.origins){var t=e.json.origins,r={"web-document":["web-scene","web-map"]};e=function(e){if(t[e]){var n=t[e];r[e].forEach(function(e){t[e]=n}),delete t[e]}};for(var n in r)e(n)}}})},"esri/core/accessorSupport/extensions/serializableProperty/reader":function(){define(["require","exports","../../../object","./type"],function(e,t,r,n){function o(e,t){if(1<t)return s(e,t);if(1===t)return l(e);if(u(e)){var r=l(e.prototype.itemType.Type);return function(t,n,o){return(t=r(t,n,o))?new e(t):t}}return i(e)}function i(e){return e.prototype.read?function(t,r,n){return null==t?t:(r=new e,r.read(t,n),r)}:e.fromJSON}function a(e,t,r,n){return 0!==n&&Array.isArray(t)?t.map(function(t){return a(e,t,r,n-1)}):e(t,null,r)}function s(e,t){e=i(e);var r=a.bind(null,e);return function(e,n,o){if(null==e)return e;for(e=r(e,o,t),n=t,o=e;0<n&&Array.isArray(o);)n--,o=o[0];if(void 0!==o)for(o=0;o<n;o++)e=[e];return e}}function l(e){var t=i(e);return function(e,r,n){return null==e?e:Array.isArray(e)?e.map(function(e){return t(e,null,n)}):[t(e,null,n)]}}function u(e){return!!n.isCollection(e)&&(!(!(e=e.prototype.itemType)||!e.Type||"function"!=typeof e.Type)&&c(e.Type))}function c(e){return!Array.isArray(e)&&(!!e&&e.prototype&&("read"in e.prototype||"fromJSON"in e||u(e)))}Object.defineProperty(t,"__esModule",{value:!0}),t.create=function(e,t,n,i){(!i.read||!i.read.reader&&!1!==i.read.enabled)&&c(e)&&r.setDeepValue("read.reader",o(e,t),i)}})},"esri/core/accessorSupport/extensions/serializableProperty/type":function(){define(["require","exports"],function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.isCollection=function(e){return!!e&&e.prototype&&e.prototype.declaredClass&&0===e.prototype.declaredClass.indexOf("esri.core.Collection")}})},"esri/core/accessorSupport/extensions/serializableProperty/shorthands":function(){define(["require","exports"],function(e,t){function r(e){"boolean"==typeof e.read?e.read={enabled:e.read}:"function"==typeof e.read?e.read={enabled:!0,reader:e.read}:e.read&&"object"==typeof e.read&&void 0===e.read.enabled&&(e.read.enabled=!0)}function n(e){"boolean"==typeof e.write?e.write={enabled:e.write}:"function"==typeof e.write?e.write={enabled:!0,writer:e.write}:e.write&&"object"==typeof e.write&&void 0===e.write.enabled&&(e.write.enabled=!0)}Object.defineProperty(t,"__esModule",{value:!0}),t.process=function(e){if(e.json||(e.json={}),r(e.json),n(e.json),e.json.origins)for(var t in e.json.origins)r(e.json.origins[t]),n(e.json.origins[t]);return!0}})},"esri/core/accessorSupport/extensions/serializableProperty/writer":function(){define(["require","exports","../../../object","./type"],function(e,t,r,n){function o(e,t,n,o){r.setDeepValue(n,i(e,o),t)}function i(e,t){return e&&"function"==typeof e.write?e.write({},t):e&&"function"==typeof e.toJSON?e.toJSON():"number"==typeof e?-1/0===e?-Number.MAX_VALUE:1/0===e?Number.MAX_VALUE:isNaN(e)?null:e:e}function a(e,t,n,o){null===e?e=null:e&&"function"==typeof e.map?(e=e.map(function(e){return i(e,o)}),"function"==typeof e.toArray&&(e=e.toArray())):e=[i(e,o)],r.setDeepValue(n,e,t)}function s(e,t,r){return 0!==r&&Array.isArray(e)?e.map(function(e){return s(e,t,r-1)}):i(e,t)}function l(e){return function(t,n,o,i){if(null===t)t=null;else{t=s(t,i,e),i=e;for(var a=t;0<i&&Array.isArray(a);)i--,a=a[0];if(void 0!==a)for(a=0;a<i;a++)t=[t]}r.setDeepValue(o,t,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.create=function(e,t,r,i){!i.write||i.write.writer||!1===i.write.enabled&&!i.write.overridePolicy||(1===t||n.isCollection(e)?i.write.writer=a:i.write.writer=1<t?l(t):o)}})},"esri/core/accessorSupport/PropertyOrigin":function(){define(["require","exports"],function(e,t){function r(e){switch(e){case"defaults":return 0;case"service":return 2;case"portal-item":return 3;case"web-scene":return 4;case"web-map":return 5;case"user":return 6}}function n(e){switch(e){case 0:return"defaults";case 2:return"service";case 3:return"portal-item";case 4:return"web-scene";case 5:return"web-map";case 6:return"user"}}Object.defineProperty(t,"__esModule",{value:!0}),t.nameToId=r,t.idToName=n,t.readableNameToId=function(e){return r(e)},t.idToReadableName=function(e){return n(e)},t.writableNameToId=function(e){return r(e)},t.idToWritableName=function(e){return n(e)}})},"esri/core/accessorSupport/Store":function(){define(["require","exports","../arrayUtils"],function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),e=function(){function e(){this._values=new Map}return e.prototype.get=function(e){return this._values.get(e)},e.prototype.originOf=function(){return 6},e.prototype.keys=function(){return r.keysOfMap(this._values)},e.prototype.set=function(e,t){this._values.set(e,t)},e.prototype.delete=function(e){this._values.delete(e)},e.prototype.has=function(e){return this._values.has(e)},e.prototype.forEach=function(e){this._values.forEach(e)},e}(),t.Store=e})},"esri/core/arrayUtils":function(){define(["require","exports","@dojo/framework/shim/array","./RandomLCG"],function(e,t,r,n){function o(e,t,r,n){n=n||u;for(var o=Math.max(0,n.last-10),i=o;i<r;++i)if(e[i]===t)return n.last=i;for(r=Math.min(o,r),i=0;i<r;++i)if(e[i]===t)return n.last=i;return-1}function i(e,t){return-1===e.indexOf(t)}function a(e,t,r){return!e.some(t.bind(null,r))}function s(e){return e}Object.defineProperty(t,"__esModule",{value:!0}),t.find=r.find,t.findIndex=r.findIndex,t.includes=r.includes,t.unique=function(e){return e.filter(function(e,t,r){return r.indexOf(e)===t})},t.equals=function(e,t,r){if(!e&&!t)return!0;if(!e||!t||e.length!==t.length)return!1;if(r){for(var n=0;n<e.length;n++)if(!r(e[n],t[n]))return!1}else for(n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0},t.difference=function(e,t,r){var n;return r?(n=t.filter(a.bind(null,e,r)),e=e.filter(a.bind(null,t,r))):(n=t.filter(i.bind(null,e)),e=e.filter(i.bind(null,t))),{added:n,removed:e}},t.intersect=function(e,t,n){return e&&t?n?e.filter(function(e){return-1<r.findIndex(t,function(t){return n(e,t)})}):e.filter(function(e){return-1<t.indexOf(e)}):[]};var l=!!Array.prototype.fill;t.constant=function(e,t){if(l)return Array(e).fill(t);for(var r=Array(e),n=0;n<e;n++)r[n]=t;return r},t.range=function(e,t){void 0===t&&(t=e,e=0);for(var r=Array(t-e),n=e;n<t;n++)r[n-e]=n;return r},t.binaryIndexOf=function(e,t,r){for(var n=e.length,o=0,i=n-1;o<i;){var a=o+Math.floor((i-o)/2);t>e[a]?o=a+1:i=a}return i=e[o],r?t>=e[n-1]?-1:i===t?o:o-1:i===t?o:-1},t.flatten=function(e){return e.reduce(function(e,t){return e.concat(t||[])},[])},e=function(){return function(){this.last=0}}(),t.PositionHint=e;var u=new e;t.indexOf=o,t.removeUnordered=function(e,t,r,n){var i=null==r?e.length:r;if(-1!==(n=o(e,t,i,n)))return e[n]=e[i-1],null==r&&e.pop(),t};var c=new Set;t.removeUnorderedMany=function(e,t,r,n,o,i){if(void 0===r&&(r=e.length),void 0===n&&(n=t.length),0===n||0===r)return r;c.clear();for(var a=0;a<n;++a)c.add(t[a]);for(o=o||u,a=t=Math.max(0,o.last-10);a<r;++a)if(c.has(e[a])&&(i&&i.push(e[a]),c.delete(e[a]),e[a]=e[r-1],--r,--a,0===c.size||0===r))return c.clear(),r;for(a=0;a<t;++a)if(c.has(e[a])&&(i&&i.push(e[a]),c.delete(e[a]),e[a]=e[r-1],--r,--a,0===c.size||0===r))return c.clear(),r;return c.clear(),r},t.pickRandom=function(e,t,r){var n=e.length;if(t>=n)return e.slice(0);r=(p.seed=r)?function(){return p.getFloat()}:Math.random;for(var o=new Set,i=[];i.length<t;){var a=Math.floor(r()*n);o.has(a)||(o.add(a),i.push(e[a]))}return i},t.shuffle=function(e,t){t=(p.seed=t)?function(){return p.getFloat()}:Math.random;for(var r=e.length-1;0<r;r--){var n=Math.floor(t()*(r+1)),o=e[r];e[r]=e[n],e[n]=o}return e};var p=new n;t.keysOfMap=function(e){var t=Array(e.size),r=0;return e.forEach(function(e,n){return t[r++]=n}),t},t.keysOfSet=function(e,t){void 0===t&&(t=s);var r=Array(e.size),n=0;return e.forEach(function(e){return r[n++]=t(e)}),r},t.fromMapValues=function(e){if(Array.from)return Array.from(e.values());var t=Array(e.size),r=0;return e.forEach(function(e){return t[r++]=e}),t},t.remove=function(e,t){var r=e.indexOf(t);return-1!==r?(e.splice(r,1),t):null}})},"@dojo/framework/shim/array":function(){!function(e){"object"==typeof module&&"object"==typeof module.exports?void 0!==(e=e(require,exports))&&(module.exports=e):"function"==typeof define&&define.amd&&define("require exports tslib ./global ./iterator ./number ../has/has ./support/util".split(" "),e)}(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=e("tslib"),n=e("./global"),o=e("./iterator"),i=e("./number"),a=e("../has/has");if(e=e("./support/util"),a.default("es6-array")&&a.default("es6-array-fill"))t.from=n.default.Array.from,t.of=n.default.Array.of,t.copyWithin=e.wrapNative(n.default.Array.prototype.copyWithin),t.fill=e.wrapNative(n.default.Array.prototype.fill),t.find=e.wrapNative(n.default.Array.prototype.find),t.findIndex=e.wrapNative(n.default.Array.prototype.findIndex);else{var s=function(e){return isNaN(e)?0:(e=Number(e),isFinite(e)&&(e=Math.floor(e)),Math.min(Math.max(e,0),i.MAX_SAFE_INTEGER))},l=function(e){return e=Number(e),isNaN(e)?0:0!==e&&isFinite(e)?(0<e?1:-1)*Math.floor(Math.abs(e)):e},u=function(e,t){return 0>e?Math.max(t+e,0):Math.min(e,t)};t.from=function(e,t,n){if(null==e)throw new TypeError("from: requires an array-like object");t&&n&&(t=t.bind(n)),n=s(e.length);var i="function"==typeof this?Object(new this(n)):Array(n);if(!o.isArrayLike(e)&&!o.isIterable(e))return i;if(o.isArrayLike(e)){if(0===n)return[];for(var a=0;a<e.length;a++)i[a]=t?t(e[a],a):e[a]}else{a=0;try{for(var l=r.__values(e),u=l.next();!u.done;u=l.next()){var c=u.value;i[a]=t?t(c,a):c,a++}}catch(e){p={error:e}}finally{try{u&&!u.done&&(d=l.return)&&d.call(l)}finally{if(p)throw p.error}}}return void 0!==e.length&&(i.length=n),i;var p,d},t.of=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Array.prototype.slice.call(e)},t.copyWithin=function(e,t,r,n){if(null==e)throw new TypeError("copyWithin: target must be an array-like object");var o=s(e.length);for(t=u(l(t),o),r=u(l(r),o),n=u(void 0===n?o:l(n),o),n=Math.min(n-r,o-t),o=1,t>r&&t<r+n&&(o=-1,r+=n-1,t+=n-1);0<n;)r in e?e[t]=e[r]:delete e[t],t+=o,r+=o,n--;return e},t.fill=function(e,t,r,n){var o=s(e.length);for(r=u(l(r),o),n=u(void 0===n?o:l(n),o);r<n;)e[r++]=t;return e},t.find=function(e,r,n){return r=t.findIndex(e,r,n),-1!==r?e[r]:void 0},t.findIndex=function(e,t,r){var n=s(e.length);if(!t)throw new TypeError("find: second argument must be a function");for(r&&(t=t.bind(r)),r=0;r<n;r++)if(t(e[r],r,e))return r;return-1}}a.default("es7-array")?t.includes=e.wrapNative(n.default.Array.prototype.includes):t.includes=function(e,t,r){void 0===r&&(r=0);var n;for(n=e.length,n=Number(n),isNaN(n)?n=0:(isFinite(n)&&(n=Math.floor(n)),n=Math.min(Math.max(n,0),i.MAX_SAFE_INTEGER));r<n;++r){var o=e[r];if(t===o||t!==t&&o!==o)return!0}return!1}})},"@dojo/framework/shim/iterator":function(){!function(e){"object"==typeof module&&"object"==typeof module.exports?void 0!==(e=e(require,exports))&&(module.exports=e):"function"==typeof define&&define.amd&&define(["require","exports","./Symbol","./string"],e)}(function(e,t){function r(e){return e&&"function"==typeof e[Symbol.iterator]}function n(e){return e&&"number"==typeof e.length}function o(e){return r(e)?e[Symbol.iterator]():n(e)?new s(e):void 0}Object.defineProperty(t,"__esModule",{value:!0}),e("./Symbol");var i=e("./string"),a={done:!0,value:void 0},s=function(){function e(e){this._nextIndex=-1,r(e)?this._nativeIterator=e[Symbol.iterator]():this._list=e}return e.prototype.next=function(){return this._nativeIterator?this._nativeIterator.next():this._list&&++this._nextIndex<this._list.length?{done:!1,value:this._list[this._nextIndex]}:a},e.prototype[Symbol.iterator]=function(){return this},e}();t.ShimIterator=s,t.isIterable=r,t.isArrayLike=n,t.get=o,t.forOf=function(e,t,r){function a(){s=!0}var s=!1;if(n(e)&&"string"==typeof e)for(var l=e.length,u=0;u<l;++u){var c=e[u];if(u+1<l){var p=c.charCodeAt(0);p>=i.HIGH_SURROGATE_MIN&&p<=i.HIGH_SURROGATE_MAX&&(c+=e[++u])}if(t.call(r,c,e,a),s)break}else if(l=o(e))for(u=l.next();!u.done&&(t.call(r,u.value,e,a),!s);)u=l.next()}})},"@dojo/framework/shim/number":function(){!function(e){"object"==typeof module&&"object"==typeof module.exports?void 0!==(e=e(require,exports))&&(module.exports=e):"function"==typeof define&&define.amd&&define(["require","exports","./global"],e)}(function(e,t){function r(e){return"number"==typeof e&&o.default.isFinite(e)}function n(e){return r(e)&&Math.floor(e)===e}Object.defineProperty(t,"__esModule",{value:!0});var o=e("./global");t.EPSILON=1,t.MAX_SAFE_INTEGER=Math.pow(2,53)-1,t.MIN_SAFE_INTEGER=-t.MAX_SAFE_INTEGER,t.isNaN=function(e){return"number"==typeof e&&o.default.isNaN(e)},t.isFinite=r,t.isInteger=n,t.isSafeInteger=function(e){return n(e)&&Math.abs(e)<=t.MAX_SAFE_INTEGER}})},"esri/core/RandomLCG":function(){define(["require","exports"],function(e,t){return function(){function e(e){void 0===e&&(e=1),this._seed=e}return Object.defineProperty(e.prototype,"seed",{set:function(t){this._seed=null==t?Math.random()*e._m:t},enumerable:!0,configurable:!0}),e.prototype.getInt=function(){return this._seed=(e._a*this._seed+e._c)%e._m},e.prototype.getFloat=function(){return this.getInt()/(e._m-1)},e.prototype.getIntRange=function(e,t){return Math.round(this.getFloatRange(e,t))},e.prototype.getFloatRange=function(t,r){r-=t;var n=this.getInt()/e._m;return t+Math.floor(n*r)},e._m=2147483647,e._a=48271,e._c=0,e}()})},"esri/core/accessorSupport/introspection":function(){define("require exports ./ensureType ./extensions ./metadata ./utils ./decorators/cast".split(" "),function(e,t,r,n,o,i,a){function s(e,t){return function(r){return r=+e(r),null!=t.min&&(r=Math.max(t.min,r)),null!=t.max&&(r=Math.min(t.max,r)),r}}function l(e,t){return null==t.get?function(){return this.__accessor__?this.__accessor__.getterStatic(e,t):t.value}:function(){return this.__accessor__?this.__accessor__.getterComputed(e,t):t.value}}Object.defineProperty(t,"__esModule",{value:!0}),t.processPrototype=function(e){var t,a=e.declaredClass,l=e.properties||{};for(t in l){var u=l[t],c=typeof u;null==u?o.setPropertyMetadata(e,t,{value:u}):Array.isArray(u)?o.setPropertyMetadata(e,t,{type:[u[0]],value:null}):"object"===c?i.getProperties(u)||u instanceof Date?o.setPropertyMetadata(e,t,{type:u.constructor,value:u}):o.setPropertyMetadata(e,t,u):"boolean"===c?o.setPropertyMetadata(e,t,{type:Boolean,value:u}):"string"===c?o.setPropertyMetadata(e,t,{type:String,value:u}):"number"===c?o.setPropertyMetadata(e,t,{type:Number,value:u}):"function"===c&&o.setPropertyMetadata(e,t,{type:u,value:null})}e=o.getPropertiesMetadata(e);for(t in e){if(l=e[t],c=l.type,u=l.types,!l.cast)if(c){u=l;var p=0,d=c;if(r.isLongFormType(c))c=r.ensureLongFormType(c);else{for(;Array.isArray(d)&&1===d.length&&"string"!=typeof d[0]&&"number"!=typeof d[0];)d=d[0],p++;c=r.isOneOf(d)?0===p?r.ensureOneOf(d):r.ensureNArrayTyped(r.ensureOneOf(d),p):1===p?r.ensureArray(d):1<p?r.ensureNArray(d,p):r.ensureType(c)}u.cast=c}else u&&(Array.isArray(u)?l.cast=r.ensureArrayTyped(r.ensureOneOfType(u[0])):l.cast=r.ensureOneOfType(u));l.range&&(l.cast=s(l.cast,l.range))}return n.processPrototypeMetadatas(e,a),e},t.processClass=function(e){for(var t=e.prototype,r=t.declaredClass,i=e._meta.bases,s={},u=i.length-1;0<=u;u--)o.merge(s,o.getMetadata(i[u].prototype));var c=s.properties;n.processClassMetadatas(c,r),Object.defineProperty(e,"__accessorMetadata__",{value:{properties:c,autoDestroy:!!s.autoDestroy}});for(var p={},r=function(e){var t=c[e];p[e]={enumerable:!0,configurable:!0,get:l(e,t),set:function(r){var n=this.__accessor__;if(n){if(!Object.isFrozen(this)){if(n.initialized&&t.readOnly)throw new TypeError("[accessor] cannot assign to read-only property '"+e+"' of "+this.declaredClass);if(2===n.lifecycle&&t.constructOnly)throw new TypeError("[accessor] cannot assign to construct-only property '"+e+"' of "+this.declaredClass);n.set(e,r)}}else Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:r})}}},i=0,u=Object.getOwnPropertyNames(c);i<u.length;i++)r(u[i]);if(Object.defineProperties(e.prototype,p),s.parameters)for(e=0,r=Object.getOwnPropertyNames(s.parameters);e<r.length;e++)i=r[e],u=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]},(u=a.autocastMethod(t,i,u))&&Object.defineProperty(t,i,u);return s}})},"esri/core/accessorSupport/watch":function(){define("require exports ../ArrayPool ../lang ../ReentrantObjectPool ../scheduling ./get ./utils ./wire".split(" "),function(e,t,r,n,o,i,a,s,l){function u(e){v.has(e)?b.splice(b.indexOf(e),1):v.add(e),b.push(e),y||(y=i.schedule(p))}function c(e){if(!e.removed){var t=e.callback,r=e.path,o=e.oldValue,i=e.target,s=a.valueOf(i,e.propertyPath,!0);n.equals(o,s)||(e.oldValue=s,t.call(i,s,o,r,i))}}function p(){for(var e=10;y&&e--;){y=null;var t=b;b=g.acquire(),v.clear();for(var r=g.acquire(),n=0,o=t;n<o.length;n++){var i=o[n],a=i.uid;c(i),a===i.uid&&i.removed&&r.push(i)}for(n=0;n<b.length;n++)i=b[n],i.removed&&(r.push(i),v.delete(i),b.splice(n,1),--n);for(n=0;n<r.length;n++)m.pool.release(r[n]);g.release(t),g.release(r),w.forEach(function(e){return e()})}}function d(e,t,r){var n=s.parse(e,t,r,function(e,t,r){var o,i,c=a.valueOf(e,t,!0),p=l.wire(e,t,function(e,t){e.__accessor__.destroyed||o&&o.uid!==i?n.remove():(o||(o=m.pool.acquire(e,t,c,r),i=o.uid,c=null),u(o))});return{remove:s.once(function(){p.remove(),o&&(o.uid!==i||o.removed||(o.removed=!0,u(o)),o=null),n=p=c=null})}});return n}function f(e,t,r){var o=s.parse(e,t,r,function(e,t,r){var i=a.valueOf(e,t,!0),s=!1;return l.wire(e,t,function(e,t){if(e.__accessor__.destroyed)o.remove();else if(!s){s=!0;var l=a.valueOf(e,t,!0);n.equals(i,l)||r.call(e,l,i,t,e),i=a.valueOf(e,t,!0),s=!1}})});return o}function h(e,t,r,n){return void 0===n&&(n=!1),!e.__accessor__||e.__accessor__.destroyed?{remove:function(){}}:n?f(e,t,r):d(e,t,r)}Object.defineProperty(t,"__esModule",{value:!0});var y,m=function(){function e(t,r,n,o){this.target=t,this.path=r,this.oldValue=n,this.callback=o,this.uid=0,this.removed=!1,this.propertyPath=s.pathToStringOrArray(r),this.uid=++e.uid}return e.prototype.release=function(){this.target=this.path=this.propertyPath=this.callback=this.oldValue=null,this.uid=++e.uid,this.removed=!0},e.pool=new o.ReentrantObjectPool(e,!0),e.uid=0,e}(),g=new r,v=new Set,b=g.acquire();t.dispatchTarget=function(e){for(var t=g.copy(b),r=0;r<t.length;r++){var n=t[r];n.target===e&&(c(n),v.delete(n),b.splice(b.indexOf(n),1))}},t.removeTarget=function(e){for(var t=0;t<b.length;t++){var r=b[t];r.target===e&&(r.removed=!0)}},t.dispatch=p;var w=new Set;t.afterDispatch=function(e){return w.add(e),{remove:function(){w.delete(e)}}},t.watch=h,t.isValueInUse=function(e){return b.some(function(t){return t.oldValue===e})},t.default=h})},"esri/core/ArrayPool":function(){define(["require","exports","./ObjectPool"],function(e,t,r){function n(e){e.length=0}var o=Array.prototype.splice;e=function(){function e(e,t){void 0===e&&(e=50),void 0===t&&(t=50),this._pool=new r(Array,!1,n,t,e)}return e.prototype.acquire=function(){return this._pool.acquire()},e.prototype.copy=function(e){var t=this.acquire();return e.unshift(0,0),o.apply(t,e),e.splice(0,2),t},e.prototype.release=function(e){this._pool.release(e)},e.prototype.prune=function(){this._pool.prune(0)},e.acquire=function(){return i.acquire()},e.copy=function(e){return i.copy(e)},e.release=function(e){return i.release(e)},e.prune=function(){i.prune()},e}();var i=new e(100);return e})},"esri/core/ReentrantObjectPool":function(){define(["require","exports","./tsSupport/extendsHelper","./ObjectPool"],function(e,t,r,n){Object.defineProperty(t,"__esModule",{value:!0}),e=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._set=new Set,t}return r(t,e),t.prototype.destroy=function(){e.prototype.destroy.call(this),this._set=null},t.prototype.acquire=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return t=e.prototype.acquire.apply(this,t),this._set.delete(t),t},t.prototype.release=function(t){t&&!this._set.has(t)&&(e.prototype.release.call(this,t),this._set.add(t))},t.prototype._dispose=function(t){this._set.delete(t),e.prototype._dispose.call(this,t)},t}(n),t.ReentrantObjectPool=e})},"esri/core/tsSupport/extendsHelper":function(){define([],function(){return function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}()})},"esri/core/scheduling":function(){define("require exports ./nextTick ./now ./PooledArray ./promiseUtils ./requestAnimationFrame".split(" "),function(e,t,r,n,o,i,a){function s(e){void 0===e&&(e=t.now()),t.debug.rafId=null,0<w.length&&(t.debug.rafId=l()),0<h&&(m=Math.min(e-h,m)),t.debug.executeFrameTasks(e)}function l(){return t.debug.requestNextFrame?t.debug.requestNextFrame(p):p()}function u(){w.forEach(function(e){e.removed&&_.push(e)}),w.removeUnorderedMany(_.data,_.length),_.clear()}function c(){for(;b.length;){var e=b.shift();e.isActive&&(e.isActive=!1,e.callback())}t.debug.willDispatch=!1}function p(){return a(s)}Object.defineProperty(t,"__esModule",{value:!0}),t.now=n;var d=function(){return function(e){this.phases=e,this.paused=!1,this.ticks=-1,this.removed=!1}}(),f=function(){function e(e){this.callback=e,this.isActive=!0}return e.prototype.remove=function(){this.isActive=!1},e}(),h=-1,y=0,m=1e3,g={time:0,deltaTime:0,elapsedFrameTime:0,frameDuration:0},v=["prepare","preRender","render","postRender","update"],b=[],w=new o,S=function(){function e(e){this._task=e}return e.prototype.remove=function(){this._task.removed=!0},e.prototype.pause=function(){this._task.paused=!0},e.prototype.resume=function(){this._task.paused=!1},e}();t.FrameTaskHandle=S,t.debug={frameTasks:w,rafId:null,requestNextFrame:null,willDispatch:!1,clearFrameTasks:function(e){void 0===e&&(e=!1),w.forEach(function(e){e.removed=!0}),e&&u()},dispatch:c,executeFrameTasks:function(e){void 0===e&&(e=t.now()),0>h&&(h=e);var r=e-h,n=0<y?y:m,o=Math.max(0,r-n);h=e;for(var i=function(i){var a=v[i];w.forEach(function(s){s.paused||s.removed||(0===i&&s.ticks++,s.phases[a]&&(g.time=e,g.deltaTime=0===s.ticks?0:r,g.elapsedFrameTime=t.now()-e,g.frameDuration=n-o,s.phases[a].call(s,g)))})},a=0;a<v.length;a++)i(a);u()}},t.schedule=function(e){return e=new f(e),b.push(e),t.debug.willDispatch||(t.debug.willDispatch=!0,r(c)),e},t.addFrameTask=function(e){return e=new d(e),w.push(e),t.debug.rafId||(h=-1,t.debug.rafId=l()),new S(e)},t.setFrameDuration=function(e){y=Math.max(0,e)},t.requestNextFrame=l;var _=new o;t.waitTicks=function(e,t){void 0===e&&(e=1);var n=i.createResolver(),o=function(){i.isAborted(t)?n.reject(i.createAbortError()):0===e?n():(--e,r(function(){return o()}))};return o(),n.promise}})},"esri/core/nextTick":function(){define(["require","exports","./global"],function(e,t,r){function n(){if(r.postMessage&&!r.importScripts){var e=r.onmessage,t=!0;return r.onmessage=function(){t=!1},r.postMessage("","*"),r.onmessage=e,t}return!1}function o(e){s.push(e),1===s.length&&a(function(){for(var e=0,t=l;e<t.length;e++)(0,t[e])();for(e=s.slice(),t=s.length=0;t<e.length;t++)(0,e[t])()})}var i=r.MutationObserver||r.WebKitMutationObserver,a=function(){if(r.process&&r.process.nextTick)return function(e){r.process.nextTick(e)};if(r.Promise)return function(e){r.Promise.resolve().then(e)};if(i){var e=[],t=document.createElement("div");return new i(function(){for(;0<e.length;)e.shift()()}).observe(t,{attributes:!0}),function(r){e.push(r),t.setAttribute("queueStatus","1")}}if(n()){var o=[];return r.addEventListener("message",function(e){if(e.source===r&&"esri-nexttick-message"===e.data)for(e.stopPropagation();o.length;)o.shift()()},!0),function(e){o.push(e),r.postMessage("esri-nexttick-message","*")}}return r.setImmediate?function(e){return r.setImmediate(e)}:function(e){return r.setTimeout(e,0)}}(),s=[],l=[];return function(e){e.before=function(e){return l.push(e),{remove:function(){l=l.filter(function(t){return t!==e})}}}}(o||(o={})),o})},"esri/core/now":function(){define(["require","exports","./global"],function(e,t,r){return function(){var e=r.performance||{};if(e.now)return function(){return e.now()};if(e.webkitNow)return function(){return e.webkitNow()};if(e.mozNow)return function(){return e.mozNow()};if(e.msNow)return function(){return e.msNow()};if(e.oNow)return function(){return e.oNow()};var t;return t=e.timing&&e.timing.navigationStart?e.timing.navigationStart:Date.now(),function(){return Date.now()-t}}()})},"esri/core/PooledArray":function(){define(["require","exports","./tsSupport/generatorHelper","./arrayUtils","./HeapSort"],function(e,t,r,n,o){return function(){function e(e){var t=this;this.data=[],this._length=0,this._allocator=null,this._deallocator=function(){},this._shrink=function(){},this._hint=new n.PositionHint,e&&(e.initialSize&&(this.data=Array(e.initialSize)),e.allocator?(this._allocator=e.allocator,this._deallocator=e.deallocator):"deallocator"in e&&(this._deallocator=e.deallocator),e.shrink&&(this._shrink=function(){t.data.length>1.5*t.length&&(t.data.length=Math.floor(1.1*t.length))}))}return e.prototype.toArray=function(){return this.data.slice(0,this.length)},e.prototype.getItemAt=function(e){if(!(0>e||e>=this._length))return this.data[e]},Object.defineProperty(e.prototype,"length",{get:function(){return this._length},set:function(e){if(e>this._length)if(this._allocator)for(;this._length<e;)this.data[this._length++]=this._allocator(this.data[this._length]);else this._length=e;else{if(this._deallocator)for(var t=e;t<this._length;++t)this.data[t]=this._deallocator(this.data[t]);this._length=e,this._shrink()}},enumerable:!0,configurable:!0}),e.prototype.clear=function(){this.length=0},e.prototype.prune=function(){this.clear(),this.data=[]},e.prototype.equal=function(e){return n.equals(this.data,e.data)},e.prototype.push=function(e){return this.data[this._length++]=e},e.prototype.pushArray=function(e,t){void 0===t&&(t=e.length);for(var r=0;r<t;r++)this.data[this._length++]=e[r];return this.back()},e.prototype.pushNew=function(){return this._allocator&&(this.data[this.length]=this._allocator(this.data[this.length])),++this._length,this.back()},e.prototype.pop=function(){if(0!==this.length){var e=this.data[this.length-1];return--this.length,this._shrink(),e}},e.prototype.iterableRemoveMany=function(e){var t,o;return r(this,function(r){switch(r.label){case 0:t=[],o=0,r.label=1;case 1:return!(o<this.length)||o>=this.length?[3,4]:(0>n.indexOf(e.data,this.data[o],e.length,e._hint)&&t.push(this.data[o]),[4]);case 2:r.sent(),r.label=3;case 3:return++o,[3,1];case 4:return this.data=t,this._length=this.data.length,[2]}})},e.prototype.remove=function(e){var t=n.indexOf(this.data,e,this.length,this._hint);if(-1!==t)return this.data.splice(t,1),--this.length,e},e.prototype.removeUnordered=function(e){return e=n.removeUnordered(this.data,e,this.length,this._hint),void 0!==e&&--this.length,e},e.prototype.removeUnorderedIndex=function(e){if(!(e>=this.length||0>e))return this.swapElements(e,this.length-1),this.pop()},e.prototype.removeUnorderedMany=function(e,t,r){void 0===t&&(t=e.length),this.length=n.removeUnorderedMany(this.data,e,this.length,t,this._hint,r)},e.prototype.front=function(){if(0!==this.length)return this.data[0]},e.prototype.back=function(){if(0!==this.length)return this.data[this.length-1]},e.prototype.swapElements=function(e,t){var r;e>=this.length||t>=this.length||e===t||(r=[this.data[t],this.data[e]],this.data[e]=r[0],this.data[t]=r[1])},e.prototype.sort=function(e){o.sort(this.data,0,this.length,e)},e.prototype.iterableSort=function(e){return o.iterableSort(this.data,0,this.length,e)},e.prototype.some=function(e,t){for(var r=0;r<this.length;++r)if(e.call(t,this.data[r],r,this.data))return!0;return!1},e.prototype.filterInPlace=function(e,t){for(var r=0,n=0;n<this._length;++n){var o=this.data[n];e.call(t,o,n,this.data)&&(this.data[n]=this.data[r],this.data[r]=o,r++)}if(this._deallocator)for(n=r;n<this._length;n++)this.data[n]=this._deallocator(this.data[n]);return this._length=r,this},e.prototype.forEach=function(e,t){for(var r=this.length,n=0;n<Math.min(this.length,r);++n)e.call(t,this.data[n],n,this.data)},e.prototype.iterableForEach=function(){var e;return r(this,function(t){switch(t.label){case 0:e=0,t.label=1;case 1:return e<this.length?[4,this.data[e]]:[3,4];case 2:t.sent(),t.label=3;case 3:return++e,[3,1];case 4:return[2]}})},e.prototype.map=function(e,t){for(var r=Array(this.length),n=0;n<this.length;++n)r[n]=e.call(t,this.data[n],n,this.data);return r},e}()})},"esri/core/tsSupport/generatorHelper":function(){define([],function(){return function(e,t){function r(e){return function(t){return n([e,t])}}function n(r){if(o)throw new TypeError("Generator is already executing.");for(;l;)try{if(o=1,i&&(a=2&r[0]?i.return:r[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,r[1])).done)return a;switch(i=0,a&&(r=[2&r[0],a.value]),r[0]){case 0:case 1:a=r;break;case 4:return l.label++,{value:r[1],done:!1};case 5:l.label++,i=r[1],r=[0];continue;case 7:r=l.ops.pop(),l.trys.pop();continue;default:if(a=l.trys,!(a=0<a.length&&a[a.length-1])&&(6===r[0]||2===r[0])){l=0;continue}if(3===r[0]&&(!a||r[1]>a[0]&&r[1]<a[3]))l.label=r[1];else if(6===r[0]&&l.label<a[1])l.label=a[1],a=r;else{if(!(a&&l.label<a[2])){a[2]&&l.ops.pop(),l.trys.pop();continue}l.label=a[2],l.ops.push(r)}}r=t.call(e,l)}catch(e){r=[6,e],i=0}finally{o=a=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}var o,i,a,s,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s}})},"esri/core/HeapSort":function(){define(["require","exports","./tsSupport/generatorHelper"],function(e,t,r){var n;return function(e){function t(e,t,r,n){for(var o=t,i=r>>>1,a=e[o-1];t<=i;){t=o<<1,t<r&&0>n(e[t-1],e[t])&&++t;var s=e[t-1];if(0>=n(s,a))break;e[o-1]=s,o=t}e[o-1]=a}function n(e,t){return e<t?-1:e>t?1:0}e.sort=function(e,r,o,i){void 0===r&&(r=0),void 0===o&&(o=e.length),void 0===i&&(i=n);for(var a=o>>>1;a>r;a--)t(e,a,o,i);for(var s=r+1,a=o-1;a>r;a--)o=e[r],e[r]=e[a],e[a]=o,t(e,s,a,i)},e.iterableSort=function(e,o,i,a){var s,l,u;return r(this,function(r){switch(r.label){case 0:void 0===o&&(o=0),void 0===i&&(i=e.length),void 0===a&&(a=n),s=i>>>1,r.label=1;case 1:return s>o?(t(e,s,i,a),[4]):[3,4];case 2:r.sent(),r.label=3;case 3:return s--,[3,1];case 4:l=o+1,s=i-1,r.label=5;case 5:return s>o?(u=e[o],e[o]=e[s],e[s]=u,t(e,l,s,a),[4]):[3,8];case 6:r.sent(),r.label=7;case 7:return s--,[3,5];case 8:return[2]}})}}(n||(n={})),n})},"esri/core/promiseUtils":function(){define("require exports @dojo/framework/shim/AbortController dojo/Deferred dojo/promise/all ./Error ./events ./maybe ./has ./clock @dojo/framework/shim/Promise".split(" "),function(e,t,r,n,o,i,a,s,l,u){function c(e){return l("esri-native-promise")?Promise.all(e):o(e)}function p(e,t){if(l("esri-native-promise"))return new Promise(e);var r=new n(t);try{e(function(e){return O(e).then(r.resolve)},r.reject)}catch(e){r.reject(e)}return r.promise}function d(e){return void 0===e&&(e="Aborted"),e=new i("AbortError",e),e.dojoType="cancel",e}function f(){return new r.default}function h(e){if(m(e))throw d()}function y(e){return s.isSome(e)?"aborted"in e?e:e.signal:e}function m(e){return e=y(e),s.isSome(e)&&e.aborted}function g(e,t){if(e=y(e),!s.isNone(e)){if(!e.aborted)return a.once(e,"abort",function(){return t(d())});t(d())}}function v(e){return e&&("AbortError"===e.name||"cancel"===e.dojoType)}function b(e){var t=null;return e=p(function(e,r){t={resolve:e,reject:r}},e),t.promise=e,t.cancel=function(){t.reject(d())},t}function w(e){if(e){if("function"!=typeof e.forEach){var t=Object.keys(e);return w(t.map(function(t){return e[t]})).then(function(e){var r={};return t.forEach(function(t,n){return r[t]=e[n]}),r})}var r=null,n=_;return p(function(t,o){var i=[],a=e.length;0===a&&t(i),e.forEach(function(e){var s={promise:e||n(e)};i.push(s),s.promise.then(function(e){s.value=e}).catch(function(e){s.error=e}).then(function(){0===--a&&(r?o(d()):t(i))})})},function(t){r=t||"Invocation cancellation",e.forEach(function(e){"cancel"in e&&e.cancel(t)})})}}function S(e){if(l("esri-native-promise"))return Promise.reject(e);var t=new n;return t.reject(e),t.promise}function _(e){if(void 0===e&&(e=void 0),l("esri-native-promise"))return Promise.resolve(e);var t=new n;return t.resolve(e),t.promise}function x(e,t,r){void 0===t&&(t=void 0);var n=f();return g(r,function(){return n.abort()}),p(function(r){var o=setTimeout(function(){o=0,r(t)},e);g(n,function(){o&&(clearTimeout(o),S(d()))})},function(){return n.abort()})}function O(e){return e&&"object"==typeof e&&"then"in e&&"function"==typeof e.then?e:_(e)}Object.defineProperty(t,"__esModule",{value:!0}),l.add("esri-native-promise",!1),t.all=c,t.filter=function(e,t){var r=e.slice();return c(e.map(function(e,r){return t(e,r)})).then(function(e){return r.filter(function(t,r){return e[r]})})},t.create=p,t.createAbortError=d,t.createAbortController=f,t.throwIfAborted=h,t.isAborted=m,t.throwIfAbortError=function(e){if(v(e))throw e},t.onAbort=g,t.onAbortOrThrow=function(e,t){if(e=y(e),!s.isNone(e))return h(e),a.once(e,"abort",function(){return t(d())})},t.isAbortError=v,t.createDeferred=b,t.eachAlways=w,t.eachAlwaysValues=function(e){return w(e).then(function(e){return e.filter(function(e){return!!e.value}).map(function(e){return e.value})})},t.first=function(e){return e&&e.length?p(function(t,r){for(var n=0;n<e.length;n++)e[n].then(t,r)}):_()},t.reject=S,t.resolve=_,t.after=x,t.timeout=function(e,t,r,n){var o=r&&"abort"in r?r:null;null!=n||o||(n=r);var a=setTimeout(function(){a=0,o&&o.abort()},t),s=function(){throw n||new i("promiseUtils:timeout","The wrapped promise did not resolve within "+t+" ms")};return e.then(function(e){if(0===a)throw s();return clearTimeout(a),e},function(e){throw clearTimeout(a),0===a?s():e})},t.wrapCallback=function(e){var t=!1;return p(function(){e(function(e){t||_(e)})},function(){return t=!0})},t.isPromiseLike=function(e){return e&&"function"==typeof e.then},t.when=O,t.debounce=function(e,t){void 0===t&&(t=-1);var r,n,o,i,a=null,s=function(){for(var l=[],u=0;u<arguments.length;u++)l[u]=arguments[u];if(r)return n=l,i&&i.reject(d()),i=b(),l=i.promise,a&&(u=a,a=null,u.abort()),l;if(o=i||b(),i=null,0<t){var c=f(),p=r=O(e.apply(void 0,l.concat([c.signal])));x(t).then(function(){r===p&&(i?c.abort():a=c)})}else r=1,r=O(e.apply(void 0,l));var l=function(){var e=n;n=o=r=a=null,null!=e&&s.apply(void 0,e)},u=r,h=o;return u.then(l,l),u.then(h.resolve,h.reject),h.promise};return s},t.createResolver=function(e){var t,r;e=p(function(e,n){t=e,r=n},e);var n=function(e){t(e)};return n.resolve=function(e){return t(e)},n.reject=function(e){return r(e)},n.timeout=function(e,t){return u.default.setTimeout(function(){return n.reject(t)},e)},n.promise=e,n},t.always=function(e,t){return e.then(t,t)}})},"@dojo/framework/shim/AbortController":function(){!function(e){"object"==typeof module&&"object"==typeof module.exports?void 0!==(e=e(require,exports))&&(module.exports=e):"function"==typeof define&&define.amd&&define(["require","exports","./global","../has/has","./array"],e)}(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=e("./global"),n=e("../has/has"),o=e("./array");t.ShimAbortSignal=r.default.AbortSignal,n.default("abort-signal")||(r.default.AbortSignal=t.ShimAbortSignal=function(){function e(){this._aborted=!1,this.listeners={}}return Object.defineProperty(e.prototype,"aborted",{get:function(){return this._aborted},enumerable:!0,configurable:!0}),e.prototype.addEventListener=function(e,t){e in this.listeners||(this.listeners[e]=[]),this.listeners[e].push(t)},e.prototype.removeEventListener=function(e,t){if(e in this.listeners){var r=o.findIndex(this.listeners[e],function(e){return e===t});0<=r&&this.listeners[e].splice(r,1)}},e.prototype.dispatchEvent=function(e){var t=this,r=e.type;return"abort"===r&&(this._aborted=!0,"function"==typeof this.onabort&&this.onabort.call(this,e)),r in this.listeners&&(this.listeners[r].forEach(function(r){setTimeout(function(){return r.call(t,e)},0)}),!e.preventDefault)},e}()),t.ShimAbortController=r.default.AbortController,n.default("abort-controller")||(r.default.AbortController=t.ShimAbortController=function(){function e(){this.signal=new t.ShimAbortSignal}return e.prototype.abort=function(){var e;try{e=new Event("abort")}catch(t){"undefined"!=typeof document?(e=document.createEvent("Event"),e.initEvent("abort",!1,!1)):e={type:"abort",bubbles:!1,cancelable:!1}}this.signal.dispatchEvent(e)},e}()),t.default=t.ShimAbortController})},"dojo/promise/all":function(){define(["../_base/array","../_base/lang","../Deferred","../when"],function(e,t,r,n){var o=e.some;return function(e){var i,a;t.isArray(e)?a=e:e&&"object"==typeof e&&(i=e);var s,l=[];if(i){a=[];for(var u in i)Object.hasOwnProperty.call(i,u)&&(l.push(u),a.push(i[u]));s={}}else a&&(s=[]);if(!a||!a.length)return(new r).resolve(s);var c=new r;c.promise.always(function(){s=l=null});var p=a.length;return o(a,function(e,t){return i||l.push(t),n(e,function(e){c.isFulfilled()||(s[l[t]]=e,0==--p&&c.resolve(s))},c.reject),c.isFulfilled()}),c.promise}})},"esri/core/Error":function(){define("require exports ./tsSupport/extendsHelper ./lang ./Logger ./Message".split(" "),function(e,t,r,n,o,i){return e=function(e){function t(r,n,o){var i=e.call(this,r,n,o)||this;return i instanceof t?i:new t(r,n,o)}return r(t,e),t.prototype.toJSON=function(){if(null!=this.details)try{var e=n.clone(this.details);return{name:this.name,message:this.message,details:e,dojoType:this.dojoType}}catch(e){throw o.getLogger("esri.core.Error").error(e),e}return{name:this.name,message:this.message,details:this.details,dojoType:this.dojoType}},t.fromJSON=function(e){var r=new t(e.name,e.message,e.details);return null!=e.dojoType&&(r.dojoType=e.dojoType),r},t}(i),e.prototype.type="error",e})},"esri/core/Message":function(){define(["require","exports","./object"],function(e,t,r){function n(e,t){return e.replace(/\$\{([^\s\:\}]*)(?:\:([^\s\:\}]+))?\}/g,function(e,n){if(""===n)return"$";if(e=r.getDeepValue(n,t),void 0===(e=null==e?"":e))throw Error('could not find key "'+n+'" in template');return e.toString()})}return function(){function e(t,r,o){this instanceof e&&(this.name=t,this.message=r&&n(r,o)||"",this.details=o)}return e.prototype.toString=function(){return"["+this.name+"]: "+this.message},e}()})},"esri/core/events":function(){define(["require","exports"],function(e,t){function r(e){return e&&("function"==typeof e.on||"function"==typeof e.addEventListener)}function n(e,t,n){if(!r(e))throw new TypeError("target is not a Evented or EventTarget object");if("on"in e)return e.on(t,n);if(Array.isArray(t)){for(var o=t.slice(),i=0;i<o.length;i++)e.addEventListener(o[i],n);return{remove:function(){for(var t=0;t<o.length;t++)e.removeEventListener(o[t],n)}}}return e.addEventListener(t,n),{remove:function(){e.removeEventListener(t,n)}}}Object.defineProperty(t,"__esModule",{value:!0}),t.isEventTarget=r,t.on=n,t.once=function(e,t,o){if(!r(e))throw new TypeError("target is not a Evented or EventTarget object");if("once"in e)return e.once(t,o);var i=n(e,t,function(t){i.remove(),o.call(e,t)});return{remove:function(){i.remove()}}},t.pausable=function(e,t,r){var o=!1,i=n(e,t,function(t){o||r.call(e,t)});return{resume:function(){o=!1},pause:function(){o=!0},remove:function(){i.remove()}}},t.ieKeyNormalizationMap={Win:"Meta",Scroll:"ScrollLock",Spacebar:" ",Down:"ArrowDown",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Del:"Delete",Apps:"ContextMenu",Esc:"Escape",Multiply:"*",Add:"+",Subtract:"-",Decimal:".",Divide:"/"},t.eventKey=function(e){return e=e.key,t.ieKeyNormalizationMap[e]||e}})},"esri/core/clock":function(){define(["require","exports","./global"],function(e,t,r){function n(e){return{setTimeout:function(t,r){var n=e.setTimeout(t,r);return{remove:function(){return e.clearTimeout(n)}}}}}Object.defineProperty(t,"__esModule",{value:!0}),t.wrap=n,t.default=n(r)})},"esri/core/requestAnimationFrame":function(){define(["require","exports","./global","./now"],function(e,t,r,n){var o=n();if(!(e=r.requestAnimationFrame)){t=["ms","moz","webkit","o"];for(var i=0;i<t.length&&!e;++i)e=r[t[i]+"RequestAnimationFrame"];e||(e=function(e){var t=n(),i=Math.max(0,16-(t-o)),a=r.setTimeout(function(){e(n())},i);return o=t+i,a})}return e})},"esri/core/accessorSupport/testSupport":function(){define(["require","exports"],function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.interceptor=null})},"esri/core/accessorSupport/read":function(){define("require exports ../tsSupport/assignHelper ./get ./utils ./extensions/serializableProperty".split(" "),function(e,t,r,n,o,i){function a(e,t,r){if(void 0===r&&(r=s),t&&"object"==typeof t){for(var a=o.getProperties(e),l=a.metadatas,u={},c=0,p=Object.getOwnPropertyNames(t);c<p.length;c++){var d=u,f=l,h=p[c],y=t,m=r,g=i.originSpecificReadPropertyDefinition(f[h],m);g&&(!g.read||!1!==g.read.enabled&&!g.read.source)&&(d[h]=!0);for(var v=0,b=Object.getOwnPropertyNames(f);v<b.length;v++){var w,S=b[v],g=i.originSpecificReadPropertyDefinition(f[S],m);e:{w=h;var _=y;if(g&&g.read&&!1!==g.read.enabled&&g.read.source)if("string"==typeof(g=g.read.source)){if(g===w||-1<g.indexOf(".")&&0===g.indexOf(w)&&n.exists(g,_)){w=!0;break e}}else for(var x=0;x<g.length;x++){var O=g[x];if(O===w||-1<O.indexOf(".")&&0===O.indexOf(w)&&n.exists(O,_)){w=!0;break e}}w=!1}w&&(d[S]=!0)}}for(a.setDefaultOrigin(r.origin),p=0,d=Object.getOwnPropertyNames(u);p<d.length;p++)c=d[p],h=(f=i.originSpecificReadPropertyDefinition(l[c],r).read)&&f.source,y=void 0,y=h&&"string"==typeof h?n.valueOf(t,h):t[c],f&&f.reader&&(y=f.reader.call(e,y,t,r)),void 0!==y&&a.set(c,y);if(!r||!r.ignoreDefaults)for(t=0,l=Object.getOwnPropertyNames(l);t<l.length;t++)c=l[t],u[c]||(p=e,d=a,f=r,void 0!==(h=(h=i.originSpecificPropertyDefinition(d.metadatas[c],"any",f))&&h.default)&&void 0!==(p="function"==typeof h?h.call(p,c,f):h)&&d.set(c,p));a.setDefaultOrigin("user")}}Object.defineProperty(t,"__esModule",{value:!0});var s={origin:"service"};t.read=a,t.readLoadable=function(e,t,n,o){void 0===o&&(o=s),t=r({},o,{messages:[]}),n(t),t.messages.forEach(function(t){"warning"!==t.type||e.loaded?o&&o.messages.push(t):e.loadWarnings.push(t)})},t.default=a})},"esri/core/accessorSupport/write":function(){define("require exports ../arrayUtils ../Error ../Logger ./PropertyOrigin ./utils ./extensions/serializableProperty".split(" "),function(e,t,r,n,o,i,a,s){function l(e,t,o,a,s,l){if(!a||!a.write)return!1;var u=e.get(o);if(!s&&a.write.overridePolicy){var p=a.write.overridePolicy.call(e,u,o,l);void 0!==p&&(s=p)}return s||(s=a.write),!(!s||!1===s.enabled)&&((null===u&&!s.allowNull||void 0===u)&&s.isRequired?(t=new n("web-document-write:property-required","Missing value for required property '"+o+"' on '"+e.declaredClass+"'",{propertyName:o,target:e}),l&&l.messages?l.messages.push(t):t&&!l&&c.error(t.name,t.message),!1):!(void 0===u||null===u&&!s.allowNull)&&(p=a.default,void 0===p?u=!1:"function"==typeof p?Array.isArray(u)?(e=p.call(e,o,l),u=r.equals(e,u)):u=!1:u=p===u,!u&&(void 0!==a.default||!(!s.ignoreOrigin&&l&&l.origin&&t.store.originOf(o)<i.nameToId(l.origin)))))}function u(e,t,r){if(e&&"function"==typeof e.toJSON&&(!e.toJSON.isDefaultToJSON||!e.write))return a.merge(t,e.toJSON());var n,o=a.getProperties(e),u=o.metadatas;for(n in u){var c=s.originSpecificWritePropertyDefinition(u[n],r);if(l(e,o,n,c,null,r)){var p=e.get(n),d={};c.write.writer.call(e,p,d,"string"==typeof c.write.target?c.write.target:n,r),c=d,0<Object.keys(c).length&&(t=a.merge(t,c),r&&r.writtenProperties&&r.writtenProperties.push({target:e,propName:n,oldOrigin:i.idToReadableName(o.store.originOf(n)),newOrigin:r.origin}))}}return t}Object.defineProperty(t,"__esModule",{value:!0});var c=o.getLogger("esri.core.accessorSupport.write");t.willPropertyWrite=function(e,t,r,n){var o=a.getProperties(e),i=s.originSpecificWritePropertyDefinition(o.metadatas[t],n);return!!i&&l(e,o,t,i,r,n)},t.write=u,t.default=u})},"esri/geometry/SpatialReference":function(){define("require exports ../core/tsSupport/assignHelper ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/JSONSupport ../core/lang ../core/accessorSupport/decorators ./support/spatialReferenceUtils".split(" "),function(e,t,r,n,o,i,a,s,l){return e=function(e){function t(t){return t=e.call(this,t)||this,t.latestWkid=null,t.wkid=null,t.wkt=null,t.imageCoordinateSystem=null,t}n(t,e),r=t,t.fromJSON=function(e){if(!e)return null;if(e.wkid){if(102100===e.wkid)return r.WebMercator;if(4326===e.wkid)return r.WGS84}var t=new r;return t.read(e),t},t.prototype.normalizeCtorArgs=function(e){var t;return e&&"object"==typeof e?e:(t={},t["string"==typeof e?"wkt":"wkid"]=e,t)},Object.defineProperty(t.prototype,"isWGS84",{get:function(){return l.isWGS84(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isWebMercator",{get:function(){return l.isWebMercator(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isGeographic",{get:function(){return l.isGeographic(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isWrappable",{get:function(){return l.isWrappable(this)},enumerable:!0,configurable:!0}),t.prototype.writeWkt=function(e,t){this.wkid||(t.wkt=e)},t.prototype.clone=function(){if(this===r.WGS84)return r.WGS84;if(this===r.WebMercator)return r.WebMercator;var e=new r;return null!=this.wkid?(e.wkid=this.wkid,null!=this.latestWkid&&(e.latestWkid=this.latestWkid),null!=this.vcsWkid&&(e.vcsWkid=this.vcsWkid),null!=this.latestVcsWkid&&(e.latestVcsWkid=this.latestVcsWkid)):null!=this.wkt&&(e.wkt=this.wkt),this.imageCoordinateSystem&&(e.imageCoordinateSystem=a.clone(this.imageCoordinateSystem)),e},t.prototype.equals=function(e){if(null==e)return!1;if(this.imageCoordinateSystem||e.imageCoordinateSystem){if(null==this.imageCoordinateSystem||null==e.imageCoordinateSystem)return!1;var t=e.imageCoordinateSystem,r=t.id,t=t.referenceServiceName,n=e.imageCoordinateSystem.geodataXform,o=this.imageCoordinateSystem;return null==r||n?JSON.stringify(o)===JSON.stringify(e.imageCoordinateSystem):t?o.id===r&&o.referenceServiceName===t:o.id===r}return l.equals(this,e)},t.prototype.toJSON=function(e){return this.write(null,e)};var r;return t.GCS_NAD_1927=null,t.WGS84=null,t.WebMercator=null,o([s.property({dependsOn:["wkid"],readOnly:!0})],t.prototype,"isWGS84",null),o([s.property({dependsOn:["wkid"],readOnly:!0})],t.prototype,"isWebMercator",null),o([s.property({dependsOn:["wkid","wkt"],readOnly:!0})],t.prototype,"isGeographic",null),o([s.property({dependsOn:["wkid"],readOnly:!0})],t.prototype,"isWrappable",null),o([s.property({type:Number,json:{write:!0}})],t.prototype,"latestWkid",void 0),o([s.property({type:Number,json:{write:!0,origins:{"web-scene":{write:{overridePolicy:function(){return{isRequired:null===this.wkt}}}}}}})],t.prototype,"wkid",void 0),o([s.property({type:String,json:{origins:{"web-scene":{write:{overridePolicy:function(){return{isRequired:null===this.wkid}}}}}}})],t.prototype,"wkt",void 0),o([s.writer("wkt"),s.writer("web-scene","wkt")],t.prototype,"writeWkt",null),o([s.property({type:Number,json:{write:!0}})],t.prototype,"vcsWkid",void 0),o([s.property({type:Number,json:{write:!0}})],t.prototype,"latestVcsWkid",void 0),o([s.property()],t.prototype,"imageCoordinateSystem",void 0),t=r=o([s.subclass("esri.geometry.SpatialReference")],t)}(s.declared(i.JSONSupport)),e.prototype.toJSON.isDefaultToJSON=!0,e.GCS_NAD_1927=new e({wkid:4267,wkt:'GEOGCS["GCS_North_American_1927",DATUM["D_North_American_1927",SPHEROID["Clarke_1866",6378206.4,294.9786982]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]]'}),e.WGS84=new e(l.WGS84),e.WebMercator=new e(l.WebMercator),Object.freeze&&(Object.freeze(e.GCS_NAD_1927),Object.freeze(e.WGS84),Object.freeze(e.WebMercator)),e})},"esri/geometry/support/spatialReferenceUtils":function(){define(["require","exports","../../core/string","./WKIDUnitConversion"],function(e,t,r,n){function o(e){return a(e)&&e.wkid?c[e.wkid]:null}function i(e){return a(e)&&!0===s[e.wkid]}function a(e){return null!=e&&(null!=e.wkid&&2e3<=e.wkid||null!=e.wkt)}Object.defineProperty(t,"__esModule",{value:!0});var s={102113:!0,102100:!0,3857:!0,3785:!0},l={102113:!0,102100:!0,3857:!0,3785:!0,4326:!0};e=[-20037508.342788905,20037508.342788905];var u=[-20037508.342787,20037508.342787],c={102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:e,origin:u,dx:1e-5},102100:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',valid:e,origin:u,dx:1e-5},3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:e,origin:u,dx:1e-5},3857:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',valid:e,origin:u,dx:1e-5},4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",{Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],UNIT["Degrees",111319.491]]',valid:[-180,180],origin:[-180,180],dx:1e-5}};t.equals=function(e,t){return!(!e||!t)&&(e===t||(null!=e.wkid||null!=t.wkid?e.wkid===t.wkid||i(e)&&i(t)||null!=t.latestWkid&&e.wkid===t.latestWkid||null!=e.latestWkid&&t.wkid===e.latestWkid:!(!e.wkt||!t.wkt)&&e.wkt.toUpperCase()===t.wkt.toUpperCase()))},t.getInfo=o,t.isGeographic=function(e){return!!a(e)&&(e.wkid?null==n[e.wkid]:!!e.wkt&&!!/^\s*GEOGCS/i.test(e.wkt))},t.isWGS84=function(e){return a(e)&&4326===e.wkid},t.isWebMercator=i,t.isWrappable=function(e){return a(e)&&!0===l[e.wkid]},t.isValid=a,t.WGS84={wkid:4326,wkt:r.replace(o({wkid:4326}).wkTemplate,{Central_Meridian:"0.0"})},t.WebMercator={wkid:102100,latestWkid:3857}})},"esri/geometry/support/WKIDUnitConversion":function(){define([],function(){var e,t={values:[1,.3048,.3048006096012192,.3047972654,.9143917962,.201166195164,.9143984146160287,.3047994715386762,20.11676512155263,20.11678249437587,.9143985307444408,.91439523,.3047997101815088,20.116756,5e4,15e4],units:"Meter Foot Foot_US Foot_Clarke Yard_Clarke Link_Clarke Yard_Sears Foot_Sears Chain_Sears Chain_Benoit_1895_B Yard_Indian Yard_Indian_1937 Foot_Gold_Coast Chain_Sears_1922_Truncated 50_Kilometers 150_Kilometers".split(" "),2066:5,2136:12,2155:2,2157:0,2158:0,2159:12,2160:12,2204:2,2219:0,2220:0,2254:2,2255:2,2256:1,2265:1,2266:1,2267:2,2268:2,2269:1,2270:1,2271:2,2272:2,2273:1,2294:0,2295:0,2314:3,2899:2,2900:2,2901:1,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2992:1,2993:0,2994:1,3080:1,3089:2,3090:0,3091:2,3102:2,3141:0,3142:0,3167:13,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3404:2,3405:0,3406:0,3407:3,3439:0,3440:0,3479:1,3480:0,3481:1,3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,3509:0,3510:2,3511:0,3512:2,3513:0,3514:0,3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,3591:0,3592:0,3593:1,3598:2,3599:0,3600:2,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,3617:0,3618:2,3619:0,3620:2,3621:0,3622:2,3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3696:2,3697:0,3698:2,3699:0,3700:2,3793:0,3794:0,3812:0,3854:0,3857:0,3920:0,3978:0,3979:0,3991:2,3992:2,4026:0,4037:0,4038:0,4071:0,4082:0,4083:0,4087:0,4088:0,4217:2,4414:0,4415:0,4417:0,4434:0,4437:0,4438:2,4439:2,4462:0,4467:0,4471:0,4474:0,4559:0,4647:0,4822:0,4826:0,4839:0,5018:0,5048:0,5167:0,5168:0,5221:0,5223:0,5234:0,5235:0,5243:0,5247:0,5266:0,5316:0,5320:0,5321:0,5325:0,5337:0,5361:0,5362:0,5367:0,5382:0,5383:0,5396:0,5456:0,5457:0,5469:0,5472:4,5490:0,5513:0,5514:0,5523:0,5559:0,5588:1,5589:3,5596:0,5627:0,5629:0,5641:0,5643:0,5644:0,5646:2,5654:2,5655:2,5659:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5879:0,5880:0,5887:0,5890:0,6128:1,6129:1,6141:1,6204:0,6210:0,6211:0,6307:0,6312:0,6316:0,6362:0,6391:1,6405:1,6406:0,6407:1,6408:0,6409:1,6410:0,6411:2,6412:0,6413:2,6414:0,6415:0,6416:2,6417:0,6418:2,6419:0,6420:2,6421:0,6422:2,6423:0,6424:2,6425:0,6426:2,6427:0,6428:2,6429:0,6430:2,6431:0,6432:2,6433:0,6434:2,6435:0,6436:2,6437:0,6438:2,6439:0,6440:0,6441:2,6442:0,6443:2,6444:0,6445:2,6446:0,6447:2,6448:0,6449:2,6450:0,6451:2,6452:0,6453:2,6454:0,6455:2,6456:0,6457:2,6458:0,6459:2,6460:0,6461:2,6462:0,6463:2,6464:0,6465:2,6466:0,6467:2,6468:0,6469:2,6470:0,6471:2,6472:0,6473:2,6474:0,6475:2,6476:0,6477:2,6478:0,6479:2,6484:2,6485:0,6486:2,6487:0,6488:2,6489:0,6490:2,6491:0,6492:2,6493:0,6494:1,6495:0,6496:1,6497:0,6498:0,6499:1,6500:0,6501:2,6502:0,6503:2,6504:0,6505:2,6506:0,6507:2,6508:0,6509:0,6510:2,6515:1,6516:0,6518:0,6519:2,6520:0,6521:2,6522:0,6523:2,6524:0,6525:2,6526:0,6527:2,6528:0,6529:2,6530:0,6531:2,6532:0,6533:2,6534:0,6535:2,6536:0,6537:2,6538:0,6539:2,6540:0,6541:2,6542:0,6543:2,6544:0,6545:1,6546:0,6547:1,6548:0,6549:2,6550:0,6551:2,6552:0,6553:2,6554:0,6555:2,6556:0,6557:1,6558:0,6559:1,6560:0,6561:1,6562:0,6563:2,6564:0,6565:2,6566:0,6567:0,6568:2,6569:0,6570:1,6571:0,6572:2,6573:0,6574:2,6575:0,6576:2,6577:0,6578:2,6582:2,6583:0,6584:2,6585:0,6586:2,6587:0,6588:2,6589:0,6590:2,6591:0,6592:0,6593:2,6594:0,6595:2,6596:0,6597:2,6598:0,6599:2,6600:0,6601:2,6602:0,6603:2,6605:2,6606:0,6607:2,6608:0,6609:2,6610:0,6611:0,6612:2,6613:0,6614:2,6615:0,6616:2,6617:0,6618:2,6633:2,6646:0,6703:0,6784:0,6785:1,6786:0,6787:1,6788:0,6789:1,6790:0,6791:1,6792:0,6793:1,6794:0,6795:1,6796:0,6797:1,6798:0,6799:1,6800:0,6801:1,6802:0,6803:1,6804:0,6805:1,6806:0,6807:1,6808:0,6809:1,6810:0,6811:1,6812:0,6813:1,6814:0,6815:1,6816:0,6817:1,6818:0,6819:1,6820:0,6821:1,6822:0,6823:1,6824:0,6825:1,6826:0,6827:1,6828:0,6829:1,6830:0,6831:1,6832:0,6833:1,6834:0,6835:1,6836:0,6837:1,6838:0,6839:1,6840:0,6841:1,6842:0,6843:1,6844:0,6845:1,6846:0,6847:1,6848:0,6849:1,6850:0,6851:1,6852:0,6853:1,6854:0,6855:1,6856:0,6857:1,6858:0,6859:1,6860:0,6861:1,6862:0,6863:1,6867:0,6868:1,6870:0,6875:0,6876:0,6879:0,6880:2,6884:0,6885:1,6886:0,6887:1,6915:0,6922:0,6923:2,6924:0,6925:2,6962:0,6984:0,6991:0,7128:2,7131:0,7132:2,7142:0,7257:0,7258:2,7259:0,7260:2,7261:0,7262:2,7263:0,7264:2,7265:0,7266:2,7267:0,7268:2,7269:0,7270:2,7271:0,7272:2,7273:0,7274:2,7275:0,7276:2,7277:0,7278:2,7279:0,7280:2,7281:0,7282:2,7283:0,7284:2,7285:0,7286:2,7287:0,7288:2,7289:0,7290:2,7291:0,7292:2,7293:0,7294:2,7295:0,7296:2,7297:0,7298:2,7299:0,7300:2,7301:0,7302:2,7303:0,7304:2,7305:0,7306:2,7307:0,7308:2,7309:0,7310:2,7311:0,7312:2,7313:0,7314:2,7315:0,7316:2,7317:0,7318:2,7319:0,7320:2,7321:0,7322:2,7323:0,7324:2,7325:0,7326:2,7327:0,7328:2,7329:0,7330:2,7331:0,7332:2,7333:0,7334:2,7335:0,7336:2,7337:0,7338:2,7339:0,7340:2,7341:0,7342:2,7343:0,7344:2,7345:0,7346:2,7347:0,7348:2,7349:0,7350:2,7351:0,7352:2,7353:0,7354:2,7355:0,7356:2,7357:0,7358:2,7359:0,7360:2,7361:0,7362:2,7363:0,7364:2,7365:0,7366:2,7367:0,7368:2,7369:0,7370:2,7877:0,7878:0,7882:0,7883:0,7887:0,7899:0,7991:0,7992:0,8035:2,8036:2,8058:0,8059:0,8082:0,8083:0,8088:0,8090:0,8091:2,8092:0,8093:2,8095:0,8096:2,8097:0,8098:2,8099:0,8100:2,8101:0,8102:2,8103:0,8104:2,8105:0,8106:2,8107:0,8108:2,8109:0,8110:2,8111:0,8112:2,8113:0,8114:2,8115:0,8116:2,8117:0,8118:2,8119:0,8120:2,8121:0,8122:2,8123:0,8124:2,8125:0,8126:2,8127:0,8128:2,8129:0,8130:2,8131:0,8132:2,8133:0,8134:2,8135:0,8136:2,8137:0,8138:2,8139:0,8140:2,8141:0,8142:2,8143:0,8144:2,8145:0,8146:2,8147:0,8148:2,8149:0,8150:2,8151:0,8152:2,8153:0,8154:2,8155:0,8156:2,8157:0,8158:2,8159:0,8160:2,8161:0,8162:2,8163:0,8164:2,8165:0,8166:2,8167:0,8168:2,8169:0,8170:2,8171:0,8172:2,8173:0,8177:2,8179:0,8180:2,8181:0,8182:2,8184:0,8185:2,8187:0,8189:2,8191:0,8193:2,8196:0,8197:2,8198:0,8200:2,8201:0,8202:2,8203:0,8204:2,8205:0,8206:2,8207:0,8208:2,8209:0,8210:2,8212:0,8213:2,8214:0,8216:2,8218:0,8220:2,8222:0,8224:2,8225:0,8226:2,8311:0,8312:1,8313:0,8314:1,8315:0,8316:1,8317:0,8318:1,8319:0,8320:1,8321:0,8322:1,8323:0,8324:1,8325:0,8326:1,8327:0,8328:1,8329:0,8330:1,8331:0,8332:1,8333:0,8334:1,8335:0,8336:1,8337:0,8338:1,8339:0,8340:1,8341:0,8342:1,8343:0,8344:1,8345:0,8346:1,8347:0,8348:1,8352:0,8353:0,8379:0,8380:2,8381:0,8382:2,8383:0,8384:2,8385:0,8387:2,8391:0,8395:0,8433:0,8441:0,8455:0,8456:0,8531:2,8682:0,8687:0,8692:0,8693:0,8826:0,8903:0,8950:0,8951:0,9039:0,9040:0,9141:0,9149:0,9150:0,9191:0,9221:0,9222:0,20499:0,20538:0,20539:0,20790:0,20791:0,21291:0,21292:0,21500:0,21817:0,21818:0,22032:0,22033:0,22091:0,22092:0,22332:0,22391:0,22392:0,22700:0,22770:0,22780:0,22832:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,24047:0,24048:0,24100:3,24200:0,24305:0,24306:0,24382:10,24383:0,24500:0,24547:0,24548:0,24571:9,24600:0,25e3:0,25231:0,25884:0,25932:0,26237:0,26331:0,26332:0,26432:0,26591:0,26592:0,26632:0,26692:0,27120:0,27200:0,27291:6,27292:6,27429:0,27492:0,27493:0,27500:0,27700:0,28232:0,28600:0,28991:0,28992:0,29100:0,29101:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,29850:0,29871:8,29872:7,29873:0,30200:5,30339:0,30340:0,30591:0,30592:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31370:0,31528:0,31529:0,31600:0,31700:0,31838:0,31839:0,31900:0,31901:0,32061:0,32062:0,32098:0,32099:2,32100:0,32104:0,32161:0,32766:0,53048:0,53049:0,54090:0,54091:0,65061:2,65062:2,65161:0,65163:0,102041:2,102064:11,102068:14,102069:15,102118:2,102119:1,102120:2,102121:2,102217:2,102218:0,102219:2,102220:2,102378:1,102379:1,102380:0,102381:1,102589:2,102599:2,102600:2,102604:2,102647:0,102704:2,102705:2,102706:0,102761:2,102762:0,102763:2,102764:0,102765:0,102766:2,102962:0,102963:0,102970:1,102974:2,102993:0,102994:0,102995:2,102996:2,103015:0,103016:2,103017:0,103018:2,103025:0,103026:0,103027:2,103028:2,103035:0,103036:0,103037:2,103038:2,103039:0,103040:0,103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,103061:0,103062:0,103063:2,103064:2,103069:2,103070:0,103071:0,103072:2,103073:2,103086:0,103087:0,103088:2,103089:2,103094:1,103095:0,103096:2,103103:0,103104:2,103105:0,103106:2,103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,103134:2,103135:0,103136:0,103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,103172:0,103173:2,103174:0,103175:0,103176:2,103177:2,103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,103185:2,103228:0,103229:0,103230:2,103231:2,103250:0,103251:2,103252:0,103253:2,103260:0,103261:0,103262:2,103263:2,103270:0,103271:0,103272:2,103273:2,103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,103281:2,103282:0,103283:0,103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,103376:2,103377:0,103378:0,103379:2,103380:2,103393:0,103394:0,103395:2,103396:2,103472:0,103473:1,103474:0,103475:2,103482:0,103483:2,103484:0,103485:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,103506:0,103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,103520:0,103521:1,103522:0,103523:0,103524:2,103525:2,103526:0,103527:2,103561:2,103562:2,103563:0,103564:0,103565:2,103566:2,103567:0,103568:0,103569:2,103570:2,103584:0,103585:2,103586:0,103587:2,103588:1,103589:0,103590:2,103591:1,103592:0,103593:2,103594:1,103695:2};for(e=2e3;2045>=e;e++)t[e]=0;for(e=2056;2065>=e;e++)t[e]=0;for(e=2067;2135>=e;e++)t[e]=0;for(e=2137;2154>=e;e++)t[e]=0;for(e=2161;2170>=e;e++)t[e]=0;for(e=2172;2193>=e;e++)t[e]=0;for(e=2195;2198>=e;e++)t[e]=0;for(e=2200;2203>=e;e++)t[e]=0;for(e=2205;2217>=e;e++)t[e]=0;for(e=2222;2224>=e;e++)t[e]=1;for(e=2225;2250>=e;e++)t[e]=2;for(e=2251;2253>=e;e++)t[e]=1;for(e=2257;2264>=e;e++)t[e]=2;for(e=2274;2279>=e;e++)t[e]=2;for(e=2280;2282>=e;e++)t[e]=1;for(e=2283;2289>=e;e++)t[e]=2;for(e=2290;2292>=e;e++)t[e]=0;for(e=2308;2313>=e;e++)t[e]=0;for(e=2315;2491>=e;e++)t[e]=0;for(e=2494;2866>=e;e++)t[e]=0;for(e=2867;2869>=e;e++)t[e]=1;for(e=2870;2888>=e;e++)t[e]=2;for(e=2891;2895>=e;e++)t[e]=2;for(e=2896;2898>=e;e++)t[e]=1;for(e=2902;2908>=e;e++)t[e]=2;for(e=2915;2920>=e;e++)t[e]=2;for(e=2921;2923>=e;e++)t[e]=1;for(e=2924;2930>=e;e++)t[e]=2;for(e=2931;2962>=e;e++)t[e]=0;for(e=2964;2968>=e;e++)t[e]=2;for(e=2969;2973>=e;e++)t[e]=0;for(e=2975;2991>=e;e++)t[e]=0;for(e=2995;3051>=e;e++)t[e]=0;for(e=3054;3079>=e;e++)t[e]=0;for(e=3081;3088>=e;e++)t[e]=0;for(e=3092;3101>=e;e++)t[e]=0;for(e=3106;3138>=e;e++)t[e]=0;for(e=3146;3151>=e;e++)t[e]=0;for(e=3153;3166>=e;e++)t[e]=0;for(e=3168;3172>=e;e++)t[e]=0;for(e=3174;3203>=e;e++)t[e]=0;for(e=3294;3358>=e;e++)t[e]=0;for(e=3367;3403>=e;e++)t[e]=0;for(e=3408;3416>=e;e++)t[e]=0;for(e=3417;3438>=e;e++)t[e]=2;for(e=3441;3446>=e;e++)t[e]=2;for(e=3447;3450>=e;e++)t[e]=0;for(e=3451;3459>=e;e++)t[e]=2;for(e=3460;3478>=e;e++)t[e]=0;for(e=3554;3559>=e;e++)t[e]=0;for(e=3560;3570>=e;e++)t[e]=2;for(e=3571;3581>=e;e++)t[e]=0;for(e=3594;3597>=e;e++)t[e]=0;for(e=3601;3604>=e;e++)t[e]=0;for(e=3637;3639>=e;e++)t[e]=0;for(e=3665;3667>=e;e++)t[e]=0;for(e=3693;3695>=e;e++)t[e]=0;for(e=3701;3727>=e;e++)t[e]=0;for(e=3728;3739>=e;e++)t[e]=2;for(e=3740;3751>=e;e++)t[e]=0;for(e=3753;3760>=e;e++)t[e]=2;for(e=3761;3773>=e;e++)t[e]=0;for(e=3775;3777>=e;e++)t[e]=0;for(e=3779;3781>=e;e++)t[e]=0;for(e=3783;3785>=e;e++)t[e]=0;for(e=3788;3791>=e;e++)t[e]=0;for(e=3797;3802>=e;e++)t[e]=0;for(e=3814;3816>=e;e++)t[e]=0;for(e=3825;3829>=e;e++)t[e]=0;for(e=3832;3841>=e;e++)t[e]=0;for(e=3844;3852>=e;e++)t[e]=0;for(e=3873;3885>=e;e++)t[e]=0;for(e=3890;3893>=e;e++)t[e]=0;for(e=3907;3912>=e;e++)t[e]=0;for(e=3942;3950>=e;e++)t[e]=0;for(e=3968;3970>=e;e++)t[e]=0;for(e=3973;3976>=e;e++)t[e]=0;for(e=3986;3989>=e;e++)t[e]=0;for(e=3994;3997>=e;e++)t[e]=0;for(e=4048;4051>=e;e++)t[e]=0;for(e=4056;4063>=e;e++)t[e]=0;for(e=4093;4096>=e;e++)t[e]=0;for(e=4390;4398>=e;e++)t[e]=0;for(e=4399;4413>=e;e++)t[e]=2;for(e=4418;4433>=e;e++)t[e]=2;for(e=4455;4457>=e;e++)t[e]=2;for(e=4484;4489>=e;e++)t[e]=0;for(e=4491;4554>=e;e++)t[e]=0;for(e=4568;4589>=e;e++)t[e]=0;for(e=4652;4656>=e;e++)t[e]=0;for(e=4766;4800>=e;e++)t[e]=0;for(e=5014;5016>=e;e++)t[e]=0;for(e=5069;5072>=e;e++)t[e]=0;for(e=5105;5130>=e;e++)t[e]=0;for(e=5173;5188>=e;e++)t[e]=0;for(e=5253;5259>=e;e++)t[e]=0;for(e=5269;5275>=e;e++)t[e]=0;for(e=5292;5311>=e;e++)t[e]=0;for(e=5329;5331>=e;e++)t[e]=0;for(e=5343;5349>=e;e++)t[e]=0;for(e=5355;5357>=e;e++)t[e]=0;for(e=5387;5389>=e;e++)t[e]=0;for(e=5459;5463>=e;e++)t[e]=0;for(e=5479;5482>=e;e++)t[e]=0;for(e=5518;5520>=e;e++)t[e]=0;for(e=5530;5539>=e;e++)t[e]=0;for(e=5550;5552>=e;e++)t[e]=0;for(e=5562;5583>=e;e++)t[e]=0;for(e=5623;5625>=e;e++)t[e]=2;for(e=5631;5639>=e;e++)t[e]=0;for(e=5649;5653>=e;e++)t[e]=0;for(e=5663;5680>=e;e++)t[e]=0;for(e=5682;5685>=e;e++)t[e]=0;for(e=5875;5877>=e;e++)t[e]=0;for(e=5896;5899>=e;e++)t[e]=0;for(e=5921;5940>=e;e++)t[e]=0;for(e=6050;6125>=e;e++)t[e]=0;for(e=6244;6275>=e;e++)t[e]=0;for(e=6328;6348>=e;e++)t[e]=0;for(e=6350;6356>=e;e++)t[e]=0;for(e=6366;6372>=e;e++)t[e]=0;for(e=6381;6387>=e;e++)t[e]=0;for(e=6393;6404>=e;e++)t[e]=0;for(e=6480;6483>=e;e++)t[e]=0;for(e=6511;6514>=e;e++)t[e]=0;for(e=6579;6581>=e;e++)t[e]=0;for(e=6619;6624>=e;e++)t[e]=0;for(e=6625;6627>=e;e++)t[e]=2;for(e=6628;6632>=e;e++)t[e]=0;for(e=6634;6637>=e;e++)t[e]=0;for(e=6669;6692>=e;e++)t[e]=0;for(e=6707;6709>=e;e++)t[e]=0;for(e=6720;6723>=e;e++)t[e]=0;for(e=6732;6738>=e;e++)t[e]=0;for(e=6931;6933>=e;e++)t[e]=0;for(e=6956;6959>=e;e++)t[e]=0;for(e=7005;7007>=e;e++)t[e]=0;for(e=7057;7070>=e;e++)t[e]=2;for(e=7074;7082>=e;e++)t[e]=0;for(e=7109;7118>=e;e++)t[e]=0;for(e=7119;7127>=e;e++)t[e]=1;for(e=7374;7376>=e;e++)t[e]=0;for(e=7528;7586>=e;e++)t[e]=0;for(e=7587;7645>=e;e++)t[e]=2;for(e=7692;7696>=e;e++)t[e]=0;for(e=7755;7787>=e;e++)t[e]=0;for(e=7791;7795>=e;e++)t[e]=0;for(e=7799;7801>=e;e++)t[e]=0;for(e=7803;7805>=e;e++)t[e]=0;for(e=7825;7831>=e;e++)t[e]=0;for(e=7845;7859>=e;e++)t[e]=0;for(e=8013;8032>=e;e++)t[e]=0;for(e=8065;8068>=e;e++)t[e]=1;for(e=8518;8529>=e;e++)t[e]=2;for(e=8533;8536>=e;e++)t[e]=2;for(e=8538;8540>=e;e++)t[e]=2;for(e=8677;8679>=e;e++)t[e]=0;for(e=8836;8840>=e;e++)t[e]=0;for(e=8857;8859>=e;e++)t[e]=0;for(e=8908;8910>=e;e++)t[e]=0;for(e=9154;9159>=e;e++)t[e]=0;for(e=9205;9218>=e;e++)t[e]=0;for(e=20002;20032>=e;e++)t[e]=0;for(e=20062;20092>=e;e++)t[e]=0;for(e=20135;20138>=e;e++)t[e]=0;for(e=20248;20258>=e;e++)t[e]=0;for(e=20348;20358>=e;e++)t[e]=0;for(e=20436;20440>=e;e++)t[e]=0;for(e=20822;20824>=e;e++)t[e]=0;for(e=20934;20936>=e;e++)t[e]=0;for(e=21035;21037>=e;e++)t[e]=0;for(e=21095;21097>=e;e++)t[e]=0;for(e=21148;21150>=e;e++)t[e]=0;for(e=21413;21423>=e;e++)t[e]=0;for(e=21473;21483>=e;e++)t[e]=0;for(e=21780;21782>=e;e++)t[e]=0;for(e=21891;21894>=e;e++)t[e]=0;for(e=21896;21899>=e;e++)t[e]=0;for(e=22171;22177>=e;e++)t[e]=0;for(e=22181;22187>=e;e++)t[e]=0;for(e=22191;22197>=e;e++)t[e]=0;for(e=22234;22236>=e;e++)t[e]=0;for(e=22521;22525>=e;e++)t[e]=0;for(e=22991;22994>=e;e++)t[e]=0;for(e=23028;23038>=e;e++)t[e]=0;for(e=23830;23853>=e;e++)t[e]=0;for(e=23866;23872>=e;e++)t[e]=0;for(e=23877;23884>=e;e++)t[e]=0;for(e=23886;23894>=e;e++)t[e]=0;for(e=23946;23948>=e;e++)t[e]=0;for(e=24311;24313>=e;e++)t[e]=0;for(e=24342;24347>=e;e++)t[e]=0;for(e=24370;24374>=e;e++)t[e]=10;for(e=24375;24381>=e;e++)t[e]=0;for(e=24718;24721>=e;e++)t[e]=0;for(e=24817;24821>=e;e++)t[e]=0;for(e=24877;24882>=e;e++)t[e]=0;for(e=24891;24893>=e;e++)t[e]=0;for(e=25391;25395>=e;e++)t[e]=0;for(e=25828;25838>=e;e++)t[e]=0;for(e=26191;26195>=e;e++)t[e]=0;for(e=26391;26393>=e;e++)t[e]=0;for(e=26701;26722>=e;e++)t[e]=0;for(e=26729;26799>=e;e++)t[e]=2;for(e=26801;26803>=e;e++)t[e]=2;for(e=26811;26813>=e;e++)t[e]=2;for(e=26847;26870>=e;e++)t[e]=2;for(e=26891;26899>=e;e++)t[e]=0;for(e=26901;26923>=e;e++)t[e]=0;for(e=26929;26946>=e;e++)t[e]=0;for(e=26948;26998>=e;e++)t[e]=0;for(e=27037;27040>=e;e++)t[e]=0;for(e=27205;27232>=e;e++)t[e]=0;for(e=27258;27260>=e;e++)t[e]=0;for(e=27391;27398>=e;e++)t[e]=0;for(e=27561;27564>=e;e++)t[e]=0;for(e=27571;27574>=e;e++)t[e]=0;for(e=27581;27584>=e;e++)t[e]=0;for(e=27591;27594>=e;e++)t[e]=0;for(e=28191;28193>=e;e++)t[e]=0;for(e=28348;28358>=e;e++)t[e]=0;for(e=28402;28432>=e;e++)t[e]=0;for(e=28462;28492>=e;e++)t[e]=0;for(e=29118;29122>=e;e++)t[e]=0;for(e=29168;29172>=e;e++)t[e]=0;for(e=29177;29185>=e;e++)t[e]=0;for(e=29187;29195>=e;e++)t[e]=0;for(e=29900;29903>=e;e++)t[e]=0;for(e=30161;30179>=e;e++)t[e]=0;for(e=30491;30494>=e;e++)t[e]=0;for(e=30729;30732>=e;e++)t[e]=0;for(e=31251;31259>=e;e++)t[e]=0;for(e=31265;31268>=e;e++)t[e]=0;for(e=31275;31279>=e;e++)t[e]=0;for(e=31281;31297>=e;e++)t[e]=0;for(e=31461;31469>=e;e++)t[e]=0;for(e=31491;31495>=e;e++)t[e]=0;for(e=31917;31922>=e;e++)t[e]=0;for(e=31965;32e3>=e;e++)t[e]=0;for(e=32001;32003>=e;e++)t[e]=2;for(e=32005;32031>=e;e++)t[e]=2;for(e=32033;32060>=e;e++)t[e]=2;for(e=32064;32067>=e;e++)t[e]=2;for(e=32074;32077>=e;e++)t[e]=2;for(e=32081;32086>=e;e++)t[e]=0;for(e=32107;32130>=e;e++)t[e]=0;for(e=32133;32158>=e;e++)t[e]=0;for(e=32164;32167>=e;e++)t[e]=2;for(e=32180;32199>=e;e++)t[e]=0;for(e=32201;32260>=e;e++)t[e]=0;for(e=32301;32360>=e;e++)t[e]=0;for(e=32601;32662>=e;e++)t[e]=0;for(e=32664;32667>=e;e++)t[e]=2;for(e=32701;32761>=e;e++)t[e]=0;for(e=53001;53004>=e;e++)t[e]=0;for(e=53008;53019>=e;e++)t[e]=0;for(e=53021;53032>=e;e++)t[e]=0;for(e=53034;53037>=e;e++)t[e]=0;for(e=53042;53046>=e;e++)t[e]=0;for(e=53074;53080>=e;e++)t[e]=0;for(e=54001;54004>=e;e++)t[e]=0;for(e=54008;54019>=e;e++)t[e]=0;for(e=54021;54032>=e;e++)t[e]=0;for(e=54034;54037>=e;e++)t[e]=0;for(e=54042;54046>=e;e++)t[e]=0;for(e=54048;54053>=e;e++)t[e]=0;for(e=54074;54080>=e;e++)t[e]=0;for(e=54098;54101>=e;e++)t[e]=0;for(e=102001;102040>=e;e++)t[e]=0;for(e=102042;102063>=e;e++)t[e]=0;for(e=102065;102067>=e;e++)t[e]=0;for(e=102070;102117>=e;e++)t[e]=0;for(e=102122;102216>=e;e++)t[e]=0;for(e=102221;102377>=e;e++)t[e]=0;for(e=102382;102388>=e;e++)t[e]=0;for(e=102389;102398>=e;e++)t[e]=2;for(e=102399;102444>=e;e++)t[e]=0;for(e=102445;102447>=e;e++)t[e]=2;for(e=102448;102458>=e;e++)t[e]=0;for(e=102459;102468>=e;e++)t[e]=2;for(e=102469;102499>=e;e++)t[e]=0;for(e=102500;102519>=e;e++)t[e]=1;for(e=102520;102524>=e;e++)t[e]=0;for(e=102525;102529>=e;e++)t[e]=2;for(e=102530;102588>=e;e++)t[e]=0;for(e=102590;102598>=e;e++)t[e]=0;for(e=102601;102603>=e;e++)t[e]=0;for(e=102605;102628>=e;e++)t[e]=0;for(e=102629;102646>=e;e++)t[e]=2;for(e=102648;102700>=e;e++)t[e]=2;for(e=102701;102703>=e;e++)t[e]=0;for(e=102707;102730>=e;e++)t[e]=2;for(e=102733;102758>=e;e++)t[e]=2;for(e=102767;102900>=e;e++)t[e]=0;for(e=102965;102969>=e;e++)t[e]=0;for(e=102971;102973>=e;e++)t[e]=0;for(e=102975;102989>=e;e++)t[e]=0;for(e=102990;102992>=e;e++)t[e]=1;for(e=102997;103002>=e;e++)t[e]=0;for(e=103003;103008>=e;e++)t[e]=2;for(e=103009;103011>=e;e++)t[e]=0;for(e=103012;103014>=e;e++)t[e]=2;for(e=103019;103021>=e;e++)t[e]=0;for(e=103022;103024>=e;e++)t[e]=2;for(e=103029;103031>=e;e++)t[e]=0;for(e=103032;103034>=e;e++)t[e]=2;for(e=103065;103068>=e;e++)t[e]=0;for(e=103074;103076>=e;e++)t[e]=0;for(e=103077;103079>=e;e++)t[e]=1;for(e=103080;103082>=e;e++)t[e]=0;for(e=103083;103085>=e;e++)t[e]=2;for(e=103090;103093>=e;e++)t[e]=0;for(e=103097;103099>=e;e++)t[e]=0;for(e=103100;103102>=e;e++)t[e]=2;for(e=103107;103109>=e;e++)t[e]=0;for(e=103110;103112>=e;e++)t[e]=2;for(e=103113;103116>=e;e++)t[e]=0;for(e=103117;103120>=e;e++)t[e]=2;for(e=103153;103157>=e;e++)t[e]=0;for(e=103158;103162>=e;e++)t[e]=2;for(e=103163;103165>=e;e++)t[e]=0;for(e=103166;103168>=e;e++)t[e]=1;for(e=103169;103171>=e;e++)t[e]=2;for(e=103186;103188>=e;e++)t[e]=0;for(e=103189;103191>=e;e++)t[e]=2;for(e=103192;103195>=e;e++)t[e]=0;for(e=103196;103199>=e;e++)t[e]=2;for(e=103200;103224>=e;e++)t[e]=0;for(e=103225;103227>=e;e++)t[e]=1;for(e=103232;103237>=e;e++)t[e]=0;for(e=103238;103243>=e;e++)t[e]=2;for(e=103244;103246>=e;e++)t[e]=0;for(e=103247;103249>=e;e++)t[e]=2;for(e=103254;103256>=e;e++)t[e]=0;for(e=103257;103259>=e;e++)t[e]=2;for(e=103264;103266>=e;e++)t[e]=0;for(e=103267;103269>=e;e++)t[e]=2;for(e=103300;103375>=e;e++)t[e]=0;for(e=103381;103383>=e;e++)t[e]=0;for(e=103384;103386>=e;e++)t[e]=1;for(e=103387;103389>=e;e++)t[e]=0;for(e=103390;103392>=e;e++)t[e]=2;for(e=103397;103399>=e;e++)t[e]=0;for(e=103400;103471>=e;e++)t[e]=2;for(e=103476;103478>=e;e++)t[e]=0;for(e=103479;103481>=e;e++)t[e]=2;for(e=103486;103488>=e;e++)t[e]=0;for(e=103489;103491>=e;e++)t[e]=2;for(e=103492;103495>=e;e++)t[e]=0;for(e=103496;103499>=e;e++)t[e]=2;for(e=103528;103543>=e;e++)t[e]=0;for(e=103544;103548>=e;e++)t[e]=2;for(e=103549;103551>=e;e++)t[e]=0;for(e=103552;103554>=e;e++)t[e]=1;for(e=103555;103557>=e;e++)t[e]=2;for(e=103558;103560>=e;e++)t[e]=0;for(e=103571;103573>=e;e++)t[e]=0;for(e=103574;103576>=e;e++)t[e]=2;for(e=103577;103580>=e;e++)t[e]=0;for(e=103581;103583>=e;e++)t[e]=2;for(e=103595;103597>=e;e++)t[e]=0;for(e=103600;103694>=e;e++)t[e]=0;for(e=103696;103698>=e;e++)t[e]=0;for(e=103700;103793>=e;e++)t[e]=2;for(e=103794;103871>=e;e++)t[e]=0;for(e=103900;103971>=e;e++)t[e]=2;return t})},"esri/geometry/Point":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Logger ../core/accessorSupport/decorators ../core/accessorSupport/ensureType ./Geometry ./SpatialReference ./support/offset ./support/spatialReferenceUtils ./support/webMercatorUtils".split(" "),function(e,t,r,n,o,i,a,s,l,u,c,p){function d(e){return e&&("esri.geometry.SpatialReference"===e.declaredClass||null!=e.wkid)}var f=[0,0],h=o.getLogger("esri.geometry.Point");return e=function(e){function t(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return t=e.apply(this,t)||this,t.x=0,t.y=0,t.z=void 0,t.m=void 0,t.type="point",t}r(t,e),o=t,t.copy=function(e,t){t._set("x",e._get("x")),t._set("y",e._get("y")),t._set("z",e._get("z")),t._set("m",e._get("m")),e=e._get("spatialReference"),t._set("spatialReference",Object.isFrozen(e)?e:e.clone())},t.distance=function(e,t){var r=e.x-t.x,n=e.y-t.y;return e=e.hasZ&&t.hasZ?e.z-t.z:0,Math.sqrt(r*r+n*n+e*e)},t.prototype.normalizeCtorArgs=function(e,t,r,n,o){var i;return Array.isArray(e)?(i=e,o=t,e=i[0],t=i[1],r=i[2],n=i[3]):e&&"object"==typeof e?(i=e,e=null!=i.x?i.x:i.longitude,t=null!=i.y?i.y:i.latitude,r=null!=i.z?i.z:i.altitude,n=i.m,(o=i.spatialReference)&&"esri.geometry.SpatialReference"!==o.declaredClass&&(o=new l(o)),(null!=i.longitude||null!=i.latitude)&&(null==i.longitude?h.warn(".longitude=","Latitude was defined without longitude"):null==i.latitude?h.warn(".latitude=","Longitude was defined without latitude"):!i.declaredClass&&o&&o.isWebMercator&&(t=p.lngLatToXY(i.longitude,i.latitude,f),e=t[0],t=t[1]))):d(r)?(o=r,r=null):d(n)&&(o=n,n=null),e={x:e,y:t},null==e.x&&null!=e.y?h.warn(".y=","Y coordinate was defined without an X coordinate"):null==e.y&&null!=e.x&&h.warn(".x=","X coordinate was defined without a Y coordinate"),null!=o&&(e.spatialReference=o),null!=r&&(e.z=r),null!=n&&(e.m=n),e},Object.defineProperty(t.prototype,"hasM",{get:function(){return void 0!==this.m},set:function(e){e!==this.hasM&&(this._set("m",e?0:void 0),this._set("hasM",e))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hasZ",{get:function(){return void 0!==this.z},set:function(e){e!==this.hasZ&&(this._set("z",e?0:void 0),this._set("hasZ",e))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"latitude",{get:function(){var e=this._get("spatialReference");if(e){if(e.isWebMercator)return p.xyToLngLat(this.x,this.y,f)[1];if(e.isGeographic)return this._get("y")}return null},set:function(e){var t=this._get("spatialReference");t&&(t.isWebMercator?this._set("y",p.lngLatToXY(this.x,e,f)[1]):t.isGeographic&&this._set("y",e),this._set("latitude",e))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){var e=this._get("spatialReference");if(e){if(e.isWebMercator)return p.xyToLngLat(this._get("x"),this._get("y"),f)[0];if(e.isGeographic)return this._get("x")}return null},set:function(e){var t=this._get("spatialReference");t&&(t.isWebMercator?this._set("x",p.lngLatToXY(e,this._get("y"),f)[0]):t.isGeographic&&this._set("x",e),this._set("longitude",e))},enumerable:!0,configurable:!0}),t.prototype.writeX=function(e,t,r){t[r]=isNaN(e)?"NaN":e},t.prototype.readX=function(e){return"string"==typeof e?NaN:e},t.prototype.clone=function(){var e=new o;return e.x=this.x,e.y=this.y,e.z=this.z,e.m=this.m,e.spatialReference=this.spatialReference,e},t.prototype.copy=function(e){return o.copy(e,this),this},t.prototype.equals=function(e){var t;if(!e)return!1;var r=this.x,n=this.y,o=this.z,i=this.m,a=this.spatialReference,s=e.z,l=e.m,u=e.x;if(t=e.y,e=e.spatialReference,!a.equals(e))if(a.isWebMercator&&e.isWGS84)t=p.lngLatToXY(u,t),u=t[0],t=t[1],e=a;else{if(!a.isWGS84||!e.isWebMercator)return!1;t=p.xyToLngLat(u,t),u=t[0],t=t[1],e=a}return r===u&&n===t&&o===s&&i===l&&a.wkid===e.wkid},t.prototype.offset=function(e,t,r){return u.offsetPoint(this,e,t,r)},t.prototype.normalize=function(){if(!this.spatialReference)return this;var e=c.getInfo(this.spatialReference);if(!e)return this;var t=this.x,r=e.valid,e=r[0],n=r[1],r=2*n;return t>n?(e=Math.ceil(Math.abs(t-n)/r),t-=e*r):t<e&&(e=Math.ceil(Math.abs(t-e)/r),t+=e*r),this._set("x",t),this},t.prototype.distance=function(e){return o.distance(this,e)},t.prototype.toArray=function(){var e=this.hasZ,t=this.hasM;return e&&t?[this.x,this.y,this.z,this.m]:e?[this.x,this.y,this.z]:t?[this.x,this.y,this.m]:[this.x,this.y]},t.prototype.toJSON=function(e){return this.write(null,e)};var o;return n([i.property({dependsOn:["x","y","z","m","spatialReference"]})],t.prototype,"cache",void 0),n([i.property({type:Boolean,dependsOn:["m"],json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],t.prototype,"hasM",null),n([i.property({type:Boolean,dependsOn:["z"],json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],t.prototype,"hasZ",null),n([i.property({type:Number,dependsOn:["y"]})],t.prototype,"latitude",null),n([i.property({type:Number,dependsOn:["x"]})],t.prototype,"longitude",null),n([i.property({type:Number,json:{type:[Number,String],write:{isRequired:!0,allowNull:!0}}}),i.cast(function(e){return isNaN(e)?e:a.ensureNumber(e)})],t.prototype,"x",void 0),n([i.writer("x")],t.prototype,"writeX",null),n([i.reader("x")],t.prototype,"readX",null),n([i.property({type:Number,json:{write:!0}})],t.prototype,"y",void 0),n([i.property({type:Number,json:{write:{overridePolicy:function(){return{enabled:this.hasZ}}}}})],t.prototype,"z",void 0),n([i.property({type:Number,json:{write:{overridePolicy:function(){return{enabled:this.hasM}}}}})],t.prototype,"m",void 0),t=o=n([i.subclass("esri.geometry.Point")],t)}(i.declared(s)),e.prototype.toJSON.isDefaultToJSON=!0,e})},"esri/geometry/support/offset":function(){define(["require","exports"],function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.offsetPoint=function(e,t,r,n){return e.x+=t,e.y+=r,null!=n&&null!=e.z&&(e.z+=n),e},t.offsetCoordsX=function(e,t){return e[0]+=t,e}})},"esri/geometry/support/webMercatorUtils":function(){define("require exports ../../core/lang ../../core/wgs84Constants ../SpatialReference ./spatialReferenceUtils".split(" "),function(e,t,r,n,o,i){function a(e,t,r,n,o){var i;if("x"in e&&"x"in o)t=t(e.x,e.y,d,n),o.x=t[0],o.y=t[1];else if("xmin"in e&&"xmin"in o)i=t(e.xmin,e.ymin,d,n),o.xmin=i[0],o.ymin=i[1],t=t(e.xmax,e.ymax,d,n),o.xmax=t[0],o.ymax=t[1];else if("paths"in e&&"paths"in o||"rings"in e&&"rings"in o){i="paths"in e?e.paths:e.rings;var a=[],s=void 0;for(e=0;e<i.length;e++){var l=i[e],s=[];a.push(s);for(var u=0;u<l.length;u++)s.push(t(l[u][0],l[u][1],[0,0],n)),2<l[u].length&&s[u].push(l[u][2]),3<l[u].length&&s[u].push(l[u][3])}"paths"in o?o.paths=a:o.rings=a}else if("points"in e&&"points"in o){for(i=e.points,a=[],e=0;e<i.length;e++)a[e]=t(i[e][0],i[e][1],[0,0],n),2<i[e].length&&a[e].push(i[e][2]),3<i[e].length&&a[e].push(i[e][3]);o.points=a}else if("type"in e&&"mesh"===e.type&&"type"in o&&"mesh"===o.type&&(i=e.vertexAttributes&&e.vertexAttributes.position,a=o.vertexAttributes&&o.vertexAttributes.position,i))for(s=[0,0],e=0;e<i.length;e+=3)t(i[e],i[e+1],s,n),a[e]=s[0],a[e+1]=s[1];return o.spatialReference=r,o}function s(e,t){return e=e&&(null!=e.wkid||null!=e.wkt?e:e.spatialReference),t=t&&(null!=t.wkid||null!=t.wkt?t:t.spatialReference),!(!e||!t)&&(!!i.equals(t,e)||(i.isWebMercator(t)&&i.isWGS84(e)||i.isWebMercator(e)&&i.isWGS84(t)))}function l(e,t,r){return void 0===r&&(r=[0,0]),89.99999<t?t=89.99999:-89.99999>t&&(t=-89.99999),t*=.017453292519943,r[0]=.017453292519943*e*c,r[1]=p*Math.log((1+Math.sin(t))/(1-Math.sin(t))),r}function u(e,t,r,n){return void 0===r&&(r=[0,0]),void 0===n&&(n=!1),e=e/c*57.29577951308232,r[0]=n?e:e-360*Math.floor((e+180)/360),r[1]=57.29577951308232*(Math.PI/2-2*Math.atan(Math.exp(-1*t/c))),r}Object.defineProperty(t,"__esModule",{value:!0});var c=n.wgs84Radius,p=c/2,d=[0,0];t.canProject=s,t.project=function(e,t){var n=e&&e.spatialReference;return t=t&&(null!=t.wkid||null!=t.wkt?t:t.spatialReference),s(n,t)?i.equals(n,t)?r.clone(e):i.isWebMercator(t)?a(e,l,o.WebMercator,!1,r.clone(e)):i.isWGS84(t)?a(e,u,o.WGS84,!1,r.clone(e)):null:null},t.lngLatToXY=l,t.xyToLngLat=u,t.geographicToWebMercator=function(e,t,n){return void 0===t&&(t=!1),void 0===n&&(n=r.clone(e)),a(e,l,o.WebMercator,t,n)},t.webMercatorToGeographic=function(e,t,n){return void 0===t&&(t=!1),void 0===n&&(n=r.clone(e)),a(e,u,o.WGS84,t,n)}})},"esri/core/wgs84Constants":function(){define(["require","exports"],function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.wgs84Radius=6378137,t.wgs84InverseFlattening=298.257223563,t.wgs84Flattening=1/t.wgs84InverseFlattening,t.wgs84PolarRadius=t.wgs84Radius*(1-t.wgs84Flattening),t.wgs84Eccentricity=.0818191908426215})},"esri/geometry/support/contains":function(){define(["require","exports"],function(e,t){function r(e,t){return n(e,t[0],t[1])}function n(e,t,r,n){return t>=e.xmin&&t<=e.xmax&&r>=e.ymin&&r<=e.ymax&&(null==n||!e.hasZ||n>=e.zmin&&n<=e.zmax)}function o(e,t){if(e=e.rings)if(Array.isArray(e[0][0])){for(var r=!1,n=0,o=e.length;n<o;n++)r=i(r,e[n],t);t=r}else t=i(!1,e,t);else t=!1;return t}function i(e,t,r){var n=r[0];r=r[1];for(var o=0,i=0,a=t.length;i<a;i++){o++,o===a&&(o=0);var s=t[i],l=s[0],s=s[1],u=t[o],c=u[0],u=u[1];(s<r&&u>=r||u<r&&s>=r)&&l+(r-s)/(u-s)*(c-l)<n&&(e=!e)}return e}Object.defineProperty(t,"__esModule",{value:!0});var a=[0,0];t.extentContainsPoint=function(e,t){return n(e,t.x,t.y,t.z)},t.extentContainsMultipoint=function(e,t){if(!t.points||t.points.length)return!1;var n=0;for(t=t.points;n<t.length;n++)if(!r(e,t[n]))return!1;return!0},t.extentContainsExtent=function(e,t){var r=t.xmin,o=t.ymin,i=t.zmin,a=t.xmax,s=t.ymax,l=t.zmax;return e.hasZ&&t.hasZ?n(e,r,o,i)&&n(e,r,s,i)&&n(e,a,s,i)&&n(e,a,o,i)&&n(e,r,o,l)&&n(e,r,s,l)&&n(e,a,s,l)&&n(e,a,o,l):n(e,r,o)&&n(e,r,s)&&n(e,a,s)&&n(e,a,o)},t.extentContainsCoords2D=r,t.extentContainsCoords3D=function(e,t){return n(e,t[0],t[1],t[2])},t.polygonContainsPoint=function(e,t){return a[1]=t.y,a[0]=t.x,o(e,a)},t.polygonContainsCoords=o})},"esri/geometry/support/intersects":function(){define(["require","exports","./contains"],function(e,t,r){function n(e,t){return r.extentContainsPoint(e,t)}function o(e,t){var r,n=e.hasZ&&t.hasZ;if(e.xmin<=t.xmin){if(r=t.xmin,e.xmax<r)return!1}else if(r=e.xmin,t.xmax<r)return!1;if(e.ymin<=t.ymin){if(r=t.ymin,e.ymax<r)return!1}else if(r=e.ymin,t.ymax<r)return!1;if(n&&t.hasZ)if(e.zmin<=t.zmin){if(n=t.zmin,e.zmax<n)return!1}else if(n=e.zmin,t.zmax<n)return!1;return!0}function i(e,t){var n=t.hasZ?r.extentContainsCoords3D:r.extentContainsCoords2D,o=0;for(t=t.points;o<t.length;o++)if(n(e,t[o]))return!0;return!1}function a(e,t){c[0]=e.xmin,c[1]=e.ymax,p[0]=e.xmax,p[1]=e.ymax,d[0]=e.xmin,d[1]=e.ymin,f[0]=e.xmax,f[1]=e.ymin;for(var n=0,o=h;n<o.length;n++)if(r.polygonContainsCoords(t,o[n]))return!0;for(n=0,t=t.rings;n<t.length;n++)if(o=t[n],o.length){var i=o[0];if(r.extentContainsCoords2D(e,i))return!0;for(var a=1;a<o.length;a++){var s=o[a];if(r.extentContainsCoords2D(e,s)||l(i,s,y))return!0;i=s}}return!1}function s(e,t){c[0]=e.xmin,c[1]=e.ymax,p[0]=e.xmax,p[1]=e.ymax,d[0]=e.xmin,d[1]=e.ymin,f[0]=e.xmax,f[1]=e.ymin,t=t.paths;for(var n=0;n<t.length;n++){var o=t[n];if(t.length){var i=o[0];if(r.extentContainsCoords2D(e,i))return!0;for(var a=1;a<o.length;a++){var s=o[a];if(r.extentContainsCoords2D(e,s)||l(i,s,y))return!0;i=s}}}return!1}function l(e,t,r){for(var n=0;n<r.length;n++)if(u(e,t,r[n][0],r[n][1]))return!0;return!1}function u(e,t,r,n,o){var i=e[0];e=e[1];var a=t[0];t=t[1];var s=r[0],l=r[1];r=n[0]-s;var s=i-s,u=a-i;n=n[1]-l;var l=e-l,c=t-e,p=n*u-r*c;return 0!==p&&(r=(r*l-n*s)/p,s=(u*l-c*s)/p,0<=r&&1>=r&&0<=s&&1>=s&&(o&&(o[0]=i+r*(a-i),o[1]=e+r*(t-e)),!0))}Object.defineProperty(t,"__esModule",{value:!0}),t.extentIntersectsPoint=n,t.extentIntersectsExtent=o,t.extentIntersectsMultipoint=i;var c=[0,0],p=[0,0],d=[0,0],f=[0,0],h=[c,p,d,f],y=[[d,c],[c,p],[p,f],[f,d]];t.extentIntersectsPolygon=a,t.extentIntersectsPolyline=s;var m=[0,0];t.isSelfIntersecting=function(e){for(var t=0;t<e.length;t++){for(var r=e[t],n=0;n<r.length-1;n++)for(var o=r[n],i=r[n+1],a=t+1;a<e.length;a++)for(var s=0;s<e[a].length-1;s++){var l=e[a][s],c=e[a][s+1],p=u(o,i,l,c,m);if(p&&!(m[0]===o[0]&&m[1]===o[1]||m[0]===l[0]&&m[1]===l[1]||m[0]===i[0]&&m[1]===i[1]||m[0]===c[0]&&m[1]===c[1]))return!0}if(!(4>=(s=r.length)))for(n=0;n<s-3;n++){var d=s-1;for(0===n&&(d=s-2),o=r[n],i=r[n+1],a=n+2;a<d;a++)if(l=r[a],c=r[a+1],(p=u(o,i,l,c,m))&&!(m[0]===o[0]&&m[1]===o[1]||m[0]===l[0]&&m[1]===l[1]||m[0]===i[0]&&m[1]===i[1]||m[0]===c[0]&&m[1]===c[1]))return!0}}return!1},t.segmentIntersects=u,t.getExtentIntersector=function(e){switch(e){case"esriGeometryEnvelope":case"extent":return o;case"esriGeometryMultipoint":case"multipoint":return i;case"esriGeometryPoint":case"point":return n;case"esriGeometryPolygon":case"polygon":return a;case"esriGeometryPolyline":case"polyline":return s;case"mesh":return o}}})},"esri/geometry/Multipoint":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/lang ../core/accessorSupport/decorators ./Extent ./Geometry ./Point ./support/zmUtils".split(" "),function(e,t,r,n,o,i,a,s,l,u){function c(e){return function(t,r){return null==t?r:null==r?t:e(t,r)}}return e=function(e){function t(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return t=e.apply(this,t)||this,t.points=[],t.type="multipoint",t}r(t,e),s=t,t.prototype.normalizeCtorArgs=function(e,t){if(!e&&!t)return null;var r={};return Array.isArray(e)?(r.points=e,r.spatialReference=t):!e||"esri.geometry.SpatialReference"!==e.declaredClass&&null==e.wkid?(e.points&&(r.points=e.points),e.spatialReference&&(r.spatialReference=e.spatialReference),e.hasZ&&(r.hasZ=e.hasZ),e.hasM&&(r.hasM=e.hasM)):r.spatialReference=e,(e=r.points&&r.points[0])&&(void 0===r.hasZ&&void 0===r.hasM?(r.hasZ=2<e.length,r.hasM=!1):void 0===r.hasZ?r.hasZ=3<e.length:void 0===r.hasM&&(r.hasM=3<e.length)),r},Object.defineProperty(t.prototype,"extent",{get:function(){var e=this.points;if(!e.length)return null;for(var t,r,n,o,i=new a,s=this.hasZ,l=this.hasM,u=s?3:2,p=e[0],d=c(Math.min),f=c(Math.max),h=p[0],y=p[1],m=p[0],p=p[1],g=0,v=e.length;g<v;g++){var b=e[g],w=b[0],S=b[1],h=d(h,w),y=d(y,S),m=f(m,w),p=f(p,S);s&&2<b.length&&(w=b[2],t=d(t,w),n=f(n,w)),l&&b.length>u&&(b=b[u],r=d(r,b),o=f(o,b))}return i.xmin=h,i.ymin=y,i.xmax=m,i.ymax=p,i.spatialReference=this.spatialReference,s?(i.zmin=t,i.zmax=n):(i.zmin=null,i.zmax=null),l?(i.mmin=r,i.mmax=o):(i.mmin=null,i.mmax=null),i},enumerable:!0,configurable:!0}),t.prototype.writePoints=function(e,t){t.points=o.clone(this.points)},t.prototype.addPoint=function(e){return this.clearCache(),u.updateSupportFromPoint(this,e),Array.isArray(e)?this.points.push(e):this.points.push(e.toArray()),this},t.prototype.clone=function(){var e={points:o.clone(this.points),spatialReference:this.spatialReference};return this.hasZ&&(e.hasZ=!0),this.hasM&&(e.hasM=!0),new s(e)},t.prototype.getPoint=function(e){if(!this._validateInputs(e))return null;e=this.points[e];var t={x:e[0],y:e[1],spatialReference:this.spatialReference},r=2;return this.hasZ&&(t.z=e[2],r=3),this.hasM&&(t.m=e[r]),new l(t)},t.prototype.removePoint=function(e){return this._validateInputs(e)?(this.clearCache(),new l(this.points.splice(e,1)[0],this.spatialReference)):null},t.prototype.setPoint=function(e,t){return this._validateInputs(e)?(this.clearCache(),u.updateSupportFromPoint(t),this.points[e]=t.toArray(),this):this},t.prototype.toJSON=function(e){return this.write(null,e)},t.prototype._validateInputs=function(e){return null!=e&&0<=e&&e<this.points.length};var s;return n([i.property({dependsOn:["points","hasZ","hasM","spatialReference"]})],t.prototype,"cache",void 0),n([i.property({dependsOn:["cache"]})],t.prototype,"extent",null),n([i.property({type:[[Number]],json:{write:{isRequired:!0}}})],t.prototype,"points",void 0),n([i.writer("points")],t.prototype,"writePoints",null),t=s=n([i.subclass("esri.geometry.Multipoint")],t)}(i.declared(s)),e.prototype.toJSON.isDefaultToJSON=!0,e})},"esri/geometry/support/zmUtils":function(){define(["require","exports"],function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.updateSupportFromPoint=function(e,t,r){void 0===r&&(r=!1);var n=e.hasM,o=e.hasZ;Array.isArray(t)?4!==t.length||n||o?3===t.length&&r&&!n?(o=!0,n=!1):3===t.length&&n&&o&&(o=n=!1):o=n=!0:(o=!o&&t.hasZ&&(!n||t.hasM),n=!n&&t.hasM&&(!o||t.hasZ)),e.hasZ=o,e.hasM=n}})},"esri/geometry/Polygon":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/lang ../core/accessorSupport/decorators ./Extent ./Geometry ./Point ./SpatialReference ./support/centroid ./support/contains ./support/coordsUtils ./support/extentUtils ./support/intersects ./support/webMercatorUtils ./support/zmUtils".split(" "),function(e,t,r,n,o,i,a,s,l,u,c,p,d,f,h,y,m){return e=function(e){function t(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return t=e.apply(this,t)||this,t.rings=[],t.type="polygon",t}r(t,e),s=t,t.fromExtent=function(e){var t=e.clone().normalize();e=e.spatialReference;var r=!1,n=!1;return t.map(function(e){e.hasZ&&(r=!0),e.hasM&&(n=!0)}),t={rings:t.map(function(e){var t=[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]];if(r&&e.hasZ)for(var o=e.zmin+.5*(e.zmax-e.zmin),i=0;i<t.length;i++)t[i].push(o);if(n&&e.hasM)for(e=e.mmin+.5*(e.mmax-e.mmin),i=0;i<t.length;i++)t[i].push(e);return t}),spatialReference:e},r&&(t.hasZ=!0),n&&(t.hasM=!0),new s(t)},t.prototype.normalizeCtorArgs=function(e,t){var r,n,o=null,i=null;return e&&!Array.isArray(e)?(o=e.rings?e.rings:null,t||(e.spatialReference?t=e.spatialReference:e.rings||(t=e)),r=e.hasZ,n=e.hasM):o=e,o=o||[],t=t||u.WGS84,o.length&&o[0]&&null!=o[0][0]&&"number"==typeof o[0][0]&&(o=[o]),(i=o[0]&&o[0][0])&&(void 0===r&&void 0===n?(r=2<i.length,n=!1):void 0===r?r=!n&&3<i.length:void 0===n&&(n=!r&&3<i.length)),{rings:o,spatialReference:t,hasZ:r,hasM:n}},Object.defineProperty(t.prototype,"centroid",{get:function(){var e=c.polygonCentroid(this);if(!e||isNaN(e[0])||isNaN(e[1])||this.hasZ&&isNaN(e[2]))return null;var t=new l;return t.x=e[0],t.y=e[1],t.spatialReference=this.spatialReference,this.hasZ&&(t.z=e[2]),t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"extent",{get:function(){var e=this.spatialReference,t=f.getPolygonExtent(this);return t?(t=new a(t),t.spatialReference=e,t):null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isSelfIntersecting",{get:function(){return h.isSelfIntersecting(this.rings)},enumerable:!0,configurable:!0}),t.prototype.writePaths=function(e,t){t.rings=o.clone(this.rings)},t.prototype.addRing=function(e){if(e){this.clearCache();var t=this.rings,r=t.length;if(Array.isArray(e[0]))t[r]=e.concat();else{for(var n=[],o=0,i=e.length;o<i;o++)n[o]=e[o].toArray();t[r]=n}return this}},t.prototype.clone=function(){var e=new s;return e.spatialReference=this.spatialReference,e.rings=o.clone(this.rings),e.hasZ=this.hasZ,e.hasM=this.hasM,e},t.prototype.contains=function(e){return!!e&&(y.canProject(e,this.spatialReference)&&(e=y.project(e,this.spatialReference)),p.polygonContainsPoint(this,e))},t.prototype.isClockwise=function(e){var t=this;return e=Array.isArray(e[0])?e:e.map(function(e){return t.hasZ?t.hasM?[e.x,e.y,e.z,e.m]:[e.x,e.y,e.z]:[e.x,e.y]}),d.isClockwise(e,this.hasM,this.hasZ)},t.prototype.getPoint=function(e,t){if(!this._validateInputs(e,t))return null;e=this.rings[e][t],t=this.hasZ;var r=this.hasM;return t&&!r?new l(e[0],e[1],e[2],void 0,this.spatialReference):r&&!t?new l(e[0],e[1],void 0,e[2],this.spatialReference):t&&r?new l(e[0],e[1],e[2],e[3],this.spatialReference):new l(e[0],e[1],this.spatialReference)},t.prototype.insertPoint=function(e,t,r){return this._validateInputs(e,t,!0)?(this.clearCache(),m.updateSupportFromPoint(this,r),Array.isArray(r)||(r=r.toArray()),this.rings[e].splice(t,0,r),this):this},t.prototype.removePoint=function(e,t){return this._validateInputs(e,t)?(this.clearCache(),new l(this.rings[e].splice(t,1)[0],this.spatialReference)):null},t.prototype.removeRing=function(e){if(!this._validateInputs(e,null))return null;this.clearCache(),e=this.rings.splice(e,1)[0];var t=this.spatialReference;return e.map(function(e){return new l(e,t)})},t.prototype.setPoint=function(e,t,r){return this._validateInputs(e,t)?(this.clearCache(),m.updateSupportFromPoint(this,r),Array.isArray(r)||(r=r.toArray()),this.rings[e][t]=r,this):this},t.prototype._validateInputs=function(e,t,r){return void 0===r&&(r=!1),!(null==e||0>e||e>=this.rings.length||null!=t&&(e=this.rings[e],r&&(0>t||t>e.length)||!r&&(0>t||t>=e.length)))},t.prototype.toJSON=function(e){return this.write(null,e)};var s;return n([i.property({dependsOn:["hasM","hasZ","rings"]})],t.prototype,"cache",void 0),n([i.property({readOnly:!0,dependsOn:["cache"]})],t.prototype,"centroid",null),n([i.property({dependsOn:["cache"],readOnly:!0})],t.prototype,"extent",null),n([i.property({dependsOn:["cache"],readOnly:!0})],t.prototype,"isSelfIntersecting",null),n([i.property({type:[[[Number]]],json:{write:{isRequired:!0}}})],t.prototype,"rings",void 0),n([i.writer("rings")],t.prototype,"writePaths",null),t=s=n([i.subclass("esri.geometry.Polygon")],t)}(i.declared(s)),e.prototype.toJSON.isDefaultToJSON=!0,e})},"esri/geometry/support/centroid":function(){define(["require","exports","./coordsUtils"],function(e,t,r){function n(e,t){if(!e||!e.length)return null;for(var r=[],n=[],a=t?[1/0,-1/0,1/0,-1/0,1/0,-1/0]:[1/0,-1/0,1/0,-1/0],s=0,l=e.length;s<l;s++){var u=o(e[s],t,a);u&&n.push(u)}if(n.sort(function(e,r){var n=e[2]-r[2];return 0===n&&t&&(n=e[4]-r[4]),n}),n.length&&(s=6*n[0][2],r[0]=n[0][0]/s,r[1]=n[0][1]/s,t&&(s=6*n[0][4],r[2]=0!==s?n[0][3]/s:0),r[0]<a[0]||r[0]>a[1]||r[1]<a[2]||r[1]>a[3]||t&&(r[2]<a[4]||r[2]>a[5]))&&(r.length=0),!r.length){if(!(e=e[0]&&e[0].length?i(e[0],t):null))return null;r[0]=e[0],r[1]=e[1],t&&2<e.length&&(r[2]=e[2])}return r}function o(e,t,r){for(var n=0,o=0,i=0,a=0,s=0,l=0;l<e.length;l++){var u=e[l],c=u[0],p=u[1],d=u[2],f=e[(l+1)%e.length],h=f[0],y=f[1],m=f[2],g=c*y-h*p,a=a+g,n=n+(c+h)*g,o=o+(p+y)*g;t&&2<u.length&&2<f.length&&(g=c*m-h*d,i+=(d+m)*g,s+=g),c<r[0]&&(r[0]=c),c>r[1]&&(r[1]=c),p<r[2]&&(r[2]=p),p>r[3]&&(r[3]=p),t&&(d<r[4]&&(r[4]=d),d>r[5]&&(r[5]=d))}return 0<a&&(a*=-1),0<s&&(s*=-1),a?(e=[n,o,.5*a],t&&(e[3]=i,e[4]=.5*s),e):null}function i(e,t){for(var n=t?[0,0,0]:[0,0],o=t?[0,0,0]:[0,0],i=0,a=0,s=0,l=0,u=0,c=e.length;u<c-1;u++){var p=e[u],d=e[u+1];if(p&&d){n[0]=p[0],n[1]=p[1],o[0]=d[0],o[1]=d[1],t&&2<p.length&&2<d.length&&(n[2]=p[2],o[2]=d[2]);var f=r.getLength(n,o);f&&(i+=f,p=r.getMidpoint(p,d),a+=f*p[0],s+=f*p[1],t&&2<p.length&&(l+=f*p[2]))}}return 0<i?t?[a/i,s/i,l/i]:[a/i,s/i]:e.length?e[0]:null}Object.defineProperty(t,"__esModule",{value:!0}),t.extentCentroid=function(e){return e?e.hasZ?[e.xmax-e.xmin/2,e.ymax-e.ymin/2,e.zmax-e.zmin/2]:[e.xmax-e.xmin/2,e.ymax-e.ymin/2]:null},t.polygonCentroid=function(e){return e?n(e.rings,e.hasZ):null},t.ringsCentroid=n,t.lineCentroid=i})},"esri/geometry/support/coordsUtils":function(){define(["require","exports","./spatialReferenceUtils"],function(e,t,r){function n(e,t){var r=t[0]-e[0],n=t[1]-e[1];return 2<e.length&&2<t.length?(e=e[2]-t[2],Math.sqrt(r*r+n*n+e*e)):Math.sqrt(r*r+n*n)}function o(e,t,r){var n=e[0]+r*(t[0]-e[0]),o=e[1]+r*(t[1]-e[1]);return 2<e.length&&2<t.length?[n,o,e[2]+r*(t[2]-e[2])]:[n,o]}function i(e,t,r){for(var n=e.length,o=0,i=0,a=0,s=0;s<n;s++){var l=e[s],u=e[(s+1)%n],c=2,o=o+(l[0]*u[1]-u[0]*l[1]);2<l.length&&2<u.length&&r&&(i+=l[0]*u[2]-u[0]*l[2],c=3),l.length>c&&u.length>c&&t&&(a+=l[0]*u[c]-u[0]*l[c])}return 0>=o&&0>=i&&0>=a}function a(e,t){if(t=r.getInfo(t)){var n=t.valid[0],o=t.valid[1],i=o-n;t=function(e){var t=1/0,r=-1/0;e.forEach(function(e){for(var a=e[0];a<n;)a+=i;for(;a>o;)a-=i;t=Math.min(t,a),r=Math.max(r,a),e[0]=a});var a=r-t;i-a<a&&e.forEach(function(e){0>e[0]&&(e[0]+=i)})};for(var a=0;a<e.length;a++)t(e[a])}}Object.defineProperty(t,"__esModule",{value:!0}),t.geometryToCoordinates=function(e){if(!e)return null;if(Array.isArray(e))return e;var t=e.hasZ,r=e.hasM;if("point"===e.type)return r&&t?[e.x,e.y,e.z,e.m]:t?[e.x,e.y,e.z]:r?[e.x,e.y,e.m]:[e.x,e.y];if("polygon"===e.type)return e.rings.slice(0);if("polyline"===e.type)return e.paths.slice(0);if("multipoint"===e.type)return e.points.slice(0);if("extent"===e.type){if(!(e=e.clone().normalize()))return null;var n=!1,o=!1;return e.forEach(function(e){e.hasZ&&(n=!0),e.hasM&&(o=!0)}),e.map(function(e){var t=[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]];if(n&&e.hasZ)for(var r=.5*(e.zmax-e.zmin),i=0;i<t.length;i++)t[i].push(r);if(o&&e.hasM)for(e=.5*(e.mmax-e.mmin),i=0;i<t.length;i++)t[i].push(e);return t})}return null},t.getLength=n,t.getMidpoint=function(e,t){return o(e,t,.5)},t.getPathLength=function(e){for(var t=e.length,r=0,o=0;o<t-1;++o)r+=n(e[o],e[o+1]);return r},t.getPointOnPath=function(e,t){if(0>=t)return e[0];for(var r=e.length,i=0,a=0;a<r-1;++a){var s=n(e[a],e[a+1]);if(t-i<s)return o(e[a],e[a+1],(t-i)/s);i+=s}return e[r-1]},t.isClockwise=i,t.closeRingsAndFixWinding=function(e){if("rings"in e){for(var t=0,r=e.rings;t<r.length;t++){var n=r[t];3>n.length||n[0][0]===n[n.length-1][0]&&n[0][1]===n[n.length-1][1]||n.push([n[0][0],n[0][1]])}if(0<e.rings.length&&!i(e.rings[0],e.hasM,e.hasZ))for(t=0;t<e.rings.length;++t)e.rings[t]=e.rings[t].reverse()}},t.closeRings=function(e){if("rings"in e){var t=0;for(e=e.rings;t<e.length;t++){var r=e[t];3>r.length||r[0][0]===r[r.length-1][0]&&r[0][1]===r[r.length-1][1]||r.push([r[0][0],r[0][1]])}}},t.getRingArea=function(e){for(var t=e.length,r=0,n=0;n<t;n++)var o=e[n],i=e[(n+1)%t],r=r+(o[0]*i[1]-i[0]*o[1]);return r},t.unnormalizeGeometryOnDatelineCrossing=function(e){return"polygon"!==e.type&&"polyline"!==e.type?e:(a("polygon"===e.type?e.rings:e.paths,e.spatialReference),e)},t.unnormalizeVerticesOnDatelineCrossing=a,t.computeUnnormalizedVertexPositionsOnDateLineCrossing=function(e,t,r,n){var o=1/0,i=-1/0;e.forEach(function(e){for(var a=e.pos[0];a<t;)a+=n;for(;a>r;)a-=n;o=Math.min(o,a),i=Math.max(i,a),e.unnormalizedPos[0]=a,e.unnormalizedPos[1]=e.pos[1],2<e.pos.length&&(e.unnormalizedPos[2]=e.pos[2]),3<e.pos.length&&(e.unnormalizedPos[3]=e.pos[3])});var a=i-o;n-a<a&&e.forEach(function(e){0>e.unnormalizedPos[0]&&(e.unnormalizedPos[0]+=n)})}})},"esri/geometry/support/extentUtils":function(){define(["require","exports","./boundsUtils"],function(e,t,r){function n(e,t,r){return void 0===t&&(t=!1),void 0===r&&(r=!1),t?r?{xmin:e[0],ymin:e[1],zmin:e[2],mmin:e[3],xmax:e[4],ymax:e[5],zmax:e[6],mmax:e[7]}:{xmin:e[0],ymin:e[1],zmin:e[2],xmax:e[3],ymax:e[4],zmax:e[5]}:r?{xmin:e[0],ymin:e[1],mmin:e[2],xmax:e[3],ymax:e[4],mmax:e[5]}:{xmin:e[0],ymin:e[1],xmax:e[2],ymax:e[3]}}function o(e){var t=e.hasZ,o=e.hasM;return n(r.getPointsBounds(l,e.points,t,o),t,o)}function i(e){var t=e.x,r=e.y,n=e.z;e=e.m;var o=null!=e;return null!=n?o?{xmin:t,ymin:r,zmin:n,mmin:e,xmax:t,ymax:r,zmax:n,mmax:e}:{xmin:t,ymin:r,zmin:n,xmax:t,ymax:r,zmax:n}:o?{xmin:t,ymin:r,mmin:e,xmax:t,ymax:r,mmax:e}:{xmin:t,ymin:r,xmax:t,ymax:r}}function a(e){var t=e.hasZ,o=e.hasM;return(e=r.getRingsOrPathsBounds(l,e.rings,t,o))?n(e,t,o):null}function s(e){var t=e.hasZ,o=e.hasM;return(e=r.getRingsOrPathsBounds(l,e.paths,t,o))?n(e,t,o):null}Object.defineProperty(t,"__esModule",{value:!0});var l=[];t.getGeometryExtent=function(e){return e?void 0!==e.xmin&&void 0!==e.ymin&&void 0!==e.xmax&&void 0!==e.ymax?e:void 0!==e.x&&void 0!==e.y?i(e):void 0!==e.rings?a(e):void 0!==e.paths?s(e):void 0!==e.points?o(e):null:null},t.getMultipointExtent=o,t.getPointExtent=i,t.getPolygonExtent=a,t.getPolylineExtent=s})},"esri/geometry/support/boundsUtils":function(){define(["require","exports"],function(e,t){function r(e){return void 0!==e.xmin&&void 0!==e.ymin&&void 0!==e.xmax&&void 0!==e.ymax}function n(e){return function(t,r){return null==t?r:null==r?t:e(t,r)}}function o(e,t,r,n){var o=r?3:2;if(!t.length||!t[0].length)return null;for(var i=t[0][0],a=i[0],i=i[1],u=t[0][0],c=u[0],u=u[1],p=void 0,d=void 0,f=void 0,h=void 0,y=0;y<t.length;y++)for(var m=t[y],g=0;g<m.length;g++){var v=m[g],b=v[0],w=v[1],a=s(a,b),i=s(i,w),c=l(c,b),u=l(u,w);r&&2<v.length&&(b=v[2],p=s(p,b),d=l(d,b)),n&&v.length>o&&(h=v[o],f=s(p,h),h=l(d,h))}return r?n?(e[0]=a,e[1]=i,e[2]=p,e[3]=f,e[4]=c,e[5]=u,e[6]=d,e[7]=h,e.length=8,e):(e[0]=a,e[1]=i,e[2]=p,e[3]=c,e[4]=u,e[5]=d,e.length=6,e):n?(e[0]=a,e[1]=i,e[2]=f,e[3]=c,e[4]=u,e[5]=h,e.length=6,e):(e[0]=a,e[1]=i,e[2]=c,e[3]=u,e.length=4,e)}function i(e,t,r,n,o,i){r=t.xmin,n=t.xmax;var a=t.ymin,s=t.ymax,l=t.zmin,u=t.zmax,c=t.mmin;return t=t.mmax,o?(l=l||0,u=u||0,i?(e[0]=r,e[1]=a,e[2]=l,e[3]=c||0,e[4]=n,e[5]=s,e[6]=u,e[7]=t||0,e):(e[0]=r,e[1]=a,e[2]=l,e[3]=n,e[4]=s,e[5]=u,e)):i?(e[0]=r,e[1]=a,e[2]=c||0,e[3]=n,e[4]=s,e[5]=t||0,e):(e[0]=r,e[1]=a,e[2]=n,e[3]=s,e)}function a(e,t,r,n,o,i){var a=r?3:2;if(n=n&&i,r=r&&o,!t.length||!t[0].length)return null;for(var u=t[0],c=u[0],u=u[1],p=t[0],d=p[0],p=p[1],f=void 0,h=void 0,y=void 0,m=void 0,g=0;g<t.length;g++){var v=t[g],b=v[0],w=v[1],c=s(c,b),u=s(u,w),d=l(d,b),p=l(p,w);r&&2<v.length&&(b=v[2],f=s(f,b),h=l(h,b)),n&&v.length>a&&(m=v[a],y=s(f,m),m=l(h,m))}return o?(f=f||0,h=h||0,i?(e[0]=c,e[1]=u,e[2]=f,e[3]=y||0,e[4]=d,e[5]=p,e[6]=h,e[7]=m||0,e):(e[0]=c,e[1]=u,e[2]=f,e[3]=d,e[4]=p,e[5]=h,e)):i?(e[0]=c,e[1]=u,e[2]=y||0,e[3]=d,e[4]=p,e[5]=m||0,e):(e[0]=c,e[1]=u,e[2]=d,e[3]=p,e)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(Math.min),l=n(Math.max);t.getBoundsXY=function(e,t){return void 0!==t.paths?o(e,t.paths,!1,!1):void 0!==t.rings?o(e,t.rings,!1,!1):void 0!==t.points?a(e,t.points,!1,!1,!1,!1):r(t)?i(e,t):(void 0!==t.x&&void 0!==t.y&&(e[0]=t.x,e[1]=t.y,e[2]=t.x,e[3]=t.y),e)},t.getBoundsXYZ=function(e,t){return void 0!==t.paths?o(e,t.paths,!0,!1):void 0!==t.rings?o(e,t.rings,!0,!1):void 0!==t.points?a(e,t.points,!0,!1,!0,!1):r(t)?i(e,t,!0,!1,!0,!1):(void 0!==t.x&&void 0!==t.y&&(e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.x,e[4]=t.y,e[5]=t.z),e)},t.getRingsOrPathsBounds=o,t.getExtentBounds=i,t.getPointsBounds=a,t.getPointsBoundsWidth=function(e){if(!e.length||!e[0].length)return null;for(var t=e[0][0],r=e[0][0],n=0;n<e.length;n++)var o=e[n][0],t=s(t,o),r=l(r,o);return r-t},t.getPointsBoundsCenterX=function(e){if(!e.length||!e[0].length)return null;for(var t=e[0][0],r=e[0][0],n=0;n<e.length;n++)var o=e[n][0],t=s(t,o),r=l(r,o);return t+.5*(r-t)}})},"esri/geometry/Polyline":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/lang ../core/accessorSupport/decorators ./Extent ./Geometry ./Point ./SpatialReference ./support/extentUtils ./support/zmUtils".split(" "),function(e,t,r,n,o,i,a,s,l,u,c,p){return e=function(e){function t(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return t=e.apply(this,t)||this,t.paths=[],t.type="polyline",t}r(t,e),s=t,t.prototype.normalizeCtorArgs=function(e,t){var r,n,o=null,i=null;return e&&!Array.isArray(e)?(o=e.paths?e.paths:null,t||(e.spatialReference?t=e.spatialReference:e.paths||(t=e)),r=e.hasZ,n=e.hasM):o=e,o=o||[],t=t||u.WGS84,o.length&&o[0]&&null!=o[0][0]&&"number"==typeof o[0][0]&&(o=[o]),(i=o[0]&&o[0][0])&&(void 0===r&&void 0===n?(r=2<i.length,n=!1):void 0===r?r=!n&&3<i.length:void 0===n&&(n=!r&&3<i.length)),{paths:o,spatialReference:t,hasZ:r,hasM:n}},Object.defineProperty(t.prototype,"extent",{get:function(){var e=this.spatialReference,t=c.getPolylineExtent(this);return t?(t=new a(t),t.spatialReference=e,t):null},enumerable:!0,configurable:!0}),t.prototype.writePaths=function(e,t){t.paths=o.clone(this.paths)},t.prototype.addPath=function(e){if(e){this.clearCache();var t=this.paths,r=t.length;if(Array.isArray(e[0]))t[r]=e.concat();else{for(var n=[],o=0,i=e.length;o<i;o++)n[o]=e[o].toArray();t[r]=n}return this}},t.prototype.clone=function(){var e=new s;return e.spatialReference=this.spatialReference,e.paths=o.clone(this.paths),e.hasZ=this.hasZ,e.hasM=this.hasM,e},t.prototype.getPoint=function(e,t){if(!this._validateInputs(e,t))return null;e=this.paths[e][t],t=this.hasZ;var r=this.hasM;return t&&!r?new l(e[0],e[1],e[2],void 0,this.spatialReference):r&&!t?new l(e[0],e[1],void 0,e[2],this.spatialReference):t&&r?new l(e[0],e[1],e[2],e[3],this.spatialReference):new l(e[0],e[1],this.spatialReference)},t.prototype.insertPoint=function(e,t,r){return this._validateInputs(e,t,!0)?(this.clearCache(),p.updateSupportFromPoint(this,r),Array.isArray(r)||(r=r.toArray()),this.paths[e].splice(t,0,r),this):this},t.prototype.removePath=function(e){if(!this._validateInputs(e,null))return null;this.clearCache(),e=this.paths.splice(e,1)[0];var t=this.spatialReference;return e.map(function(e){return new l(e,t)})},t.prototype.removePoint=function(e,t){return this._validateInputs(e,t)?(this.clearCache(),new l(this.paths[e].splice(t,1)[0],this.spatialReference)):null},t.prototype.setPoint=function(e,t,r){return this._validateInputs(e,t)?(this.clearCache(),p.updateSupportFromPoint(this,r),Array.isArray(r)||(r=r.toArray()),this.paths[e][t]=r,this):this},t.prototype._validateInputs=function(e,t,r){return void 0===r&&(r=!1),!(null==e||0>e||e>=this.paths.length||null!=t&&(e=this.paths[e],r&&(0>t||t>e.length)||!r&&(0>t||t>=e.length)))},t.prototype.toJSON=function(e){return this.write(null,e)};var s;return n([i.property({dependsOn:["hasM","hasZ","paths"]})],t.prototype,"cache",void 0),n([i.property({dependsOn:["cache"],readOnly:!0})],t.prototype,"extent",null),n([i.property({type:[[[Number]]],json:{write:{isRequired:!0}}})],t.prototype,"paths",void 0),n([i.writer("paths")],t.prototype,"writePaths",null),t=s=n([i.subclass("esri.geometry.Polyline")],t)}(i.declared(s)),e.prototype.toJSON.isDefaultToJSON=!0,e})},"esri/geometry/support/jsonUtils":function(){define("require exports ../Extent ../Geometry ../Multipoint ../Point ../Polygon ../Polyline".split(" "),function(e,t,r,n,o,i,a,s){function l(e){return void 0!==e.xmin&&void 0!==e.ymin&&void 0!==e.xmax&&void 0!==e.ymax}function u(e){return void 0!==e.points}function c(e){return void 0!==e.x&&void 0!==e.y}function p(e){return void 0!==e.paths}function d(e){return void 0!==e.rings}function f(e){return e?e instanceof n?e:c(e)?i.fromJSON(e):p(e)?s.fromJSON(e):d(e)?a.fromJSON(e):u(e)?o.fromJSON(e):l(e)?r.fromJSON(e):null:null}Object.defineProperty(t,"__esModule",{value:!0}),t.fromJson=function(e){try{throw Error("fromJson is deprecated, use fromJSON instead")}catch(e){console.warn(e.stack)}return f(e)},t.isExtent=l,t.isMultipoint=u,t.isPoint=c,t.isPolyline=p,t.isPolygon=d,t.isMesh=function(e){return void 0!==e.vertexAttributes},t.fromJSON=f,t.getJsonType=function(e){return e?c(e)?"esriGeometryPoint":p(e)?"esriGeometryPolyline":d(e)?"esriGeometryPolygon":l(e)?"esriGeometryEnvelope":u(e)?"esriGeometryMultipoint":null:null};var h={esriGeometryPoint:i,esriGeometryPolyline:s,esriGeometryPolygon:a,esriGeometryEnvelope:r,esriGeometryMultipoint:o};t.getGeometryType=function(e){return e&&h[e]||null}})},"esri/core/Collection":function(){define("require exports ./tsSupport/declareExtendsHelper ./tsSupport/decorateHelper ./ArrayPool ./arrayUtils ./Evented ./lang ./ObjectPool ./scheduling ./accessorSupport/decorators ./accessorSupport/ensureType".split(" "),function(e,t,r,n,o,i,a,s,l,u,c,p){function d(e){return e?e instanceof _?e.toArray():e.length?Array.prototype.slice.apply(e):[]:[]}function f(e){if(e&&e.length)return e[0]}function h(e,t,r,n){t&&t.forEach(function(t,o,i){e.push(t),h(e,r.call(n,t,o,i),r,n)})}e=function(){function e(){this.target=null,this.defaultPrevented=this.cancellable=!1}return e.prototype.preventDefault=function(){this.cancellable&&(this.defaultPrevented=!0)},e.prototype.reset=function(e){this.defaultPrevented=!1,this.item=e},e}();var y=function(){},m=new l(e,!0,function(e){e.item=null,e.target=null}),g=new Set,v=new Set,b=new Set,w=new Map,S=0,_=function(e){function t(t){return t=e.call(this,t)||this,t._chgListeners=[],t._notifications=null,t._timer=null,t.length=0,t._items=[],Object.defineProperty(t,"uid",{value:S++}),t}r(t,e),a=t,t.isCollection=function(e){return null!=e&&e instanceof a},t.prototype.normalizeCtorArgs=function(e){return e?Array.isArray(e)||e instanceof a?{items:e}:e:{}},Object.defineProperty(t.prototype,"items",{get:function(){return this._items},set:function(e){this._emitBeforeChanges(1)||(this._splice.apply(this,[0,this.length].concat(d(e))),this._emitAfterChanges(1))},enumerable:!0,configurable:!0}),t.prototype.hasEventListener=function(e){return"change"===e?0<this._chgListeners.length:this._emitter.hasEventListener(e)},t.prototype.on=function(e,t){if("change"===e){var r=this._chgListeners,n={removed:!1,callback:t};return r.push(n),this._notifications&&this._notifications.push({listeners:r.slice(),items:this._items.slice(),changes:[]}),{remove:function(){this.remove=y,n.removed=!0,r.splice(r.indexOf(n),1)}}}return this._emitter.on(e,t)},t.prototype.once=function(e,t){var r=this.on(e,t);return{remove:function(){r.remove()}}},t.prototype.add=function(e,t){return this._emitBeforeChanges(1)?this:(t=this.getNextIndex(t),this._splice(t,0,e),this._emitAfterChanges(1),this)},t.prototype.addMany=function(e,t){return void 0===t&&(t=this._items.length),e&&e.length&&!this._emitBeforeChanges(1)?(t=this.getNextIndex(t),this._splice.apply(this,[t,0].concat(d(e))),this._emitAfterChanges(1),this):this},t.prototype.removeAll=function(){if(!this.length||this._emitBeforeChanges(2))return[];var e=this._splice(0,this.length)||[];return this._emitAfterChanges(2),e},t.prototype.clone=function(){return this._createNewInstance({items:this._items.map(s.clone)})},t.prototype.concat=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r,e=e.map(d);return this._createNewInstance({items:(r=this._items).concat.apply(r,e)})},t.prototype.drain=function(e,t){if(this.length&&!this._emitBeforeChanges(2)){for(var r=this._splice(0,this.length),n=r.length,o=0;o<n;o++)e.call(t,r[o],o,r);this._emitAfterChanges(2)}},t.prototype.every=function(e,t){return this._items.every(e,t)},t.prototype.filter=function(e,t){var r;return r=2===arguments.length?this._items.filter(e,t):this._items.filter(e),this._createNewInstance({items:r})},t.prototype.find=function(e,t){return i.find(this._items,e,t)},t.prototype.findIndex=function(e,t){return i.findIndex(this._items,e,t)},t.prototype.flatten=function(e,t){var r=[];return h(r,this,e,t),new a(r)},t.prototype.forEach=function(e,t){return this._items.forEach(e,t)},t.prototype.getItemAt=function(e){return this._items[e]},t.prototype.getNextIndex=function(e){var t=this.length;return e=null==e?t:e,0>e?e=0:e>t&&(e=t),e},t.prototype.includes=function(e,t){return void 0===t&&(t=0),!!arguments.length&&-1!==this._items.indexOf(e,t)},t.prototype.indexOf=function(e,t){return void 0===t&&(t=0),this._items.indexOf(e,t)},t.prototype.join=function(e){return void 0===e&&(e=","),this._items.join(e)},t.prototype.lastIndexOf=function(e,t){return void 0===t&&(t=this.length-1),this._items.lastIndexOf(e,t)},t.prototype.map=function(e,t){return e=this._items.map(e,t),new a({items:e})},t.prototype.reorder=function(e,t){void 0===t&&(t=this.length-1);var r=this.indexOf(e);if(-1!==r){if(0>t?t=0:t>=this.length&&(t=this.length-1),r!==t){if(this._emitBeforeChanges(4))return e;this._splice(r,1),this._splice(t,0,e),this._emitAfterChanges(4)}return e}},t.prototype.pop=function(){if(this.length&&!this._emitBeforeChanges(2)){var e=f(this._splice(this.length-1,1));return this._emitAfterChanges(2),e}},t.prototype.push=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this._emitBeforeChanges(1)?this.length:(this._splice.apply(this,[this.length,0].concat(e)),this._emitAfterChanges(1),this.length)},t.prototype.reduce=function(e,t){var r=this._items;return 2===arguments.length?r.reduce(e,t):r.reduce(e)},t.prototype.reduceRight=function(e,t){var r=this._items;return 2===arguments.length?r.reduceRight(e,t):r.reduceRight(e)},t.prototype.remove=function(e){return this.removeAt(this.indexOf(e))},t.prototype.removeAt=function(e){if(!(0>e||e>=this.length||this._emitBeforeChanges(2)))return e=f(this._splice(e,1)),this._emitAfterChanges(2),e},t.prototype.removeMany=function(e){if(!e||!e.length||this._emitBeforeChanges(2))return[];e=e instanceof a?e.toArray():e;for(var t=this._items,r=[],n=e.length,o=0;o<n;o++){var i=t.indexOf(e[o]);if(-1<i){for(var s=o+1,l=i+1,u=Math.min(e.length-s,t.length-l),c=0;c<u&&e[s+c]===t[l+c];)c++;s=1+c,(i=this._splice(i,s))&&0<i.length&&r.push.apply(r,i),o+=s-1}}return this._emitAfterChanges(2),r},t.prototype.reverse=function(){if(this._emitBeforeChanges(4))return this;var e=this._splice(0,this.length);return e&&(e.reverse(),this._splice.apply(this,[0,0].concat(e))),this._emitAfterChanges(4),this},t.prototype.shift=function(){if(this.length&&!this._emitBeforeChanges(2)){var e=f(this._splice(0,1));return this._emitAfterChanges(2),e}},t.prototype.slice=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=this.length),this._createNewInstance({items:this._items.slice(e,t)})},t.prototype.some=function(e,t){return this._items.some(e,t)},t.prototype.sort=function(e){if(!this.length||this._emitBeforeChanges(4))return this;var t=this._splice(0,this.length);return arguments.length?t.sort(e):t.sort(),this._splice.apply(this,[0,0].concat(t)),this._emitAfterChanges(4),this},t.prototype.splice=function(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];return n=(t?2:0)|(r.length?1:0),this._emitBeforeChanges(n)?[]:(r=this._splice.apply(this,[e,t].concat(r))||[],this._emitAfterChanges(n),r)},t.prototype.toArray=function(){return this._items.slice()},t.prototype.toJSON=function(){return this.toArray()},t.prototype.toLocaleString=function(){return this._items.toLocaleString()},t.prototype.toString=function(){return this._items.toString()},t.prototype.unshift=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return!e.length||this._emitBeforeChanges(1)?this.length:(this._splice.apply(this,[0,0].concat(e)),this._emitAfterChanges(1),this.length)},t.prototype._createNewInstance=function(e){return new this.constructor(e)},t.prototype._splice=function(e,t){for(var r=this,n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];var i,a,o=this._items,s=this.constructor.prototype.itemType;if(!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._timer=u.schedule(function(){return r._dispatchChange()})),t){if(a=o.splice(e,t),this.hasEventListener("before-remove")){var l=m.acquire();l.target=this,l.cancellable=!0;for(var c=0,p=a.length;c<p;c++)i=a[c],l.reset(i),this.emit("before-remove",l),l.defaultPrevented&&(a.splice(c,1),o.splice(e,0,i),e+=1,--c,--p);m.release(l)}if(this.length=this._items.length,this.hasEventListener("after-remove")){for(i=m.acquire(),i.target=this,i.cancellable=!1,p=a.length,c=0;c<p;c++)i.reset(a[c]),this.emit("after-remove",i);m.release(i)}}if(n&&n.length){if(s){for(c=[],p=0;p<n.length;p++)i=n[p],null==(l=s.ensureType(i))&&null!=i||c.push(l);n=c}if(s=this.hasEventListener("before-add"),c=this.hasEventListener("after-add"),p=e===this.length,s||c){i=m.acquire(),i.target=this,i.cancellable=!0,l=m.acquire(),l.target=this,l.cancellable=!1;for(var d=0,f=n;d<f.length;d++){var h=f[d];s?(i.reset(h),this.emit("before-add",i),i.defaultPrevented||(p?o.push(h):o.splice(e++,0,h),this._set("length",o.length),c&&(l.reset(h),this.emit("after-add",l)))):(p?o.push(h):o.splice(e++,0,h),this._set("length",o.length),l.reset(h),this.emit("after-add",l))}m.release(l),m.release(i)}else p?o.push.apply(o,n):o.splice.apply(o,[e,0].concat(n)),this._set("length",o.length)}return(n&&n.length||a&&a.length)&&this._notifyChangeEvent(n,a),a},t.prototype._emitBeforeChanges=function(e){var t=!1;if(this.hasEventListener("before-changes")){var r=m.acquire();r.target=this,r.cancellable=!0,r.type=e,this.emit("before-changes",r),t=r.defaultPrevented,m.release(r)}return t},t.prototype._emitAfterChanges=function(e){if(this.hasEventListener("after-changes")){var t=m.acquire();t.target=this,t.cancellable=!1,t.type=e,this.emit("after-changes",t),m.release(t)}},t.prototype._notifyChangeEvent=function(e,t){this.hasEventListener("change")&&this._notifications[this._notifications.length-1].changes.push({added:e,removed:t})},t.prototype._dispatchChange=function(){if(this._timer&&(this._timer.remove(),this._timer=null),this._notifications){var e=this._notifications;this._notifications=null;for(var t=function(e){var t=e.changes;g.clear(),v.clear(),b.clear();for(var n=0;n<t.length;n++){var i=t[n],a=i.added,i=i.removed;if(a)if(0===b.size&&0===v.size)for(var s=0,l=a;s<l.length;s++)a=l[s],g.add(a);else for(s=0,l=a;s<l.length;s++)a=l[s],v.has(a)?(b.add(a),v.delete(a)):b.has(a)||g.add(a);if(i)if(0===b.size&&0===g.size)for(s=0;s<i.length;s++)a=i[s],v.add(a);else for(s=0;s<i.length;s++)a=i[s],g.has(a)?g.delete(a):(b.delete(a),v.add(a))}var u=o.acquire();g.forEach(function(e){u.push(e)});var c=o.acquire();v.forEach(function(e){c.push(e)});var p=r._items,d=e.items,f=o.acquire();if(b.forEach(function(e){d.indexOf(e)!==p.indexOf(e)&&f.push(e)}),e.listeners&&(u.length||c.length||f.length))for(t={target:r,added:u,removed:c,moved:f},n=e.listeners.length,a=0;a<n;a++)i=e.listeners[a],i.removed||i.callback.call(r,t);o.release(u),o.release(c),o.release(f)},r=this,n=0;n<e.length;n++)t(e[n]);g.clear(),v.clear(),b.clear()}};var a;return t.ofType=function(e){if(!e)return a;if(w.has(e))return w.get(e);var t;if("function"==typeof e)t=e.prototype.declaredClass;else if(e.base)t=e.base.prototype.declaredClass;else for(var o in e.typeMap){var i=e.typeMap[o].prototype.declaredClass;t=t?t+" | "+i:i}return o=function(e){function o(){return null!==e&&e.apply(this,arguments)||this}return r(o,e),o=n([c.subclass("esri.core.Collection<"+t+">")],o)}(c.declared(a)),i={Type:e,ensureType:"function"==typeof e?p.ensureType(e):p.ensureOneOfType(e)},Object.defineProperty(o.prototype,"itemType",{value:i}),w.set(e,o),o},n([c.property()],t.prototype,"length",void 0),n([c.property()],t.prototype,"items",null),t=a=n([c.subclass("esri.core.Collection")],t)}(c.declared(a.EventedAccessor));return _})},"esri/core/Evented":function(){define("require exports ./tsSupport/declareExtendsHelper ./tsSupport/decorateHelper ./Accessor ./accessorSupport/decorators ./accessorSupport/utils".split(" "),function(e,t,r,n,o,i,a){var s=function(){function e(t){this._emitter=new e.EventEmitter(this),this._emitter=new e.EventEmitter(t&&void 0!==t.target?t.target:this)}return e.prototype.emit=function(e,t){return this._emitter.emit(e,t)},e.prototype.on=function(e,t){return this._emitter.on(e,t)},e.prototype.once=function(e,t){return this._emitter.once(e,t)},e.prototype.hasEventListener=function(e){return this._emitter.hasEventListener(e)},e}();return function(e){var t=function(){function e(e){this.target=e}return e.prototype.clear=function(){this._listenersMap&&this._listenersMap.clear()},e.prototype.emit=function(e,t){var r=this;return!!(e=this._listenersMap&&this._listenersMap.get(e))&&(t=t||{},(!t.target&&this.target||t.target&&!this.target)&&(t.target=this.target),e.slice().forEach(function(e){e.call(r.target,t)}),0<e.length)},e.prototype.on=function(e,t){var r=this;if(Array.isArray(e)){var n=e.map(function(e){return r.on(e,t)});return a.handlesGroup(n)}if(-1<e.indexOf(","))throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");return this._listenersMap||(this._listenersMap=new Map),n=this._listenersMap.get(e)||[],n.push(t),this._listenersMap.set(e,n),{remove:function(){var n=r._listenersMap&&r._listenersMap.get(e)||[];0<=n.indexOf(t)&&n.splice(n.indexOf(t),1)}}},e.prototype.once=function(e,t){var r,n=this;return r=this.on(e,function(e){r.remove(),t.call(n.target,e)})},e.prototype.hasEventListener=function(e){return null!=(e=this._listenersMap&&this._listenersMap.get(e))&&0<e.length},e}();e.EventEmitter=t,e.EventedMixin=function(e){return function(e){function o(){var r=null!==e&&e.apply(this,arguments)||this;return r._emitter=new t(r),r}return r(o,e),o.prototype.emit=function(e,t){return this._emitter.emit(e,t)},o.prototype.on=function(e,t){return this._emitter.on(e,t)},o.prototype.once=function(e,t){return this._emitter.once(e,t)},o.prototype.hasEventListener=function(e){return this._emitter.hasEventListener(e)},o=n([i.subclass("esri.core.Evented")],o)}(i.declared(e))};var l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._emitter=new s.EventEmitter(t),t}return r(t,e),t.prototype.emit=function(e,t){return this._emitter.emit(e,t)},t.prototype.on=function(e,t){return this._emitter.on(e,t)},t.prototype.once=function(e,t){return this._emitter.once(e,t)},t.prototype.hasEventListener=function(e){return this._emitter.hasEventListener(e)},t=n([i.subclass("esri.core.Evented")],t)}(i.declared(o));e.EventedAccessor=l}(s||(s={})),s})},"esri/core/collectionUtils":function(){define(["require","exports","./Collection"],function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.referenceSetter=function(e,t,n){return void 0===n&&(n=r),t||(t=new n),t===e?t:(t.removeAll(),e&&(Array.isArray(e)||"items"in e&&Array.isArray(e.items))?t.addMany(e):e&&t.add(e),t)},t.castForReferenceSetter=function(e){return e}})},"esri/core/Loadable":function(){define("require exports ./tsSupport/declareExtendsHelper ./tsSupport/decorateHelper ./Accessor ./Error ./lang ./Promise ./promiseUtils ./Warning ./accessorSupport/decorators".split(" "),function(e,t,r,n,o,i,a,s,l,u,c){var p=function(e){return e=function(e){function t(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=e.apply(this,t)||this;return n.loadError=null,n.loadStatus="not-loaded",n.loadWarnings=null,n._set("loadWarnings",[]),n.addResolvingPromise(l.create(function(e){var t=n.load.bind(n);n.load=function(r){var o=l.create(function(e,t){l.onAbortOrThrow(r,t),n.destroyed&&t(new i("load:instance-destroyed","Instance is destroyed",{instance:n})),n._promiseProps.when(e,t)});if("not-loaded"===n.loadStatus){n._set("loadStatus","loading");var a=n._loadController=l.createAbortController();t({signal:a.signal}),l.onAbort(a.signal,function(){n._promiseProps.abort()})}return e(),o}})),n.when(function(){n._set("loadStatus","loaded"),n._loadController=null},function(e){n._set("loadStatus","failed"),n._set("loadError",e),n._loadController=null}),n}return r(t,e),Object.defineProperty(t.prototype,"loaded",{get:function(){return"loaded"===this.loadStatus},enumerable:!0,configurable:!0}),t.prototype.load=function(){return null},t.prototype.cancelLoad=function(){return this.isFulfilled()?this:(this._set("loadError",new i("load:cancelled","Cancelled")),this._loadController.abort(),this)},n([c.property({readOnly:!0,dependsOn:["loadStatus"]})],t.prototype,"loaded",null),n([c.property({readOnly:!0})],t.prototype,"loadError",void 0),n([c.property()],t.prototype,"loadStatus",void 0),n([c.property({type:[u],readOnly:!0})],t.prototype,"loadWarnings",void 0),t=n([c.subclass("esri.core.Loadable")],t)}(c.declared(e)),e.prototype["-chains-"]=a.mixin({},o._meta.chains,{load:"after"}),e};return e=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t=n([c.subclass("esri.core.Loadable")],t)}(c.declared(p(s.EsriPromise))),function(e){e.LoadableMixin=p,e.isLoadable=function(e){return!(!e||!e.load)}}(e||(e={})),e})},"esri/core/Promise":function(){define("require exports ./tsSupport/declareExtendsHelper ./tsSupport/decorateHelper ./Accessor ./has ./promiseUtils ./scheduling ./accessorSupport/decorators".split(" "),function(e,t,r,n,o,i,a,s,l){Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e){var t=this;this.instance=e,this._resolver=a.createDeferred(),this._status=void 0,this._resolvingPromises=[],this._resolver.promise.then(function(){t._status=0,t._cleanUp()},function(){t._status=1,t._cleanUp()})}return e.prototype.addResolvingPromise=function(e){this._resolvingPromises.push(e),this._tryResolve()},e.prototype.isResolved=function(){return 0===this._status},e.prototype.isRejected=function(){return 1===this._status},e.prototype.isFulfilled=function(){return null!=this._status},e.prototype.abort=function(){this._resolver.reject(a.createAbortError())},e.prototype.when=function(e,t){return this._resolver.promise.then(e,t)},e.prototype._cleanUp=function(){this._allPromise=this._resolvingPromises=this._allPromise=null},e.prototype._tryResolve=function(){var e=this;if(!this.isFulfilled()){var t=a.createDeferred(),r=this._resolvingPromises.concat([t.promise]),n=this._allPromise=a.all(r);n.then(function(){e.isFulfilled()||e._allPromise!==n||e._resolver.resolve(e.instance)},function(t){e.isFulfilled()||e._allPromise!==n||a.isAbortError(t)||e._resolver.reject(t)}),i("esri-native-promise")?t.resolve():s.schedule(function(){return t.resolve()})}},e}();t.EsriPromiseMixin=function(e){return function(e){function t(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return t=e.apply(this,t)||this,t._promiseProps=new u(t),t.addResolvingPromise(i("esri-native-promise")?a.resolve():a.create(function(e){return s.schedule(e)})),t}return r(t,e),t.prototype.isResolved=function(){return this._promiseProps.isResolved()},t.prototype.isRejected=function(){return this._promiseProps.isRejected()},t.prototype.isFulfilled=function(){return this._promiseProps.isFulfilled()},t.prototype.when=function(e,t){var r=this;return a.create(function(e,t){r._promiseProps.when(e,t)}).then(e,t)},t.prototype.catch=function(e){return this.when(null,e)},t.prototype.addResolvingPromise=function(e){e&&!this._promiseProps.isFulfilled()&&this._promiseProps.addResolvingPromise("_promiseProps"in e?e.when():e)},t=n([l.subclass("esri.core.Promise")],t)}(l.declared(e))},e=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t=n([l.subclass("esri.core.Promise")],t)}(l.declared(t.EsriPromiseMixin(o))),t.EsriPromise=e})},"esri/core/Warning":function(){define(["require","exports","./tsSupport/extendsHelper","./tsSupport/decorateHelper","./Message"],function(e,t,r,n,o){return e=function(e){function t(r,n,o){var i=e.call(this,r,n,o)||this;return i instanceof t?i:new t(r,n,o)}return r(t,e),t}(o),e.prototype.type="warning",e})},"esri/core/loadAll":function(){define("require exports ./tsSupport/generatorHelper ./tsSupport/awaiterHelper ./asyncUtils ./Collection ./Loadable".split(" "),function(e,t,r,n,o,i,a){function s(e,t){return n(this,void 0,void 0,function(){return r(this,function(r){switch(r.label){case 0:return[4,e.load()];case 1:return r.sent(),[2,l(e,t)]}})})}function l(e,t){return n(this,void 0,void 0,function(){var s,l,u,c=this;return r(this,function(p){switch(p.label){case 0:return s=[],l=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(t=0;t<e.length;t++){var r=e[t];r&&(Array.isArray(r)?l.apply(void 0,r):i.isCollection(r)?r.forEach(function(e){return l(e)}):a.isLoadable(r)&&s.push(r))}},t(l),u=null,[4,o.map(s,function(e){return n(c,void 0,void 0,function(){var t;return r(this,function(r){switch(r.label){case 0:return[4,o.result("loadAll"in e&&"function"==typeof e.loadAll?e.loadAll():e.load())];case 1:return t=r.sent(),!1!==t.ok||u||(u=e),[2]}})})})];case 1:if(p.sent(),u)throw u.loadError;return[2,e]}})})}Object.defineProperty(t,"__esModule",{value:!0}),t.loadAll=s,t.loadAllChildren=l,t.default=s})},"esri/core/tsSupport/awaiterHelper":function(){define(["../promiseUtils"],function(e){return function(t,r,n,o){var i=null;return e.create(function(n,a){function s(e){try{u(o.next(e))}catch(e){a(e)}}function l(e){try{u(o.throw(e))}catch(e){a(e)}}function u(t){t.done?(i=e.when(t.value),i.then(n,a)):(i=e.when(t.value),i.then(s,l))}u((o=o.apply(t,r||[])).next())},function(e){i&&i.cancel&&i.cancel(e)})}})},"esri/core/asyncUtils":function(){define(["require","exports","./tsSupport/generatorHelper","./tsSupport/awaiterHelper","./promiseUtils"],function(e,t,r,n,o){Object.defineProperty(t,"__esModule",{value:!0}),t.forEach=function(e,t,r){return o.eachAlways(e.map(function(e,n){return t.apply(r,[e,n])}))},t.map=function(e,t,r){return o.eachAlways(e.map(function(e,n){return t.apply(r,[e,n])})).then(function(e){return e.map(function(e){return e.value})})},t.result=function(e){return e.then(function(e){return{ok:!0,value:e}}).catch(function(e){return{ok:!1,error:e}})},t.assertResult=function(e){if(!0===e.ok)return e.value;throw e.error}})},"esri/core/urlUtils":function(){define("require exports ./tsSupport/assignHelper ../config ../kernel ./Error ./global ./Logger ./string".split(" "),function(e,t,r,n,o,i,a,s,l){function u(e){var t={path:null,query:null},r=new Y(e),n=e.indexOf("?");return null===r.query?t.path=e:(t.path=e.substring(0,n),t.query=c(r.query)),r.fragment&&(t.hash=r.fragment,null===r.query&&(t.path=t.path.substring(0,t.path.length-(r.fragment.length+1)))),t}function c(e){var t={},r=0;for(e=e.split("&");r<e.length;r++){var n=e[r];if(n){var o=n.indexOf("="),i=void 0,a=void 0;0>o?(i=decodeURIComponent(n),a=""):(i=decodeURIComponent(n.slice(0,o)),a=decodeURIComponent(n.slice(o+1))),n=t[i],"string"==typeof n&&(n=t[i]=[n]),Array.isArray(n)?n.push(a):t[i]=a}}return t}function p(e){return e&&"object"==typeof e&&"toJSON"in e&&"function"==typeof e.toJSON}function d(e,t){return e?t&&"function"==typeof t?Object.keys(e).map(function(r){return encodeURIComponent(r)+"="+encodeURIComponent(t(r,e[r]))}).join("&"):Object.keys(e).map(function(r){var n=e[r];if(null==n)return"";var o=encodeURIComponent(r)+"=";return(r=t&&t[r])?o+encodeURIComponent(r(n)):Array.isArray(n)?n.map(function(e){return p(e)?o+encodeURIComponent(JSON.stringify(e)):o+encodeURIComponent(e)}).join("&"):p(n)?o+encodeURIComponent(JSON.stringify(n)):o+encodeURIComponent(n)}).filter(function(e){return e}).join("&"):""}function f(e){var t=e.indexOf("?");return-1!==t?($.path=e.slice(0,t),$.query=e.slice(t+1)):($.path=e,$.query=null),$}function h(e){return e=f(e).path,e&&"/"===e[e.length-1]||(e+="/"),e=L(e,!0),e=e.toLowerCase()}function y(e){var t=V.proxyRules;e=h(e);for(var r=0;r<t.length;r++)if(0===e.indexOf(t[r].urlPrefix))return t[r]}function m(e){e=w(e);var t=e.indexOf("/sharing");return 0<t?e.substring(0,t):e.replace(/\/+$/,"")}function g(e,t,r){return void 0===r&&(r=!1),e=R(e),t=R(t),!(!r&&e.scheme!==t.scheme)&&(e.host.toLowerCase()===t.host.toLowerCase()&&e.port===t.port)}function v(e,r,n){if(void 0===r&&(r=t.appBaseUrl),I(e))return n&&n.preserveProtocolRelative?e:"http"===t.appUrl.scheme&&t.appUrl.authority===_(e).slice(2)?"http:"+e:"https:"+e;if(!E(e)){if(n=S,"/"===e[0]){var o=r.indexOf("//"),o=r.indexOf("/",o+2);r=-1===o?r:r.slice(0,o)}return n(r,e)}return e}function b(e,r,n){if(void 0===r&&(r=t.appBaseUrl),!x(e))return e;var o=w(e),i=o.toLowerCase();if(r=w(r).toLowerCase().replace(/\/+$/,""),(n=n?w(n).toLowerCase().replace(/\/+$/,""):null)&&0!==r.indexOf(n))return e;for(var a=function(e,t,r){return r=e.indexOf(t,r),-1===r?e.length:r},s=a(i,"/",i.indexOf("//")+2),l=-1;i.slice(0,s+1)===r.slice(0,s)+"/"&&(l=s+1,s!==i.length);)s=a(i,"/",s+1);if(-1===l||n&&l<n.length)return e;if(e=o.slice(l),0<(o=r.slice(l-1).replace(/[^\/]+/g,"").length))for(i=0;i<o;i++)e="../"+e;else e="./"+e;return e}function w(e){if(e=e.trim(),e=v(e),/^https?:\/\//i.test(e)){var t=f(e);e=t.path.replace(/\/{2,}/g,"/"),e=e.replace("/","//"),t.query&&(e+="?"+t.query)}return e=e.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2"),e=F(e)}function S(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(e&&e.length){if(t=[],x(e[0])){var r=e[0],n=r.indexOf("//");-1!==n&&(t.push(r.slice(0,n+1)),W.test(e[0])&&(t[0]+="/"),e[0]=r.slice(n+2))}else"/"===e[0][0]&&t.push("");for(e=e.reduce(function(e,t){return t?e.concat(t.split("/")):e},[]),r=0;r<e.length;r++)n=e[r],".."===n&&0<t.length&&".."!==t[t.length-1]?t.pop():(!n&&r===e.length-1||n&&("."!==n||0===t.length))&&t.push(n);return t.join("/")}}function _(e,t){if(void 0===t&&(t=!1),O(e)||C(e))return null;var r=e.indexOf("://");if(-1===r&&I(e))r=2;else{if(-1===r)return null;r+=3}return r=e.indexOf("/",r),-1!==r&&(e=e.slice(0,r)),t&&(e=L(e,!0)),e}function x(e){return I(e)||E(e)}function O(e){return"blob:"===e.slice(0,5)}function C(e){return"data:"===e.slice(0,5)}function M(e){if(!(e=T(e))||!e.isBase64)return null;e=atob(e.data);for(var t=new Uint8Array(e.length),r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t.buffer}function T(e){return(e=e.match(X))?{mediaType:e[1],isBase64:!!e[2],data:e[3]}:null}function P(e){var t=M(e);return t?(e=T(e),new Blob([t],{type:e.mediaType})):null}function I(e){return e&&"/"===e[0]&&"/"===e[1]}function E(e){return z.test(e)}function j(e){return B.test(e)||"http"===t.appUrl.scheme&&I(e)}function k(e){return I(e)?"https:"+e:e.replace(B,"https:")}function A(){return"https"===t.appUrl.scheme}function L(e,t){return void 0===t&&(t=!1),I(e)?e.slice(2):(e=e.replace(z,""),t&&1<e.length&&"/"===e[0]&&"/"===e[1]&&(e=e.slice(2)),e)}function F(e){var r=V.httpsDomains;if(!j(e))return e;var n,o=e.indexOf("/",7);if(n=-1===o?e:e.slice(0,o),n=n.toLowerCase().slice(7),J.test(n)){if(!l.endsWith(n,":80"))return e;n=n.slice(0,-3),e=e.replace(":80","")}return"http"!==t.appUrl.scheme||n!==t.appUrl.authority||Q.test(e)?((A()&&n===t.appUrl.authority||r&&r.some(function(e){return n===e||l.endsWith(n,"."+e)})||A()&&!y(e))&&(e=k(e)),e):e}function N(e,t,r){if(!(t&&r&&e&&x(e)))return e;var n=e.indexOf("//"),o=e.indexOf("/",n+2),i=e.indexOf(":",n+2),o=Math.min(0>o?e.length:o,0>i?e.length:i);return e.slice(n+2,o).toLowerCase()!==t.toLowerCase()?e:(t=e.slice(0,n+2),e=e.slice(o),""+t+r+e)}function R(e){return"string"==typeof e?new Y(v(e)):(e.scheme||(e.scheme=t.appUrl.scheme),e)}function D(e,r){var n=r&&r.url&&r.url.path;return e&&n&&(e=v(e,n,{preserveProtocolRelative:!0})),(r=r&&r.portal)&&!r.isPortal&&r.urlKey&&r.customBaseUrl?(n=r.urlKey+"."+r.customBaseUrl,r=g(t.appUrl,t.appUrl.scheme+"://"+n)?N(e,r.portalHostname,n):N(e,n,r.portalHostname)):r=e,r}function U(e,t){if(!e)return e;!x(e)&&t&&t.blockedRelativeUrls&&t.blockedRelativeUrls.push(e);var r=v(e);if(t){var n=t.verifyItemRelativeUrls&&t.verifyItemRelativeUrls.rootPath||t.url&&t.url.path;n&&(r=b(r,n,n))!==e&&t.verifyItemRelativeUrls&&t.verifyItemRelativeUrls.writtenUrls.push(r)}return e=r,r=(t=t&&t.portal)&&!t.isPortal&&t.urlKey&&t.customBaseUrl?N(e,t.urlKey+"."+t.customBaseUrl,t.portalHostname):e,x(r)&&(r=w(r)),r}function q(e,t,r){e=u(e);var n=e.query||{};return n[t]=String(r),e.path+"?"+d(n)}Object.defineProperty(t,"__esModule",{value:!0});var H=s.getLogger("esri.core.urlUtils"),V=n.request,z=/^\s*[a-z][a-z0-9-+.]*:(?![0-9])/i,B=/^\s*http:/i,G=/^\s*https:/i,W=/^\s*file:/i,J=/:\d+$/,Q=/^https?:\/\/[^\/]+\.arcgis.com\/sharing(\/|$)/i,K=/^(([^:\/?#]+):)?(\/\/([^\/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/,Z=/^((([^\[:]+):)?([^@]+)@)?(\[([^\]]+)\]|([^\[:]*))(:([0-9]+))?$/,Y=function(){function e(e){void 0===e&&(e=""),this.uri=e,this.port=this.host=this.password=this.user=this.fragment=this.query=this.path=this.authority=this.scheme=null,e=this.uri.match(K),this.scheme=e[2]||(e[1]?"":null),this.authority=e[4]||(e[3]?"":null),this.path=e[5],this.query=e[7]||(e[6]?"":null),this.fragment=e[9]||(e[8]?"":null),null!=this.authority&&(e=this.authority.match(Z),this.user=e[3]||null,this.password=e[4]||null,this.host=e[6]||e[7],this.port=e[9]||null)}return e.prototype.toString=function(){return this.uri},e}();t.Url=Y,t.appUrl=new Y(n.applicationUrl),t.trustedServersUrlCache={},t.appBaseUrl=function(){var e=t.appUrl.path,e=e.substring(0,e.lastIndexOf(e.split("/")[e.split("/").length-1]));return t.appUrl.scheme+"://"+t.appUrl.host+(null!=t.appUrl.port?":"+t.appUrl.port:"")+e}(),t.urlToObject=u,t.queryToObject=c,t.objectToQuery=d,t.getProxyUrl=function(e){void 0===e&&(e=!1);var r,n=V.proxyUrl;if("string"==typeof e?(r=e,r=G.test(r)||"https"===t.appUrl.scheme&&I(r),(e=y(e))&&(n=e.proxyUrl)):r=!!e,!n)throw H.warn("esri/config: esriConfig.request.proxyUrl is not set."),new i("urlutils:proxy-not-set","esri/config: esriConfig.request.proxyUrl is not set.");return r&&A()&&(n=k(n)),u(n)},t.addProxy=function(e){var t,n,o=y(e);return o&&(n=f(o.proxyUrl),t=n.path,n=n.query?c(n.query):null),t&&(o=u(e),e=t+"?"+o.path,(t=d(r({},n,o.query)))&&(e=e+"?"+t)),e};var $={path:"",query:""};t.addProxyRule=function(e){e={proxyUrl:e.proxyUrl,urlPrefix:h(e.urlPrefix)};for(var t=V.proxyRules,r=e.urlPrefix,n=t.length,o=0;o<t.length;o++){var i=t[o].urlPrefix;if(0===r.indexOf(i)){if(r.length===i.length)return-1;n=o;break}0===i.indexOf(r)&&(n=o+1)}return t.splice(n,0,e),n},t.getProxyRule=y,t.hasSamePortal=function(e,t){return e=m(e),t=m(t),L(e)===L(t)},t.getInterceptor=function(e){var t=function(t){return null==t||t instanceof RegExp&&t.test(e)||"string"==typeof t&&l.startsWith(e,t)},r=V.interceptors;if(r)for(var n=0;n<r.length;n++){var o=r[n];if(Array.isArray(o.urls)){if(o.urls.some(t))return o}else if(t(o.urls))return o}return null},t.hasSameOrigin=g,t.isTrustedServer=function(e){if("string"==typeof e){if(!x(e))return!0;e=R(e)}if(g(e,t.appUrl))return!0;for(var r=V.trustedServers||[],n=0;n<r.length;n++){var o;o=r[n],t.trustedServersUrlCache[o]||(E(o)||I(o)?t.trustedServersUrlCache[o]=[new Y(v(o))]:t.trustedServersUrlCache[o]=[new Y("http://"+o),new Y("https://"+o)]),o=t.trustedServersUrlCache[o];for(var i=0;i<o.length;i++)if(g(e,o[i]))return!0}return!1},t.makeAbsolute=v,t.makeRelative=b,t.normalize=w,t.join=S,t.getOrigin=_,t.isAbsolute=x,t.isBlobProtocol=O,t.isDataProtocol=C,t.dataToArrayBuffer=M;var X=/^data:(.*?)(;base64)?,(.*)$/;t.dataComponents=T,t.makeData=function(e){return e.isBase64?"data:"+e.mediaType+";base64,"+e.data:"data:"+e.mediaType+","+e.data},t.dataToBlob=P,t.downloadDataAsFile=function(e,t){var r;e:if("download"in(r=document.createElement("a"))){var n=null;if(a.URL&&a.URL.createObjectURL){if(!(n=P(e))){r=!1;break e}n=a.URL.createObjectURL(n)}r.download=t,r.href=n||e,r.style.display="none",document.body.appendChild(r),r.click(),document.body.removeChild(r),n&&a.URL.revokeObjectURL(n),r=void 0}else r=!1;r||window.navigator.msSaveOrOpenBlob&&window.navigator.msSaveOrOpenBlob(P(e),t)},t.isProtocolRelative=I,t.hasProtocol=E,t.toHTTP=function(e){return I(e)?"http:"+e:e.replace(G,"http:")},t.toHTTPS=k,t.isAppHTTPS=A,t.removeFile=function(e){var t=0;if(x(e)){var r=e.indexOf("//");-1!==r&&(t=r+2)}return r=e.lastIndexOf("/"),r<t?e:e.slice(0,r+1)},t.removeTrailingSlash=function(e){return e.replace(/\/+$/,"")},t.changeDomain=N,t.fromJSON=D,t.read=function(e,t,r){return D(e,r)},t.toJSON=U,t.write=function(e,t,r,n){(e=U(e,n))&&(t[r]=e)},t.isSVG=function(e){return ee.test(e)},t.removeQueryParameters=function(e,t){e=u(e);var r=Object.keys(e.query||{});return 0<r.length&&t&&t.warn("removeQueryParameters()","Url query parameters are not supported, the following parameters have been removed: "+r.join(", ")+"."),e.path},t.addQueryParameter=q,t.addQueryParameters=function(e,t){e=u(e);var r,n=e.query||{};for(r in t)n[r]=t[r];return(t=d(n))?e.path+"?"+t:e.path},t.removeQueryParameter=function(e,t){var r=u(e),n=r.path,r=r.query;return r?(delete r[t],(e=d(r))?n+"?"+e:n):e},t.addTokenParameter=function(e){var t=o.id&&o.id.findCredential(e);return t&&t.token?q(e,"token",t.token):e};var ee=/(^data:image\/svg|\.svg$)/i})},"esri/config":function(){define(["require","exports","./core/global"],function(e,t,r){return e={applicationUrl:r.location&&r.location.href,fontsUrl:"https://static.arcgis.com/fonts",geometryService:null,geometryServiceUrl:"https://utility.arcgisonline.com/arcgis/rest/services/Geometry/GeometryServer",geoRSSServiceUrl:"https://utility.arcgis.com/sharing/rss",kmlServiceUrl:"https://utility.arcgis.com/sharing/kml",portalUrl:"https://www.arcgis.com",workers:{loaderConfig:{has:{},paths:{},map:{},packages:[]}},request:{httpsDomains:"arcgis.com arcgisonline.com esrikr.com premiumservices.blackbridge.com esripremium.accuweather.com gbm.digitalglobe.com firstlook.digitalglobe.com msi.digitalglobe.com".split(" "),interceptors:[],maxUrlLength:2e3,proxyRules:[],proxyUrl:null,timeout:6e4,trustedServers:[],useIdentity:!0}},e.request.corsEnabledServers=[],e.request.corsEnabledServers.push=function(){return console.warn("[esri.config]","request.corsEnabledServers is not supported and will be removed in a future release. See http://esriurl.com/cors8664"),0},e})},"esri/kernel":function(){define("require exports dojo/_base/kernel ./core/has ./core/promiseUtils ./support/revision".split(" "),function(e,t,r,n,o,i){Object.defineProperty(t,"__esModule",{value:!0}),t.revision=i.commitHash,function(){var e=r.config,t=e.has&&void 0!==e.has["config-deferredInstrumentation"],o=e.has&&void 0!==e.has["config-useDeferredInstrumentation"];void 0!==e.useDeferredInstrumentation||t||o||(n.add("config-deferredInstrumentation",!1,!0,!0),n.add("config-useDeferredInstrumentation",!1,!0,!0))}(),t.version="4.14",t.workerMessages={request:function(t){return o.create(function(t){e(["./request"],t)}).then(function(e){var r=t.options||{};return r.responseType="array-buffer",e(t.url,r)}).then(function(e){return{result:{data:e.data,ssl:e.ssl},transferList:[e.data]}})}},!n("host-webworker")&&n("esri-console-log-version")&&console.debug("Using ArcGIS API for JavaScript "+t.version+" [Date: "+i.buildDate+", Revision: "+i.commitHash.slice(0,8)+"]")})},"esri/support/revision":function(){define(["require","exports"],function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.buildDate="20200225",t.commitHash="a7c61d146adcb667e94a631c9f2b1f4fe0c6e051"})},"esri/portal/Portal":function(){define("require exports ../core/tsSupport/assignHelper ../core/tsSupport/awaiterHelper ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/generatorHelper ../core/tsSupport/paramHelper dojo/_base/kernel ../config ../kernel ../request ../core/Error ../core/JSONSupport ../core/lang ../core/Loadable ../core/maybe ../core/promiseUtils ../core/accessorSupport/decorators ../core/accessorSupport/ensureType ../geometry/Extent ./PortalQueryParams ./PortalQueryResult ./PortalUser @dojo/framework/shim/Promise".split(" "),function(e,t,r,n,o,i,a,s,l,u,c,p,d,f,h,y,m,g,v,b,w,S,_,x){var O,C={PortalGroup:function(){return g.create(function(t){return e(["./PortalGroup"],t)})},PortalItem:function(){return g.create(function(t){return e(["./PortalItem"],t)})},PortalUser:function(){return g.create(function(t){return e(["./PortalUser"],t)})}};return function(t){function s(e){return e=t.call(this,e)||this,e.access=null,e.allSSL=!1,e.authMode="auto",e.authorizedCrossOriginDomains=null,e.basemapGalleryGroupQuery=null,e.bingKey=null,e.canListApps=!1,e.canListData=!1,e.canListPreProvisionedItems=!1,e.canProvisionDirectPurchase=!1,e.canSearchPublic=!0,e.canShareBingPublic=!1,e.canSharePublic=!1,e.canSignInArcGIS=!1,e.canSignInIDP=!1,e.colorSetsGroupQuery=null,e.commentsEnabled=!1,e.created=null,e.culture=null,e.customBaseUrl=null,e.defaultBasemap=null,e.defaultExtent=null,e.defaultVectorBasemap=null,e.description=null,e.eueiEnabled=!1,e.featuredGroups=null,e.featuredItemsGroupQuery=null,e.galleryTemplatesGroupQuery=null,e.livingAtlasGroupQuery=null,e.hasCategorySchema=!1,e.helperServices=null,e.homePageFeaturedContent=null,e.homePageFeaturedContentCount=null,e.httpPort=null,e.httpsPort=null,e.id=null,e.ipCntryCode=null,e.isPortal=!1,e.isReadOnly=!1,e.layerTemplatesGroupQuery=null,e.maxTokenExpirationMinutes=null,e.modified=null,e.name=null,e.portalHostname=null,e.portalMode=null,e.portalProperties=null,e.region=null,e.rotatorPanels=null,e.showHomePageDescription=!1,e.sourceJSON=null,e.supportsHostedServices=!1,e.symbolSetsGroupQuery=null,e.templatesGroupQuery=null,e.units=null,e.url=u.portalUrl,e.urlKey=null,e.user=null,e.useStandardizedQuery=!1,e.useVectorBasemaps=!1,e.vectorBasemapGalleryGroupQuery=null,e}o(s,t),f=s,s.prototype.normalizeCtorArgs=function(e){return"string"==typeof e?{url:e}:e},s.prototype.destroy=function(){this._esriId_credentialCreateHandle&&(this._esriId_credentialCreateHandle.remove(),this._esriId_credentialCreateHandle=null)},s.prototype.readAuthorizedCrossOriginDomains=function(e){if(e)for(var t=0;t<e.length;t++){var r=e[t];-1===u.request.trustedServers.indexOf(r)&&u.request.trustedServers.push(r)}return e},s.prototype.readDefaultBasemap=function(e){return e?(e=O.fromJSON(e),e.portalItem={portal:this},e):null},s.prototype.readDefaultVectorBasemap=function(e){return e?(e=O.fromJSON(e),e.portalItem={portal:this},e):null},Object.defineProperty(s.prototype,"extraQuery",{get:function(){var e=!(this.user&&this.user.orgId)||this.canSearchPublic;return this.id&&!e?" AND orgid:"+this.id:null},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"isOrganization",{get:function(){return!!this.access},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"restUrl",{get:function(){var e=this.url;if(e)var t=e.indexOf("/sharing"),e=0<t?e.substring(0,t):this.url.replace(/\/+$/,""),e=e+"/sharing/rest";return e},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"thumbnailUrl",{get:function(){var e=this.restUrl,t=this.thumbnail;return e&&t?this._normalizeSSL(e+"/portals/self/resources/"+t):null},enumerable:!0,configurable:!0}),s.prototype.readUrlKey=function(e){return e?e.toLowerCase():e},s.prototype.readUser=function(e){var t=null;return e&&(t=x.fromJSON(e),t.portal=this),t},s.prototype.load=function(t){var r=this,n=g.create(function(t){return e(["../Basemap"],t)}).then(function(e){g.throwIfAborted(t),O=e}).then(function(){return r.sourceJSON?r.sourceJSON:r._fetchSelf(r.authMode,!1,t)}).then(function(e){if(c.id){var t=c.id;r.credential=t.findCredential(r.restUrl),r.credential||r.authMode!==f.AUTH_MODE_AUTO||(r._esriId_credentialCreateHandle=t.on("credential-create",function(){t.findCredential(r.restUrl)&&r._signIn()}))}r.sourceJSON=e,r.read(e)});return this.addResolvingPromise(n),this.when()},s.prototype.createClosestFacilityTask=function(){return n(this,void 0,void 0,function(){var t,r;return a(this,function(n){switch(n.label){case 0:return[4,this.load()];case 1:return n.sent(),t=this._getHelperServiceUrl("closestFacility"),[4,new Promise(function(t,r){e(["../tasks/ClosestFacilityTask"],t,r)})];case 2:return r=n.sent(),[2,new r(t)]}})})},s.prototype.createElevationLayers=function(){return n(this,void 0,void 0,function(){var t,r;return a(this,function(n){switch(n.label){case 0:return[4,this.load()];case 1:return n.sent(),t=this._getHelperService("defaultElevationLayers"),[4,new Promise(function(t,r){e(["../layers/ElevationLayer"],t,r)})];case 2:return r=n.sent(),[2,t?t.map(function(e){return new r({id:e.id,url:e.url})}):[]]}})})},s.prototype.createGeometryService=function(){return n(this,void 0,void 0,function(){var t,r;return a(this,function(n){switch(n.label){case 0:return[4,this.load()];case 1:return n.sent(),t=this._getHelperServiceUrl("geometry"),[4,new Promise(function(t,r){e(["../tasks/GeometryService"],t,r)})];case 2:return r=n.sent(),[2,new r(t)]}})})},s.prototype.createPrintTask=function(){return n(this,void 0,void 0,function(){var t,r;return a(this,function(n){switch(n.label){case 0:return[4,this.load()];case 1:return n.sent(),t=this._getHelperServiceUrl("printTask"),[4,new Promise(function(t,r){e(["../tasks/PrintTask"],t,r)})];case 2:return r=n.sent(),[2,new r(t)]}})})},s.prototype.createRouteTask=function(){return n(this,void 0,void 0,function(){var t,r;return a(this,function(n){switch(n.label){case 0:return[4,this.load()];case 1:return n.sent(),t=this._getHelperServiceUrl("route"),[4,new Promise(function(t,r){e(["../tasks/RouteTask"],t,r)})];case 2:return r=n.sent(),[2,new r(t)]}})})},s.prototype.createServiceAreaTask=function(){return n(this,void 0,void 0,function(){var t,r;return a(this,function(n){switch(n.label){case 0:return[4,this.load()];case 1:return n.sent(),t=this._getHelperServiceUrl("serviceArea"),[4,new Promise(function(t,r){e(["../tasks/ServiceAreaTask"],t,r)})];case 2:return r=n.sent(),[2,new r(t)]}})})},s.prototype.fetchBasemaps=function(e,t){var r=new S;return r.query=e||(this.useVectorBasemaps?this.vectorBasemapGalleryGroupQuery:this.basemapGalleryGroupQuery),r.disableExtraQuery=!0,this.queryGroups(r,t).then(function(e){return r.num=100,r.query='type:"Web Map" -type:"Web Application"',e.total?(e=e.results[0],r.sortField=e.sortField||"name",r.sortOrder=e.sortOrder||"desc",e.queryItems(r,t)):null}).then(function(e){return e&&e.total?e.results.filter(function(e){return"Web Map"===e.type}).map(function(e){return new O({portalItem:e})}):[]})},s.prototype.fetchCategorySchema=function(e){return this.hasCategorySchema?this._request(this.restUrl+"/portals/self/categorySchema",e).then(function(e){return e.categorySchema}):g.isAborted(e)?g.reject(g.createAbortError()):g.resolve([])},s.prototype.fetchFeaturedGroups=function(e){var t=this.featuredGroups,r=new S;if(r.num=100,r.sortField="title",t&&t.length){for(var n=[],o=0;o<t.length;o++){var i=t[o];n.push('(title:"'+i.title+'" AND owner:'+i.owner+")")}return r.query=n.join(" OR "),this.queryGroups(r,e).then(function(e){return e.results})}return g.isAborted(e)?g.reject(g.createAbortError()):g.resolve([])},s.prototype.fetchRegions=function(e){return this._request(this.restUrl+"/portals/regions",r({},e,{query:{culture:this.user&&this.user.culture||this.culture||l.locale}}))},s.getDefault=function(){return f._default&&!f._default.destroyed||(f._default=new f),f._default},s.prototype.queryGroups=function(e,t){return this._queryPortal("/community/groups",e,"PortalGroup",t)},s.prototype.queryItems=function(e,t){return this._queryPortal("/search",e,"PortalItem",t)},s.prototype.queryUsers=function(e,t){return e.sortField||(e.sortField="username"),this._queryPortal("/community/users",e,"PortalUser",t)},s.prototype.toJSON=function(){throw new d("internal:not-yet-implemented","Portal.toJSON is not yet implemented")},s.fromJSON=function(e){if(!e)return null;if(e.declaredClass)throw Error("JSON object is already hydrated");return new f({sourceJSON:e})},s.prototype._getHelperService=function(e){var t=this.helperServices&&this.helperServices[e];if(!t)throw new d("portal:service-not-found",'The `helperServices` do not include an entry named "'+e+'"');return t},s.prototype._getHelperServiceUrl=function(e){var t=this._getHelperService(e);if(!t.url)throw new d("portal:service-url-not-found",'The `helperServices` entry "'+e+'" does not include a `url` value');return t.url},s.prototype._fetchSelf=function(e,t,n){void 0===e&&(e=this.authMode),void 0===t&&(t=!1);var o=this.restUrl+"/portals/self";return e=r({authMode:e,query:{culture:l.locale}},n),"auto"===e.authMode&&(e.authMode="no-prompt"),t&&(e.query.default=!0),this._request(o,e)},s.prototype._queryPortal=function(e,t,n,o){var i=this,a=b.ensureType(S,t),s=function(t){return i._request(i.restUrl+e,r({},a.toRequestOptions(i),o)).then(function(e){var r=a.clone();return r.start=e.nextStart,new _({nextQueryParams:r,queryParams:a,total:e.total,results:f._resultsToTypedArray(t,{portal:i},e,o)})}).then(function(e){return g.all(e.results.map(function(t){return"function"==typeof t.when?t.when():e})).then(function(){return e},function(t){return g.throwIfAbortError(t),e})})};return n&&C[n]?C[n]().then(function(e){return g.throwIfAborted(o),s(e)}):s()},s.prototype._signIn=function(){var e=this;if(this.authMode===f.AUTH_MODE_ANONYMOUS)return g.reject(new d("portal:invalid-auth-mode",'Current "authMode"\' is "'+this.authMode+'"'));if("failed"===this.loadStatus)return g.reject(this.loadError);var t=function(t){return g.resolve().then(function(){return"not-loaded"===e.loadStatus?(t||(e.authMode="immediate"),e.load().then(function(){return null})):"loading"===e.loadStatus?e.load().then(function(){return e.credential?null:(e.credential=t,e._fetchSelf("immediate"))}):e.user&&e.credential===t?null:(e.credential=t,e._fetchSelf("immediate"))}).then(function(t){t&&(e.sourceJSON=t,e.read(t))})};return c.id?c.id.getCredential(this.restUrl).then(function(e){return t(e)}):t(this.credential)},s.prototype._normalizeSSL=function(e){return e.replace(/^http:/i,"https:").replace(":7080",":7443")},s.prototype._normalizeUrl=function(e){var t=this.credential&&this.credential.token;return this._normalizeSSL(t?e+(-1<e.indexOf("?")?"&":"?")+"token="+t:e)},s.prototype._requestToTypedArray=function(t,r,n){var o=this,i=function(e){return o._request(t,r).then(function(t){var r=f._resultsToTypedArray(e,{portal:o},t);return g.all(r.map(function(e){return"function"==typeof e.when?e.when():t})).then(function(){return r},function(){return r})})};return n?g.create(function(t){return e(["./"+n],t)}).then(function(e){return i(e)}):i()},s.prototype._request=function(e,t){void 0===t&&(t={});var n=r({f:"json"},t.query),o=t.authMode,i=t.body,a=t.cacheBust,s=t.method,l=t.responseType;return t={authMode:void 0===o?this.authMode===f.AUTH_MODE_ANONYMOUS?"anonymous":"auto":o,body:void 0===i?null:i,cacheBust:void 0!==a&&a,method:void 0===s?"auto":s,query:n,responseType:void 0===l?"json":l,timeout:0,signal:t.signal},p(this._normalizeSSL(e),t).then(function(e){return e.data})},s._resultsToTypedArray=function(e,t,r,n){if(r){var o=m.isSome(n)?n.signal:null;r=r.listings||r.notifications||r.userInvitations||r.tags||r.items||r.groups||r.comments||r.provisions||r.results||r.relatedItems||r,(e||t)&&(r=r.map(function(r){return r=h.mixin(e?e.fromJSON(r):r,t),"function"==typeof r.load&&r.load(o),r}))}else r=[];return r};var f;return s.AUTH_MODE_ANONYMOUS="anonymous",s.AUTH_MODE_AUTO="auto",s.AUTH_MODE_IMMEDIATE="immediate",i([v.property()],s.prototype,"access",void 0),i([v.property()],s.prototype,"allSSL",void 0),i([v.property()],s.prototype,"authMode",void 0),i([v.property()],s.prototype,"authorizedCrossOriginDomains",void 0),i([v.reader("authorizedCrossOriginDomains")],s.prototype,"readAuthorizedCrossOriginDomains",null),i([v.property()],s.prototype,"basemapGalleryGroupQuery",void 0),i([v.property()],s.prototype,"bingKey",void 0),i([v.property()],s.prototype,"canListApps",void 0),i([v.property()],s.prototype,"canListData",void 0),i([v.property()],s.prototype,"canListPreProvisionedItems",void 0),i([v.property()],s.prototype,"canProvisionDirectPurchase",void 0),i([v.property()],s.prototype,"canSearchPublic",void 0),i([v.property()],s.prototype,"canShareBingPublic",void 0),i([v.property()],s.prototype,"canSharePublic",void 0),i([v.property()],s.prototype,"canSignInArcGIS",void 0),i([v.property()],s.prototype,"canSignInIDP",void 0),i([v.property()],s.prototype,"colorSetsGroupQuery",void 0),i([v.property()],s.prototype,"commentsEnabled",void 0),i([v.property({type:Date})],s.prototype,"created",void 0),i([v.property()],s.prototype,"credential",void 0),i([v.property()],s.prototype,"culture",void 0),i([v.property()],s.prototype,"currentVersion",void 0),i([v.property()],s.prototype,"customBaseUrl",void 0),i([v.property()],s.prototype,"defaultBasemap",void 0),i([v.reader("defaultBasemap")],s.prototype,"readDefaultBasemap",null),i([v.property({type:w})],s.prototype,"defaultExtent",void 0),i([v.property()],s.prototype,"defaultVectorBasemap",void 0),i([v.reader("defaultVectorBasemap")],s.prototype,"readDefaultVectorBasemap",null),i([v.property()],s.prototype,"description",void 0),i([v.property()],s.prototype,"eueiEnabled",void 0),i([v.property({dependsOn:["user","id","canSearchPublic"],readOnly:!0})],s.prototype,"extraQuery",null),i([v.property()],s.prototype,"featuredGroups",void 0),i([v.property()],s.prototype,"featuredItemsGroupQuery",void 0),i([v.property()],s.prototype,"galleryTemplatesGroupQuery",void 0),i([v.property()],s.prototype,"livingAtlasGroupQuery",void 0),i([v.property()],s.prototype,"hasCategorySchema",void 0),i([v.property()],s.prototype,"helpBase",void 0),i([v.property()],s.prototype,"helperServices",void 0),i([v.property()],s.prototype,"helpMap",void 0),i([v.property()],s.prototype,"homePageFeaturedContent",void 0),i([v.property()],s.prototype,"homePageFeaturedContentCount",void 0),i([v.property()],s.prototype,"httpPort",void 0),i([v.property()],s.prototype,"httpsPort",void 0),i([v.property()],s.prototype,"id",void 0),i([v.property()],s.prototype,"ipCntryCode",void 0),i([v.property({dependsOn:["access"],readOnly:!0})],s.prototype,"isOrganization",null),i([v.property()],s.prototype,"isPortal",void 0),i([v.property()],s.prototype,"isReadOnly",void 0),i([v.property()],s.prototype,"layerTemplatesGroupQuery",void 0),i([v.property()],s.prototype,"maxTokenExpirationMinutes",void 0),i([v.property({type:Date})],s.prototype,"modified",void 0),i([v.property()],s.prototype,"name",void 0),i([v.property()],s.prototype,"portalHostname",void 0),i([v.property()],s.prototype,"portalMode",void 0),i([v.property()],s.prototype,"portalProperties",void 0),i([v.property()],s.prototype,"region",void 0),i([v.property({dependsOn:["url"],readOnly:!0})],s.prototype,"restUrl",null),i([v.property()],s.prototype,"rotatorPanels",void 0),i([v.property()],s.prototype,"showHomePageDescription",void 0),i([v.property()],s.prototype,"sourceJSON",void 0),i([v.property()],s.prototype,"staticImagesUrl",void 0),i([v.property()],s.prototype,"stylesGroupQuery",void 0),i([v.property()],s.prototype,"supportsHostedServices",void 0),i([v.property()],s.prototype,"symbolSetsGroupQuery",void 0),i([v.property()],s.prototype,"templatesGroupQuery",void 0),i([v.property()],s.prototype,"thumbnail",void 0),i([v.property({dependsOn:["restUrl","thumbnail"],readOnly:!0})],s.prototype,"thumbnailUrl",null),i([v.property()],s.prototype,"units",void 0),i([v.property()],s.prototype,"url",void 0),i([v.property()],s.prototype,"urlKey",void 0),i([v.reader("urlKey")],s.prototype,"readUrlKey",null),i([v.property()],s.prototype,"user",void 0),i([v.reader("user")],s.prototype,"readUser",null),i([v.property()],s.prototype,"useStandardizedQuery",void 0),i([v.property()],s.prototype,"useVectorBasemaps",void 0),i([v.property()],s.prototype,"vectorBasemapGalleryGroupQuery",void 0),s=f=i([v.subclass("esri.portal.Portal")],s)}(v.declared(f.JSONSupportMixin(y)))})},"esri/core/tsSupport/paramHelper":function(){define([],function(){return function(e,t){return function(r,n){t(r,n,e)}}})},"esri/request":function(){define("require exports ./core/tsSupport/assignHelper ./core/tsSupport/awaiterHelper ./core/tsSupport/generatorHelper ./config ./kernel ./core/Error ./core/global ./core/has ./core/lang ./core/promiseUtils ./core/string ./core/urlUtils @dojo/framework/shim/Promise".split(" "),function(e,t,r,n,o,i,a,s,l,u,c,p,d,f){function h(e,t){var r=p.createAbortController();return p.create(function(n,o){y(r.signal,e,t).then(n).catch(o)},function(){r.abort()})}function y(e,t,a){return n(this,void 0,void 0,function(){var n,s,l,c,d,h,y,m;return o(this,function(o){switch(o.label){case 0:return n=f.isDataProtocol(t),(s=f.isBlobProtocol(t))||n||(t=f.normalize(t)),l={url:t,requestOptions:r({},a)},(c=f.getInterceptor(t))?[4,C(c,l)]:[3,2];case 1:if(null!=(d=o.sent()))return[2,{data:d,getHeader:N,requestOptions:l.requestOptions,url:l.url}];c.after||c.error||(c=null),o.label=2;case 2:if(t=l.url,a=l.requestOptions,"image"===a.responseType){if(u("host-webworker"))throw b("request:invalid-parameters",Error("responseType 'image' is not supported in Web Workers or Node environment"),l)}else if(n)throw b("request:invalid-parameters",Error("Data URLs are not supported for responseType = "+a.responseType),l);if("head"===a.method){if(a.body)throw b("request:invalid-parameters",Error("body parameter cannot be set when method is 'head'"),l);if(n||s)throw b("request:invalid-parameters",Error("data and blob URLs are not supported for method 'head'"),l)}return[4,w()];case 3:return o.sent(),j?[2,j.execute(t,a)]:(h=p.createAbortController(),p.onAbort(e,function(){return h.abort()}),p.onAbort(a,function(){return h.abort()}),y={controller:h,credential:null,credentialToken:null,fetchOptions:null,hasToken:!1,interceptor:c,params:l,redoRequest:!1,useIdentity:i.request.useIdentity,useProxy:!1,useSSL:!1,withCredentials:!1},[4,P(y)]);case 4:return m=o.sent(),c&&c.after&&c.after(m),[2,m]}})})}function m(e){f.isBlobProtocol(e)||f.isDataProtocol(e)||(e=f.getOrigin(e))&&-1===h._corsServers.indexOf(e)&&h._corsServers.push(e)}function g(e){return!(e=f.getOrigin(e))||d.endsWith(e,".arcgis.com")||-1!==h._corsServers.indexOf(e)||f.isTrustedServer(e)}function v(){var e;try{e=new DOMException("Aborted","AbortError")}catch(t){e=Error("Aborted"),e.name="AbortError"}return e}function b(e,t,r,n){var o="Error",i={url:r.url,requestOptions:r.requestOptions,getHeader:N,ssl:!1};if(t instanceof s)return t.details?(t.details=c.clone(t.details),t.details.url=r.url,t.details.requestOptions=r.requestOptions):t.details=i,t;if(t){r=n&&function(e){return n.headers.get(e)};var a=n&&n.status,l=t.message;l&&(o=l),r&&(i.getHeader=r),i.httpStatus=(null!=t.httpCode?t.httpCode:t.code)||a||0,i.subCode=t.subcode,i.messageCode=t.messageCode,i.messages="string"==typeof t.details?[t.details]:t.details}return e=new s(e,o,i),t&&"cancel"===t.dojoType&&(e.dojoType="cancel"),e}function w(){return n(this,void 0,void 0,function(){var t;return o(this,function(r){switch(r.label){case 0:return u("host-webworker")?j?[3,2]:[4,new Promise(function(t,r){e(["./core/workers/request"],t,r)})]:[3,3];case 1:j=r.sent(),r.label=2;case 2:return[3,6];case 3:return h._abortableFetch?[3,6]:!u("esri-abortable-fetch")||!u("esri-native-promise")&&(13>u("safari")||13>u("ios"))?[3,4]:(h._abortableFetch=l.fetch.bind(l),[3,6]);case 4:return t=h,[4,new Promise(function(t,r){e(["whatwg-fetch"],t,r)})];case 5:t._abortableFetch=r.sent().fetch,r.label=6;case 6:return[2]}})})}function S(){return n(this,void 0,void 0,function(){return o(this,function(t){switch(t.label){case 0:return a.id?[3,2]:[4,new Promise(function(t,r){e(["./identity/IdentityManager"],t,r)})];case 1:t.sent(),t.label=2;case 2:return[2]}})})}function _(e){return n(this,void 0,void 0,function(){var t,r,n,i,s,u,c,d;return o(this,function(o){switch(o.label){case 0:return t=e.params.url,(r=e.params.requestOptions,n=e.controller.signal,i=r.body,c=u=s=null,k&&"HTMLFormElement"in l&&(i instanceof FormData?s=i:i instanceof HTMLFormElement&&(u=i,s=new FormData(u))),"string"==typeof i&&(c=i),e.fetchOptions={cache:r.cacheBust&&!h._abortableFetch.polyfill?"no-cache":"default",credentials:"same-origin",headers:r.headers||{},method:"head"===r.method?"HEAD":"GET",mode:"cors",redirect:"follow",signal:n},(s||c)&&(e.fetchOptions.body=s||c),"anonymous"===r.authMode&&(e.useIdentity=!1),e.hasToken=!!(/token=/i.test(t)||r.query&&r.query.token||s&&s.get&&s.get("token")||u&&u.elements.token),!e.useIdentity||e.hasToken||e.credentialToken||x(t)||p.isAborted(n))?[3,11]:(d=void 0,"immediate"!==r.authMode?[3,3]:[4,S()]);case 1:return o.sent(),[4,a.id.getCredential(t,{signal:n})];case 2:return d=o.sent(),e.credential=d,[3,10];case 3:return"no-prompt"!==r.authMode?[3,9]:[4,S()];case 4:o.sent(),o.label=5;case 5:return o.trys.push([5,7,,8]),[4,a.id.getCredential(t,{prompt:!1,signal:n})];case 6:return d=o.sent(),e.credential=d,[3,8];case 7:return o.sent(),[3,8];case 8:return[3,10];case 9:a.id&&(d=a.id.findCredential(t)),o.label=10;case 10:d&&(e.credentialToken=d.token,e.useSSL=!!d.ssl),o.label=11;case 11:return[2]}})})}function x(e){return F.some(function(t){return t.test(e)})}function O(e){return n(this,void 0,void 0,function(){var t,n,s,l,c,d,y,v,w,S,_,x,O,C,P,I,j,A,L,F,N,R,D;return o(this,function(o){switch(o.label){case 0:if(t=e.params.url,n=e.params.requestOptions,s=e.fetchOptions,l=f.isBlobProtocol(t)||f.isDataProtocol(t),c=n.responseType||"json",d=l?0:null!=n.timeout?n.timeout:i.request.timeout,y=!1,!l){if(e.useSSL&&(t=f.toHTTPS(t)),n.cacheBust&&"default"===s.cache&&(t=f.addQueryParameter(t,"request.preventCache",Date.now())),v=r({},n.query),e.credentialToken&&(v.token=e.credentialToken),w=f.objectToQuery(v),u("esri-url-encodes-apostrophe")&&(w=w.replace(/'/g,"%27")),S=t.length+1+w.length,_=void 0,y="post"===n.method||!!n.body||S>i.request.maxUrlLength,(x=n.useProxy||!!f.getProxyRule(t))&&(O=f.getProxyUrl(t),_=O.path,!y&&_.length+1+S>i.request.maxUrlLength&&(y=!0),O.query&&(v=r({},O.query,v))),"HEAD"===s.method&&(y||x)){if(y){if(S>i.request.maxUrlLength)throw b("request:invalid-parameters",Error("URL exceeds maximum length"),e.params);throw b("request:invalid-parameters",Error("cannot use POST request when method is 'head'"),e.params)}if(x)throw b("request:invalid-parameters",Error("cannot use proxy when method is 'head'"),e.params)}y?(s.method="POST",n.body?t=f.addQueryParameters(t,v):(s.body=f.objectToQuery(v),s.headers["Content-Type"]="application/x-www-form-urlencoded")):t=f.addQueryParameters(t,v),x&&(e.useProxy=!0,t=_+"?"+t),v.token&&k&&s.body instanceof FormData&&(C=s.body,C.set?C.set("token",v.token):C.append("token",v.token)),n.hasOwnProperty("withCredentials")?e.withCredentials=n.withCredentials:f.isTrustedServer(t)?e.withCredentials=!0:a.id&&(P=a.id.findServerInfo(t))&&P.webTierAuth&&(e.withCredentials=!0),e.withCredentials&&(s.credentials="include")}I=0,j=!1,0<d&&(I=setTimeout(function(){j=!0,e.controller.abort()},d)),o.label=1;case 1:return o.trys.push([1,18,19,20]),"image"!==n.responseType||"default"!==s.cache||"GET"!==s.method||y||M(n.headers)||!l&&!e.useProxy&&i.request.proxyUrl&&!g(t)?[3,3]:[4,E(t,e)];case 2:return L=o.sent(),[3,17];case 3:return[4,h._abortableFetch(t,s)];case 4:if(A=o.sent(),e.useProxy||m(t),!A.ok||"HEAD"===s.method)return[3,17];switch(F=c){case"array-buffer":return[3,5];case"blob":case"image":return[3,7]}return[3,9];case 5:return[4,A.arrayBuffer()];case 6:return L=o.sent(),[3,11];case 7:return[4,A.blob()];case 8:return L=o.sent(),[3,11];case 9:return[4,A.text()];case 10:return L=o.sent(),[3,11];case 11:if(I&&(clearTimeout(I),I=0),"json"===c||"xml"===c||"document"===c)if(L)switch(c){case"json":L=JSON.parse(L);break;case"xml":L=T(L,"application/xml");break;case"document":L=T(L,"text/html")}else L=null;if(N=A.headers.get("Content-Type"),!/application\/json|text\/plain/i.test(N)||!(L instanceof ArrayBuffer&&750>=L.byteLength||L instanceof Blob&&750>=L.size))return[3,15];o.label=12;case 12:return o.trys.push([12,14,,15]),[4,new Response(L).json()];case 13:return R=o.sent(),R.error&&(L=R),[3,15];case 14:return o.sent(),[3,15];case 15:return"image"===c&&L instanceof Blob?[4,E(URL.createObjectURL(L),e,!0)]:[3,17];case 16:L=o.sent(),o.label=17;case 17:return[3,20];case 18:if(D=o.sent(),"AbortError"===D.name){if(j)throw Error("Timeout exceeded");throw p.createAbortError("Request canceled")}if(!(!A&&D instanceof TypeError&&i.request.proxyUrl)||n.body||"post"===n.method||"head"===n.method||e.useProxy)throw D;return e.redoRequest=!0,f.addProxyRule({proxyUrl:i.request.proxyUrl,urlPrefix:f.removeFile(f.urlToObject(t).path)}),[3,20];case 19:return I&&clearTimeout(I),[7];case 20:return[2,[A,L]]}})})}function C(e,t){return n(this,void 0,void 0,function(){var n,i,a;return o(this,function(o){switch(o.label){case 0:if(null!=e.responseData)return[2,e.responseData];if(e.headers&&(t.requestOptions.headers=r({},t.requestOptions.headers,e.headers)),e.query&&(t.requestOptions.query=r({},t.requestOptions.query,e.query)),!e.before)return[3,5];i=n=void 0,o.label=1;case 1:return o.trys.push([1,3,,4]),[4,e.before(t)];case 2:return i=o.sent(),[3,4];case 3:return a=o.sent(),n=b("request:interceptor",a,t),[3,4];case 4:if((i instanceof Error||i instanceof s)&&(n=b("request:interceptor",i,t)),n)throw e.error&&e.error(n),n;return[2,i];case 5:return[2]}})})}function M(e){if(e)for(var t=0,r=Object.getOwnPropertyNames(e);t<r.length;t++)if(e[r[t]])return!0;return!1}function T(e,t){var r;try{r=(new DOMParser).parseFromString(e,t)}catch(e){}if(!r||r.getElementsByTagName("parsererror").length)throw new SyntaxError("XML Parse error");return r}function P(e){return n(this,void 0,void 0,function(){var t,r,n,s,l,u,c,p,d,h,y;return o(this,function(o){switch(o.label){case 0:return[4,_(e)];case 1:o.sent(),o.label=2;case 2:o.trys.push([2,8,,9]),o.label=3;case 3:return[4,O(e)];case 4:t=o.sent(),r=t[0],n=t[1],o.label=5;case 5:return[4,I(e,r,n)];case 6:if(!o.sent())return[3,3];o.label=7;case 7:return[3,9];case 8:throw s=o.sent(),l=b("request:server",s,e.params,r),l.details.ssl=e.useSSL,e.interceptor&&e.interceptor.error&&e.interceptor.error(l),l;case 9:return u=e.params.url,/\/sharing\/rest\/(accounts|portals)\/self/i.test(u)&&!e.hasToken&&!e.credentialToken&&n&&n.user&&n.user.username&&!f.isTrustedServer(u)&&(c=f.getOrigin(u,!0))&&i.request.trustedServers.push(c),(p=e.credential)&&a.id&&(h=(d=a.id.findServerInfo(p.server))&&d.owningSystemUrl)&&(h=h.replace(/\/?$/,"/sharing"),(y=a.id.findCredential(h,p.userId))&&-1===a.id._getIdenticalSvcIdx(h,y)&&y.resources.unshift(h)),[2,{data:n,getHeader:r?function(e){return r.headers.get(e)}:N,requestOptions:e.params.requestOptions,ssl:e.useSSL,url:e.params.url}]}})})}function I(e,t,r){return n(this,void 0,void 0,function(){var n,i,s,l,u,p,d;return o(this,function(o){switch(o.label){case 0:if(e.redoRequest)return e.redoRequest=!1,[2,!1];if(!t)return[2,!0];if(!t.ok)throw Error("Unable to load "+t.url+" status: "+t.status);return r&&r.error&&(n=c.mixin(Error(),r.error)),n&&(i=Number(n.code),s=n.hasOwnProperty("subcode")?Number(n.subcode):null,l=(l=n.messageCode)&&l.toUpperCase()),u=e.params.requestOptions.authMode,403===i&&(4===s||n.message&&-1<n.message.toLowerCase().indexOf("ssl")&&-1===n.message.toLowerCase().indexOf("permission"))?e.useSSL?[3,6]:(e.useSSL=!0,[2,!1]):[3,1];case 1:return!e.useIdentity||"no-prompt"===u&&498!==i||-1===A.indexOf(i)||x(e.params.url)||!(403!==i||-1===L.indexOf(l)&&(null==s||2===s&&e.credentialToken))?[3,6]:[4,S()];case 2:o.sent(),o.label=3;case 3:return o.trys.push([3,5,,6]),[4,a.id.getCredential(e.params.url,{error:b("request:server",n,e.params),prompt:"no-prompt"!==u,signal:e.controller.signal,token:e.credentialToken})];case 4:return p=o.sent(),e.credential=p,e.credentialToken=p.token,e.useSSL=e.useSSL||p.ssl,[2,!1];case 5:return d=o.sent(),"no-prompt"===u?(e.credential=null,e.credentialToken=null,[2,!1]):(n=d,[3,6]);case 6:if(n)throw n;return[2,!0]}})})}function E(e,t,r){return void 0===r&&(r=!1),p.create(function(n,o){var i=t.controller.signal;if(p.isAborted(i))throw v();var a=new Image;a.crossOrigin=t.withCredentials?"use-credentials":"anonymous";var s=function(){d(),o(Error("Unable to load "+e))},l=function(){var e=a;d(),n(e)},c=function(){if(a){var e=a;d(),e.src="",o(v())}},d=function(){u("esri-image-decode")||(a.removeEventListener("error",s),a.removeEventListener("load",l)),a=l=s=null,i.removeEventListener("abort",c),c=null,r&&URL.revokeObjectURL(e)};a.alt="",a.src=e,i.addEventListener("abort",c),u("esri-image-decode")?a.decode().then(l,s):(a.addEventListener("error",s),a.addEventListener("load",l))})}var j,k="FormData"in l,A=[499,498,403,401],L=["COM_0056","COM_0057","SB_0008"],F=[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],N=function(){return null};return h._abortableFetch=null,h._corsServers=["https://server.arcgisonline.com","https://services.arcgisonline.com"],h})},"esri/portal/PortalQueryParams":function(){define("require exports ../core/tsSupport/assignHelper ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Accessor ../core/jsonMap ../core/lang ../core/accessorSupport/decorators ../geometry/Extent ../geometry/SpatialReference ../geometry/support/webMercatorUtils".split(" "),function(e,t,r,n,o,i,a,s,l,u,c,p){var d=new a.default({avgRating:"avg-rating",numRatings:"num-ratings",numComments:"num-comments",numViews:"num-views"});return function(e){function t(t){return t=e.call(this,t)||this,t.categories=null,t.disableExtraQuery=!1,t.extent=null,t.num=10,t.query=null,t.sortField=null,t.start=1,t}n(t,e),i=t,Object.defineProperty(t.prototype,"sortOrder",{get:function(){return this._get("sortOrder")||"asc"},set:function(e){"asc"!==e&&"desc"!==e||this._set("sortOrder",e)},enumerable:!0,configurable:!0}),t.prototype.clone=function(){return new i({categories:this.categories?s.clone(this.categories):null,disableExtraQuery:this.disableExtraQuery,extent:this.extent?this.extent.clone():null,num:this.num,query:this.query,sortField:this.sortField,sortOrder:this.sortOrder,start:this.start})},t.prototype.toRequestOptions=function(e,t){var n;this.categories&&(n=this.categories.map(function(e){return Array.isArray(e)?JSON.stringify(e):e}));var o;if(this.extent){var i=p.project(this.extent,c.WGS84);i&&(o=i.xmin+","+i.ymin+","+i.xmax+","+i.ymax)}return i=this.query,!this.disableExtraQuery&&e.extraQuery&&(i="("+i+")"+e.extraQuery),e={categories:n,bbox:o,q:i,num:this.num,sortField:null,sortOrder:null,start:this.start},this.sortField&&(e.sortField=d.toJSON(this.sortField),e.sortOrder=this.sortOrder),{query:r({},t,e)}};var i;return o([l.property()],t.prototype,"categories",void 0),o([l.property()],t.prototype,"disableExtraQuery",void 0),o([l.property({type:u})],t.prototype,"extent",void 0),o([l.property()],t.prototype,"num",void 0),o([l.property()],t.prototype,"query",void 0),o([l.property()],t.prototype,"sortField",void 0),o([l.property()],t.prototype,"sortOrder",null),o([l.property()],t.prototype,"start",void 0),t=i=o([l.subclass("esri.portal.PortalQueryParams")],t)}(l.declared(i))})},"esri/portal/PortalQueryResult":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Accessor ../core/accessorSupport/decorators".split(" "),function(e,t,r,n,o,i){return function(e){function t(t){return t=e.call(this,t)||this,t.nextQueryParams=null,t.queryParams=null,t.results=null,t.total=null,t}return r(t,e),n([i.property()],t.prototype,"nextQueryParams",void 0),n([i.property()],t.prototype,"queryParams",void 0),n([i.property()],t.prototype,"results",void 0),n([i.property()],t.prototype,"total",void 0),t=n([i.subclass("esri.portal.PortalQueryResult")],t)}(i.declared(o))})},"esri/portal/PortalUser":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Error ../core/JSONSupport ../core/promiseUtils ../core/accessorSupport/decorators ./PortalFolder ./PortalGroup".split(" "),function(e,t,r,n,o,i,a,s,l,u){return function(t){function i(){var e=t.call(this)||this;return e.access=null,e.created=null,e.culture=null,e.description=null,e.email=null,e.fullName=null,e.modified=null,e.orgId=null,e.portal=null,e.preferredView=null,e.privileges=null,e.region=null,e.role=null,e.roleId=null,e.sourceJSON=null,e.units=null,e.username=null,e.userType=null,e}r(i,t),c=i,Object.defineProperty(i.prototype,"thumbnailUrl",{get:function(){var e=this.url,t=this.thumbnail;return e&&t?this.portal._normalizeUrl(e+"/info/"+t+"?f=json"):null},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"userContentUrl",{get:function(){var e=this.get("portal.restUrl");return e?e+"/content/users/"+this.username:null},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"url",{get:function(){var e=this.get("portal.restUrl");return e?e+"/community/users/"+this.username:null},enumerable:!0,configurable:!0}),i.prototype.addItem=function(e){var t=this,r=e&&e.item,n=e&&e.data;e=e&&e.folder;var o={method:"post"};return r&&(o.query=r.createPostQuery(),null!=n&&("string"==typeof n?o.query.text=n:"object"==typeof n&&(o.query.text=JSON.stringify(n)))),n=this.userContentUrl,e&&(n+="/"+("string"==typeof e?e:e.id)),this.portal._request(n+"/addItem",o).then(function(e){return r.id=e.id,r.portal=t.portal,r.loaded?r.reload():r.load()})},i.prototype.deleteItem=function(e){var t=this.userContentUrl;return e.ownerFolder&&(t+="/"+e.ownerFolder),this.portal._request(t+"/items/"+e.id+"/delete",{method:"post"}).then(function(){e.id=null,e.portal=null})},i.prototype.deleteItems=function(e){var t=this.userContentUrl+"/deleteItems",r=e.map(function(e){return e.id});return r.length?(r={method:"post",query:{items:r.join(",")}},this.portal._request(t,r).then(function(){e.forEach(function(e){e.id=null,e.portal=null})})):a.resolve(void 0)},i.prototype.fetchFolders=function(){var e=this;return this.portal._request(this.userContentUrl,{query:{num:1}}).then(function(t){return t&&t.folders?t.folders.map(function(t){return t=l.fromJSON(t),t.portal=e.portal,t}):[]})},i.prototype.fetchGroups=function(){var e=this;return this.portal._request(this.url).then(function(t){return t&&t.groups?t.groups.map(function(t){return t=u.fromJSON(t),t.portal=e.portal,t}):[]})},i.prototype.fetchItems=function(t){var r=this;t||(t={});var n=this.userContentUrl;t.folder&&(n+="/"+t.folder.id);var o;return a.create(function(t){return e(["./PortalItem"],t)}).then(function(e){return o=e,r.portal._request(n,{query:{folders:!1,num:t.num||10,start:t.start||1,sortField:t.sortField||"created",sortOrder:t.sortOrder||"asc"}})}).then(function(e){var t;return e&&e.items?(t=e.items.map(function(e){return e=o.fromJSON(e),e.portal=r.portal,e}),a.all(t.map(function(e){return e.load()})).catch(function(e){return e}).then(function(){return{items:t,nextStart:e.nextStart,total:e.total}})):{items:[],nextStart:-1,total:0}})},i.prototype.fetchTags=function(){return this.portal._request(this.url+"/tags").then(function(e){return e.tags})},i.prototype.getThumbnailUrl=function(e){var t=this.thumbnailUrl;return t&&e&&(t+="&w="+e),t},i.prototype.queryFavorites=function(e){return this.favGroupId?(this._favGroup||(this._favGroup=new u({id:this.favGroupId,portal:this.portal})),this._favGroup.queryItems(e)):a.reject(new o("internal:unknown","Unknown internal error",{internalError:"Unknown favGroupId"}))},i.prototype.toJSON=function(){throw new o("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")},i.fromJSON=function(e){if(!e)return null;if(e.declaredClass)throw Error("JSON object is already hydrated");var t=new c;return t.sourceJSON=e,t.read(e),t};var c;return n([s.property()],i.prototype,"access",void 0),n([s.property({type:Date})],i.prototype,"created",void 0),n([s.property()],i.prototype,"culture",void 0),n([s.property()],i.prototype,"description",void 0),n([s.property()],i.prototype,"email",void 0),n([s.property()],i.prototype,"favGroupId",void 0),n([s.property()],i.prototype,"fullName",void 0),n([s.property({type:Date})],i.prototype,"modified",void 0),n([s.property()],i.prototype,"orgId",void 0),n([s.property()],i.prototype,"portal",void 0),n([s.property()],i.prototype,"preferredView",void 0),n([s.property()],i.prototype,"privileges",void 0),n([s.property()],i.prototype,"region",void 0),n([s.property()],i.prototype,"role",void 0),n([s.property()],i.prototype,"roleId",void 0),n([s.property()],i.prototype,"sourceJSON",void 0),n([s.property()],i.prototype,"thumbnail",void 0),n([s.property({dependsOn:["url","thumbnail","portal.credential.token"],readOnly:!0})],i.prototype,"thumbnailUrl",null),n([s.property()],i.prototype,"units",void 0),n([s.property({dependsOn:["portal.restUrl"],readOnly:!0})],i.prototype,"userContentUrl",null),n([s.property({dependsOn:["portal.restUrl"],readOnly:!0})],i.prototype,"url",null),n([s.property()],i.prototype,"username",void 0),n([s.property()],i.prototype,"userType",void 0),i=c=n([s.subclass("esri.portal.PortalUser")],i)}(s.declared(i.JSONSupport))})},"esri/portal/PortalFolder":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Error ../core/JSONSupport ../core/accessorSupport/decorators".split(" "),function(e,t,r,n,o,i,a){return function(e){function t(t){return t=e.call(this,t)||this,t.created=null,t.id=null,t.portal=null,t.title=null,t.username=null,t}return r(t,e),Object.defineProperty(t.prototype,"url",{get:function(){var e=this.get("portal.restUrl");return e?e+"/content/users/"+this.username+"/"+this.id:null},enumerable:!0,configurable:!0}),t.prototype.toJSON=function(){throw new o("internal:not-yet-implemented","PortalFolder.toJSON is not yet implemented")},n([a.property({type:Date})],t.prototype,"created",void 0),n([a.property()],t.prototype,"id",void 0),n([a.property()],t.prototype,"portal",void 0),n([a.property()],t.prototype,"title",void 0),n([a.property({dependsOn:["portal.restUrl"],readOnly:!0})],t.prototype,"url",null),n([a.property()],t.prototype,"username",void 0),t=n([a.subclass("esri.portal.PortalFolder")],t)}(a.declared(i.JSONSupport))})},"esri/portal/PortalGroup":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/paramHelper ../core/Error ../core/JSONSupport ../core/accessorSupport/decorators ../core/accessorSupport/ensureType ./PortalQueryParams".split(" "),function(e,t,r,n,o,i,a,s,l,u){return function(e){function t(t){return t=e.call(this,t)||this,t.access=null,t.created=null,t.description=null,t.id=null,t.isInvitationOnly=!1,t.modified=null,t.owner=null,t.portal=null,t.snippet=null,t.sortField=null,t.sortOrder=null,t.tags=null,t.title=null,t}return r(t,e),Object.defineProperty(t.prototype,"thumbnailUrl",{get:function(){var e=this.url,t=this.thumbnail;return e&&t?this.portal._normalizeUrl(e+"/info/"+t+"?f=json"):null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"url",{get:function(){var e=this.get("portal.restUrl");return e?e+"/community/groups/"+this.id:null},enumerable:!0,configurable:!0}),t.prototype.fetchCategorySchema=function(e){var t=this;return this.portal._request(this.url+"/categorySchema",e).then(function(r){return r=r.categorySchema||[],r.some(function(e){return"contentCategorySetsGroupQuery.LivingAtlas"===e.source})?t._fetchCategorySchemaSet("LivingAtlas",e):r})},t.prototype.fetchMembers=function(e){return this.portal._request(this.url+"/users",e)},t.prototype.getThumbnailUrl=function(e){var t=this.thumbnailUrl;return t&&e&&(t+="&w="+e),t},t.prototype.toJSON=function(){throw new i("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")},t.prototype.queryItems=function(e,t){return e=l.ensureType(u,e),5<parseFloat(this.portal.currentVersion)?(e=e||new u,this.portal._queryPortal("/content/groups/"+this.id+"/search",e,"PortalItem",t)):(e=e?e.clone():new u,e.query="group:"+this.id+(e.query?" "+e.query:""),this.portal.queryItems(e,t))},t.prototype._fetchCategorySchemaSet=function(e,t){var r=this;return this.portal._fetchSelf(this.portal.authMode,!0,t).then(function(e){if(e=e.contentCategorySetsGroupQuery){var n=new u;return n.disableExtraQuery=!0,n.num=1,n.query=e,r.portal.queryGroups(n,t)}throw new i("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery value not found")}).then(function(r){if(r.total){r=r.results[0];var n=new u;return n.num=1,n.query='typekeywords:"'+e+'"',r.queryItems(n,t)}throw new i("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery group not found")}).then(function(e){return e.total?e.results[0].fetchData("json",t).then(function(e){return(e=e&&e.categorySchema)&&e.length?e:[]}):[]})},n([s.property()],t.prototype,"access",void 0),n([s.property({type:Date})],t.prototype,"created",void 0),n([s.property()],t.prototype,"description",void 0),n([s.property()],t.prototype,"id",void 0),n([s.property()],t.prototype,"isInvitationOnly",void 0),n([s.property({type:Date})],t.prototype,"modified",void 0),n([s.property()],t.prototype,"owner",void 0),n([s.property()],t.prototype,"portal",void 0),n([s.property()],t.prototype,"snippet",void 0),n([s.property()],t.prototype,"sortField",void 0),n([s.property()],t.prototype,"sortOrder",void 0),n([s.property()],t.prototype,"tags",void 0),n([s.property()],t.prototype,"thumbnail",void 0),n([s.property({dependsOn:["url","thumbnail","portal.credential.token"],readOnly:!0})],t.prototype,"thumbnailUrl",null),n([s.property()],t.prototype,"title",void 0),n([s.property({dependsOn:["portal.restUrl"],readOnly:!0})],t.prototype,"url",null),t=n([s.subclass("esri.portal.PortalGroup")],t)}(s.declared(a.JSONSupport))})},"esri/portal/PortalItem":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/assignHelper ../core/Error ../core/JSONSupport ../core/lang ../core/Loadable ../core/maybe ../core/promiseUtils ../core/urlUtils ../core/accessorSupport/decorators ../core/accessorSupport/ensureType ../geometry/Extent ./Portal ./PortalRating".split(" "),function(e,t,r,n,o,i,a,s,l,u,c,p,d,f,h,y,m){return function(t){function a(e){return e=t.call(this,e)||this,e.access=null,e.accessInformation=null,e.applicationProxies=null,e.avgRating=null,e.categories=null,e.created=null,e.culture=null,e.description=null,e.extent=null,e.groupCategories=null,e.id=null,e.itemControl=null,e.licenseInfo=null,e.modified=null,e.name=null,e.numComments=null,e.numRatings=null,e.numViews=null,e.owner=null,e.ownerFolder=null,e.portal=null,e.screenshots=null,e.size=null,e.snippet=null,e.sourceJSON=null,e.tags=null,e.title=null,e.type=null,e.typeKeywords=null,e.url=null,e}r(a,t),l=a,a.from=function(e){return f.ensureClass(l,e)},Object.defineProperty(a.prototype,"displayName",{get:function(){var e=this.type,t=this.typeKeywords||[],r=e;return"Feature Service"===e||"Feature Collection"===e?r=-1<t.indexOf("Table")?"Table":-1<t.indexOf("Route Layer")?"Route Layer":-1<t.indexOf("Markup")?"Markup":"Feature Layer":"Image Service"===e?r=-1<t.indexOf("Elevation 3D Layer")?"Elevation Layer":"Imagery Layer":"Scene Service"===e?r="Scene Layer":"Scene Package"===e?r="Scene Layer Package":"Stream Service"===e?r="Feature Layer":"Geoprocessing Service"===e&&this.portal&&this.portal.isPortal?r=-1<t.indexOf("Web Tool")?"Tool":"Geoprocessing Service":"Geocoding Service"===e?r="Locator":"Microsoft Powerpoint"===e?r="Microsoft PowerPoint":"GeoJson"===e?r="GeoJSON":"Globe Service"===e?r="Globe Layer":"Vector Tile Service"===e?r="Tile Layer":"netCDF"===e?r="NetCDF":"Map Service"===e?r=-1===t.indexOf("Spatiotemporal")&&(-1<t.indexOf("Hosted Service")||-1<t.indexOf("Tiled"))&&-1===t.indexOf("Relational")?"Tile Layer":"Map Image Layer":e&&-1<e.toLowerCase().indexOf("add in")?r=e.replace(/(add in)/gi,"Add-In"):"datastore catalog service"===e?r="Big Data File Share":"Compact Tile Package"===e&&(r="Tile Package (tpkx)"),r},enumerable:!0,configurable:!0}),a.prototype.readExtent=function(e){return e&&e.length?new h(e[0][0],e[0][1],e[1][0],e[1][1]):null},Object.defineProperty(a.prototype,"iconUrl",{get:function(){var t=this.type&&this.type.toLowerCase()||"",r=this.typeKeywords||[],n=!1,o=!1,i=!1,a=!1,s=!1;return 0<t.indexOf("service")||"feature collection"===t||"kml"===t||"wms"===t||"wmts"===t||"wfs"===t?(n=-1<r.indexOf("Hosted Service"),"feature service"===t||"feature collection"===t||"kml"===t||"wfs"===t?(o=-1<r.indexOf("Table"),i=-1<r.indexOf("Route Layer"),a=-1<r.indexOf("Markup"),t=(s=-1!==r.indexOf("Spatiotemporal"))&&o?"spatiotemporaltable":o?"table":i?"routelayer":a?"markup":s?"spatiotemporal":n?"featureshosted":"features"):t="map service"===t||"wms"===t||"wmts"===t?n||-1<r.indexOf("Tiled")||"wmts"===t?"maptiles":"mapimages":"scene service"===t?-1<r.indexOf("Line")?"sceneweblayerline":-1<r.indexOf("3DObject")?"sceneweblayermultipatch":-1<r.indexOf("Point")?"sceneweblayerpoint":-1<r.indexOf("IntegratedMesh")?"sceneweblayermesh":-1<r.indexOf("PointCloud")?"sceneweblayerpointcloud":-1<r.indexOf("Polygon")?"sceneweblayerpolygon":-1<r.indexOf("Building")?"sceneweblayerbuilding":"sceneweblayer":"image service"===t?-1<r.indexOf("Elevation 3D Layer")?"elevationlayer":"imagery":"stream service"===t?"streamlayer":"vector tile service"===t?"vectortile":"datastore catalog service"===t?"datastorecollection":"geocoding service"===t?"geocodeservice":"geoprocessing service"===t&&-1<r.indexOf("Web Tool")&&this.portal&&this.portal.isPortal?"tool":"layers"):t="web map"===t||"cityengine web scene"===t?"maps":"web scene"===t?-1<r.indexOf("ViewingMode-Local")?"webscenelocal":"websceneglobal":"web mapping application"===t||"mobile application"===t||"application"===t||"operation view"===t||"desktop application"===t?"apps":"map document"===t||"map package"===t||"published map"===t||"scene document"===t||"globe document"===t||"basemap package"===t||"mobile basemap package"===t||"mobile map package"===t||"project package"===t||"project template"===t||"pro map"===t||"layout"===t||"layer"===t&&-1<r.indexOf("ArcGIS Pro")||"explorer map"===t&&r.indexOf("Explorer Document")?"mapsgray":"service definition"===t||"csv"===t||"shapefile"===t||"cad drawing"===t||"geojson"===t||"360 vr experience"===t||"netcdf"===t?"datafiles":"explorer add in"===t||"desktop add in"===t||"windows viewer add in"===t||"windows viewer configuration"===t?"appsgray":"arcgis pro add in"===t||"arcgis pro configuration"===t?"addindesktop":"rule package"===t||"file geodatabase"===t||"sqlite geodatabase"===t||"csv collection"===t||"kml collection"===t||"windows mobile package"===t||"map template"===t||"desktop application template"===t||"arcpad package"===t||"code sample"===t||"form"===t||"document link"===t||"operations dashboard add in"===t||"rules package"===t||"image"===t||"workflow manager package"===t||"explorer map"===t&&-1<r.indexOf("Explorer Mapping Application")||-1<r.indexOf("Document")?"datafilesgray":"network analysis service"===t||"geoprocessing service"===t||"geodata service"===t||"geometry service"===t||"geoprocessing package"===t||"locator package"===t||"geoprocessing sample"===t||"workflow manager service"===t?"toolsgray":"layer"===t||"layer package"===t||"explorer layer"===t?"layersgray":"scene package"===t?"scenepackage":"mobile scene package"===t?"mobilescenepackage":"tile package"===t||"compact tile package"===t?"tilepackage":"task file"===t?"taskfile":"report template"===t?"report-template":"statistical data collection"===t?"statisticaldatacollection":"insights workbook"===t?"workbook":"insights model"===t?"insightsmodel":"insights page"===t?"insightspage":"insights theme"===t?"insightstheme":"hub initiative"===t?"hubinitiative":"hubpage"===t?"hubpage":"hub site application"===t?"hubsite":"relational database connection"===t?"relationaldatabaseconnection":"big data file share"===t?"datastorecollection":"image collection"===t?"imagecollection":"style"===t?"style":"desktop style"===t?"desktopstyle":"dashboard"===t?"dashboard":"raster function template"===t?"rasterprocessingtemplate":"vector tile package"===t?"vectortilepackage":"ortho mapping project"===t?"orthomappingproject":"ortho mapping template"===t?"orthomappingtemplate":"solution"===t?"solutions":"geopackage"===t?"geopackage":"deep learning package"===t?"deeplearningpackage":"real time analytic"===t?"realtimeanalytics":"big data analytic"===t?"bigdataanalytics":"feed"===t?"feed":"excalibur imagery project"===t?"excaliburimageryproject":"notebook"===t?"notebook":"storymap"===t?"storymap":"survey123 add in"===t?"survey123addin":"mission"===t?"mission":"quickcapture project"===t?"quickcaptureproject":"pro report"===t?"proreport":"urban model"===t?"urbanmodel":"web experience"===t?"experiencebuilder":"web experience template"===t?"webexperiencetemplate":"workflow"===t?"workflow":"insights script"===t?"insightsscript":"kernel gateway connection"===t?"kernelgatewayconnection":"maps",t?e.toUrl("../images/portal/"+t+"16.png"):null},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"isLayer",{get:function(){return-1<"Map Service;Feature Service;Feature Collection;Scene Service;Image Service;Stream Service;Vector Tile Service;WMTS;WMS".split(";").indexOf(this.type)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"itemUrl",{get:function(){var e=this.get("portal.restUrl");return e?e+"/content/items/"+this.id:null},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"thumbnailUrl",{get:function(){var e=this.itemUrl,t=this.thumbnail;return e&&t?this.portal._normalizeUrl(e+"/info/"+t+"?f=json"):null},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"userItemUrl",{get:function(){var e=this.get("portal.restUrl");if(!e)return null;var t=this.owner||this.get("portal.user.username");return t?e+"/content/users/"+(this.ownerFolder?t+"/"+this.ownerFolder:t)+"/items/"+this.id:null},enumerable:!0,configurable:!0}),a.prototype.load=function(e){var t=this;this.portal||(this.portal=y.getDefault());var r=this.portal.load(e).then(function(){return t.sourceJSON?t.sourceJSON:t.id&&t.itemUrl?t.portal._request(t.itemUrl,{signal:u.isSome(e)?e.signal:null}):{}}).then(function(e){t.sourceJSON=e,t.read(e)});return this.addResolvingPromise(r),this.when()},a.prototype.addRating=function(e){var t={method:"post",query:{}};return e instanceof m&&(e=e.rating),isNaN(e)||"number"!=typeof e||(t.query.rating=e),this.portal._request(this.itemUrl+"/addRating",t).then(function(){return new m({rating:e,created:new Date})})},a.prototype.clone=function(){var e={access:this.access,accessInformation:this.accessInformation,applicationProxies:s.clone(this.applicationProxies),avgRating:this.avgRating,categories:s.clone(this.categories),created:s.clone(this.created),culture:this.culture,description:this.description,extent:s.clone(this.extent),groupCategories:s.clone(this.groupCategories),id:this.id,itemControl:this.itemControl,licenseInfo:this.licenseInfo,modified:s.clone(this.modified),name:this.name,numComments:this.numComments,numRatings:this.numRatings,numViews:this.numViews,owner:this.owner,ownerFolder:this.ownerFolder,portal:this.portal,screenshots:s.clone(this.screenshots),size:this.size,snippet:this.snippet,tags:s.clone(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:s.clone(this.typeKeywords),url:this.url};return this.loaded&&(e.loadStatus="loaded"),new l({sourceJSON:this.sourceJSON}).set(e)},a.prototype.createPostQuery=function(){var e,t=this.toJSON();for(e in t)"tags"===e&&null!==t[e]&&(t[e]=t[e].join(", ")),"typeKeywords"===e&&null!==t[e]&&(t[e]=t[e].join(", ")),"extent"===e&&t[e]&&(t[e]=JSON.stringify(t[e]));return t},a.prototype.deleteRating=function(){return this.portal._request(this.itemUrl+"/deleteRating",{method:"post"}).then(function(){})},a.prototype.fetchData=function(e,t){return void 0===e&&(e="json"),this.portal._request(this.itemUrl+"/data",o({responseType:e},t))},a.prototype.fetchRating=function(e){return this.portal._request(this.itemUrl+"/rating",e).then(function(e){return null!=e.rating?(e.created=new Date(e.created),new m(e)):null})},a.prototype.fetchRelatedItems=function(e,t){return this.portal._requestToTypedArray(this.itemUrl+"/relatedItems",o({query:e},t),"PortalItem")},a.prototype.getThumbnailUrl=function(e){var t=this.thumbnailUrl;return t&&e&&(t+="&w="+e),t},a.prototype.reload=function(){var e=this;return this.portal._request(this.itemUrl,{cacheBust:!0}).then(function(t){return e.sourceJSON=t,e.read(t),e})},a.prototype.update=function(e){var t=this;return this.id?this.load().then(function(){return t.portal._signIn()}).then(function(){var r=e&&e.data,n={method:"post"};n.query=t.createPostQuery();for(var o in n.query)null===n.query[o]&&(n.query[o]="");return n.query.clearEmptyFields=!0,null!=r&&("string"==typeof r?n.query.text=r:"object"==typeof r&&(n.query.text=JSON.stringify(r))),t.portal._request(t.userItemUrl+"/update",n).then(function(){return t.reload()})}):c.reject(new i("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))},a.prototype.updateThumbnail=function(e){var t=this;return this.id?this.load().then(function(){return t.portal._signIn()}).then(function(){var r=e.thumbnail,n=e.filename,o={method:"post"};if("string"==typeof r)p.isDataProtocol(r)?o.query={data:r}:o.query={url:p.makeAbsolute(r)},u.isSome(n)&&(o.query.filename=n);else{var i=new FormData;u.isSome(n)?i.append("file",r,n):i.append("file",r),o.body=i}return t.portal._request(t.userItemUrl+"/updateThumbnail",o).then(function(){return t.reload()})}):c.reject(new i("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))},a.prototype.toJSON=function(){var e=this.extent,e={created:this.created&&this.created.getTime(),description:this.description,extent:e&&[[e.xmin,e.ymin],[e.xmax,e.ymax]],id:this.id,modified:this.modified&&this.modified.getTime(),name:this.name,owner:this.owner,ownerFolder:this.ownerFolder,snippet:this.snippet,tags:this.tags,thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:this.typeKeywords,url:this.url};return s.fixJson(e)},a.fromJSON=function(e){if(!e)return null;if(e.declaredClass)throw Error("JSON object is already hydrated");return new l({sourceJSON:e})},a.prototype._getPostQuery=function(){var e,t=this.toJSON();for(e in t)"tags"===e&&null!==t[e]&&(t[e]=t[e].join(", ")),"typeKeywords"===e&&null!==t[e]&&(t[e]=t[e].join(", ")),"extent"===e&&t[e]&&(t[e]=JSON.stringify(t[e]));return t};var l;return n([d.property()],a.prototype,"access",void 0),n([d.property()],a.prototype,"accessInformation",void 0),n([d.property({json:{read:{source:"appProxies"}}})],a.prototype,"applicationProxies",void 0),n([d.property()],a.prototype,"avgRating",void 0),n([d.property()],a.prototype,"categories",void 0),n([d.property({type:Date})],a.prototype,"created",void 0),n([d.property()],a.prototype,"culture",void 0),n([d.property()],a.prototype,"description",void 0),n([d.property({dependsOn:["type","typeKeywords"],readOnly:!0})],a.prototype,"displayName",null),n([d.property({type:h})],a.prototype,"extent",void 0),n([d.reader("extent")],a.prototype,"readExtent",null),n([d.property()],a.prototype,"groupCategories",void 0),n([d.property({dependsOn:["type","typeKeywords"],readOnly:!0})],a.prototype,"iconUrl",null),n([d.property()],a.prototype,"id",void 0),n([d.property({dependsOn:["type"],readOnly:!0})],a.prototype,"isLayer",null),n([d.property()],a.prototype,"itemControl",void 0),n([d.property({dependsOn:["portal.restUrl","id"],readOnly:!0})],a.prototype,"itemUrl",null),n([d.property()],a.prototype,"licenseInfo",void 0),n([d.property({type:Date})],a.prototype,"modified",void 0),n([d.property()],a.prototype,"name",void 0),n([d.property()],a.prototype,"numComments",void 0),n([d.property()],a.prototype,"numRatings",void 0),n([d.property()],a.prototype,"numViews",void 0),n([d.property()],a.prototype,"owner",void 0),n([d.property()],a.prototype,"ownerFolder",void 0),n([d.property({type:y})],a.prototype,"portal",void 0),n([d.property()],a.prototype,"screenshots",void 0),n([d.property()],a.prototype,"size",void 0),n([d.property()],a.prototype,"snippet",void 0),n([d.property()],a.prototype,"sourceJSON",void 0),n([d.property()],a.prototype,"tags",void 0),n([d.property()],a.prototype,"thumbnail",void 0),n([d.property({dependsOn:["itemUrl","thumbnail","portal.credential.token"],readOnly:!0})],a.prototype,"thumbnailUrl",null),n([d.property()],a.prototype,"title",void 0),n([d.property()],a.prototype,"type",void 0),n([d.property()],a.prototype,"typeKeywords",void 0),n([d.property()],a.prototype,"url",void 0),n([d.property({dependsOn:["portal.restUrl","portal.user.username","owner","ownerFolder","id"],readOnly:!0})],a.prototype,"userItemUrl",null),a=l=n([d.subclass("esri.portal.PortalItem")],a)}(d.declared(a.JSONSupportMixin(l)))})},"esri/portal/PortalRating":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Accessor ../core/accessorSupport/decorators".split(" "),function(e,t,r,n,o,i){return function(e){function t(t){return t=e.call(this,t)||this,t.created=null,t.rating=null,t}return r(t,e),n([i.property()],t.prototype,"created",void 0),n([i.property()],t.prototype,"rating",void 0),t=n([i.subclass("esri.portal.PortalRating")],t)}(i.declared(o))})},"esri/support/basemapDefinitions":function(){define(["require","exports","dojo/i18n!../nls/basemaps"],function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.esriBasemapDefinitions={streets:{id:"streets",title:r.streets,thumbnailUrl:e.toUrl("../images/basemap/streets.jpg"),baseMapLayers:[{id:"streets-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Street Map",showLegend:!1,visibility:!0,opacity:1}]},satellite:{id:"satellite",title:r.satellite,thumbnailUrl:e.toUrl("../images/basemap/satellite.jpg"),baseMapLayers:[{id:"satellite-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1}]},hybrid:{id:"hybrid",title:r.hybrid,thumbnailUrl:e.toUrl("../images/basemap/hybrid.jpg"),baseMapLayers:[{id:"hybrid-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1},{id:"hybrid-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Boundaries_and_Places/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Boundaries and Places",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},terrain:{id:"terrain",title:r.terrain,thumbnailUrl:e.toUrl("../images/basemap/terrain.jpg"),baseMapLayers:[{id:"terrain-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Terrain Base",showLegend:!1,visibility:!0,opacity:1},{id:"terrain-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Reference Overlay",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},topo:{id:"topo",title:r.topo,thumbnailUrl:e.toUrl("../images/basemap/topo.jpg"),baseMapLayers:[{id:"topo-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Topo Map",showLegend:!1,visibility:!0,opacity:1}]},gray:{id:"gray",title:r.gray,thumbnailUrl:e.toUrl("../images/basemap/gray.jpg"),baseMapLayers:[{id:"gray-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Light Gray Base",showLegend:!1,visibility:!0,opacity:1},{id:"gray-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Light Gray Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},"dark-gray":{id:"dark-gray",title:r["dark-gray"],thumbnailUrl:e.toUrl("../images/basemap/dark-gray.jpg"),baseMapLayers:[{id:"dark-gray-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Dark Gray Base",showLegend:!1,visibility:!0,opacity:1},{id:"dark-gray-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Dark Gray Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},oceans:{id:"oceans",title:r.oceans,thumbnailUrl:e.toUrl("../images/basemap/oceans.jpg"),baseMapLayers:[{id:"oceans-base-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Base",showLegend:!1,visibility:!0,opacity:1},{id:"oceans-reference-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},"national-geographic":{id:"national-geographic",title:r["national-geographic"],thumbnailUrl:e.toUrl("../images/basemap/national-geographic.jpg"),baseMapLayers:[{id:"national-geographic-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/NatGeo_World_Map/MapServer",title:"NatGeo World Map",showLegend:!1,layerType:"ArcGISTiledMapServiceLayer",visibility:!0,opacity:1}]},osm:{id:"osm",title:r.osm,thumbnailUrl:e.toUrl("../images/basemap/osm.jpg"),baseMapLayers:[{id:"osm-base-layer",layerType:"OpenStreetMap",title:"Open Street Map",showLegend:!1,visibility:!0,opacity:1}]},"dark-gray-vector":{id:"dark-gray-vector",title:r["dark-gray"],thumbnailUrl:e.toUrl("../images/basemap/dark-gray-vector.jpg"),baseMapLayers:[{id:"dark-gray-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/c11ce4f7801740b2905eb03ddc963ac8/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Dark Gray",visibility:!0,opacity:1}]},"gray-vector":{id:"gray-vector",title:r.gray,thumbnailUrl:e.toUrl("../images/basemap/gray-vector.jpg"),baseMapLayers:[{id:"gray-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/8a2cba3b0ebf4140b7c0dc5ee149549a/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Light Gray",visibility:!0,opacity:1}]},"streets-vector":{id:"streets-vector",title:r.streets,thumbnailUrl:e.toUrl("../images/basemap/streets-vector.jpg"),baseMapLayers:[{id:"streets-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/de26a3cf4cc9451298ea173c4b324736/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets",visibility:!0,opacity:1}]},"topo-vector":{id:"topo-vector",title:r.topo,thumbnailUrl:e.toUrl("../images/basemap/topo-vector.jpg"),baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"topo-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/7dc6cea0b1764a1f9af2e679f642f0f5/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Topo",visibility:!0,opacity:1}]},"streets-night-vector":{id:"streets-night-vector",title:r["streets-night-vector"],thumbnailUrl:e.toUrl("../images/basemap/streets-night.jpg"),baseMapLayers:[{id:"streets-night-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/86f556a2d1fd468181855a35e344567f/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Night",visibility:!0,opacity:1}]},"streets-relief-vector":{id:"streets-relief-vector",title:r["streets-relief-vector"],thumbnailUrl:e.toUrl("../images/basemap/streets-relief.jpg"),baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"streets-relief-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/b266e6d17fc345b498345613930fbd76/resources/styles/root.json",title:"World Streets Relief",layerType:"VectorTileLayer",showLegend:!1,visibility:!0,opacity:1}]},"streets-navigation-vector":{id:"streets-navigation-vector",title:r["streets-navigation-vector"],thumbnailUrl:e.toUrl("../images/basemap/streets-navigation.jpg"),baseMapLayers:[{id:"streets-navigation-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/63c47b7177f946b49902c24129b87252/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Navigation",visibility:!0,opacity:1}]}}})},"dojo/i18n":function(){define("./_base/kernel require ./has ./_base/array ./_base/config ./_base/lang ./has!host-browser?./_base/xhr ./json module".split(" "),function(e,t,r,n,o,i,a,s,l){r.add("dojo-preload-i18n-Api",1),a=e.i18n={};var u=/(^.*(^|\/)nls)(\/|$)([^\/]*)\/?([^\/]*)/,c=function(e,t,r,n){var o=[r+n];t=t.split("-");for(var i="",a=0;a<t.length;a++)i+=(i?"-":"")+t[a],(!e||e[i])&&(o.push(r+i+"/"+n),o.specificity=i);return o},p={},d=function(t,r,n){return n=n?n.toLowerCase():e.locale,t=t.replace(/\./g,"/"),r=r.replace(/\./g,"/"),/root/i.test(n)?t+"/nls/"+r:t+"/nls/"+n+"/"+r},f=e.getL10nName=function(e,t,r){return e=l.id+"!"+d(e,t,r)},h=function(e,t,r,n,o,a){e([t],function(s){var l=i.clone(s.root||s.ROOT),u=c(!s._v1x&&s,o,r,n);e(u,function(){for(var e=1;e<u.length;e++)l=i.mixin(i.clone(l),arguments[e]);p[t+"/"+o]=l,l.$locale=u.specificity,a()})})},y=function(e){var t=o.extraLocale||[],t=i.isArray(t)?t:[t];return t.push(e),t},m=function(t,o,a){var l=u.exec(t),c=l[1]+"/",d=l[5]||l[4],f=c+d,m=(l=l[5]&&l[4])||e.locale||"",g=f+"/"+m,l=l?[m]:y(m),_=l.length,x=function(){--_||a(i.delegate(p[g]))},m=t.split("*"),O="preload"==m[1];if(r("dojo-preload-i18n-Api")){if(O&&(p[t]||(p[t]=1,w(m[2],s.parse(m[3]),1,o)),a(1)),(m=O)||(v&&b.push([t,o,a]),m=v&&!p[g]),m)return}else if(O)return void a(1);n.forEach(l,function(e){var t=f+"/"+e;r("dojo-preload-i18n-Api")&&S(t),p[t]?x():h(o,f,c,d,e,x)})};r("dojo-preload-i18n-Api");var g=a.normalizeLocale=function(t){return t=t?t.toLowerCase():e.locale,"root"==t?"ROOT":t},v=0,b=[],w=a._preloadLocalizations=function(r,o,a,s){function l(e,t){s([e],t)}function u(e,t){for(e=e.split("-");e.length;){if(t(e.join("-")))return;e.pop()}t("ROOT")}function c(){for(--v;!v&&b.length;)m.apply(null,b.shift())}function d(e){e=g(e),u(e,function(a){if(0<=n.indexOf(o,a)){var d=r.replace(/\./g,"/")+"_"+a;return v++,l(d,function(r){for(var n in r){var o,l=r[n],d=n.match(/(.+)\/([^\/]+)$/);if(d&&(o=d[2],d=d[1]+"/",l._localized)){var f;if("ROOT"===a){var h=f=l._localized;delete l._localized,h.root=l,p[t.toAbsMid(n)]=h}else f=l._localized,p[t.toAbsMid(d+o+"/"+a)]=l;a!==e&&function(r,n,o,a){var l=[],d=[];u(e,function(e){a[e]&&(l.push(t.toAbsMid(r+e+"/"+n)),d.push(t.toAbsMid(r+n+"/"+e)))}),l.length?(v++,s(l,function(){for(var a=l.length-1;0<=a;a--)o=i.mixin(i.clone(o),arguments[a]),p[d[a]]=o;p[t.toAbsMid(r+n+"/"+e)]=i.clone(o),c()})):p[t.toAbsMid(r+n+"/"+e)]=o}(d,o,l,f)}}c()}),!0}return!1})}s=s||t,d(),n.forEach(e.config.extraLocale,d)},S=function(){},_={},S=function(t){for(var r,n=t.split("/"),o=e.global[n[0]],i=1;o&&i<n.length-1;o=o[n[i++]]);return o&&((r=o[n[i]])||(r=o[n[i].replace(/-/g,"_")]),r&&(p[t]=r)),r};return a.getLocalization=function(e,r,n){var o,i=d(e,r,n);return _[i]?_[i]:(m(i,t,function(e){o=_[i]=e}),o)},i.mixin(a,{dynamic:!0,normalize:function(e,t){return/^\./.test(e)?t(e):e},load:m,cache:p,getL10nName:f})})},"esri/webdoc/support/writeUtils":function(){define("require exports ../../core/Error ../../core/lang ../../core/maybe ../../core/object".split(" "),function(e,t,r,n,o,i){function a(e){return!("feature"!==e.type||e.url||!e.source||"memory"!==e.source.type)}Object.defineProperty(t,"__esModule",{value:!0});var s=new Set;"bing-maps open-street-map tile unknown unsupported vector-tile web-tile".split(" ").forEach(function(e){return s.add(e)});var l=new Set;"feature tile unknown unsupported vector-tile web-tile".split(" ").forEach(function(e){return l.add(e)}),t.getLayerJSON=function(e,t,u){if(!("write"in e&&e.write))return u&&u.messages&&u.messages.push(new r("layer:unsupported","Layers ("+e.title+", "+e.id+") of type '"+e.declaredClass+"' cannot be persisted",{layer:e})),null;var c;return u.restrictedWebMapWriting?(c="basemap"===u.layerContainerType?s:"operational-layers"===u.layerContainerType?l:null,c=!o.isSome(c)||c.has(e.type)&&!a(e)):c=!0,c?(t={},e.write(t,u)?t:null):(o.isSome(t)&&(u=t=n.clone(t),a(e)?(c=(c=i.getDeepValue("featureCollection.layers",u))&&c[0]&&c[0].layerDefinition)&&("maxScale"in e&&(c.maxScale=e.maxScale),"minScale"in e&&(c.minScale=e.minScale)):"group"!==e.type&&("maxScale"in e&&(u.maxScale=e.maxScale),"minScale"in e&&(u.minScale=e.minScale)),u.opacity=e.opacity,u.title=e.title,u.visibility=e.visible),t)}})},"esri/Ground":function(){define("require exports ./core/tsSupport/assignHelper ./core/tsSupport/declareExtendsHelper ./core/tsSupport/decorateHelper ./Color ./core/Collection ./core/collectionUtils ./core/compilerUtils ./core/Error ./core/JSONSupport ./core/lang ./core/Loadable ./core/loadAll ./core/Logger ./core/promiseUtils ./core/accessorSupport/decorators ./core/accessorSupport/ensureType ./ground/NavigationConstraint ./layers/support/types ./webdoc/support/opacityUtils".split(" "),function(e,t,r,n,o,i,a,s,l,u,c,p,d,f,h,y,m,g,v,b,w){function S(e){return"elevation"===e.type||e&&"createElevationSampler"in e}var _=h.getLogger("esri.Ground");return function(t){function c(e){var r=t.call(this,e)||this;return r.opacity=1,r.surfaceColor=null,r.navigationConstraint=null,r.layers=new a,r.layers.on("after-add",function(e){e=e.item,e.parent&&e.parent!==r&&"remove"in e.parent&&e.parent.remove(e),e.parent=r,b.isOfType(e,["elevation","base-elevation"])||_.error("Layer '"+e.title+", id:"+e.id+"' of type '"+e.type+"' is not supported as a ground layer and will therefore be ignored. Only layers of type 'elevation' are supported.")}),r.layers.on("after-remove",function(e){e.item.parent=null}),r}n(c,t),d=c,c.prototype.initialize=function(){this.when().catch(function(e){_.error("#load()","Failed to load ground",e)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)},c.prototype.normalizeCtorArgs=function(e){return e&&"resourceInfo"in e&&(this._set("resourceInfo",e.resourceInfo),e=r({},e),delete e.resourceInfo),e},Object.defineProperty(c.prototype,"layers",{set:function(e){this._set("layers",s.referenceSetter(e,this._get("layers")))},enumerable:!0,configurable:!0}),c.prototype.writeLayers=function(e,t,n,o){var i=[];e&&(o=r({},o,{layerContainerType:"ground"}),e.forEach(function(e){if("write"in e){var t={};l.typeCast(e)().write(t,o)&&i.push(t)}else o&&o.messages&&o.messages.push(new u("layer:unsupported","Layers ("+e.title+", "+e.id+") of type '"+e.declaredClass+"' cannot be persisted in the ground",{layer:e}))})),t.layers=i},c.prototype.load=function(e){return this.addResolvingPromise(this._loadFromSource(e)),this.when()},c.prototype.loadAll=function(){var e=this;return f.loadAll(this,function(t){t(e.layers)})},c.prototype.queryElevation=function(e,t){var r=this;return this._importElevationQuery().then(function(n){n=new n.ElevationQuery;var o=r.layers.filter(S).toArray();return n.queryAll(o,e,t)})},c.prototype.createElevationSampler=function(e,t){var r=this.layers.filter(S).toArray();return 1===r.length?r[0].createElevationSampler(e,t):this._importElevationQuery().then(function(n){return(new n.ElevationQuery).createSamplerAll(r,e,t)})},c.prototype.clone=function(){var e={opacity:this.opacity,surfaceColor:p.clone(this.surfaceColor),navigationConstraint:p.clone(this.navigationConstraint),layers:this.layers.slice()};return this.loaded&&(e.loadStatus="loaded"),new d({resourceInfo:this.resourceInfo}).set(e)},c.prototype.read=function(e,t){this.resourceInfo||this._set("resourceInfo",{data:e,context:t}),this.inherited(arguments)},c.prototype._loadFromSource=function(e){var t=this.resourceInfo;return t?this._loadLayersFromJSON(t.data,t.context,e):y.resolve(null)},c.prototype._loadLayersFromJSON=function(t,r,n){var o=this,i=r&&r.origin||"web-scene",a=r&&r.portal||null,s=r&&r.url||null;return y.create(function(t){return e(["./portal/support/layersCreator"],t)}).then(function(e){y.throwIfAborted(n);var r=[];return t.layers&&Array.isArray(t.layers)&&r.push(e.populateOperationalLayers(o.layers,t.layers,{context:{origin:i,url:s,portal:a,layerContainerType:"ground"},defaultLayerType:"ArcGISTiledElevationServiceLayer"})),y.eachAlways(r)}).then(function(){})},c.prototype._importElevationQuery=function(){return y.create(function(t){e(["./layers/support/ElevationQuery"],t)})};var d;return o([m.property({json:{read:!1}})],c.prototype,"layers",null),o([m.writer("layers")],c.prototype,"writeLayers",null),o([m.property({readOnly:!0})],c.prototype,"resourceInfo",void 0),o([m.property({type:Number,nonNullable:!0,range:{min:0,max:1},json:{type:g.Integer,read:{reader:w.transparencyToOpacity,source:"transparency"},write:{writer:function(e,t){t.transparency=w.opacityToTransparency(e)},target:"transparency"}}})],c.prototype,"opacity",void 0),o([m.property({type:i,json:{type:[g.Integer],write:function(e,t){t.surfaceColor=e.toJSON().slice(0,3)}}})],c.prototype,"surfaceColor",void 0),o([m.property({type:v.NavigationConstraint,json:{write:!0}})],c.prototype,"navigationConstraint",void 0),c=d=o([m.subclass("esri.Ground")],c)}(m.declared(c.JSONSupportMixin(d)))})},"esri/Color":function(){define(["require","exports","./core/mathUtils","./core/accessorSupport/ensureType"],function(e,t,r,n){function o(e){return r.clamp(n.ensureInteger(e),0,255)}function i(e,t,r){return e=Number(e),isNaN(e)?r:e<t?t:e>r?r:e}function a(e,t,r){0>r&&++r,1<r&&--r;var n=6*r;return 1>n?e+(t-e)*n:1>2*r?t:2>3*r?e+(t-e)*(2/3-r)*6:e}return e=function(){function e(e){this.b=this.g=this.r=255,this.a=1,e&&this.setColor(e)}return e.blendColors=function(t,r,n,o){return void 0===o&&(o=new e),o.r=Math.round(t.r+(r.r-t.r)*n),o.g=Math.round(t.g+(r.g-t.g)*n),o.b=Math.round(t.b+(r.b-t.b)*n),o.a=t.a+(r.a-t.a)*n,o._sanitize()},e.fromRgb=function(t,r){var n=t.toLowerCase().match(/^(rgba?|hsla?)\(([\s\.\-,%0-9]+)\)/);if(n){if(t=n[2].split(/\s*,\s*/),"rgb"===(n=n[1])&&3===t.length||"rgba"===n&&4===t.length)return n=t[0],"%"===n.charAt(n.length-1)?(n=t.map(function(e){return 2.56*parseFloat(e)}),4===t.length&&(n[3]=parseFloat(t[3])),e.fromArray(n,r)):e.fromArray(t.map(function(e){return parseFloat(e)}),r);if("hsl"===n&&3===t.length||"hsla"===n&&4===t.length){var n=(parseFloat(t[0])%360+360)%360/360,o=parseFloat(t[1])/100,i=parseFloat(t[2])/100,o=.5>=i?i*(o+1):i+o-i*o,i=2*i-o,n=[256*a(i,o,n+1/3),256*a(i,o,n),256*a(i,o,n-1/3),1];return 4===t.length&&(n[3]=parseFloat(t[3])),e.fromArray(n,r)}}return null},e.fromHex=function(t,r){void 0===r&&(r=new e);var n=4===t.length?4:8,o=(1<<n)-1,i=Number("0x"+t.substr(1));return isNaN(i)?null:(["b","g","r"].forEach(function(e){var t=i&o;i>>=n,r[e]=4===n?17*t:t}),r.a=1,r)},e.fromArray=function(t,r){return void 0===r&&(r=new e),r._set(Number(t[0]),Number(t[1]),Number(t[2]),Number(t[3])),isNaN(r.a)&&(r.a=1),r._sanitize()},e.fromString=function(t,r){var n=e.named[t];return n&&e.fromArray(n,r)||e.fromRgb(t,r)||e.fromHex(t,r)},e.toJSON=function(e){return e&&[o(e.r),o(e.g),o(e.b),1<e.a?e.a:o(255*e.a)]},e.fromJSON=function(t){return t&&new e([t[0],t[1],t[2],t[3]/255])},e.toUnitRGB=function(e){return[e.r/255,e.g/255,e.b/255]},e.toUnitRGBA=function(e){return[e.r/255,e.g/255,e.b/255,null!=e.a?e.a:1]},e.prototype.setColor=function(t){return"string"==typeof t?e.fromString(t,this):Array.isArray(t)?e.fromArray(t,this):(this._set(t.r,t.g,t.b,t.a),t instanceof e||this._sanitize()),this},e.prototype.toRgb=function(){return[this.r,this.g,this.b]},e.prototype.toRgba=function(){return[this.r,this.g,this.b,this.a]},e.prototype.toHex=function(){var e=this.r.toString(16),t=this.g.toString(16),r=this.b.toString(16);return"#"+(2>e.length?"0"+e:e)+(2>t.length?"0"+t:t)+(2>r.length?"0"+r:r)},e.prototype.toCss=function(e){void 0===e&&(e=!1);var t=this.r+", "+this.g+", "+this.b;return e?"rgba("+t+", "+this.a+")":"rgb("+t+")"},e.prototype.toString=function(){return this.toCss(!0)},e.prototype.toJSON=function(){return[o(this.r),o(this.g),o(this.b),1<this.a?this.a:o(255*this.a)]},e.prototype.clone=function(){return new e(this.toRgba())},e.prototype._sanitize=function(){return this.r=Math.round(i(this.r,0,255)),this.g=Math.round(i(this.g,0,255)),this.b=Math.round(i(this.b,0,255)),this.a=i(this.a,0,1),this},e.prototype._set=function(e,t,r,n){this.r=e,this.g=t,this.b=r,this.a=n},e.named={transparent:[0,0,0,0],black:[0,0,0],silver:[192,192,192],gray:[128,128,128],white:[255,255,255],maroon:[128,0,0],red:[255,0,0],purple:[128,0,128],fuchsia:[255,0,255],green:[0,128,0],lime:[0,255,0],olive:[128,128,0],yellow:[255,255,0],navy:[0,0,128],blue:[0,0,255],teal:[0,128,128],aqua:[0,255,255],aliceblue:[240,248,255],antiquewhite:[250,235,215],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],blanchedalmond:[255,235,205],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],oldlace:[253,245,230],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],rebeccapurple:[102,51,153],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],whitesmoke:[245,245,245],yellowgreen:[154,205,50]},e}(),e.prototype.declaredClass="esri.Color",e})},"esri/core/mathUtils":function(){define(["require","exports"],function(e,t){function r(e,t,r){return e<t?t:e>r?r:e}function n(e){return o[0]=e,o[0]}Object.defineProperty(t,"__esModule",{value:!0});var o=new Float32Array(1);t.isFinite=Number.isFinite||function(e){return"number"==typeof e&&window.isFinite(e)},t.isNaN=Number.isNaN||function(e){return e!==e},t.nextHighestPowerOfTwo=function(e){--e;for(var t=1;32>t;t<<=1)e|=e>>t;return e+1},t.clamp=r,t.isPowerOfTwo=function(e){return 0==(e&e-1)},t.nextHighestPowerOfTen=function(e){return Math.pow(10,Math.ceil(Math.LOG10E*Math.log(e)))},t.sign=Math.sign||function(e){return+(0<e)-+(0>e)||+e},t.log2=Math.log2||function(e){return Math.log(e)/Math.LN2},t.lerp=function(e,t,r){return e+(t-e)*r},t.deg2rad=function(e){return e*Math.PI/180},t.rad2deg=function(e){return 180*e/Math.PI},t.acosClamped=function(e){return Math.acos(r(e,-1,1))},t.asinClamped=function(e){return Math.asin(r(e,-1,1))},t.floatEqualRelative=function(e,r,n){if(void 0===n&&(n=1e-6),t.isNaN(e)||t.isNaN(r))return!1;if(e===r)return!0;var o=Math.abs(e-r),i=Math.abs(e),a=Math.abs(r);if(0===e||0===r||1e-12>i&&1e-12>a){if(o>.01*n)return!1}else if(o/(i+a)>n)return!1;return!0},t.floatEqualAbsolute=function(e,r,n){return void 0===n&&(n=1e-6),!t.isNaN(e)&&!t.isNaN(r)&&(e>r?e-r:r-e)<=n},t.clampFloat32=function(e){return n(Math.max(-t.NUMBER_MAX_FLOAT32,Math.min(e,t.NUMBER_MAX_FLOAT32)))},t.NUMBER_MAX_FLOAT32=n(3.4028234663852886e38)})},"esri/ground/NavigationConstraint":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/JSONSupport ../core/accessorSupport/decorators".split(" "),function(e,t,r,n,o,i){Object.defineProperty(t,"__esModule",{value:!0}),e=function(e){function t(t){return t=e.call(this,t)||this,t.type="none",t}r(t,e),o=t,t.prototype.clone=function(){return new o({type:this.type})};var o;return n([i.enumeration.serializable()({none:"none",stayAbove:"stay-above"})],t.prototype,"type",void 0),t=o=n([i.subclass("esri.ground.NavigationConstraint")],t)}(i.declared(o.JSONSupport)),t.NavigationConstraint=e})},"esri/layers/support/types":function(){define(["require","exports"],function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.isOfType=function(e,t){if(!(e=e.constructor._meta)||!e.bases)return!1;e=e.bases;var r=Array.isArray(t);return e.some(function(e){return!!(e=e.__accessorMetadata__)&&(!!((e=e.properties)&&e.type&&e.type.value)&&(e=e.type.value,r?-1!==t.indexOf(e):e===t))})}})},"esri/webdoc/support/opacityUtils":function(){define(["require","exports","../../core/accessorSupport/ensureType"],function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.opacityToTransparency=function(e){return e=r.ensureInteger(100*(1-e)),Math.max(0,Math.min(e,100))},t.transparencyToOpacity=function(e){return Math.max(0,Math.min(1-e/100,1))}})},"esri/core/CollectionFlattener":function(){define("require exports ./tsSupport/declareExtendsHelper ./tsSupport/decorateHelper ./Collection ./Handles ./accessorSupport/decorators".split(" "),function(e,t,r,n,o,i,a){return function(e){function t(t){return t=e.call(this,t)||this,t._handles=new i,t.root=null,t}return r(t,e),t.prototype.initialize=function(){var e=this;this._handles.add(this.rootCollectionNames.map(function(t){return e.watch("root."+t,function(){return e.updateCollections()},!0)})),this.updateCollections()},t.prototype.destroy=function(){this.root=null,this.refresh(),this._handles.destroy(),this._handles=null},t.prototype.updateCollections=function(){var e=this;this._collections=this.rootCollectionNames.map(function(t){return e.get("root."+t)}).filter(function(e){return null!=e}),this.refresh()},t.prototype.refresh=function(){var e=this,t=this._handles;t.remove("collections"),this.removeAll();for(var r=[],n=[],o=0,i=this._collections;o<i.length;o++)this._processCollection(r,n,i[o]);for(this.push.apply(this,n),n=0;n<r.length;n++)t.add(r[n].on("after-changes",function(){return e.refresh()}),"collections")},t.prototype._createNewInstance=function(e){return new o(e)},t.prototype._processCollection=function(e,t,r){var n=this;r&&(e.push(r),r.forEach(function(r){r&&(t.push(r),n._processCollection(e,t,n.getChildrenFunction(r)))}))},n([a.property()],t.prototype,"rootCollectionNames",void 0),n([a.property()],t.prototype,"root",void 0),n([a.property()],t.prototype,"getChildrenFunction",void 0),t=n([a.subclass("esri.core.CollectionFlattener")],t)}(a.declared(o))})},"esri/core/Handles":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ./Accessor ./Collection ./accessorSupport/decorators".split(" "),function(e,t,r,n,o,i,a){return function(e){function t(t){return t=e.call(this,t)||this,t._groups=new Map,t}return r(t,e),t.prototype.destroy=function(){this.removeAll()},Object.defineProperty(t.prototype,"size",{get:function(){var e=0;return this._groups.forEach(function(t){e+=t.length}),e},enumerable:!0,configurable:!0}),t.prototype.add=function(e,t){var r=this;if(!this._isHandle(e)&&!Array.isArray(e)&&!i.isCollection(e))return this;var n=this._getOrCreateGroup(t);return Array.isArray(e)||i.isCollection(e)?e.forEach(function(e){return r._isHandle(e)&&n.push(e)}):n.push(e),this.notifyChange("size"),this},t.prototype.forEach=function(e,t){if("function"==typeof e)this._groups.forEach(function(t){return t.forEach(e)});else{var r=this._getGroup(e);r&&r.forEach(t)}},t.prototype.has=function(e){return this._groups.has(this._ensureGroupKey(e))},t.prototype.remove=function(e){if(Array.isArray(e)||i.isCollection(e))return e.forEach(this.remove,this),this;if(!this.has(e))return this;for(var t=this._getGroup(e),r=0;r<t.length;r++)t[r].remove();return this._deleteGroup(e),this.notifyChange("size"),this},t.prototype.removeAll=function(){return this._groups.forEach(function(e){for(var t=0;t<e.length;t++)e[t].remove()}),this._groups.clear(),this.notifyChange("size"),this},t.prototype._isHandle=function(e){return e&&!!e.remove},t.prototype._getOrCreateGroup=function(e){if(this.has(e))return this._getGroup(e);var t=[];return this._groups.set(this._ensureGroupKey(e),t),t},t.prototype._getGroup=function(e){return this._groups.get(this._ensureGroupKey(e))},t.prototype._deleteGroup=function(e){return this._groups.delete(this._ensureGroupKey(e))},t.prototype._ensureGroupKey=function(e){return e||"_default_"},n([a.property({readOnly:!0})],t.prototype,"size",null),t=n([a.subclass("esri.core.Handles")],t)}(a.declared(o))})},"esri/support/basemapUtils":function(){define("require exports ../Basemap ../core/Collection ../core/Logger ../core/urlUtils ../core/accessorSupport/ensureType ./basemapDefinitions".split(" "),function(e,t,r,n,o,i,a,s){function l(e,t){var n;if("string"==typeof e){if(!(e in s.esriBasemapDefinitions))return t=Object.keys(s.esriBasemapDefinitions).map(function(e){return'"'+e+'"'}).join(", "),b.warn("Unable to find basemap definition for: "+e+". Try one of these: "+t),null;t&&(n=t[e]),n||(n=r.fromId(e),t&&(t[e]=n))}else n=a.default(r,e);return n}function u(e,t){var r=new n;return e.forEach(function(e){var n=t.find(function(t){return g(d(e),d(t))})||e;r.some(function(e){return e===n})?r.push(e):r.push(n)}),r}function c(e){return e?!e.loaded&&e.resourceInfo?f(e.resourceInfo.data):{baseLayers:p(e.baseLayers),referenceLayers:p(e.referenceLayers)}:null}function p(e){return(n.isCollection(e)?e.toArray():e).map(d)}function d(e){return{type:e.type,url:v("urlTemplate"in e&&e.urlTemplate||e.url||"styleUrl"in e&&e.styleUrl),minScale:"minScale"in e&&null!=e.minScale?e.minScale:0,maxScale:"maxScale"in e&&null!=e.maxScale?e.maxScale:0,opacity:null!=e.opacity?e.opacity:1,visible:null==e.visible||!!e.visible}}function f(e){return e?{baseLayers:h(e.baseMapLayers.filter(function(e){return!e.isReference})),referenceLayers:h(e.baseMapLayers.filter(function(e){return e.isReference}))}:null}function h(e){return e.map(function(e){var t;switch(e.layerType){case"VectorTileLayer":t="vector-tile";break;case"ArcGISTiledMapServiceLayer":t="tile";break;default:t="unknown"}return{type:t,url:v(e.templateUrl||e.urlTemplate||e.styleUrl||e.url),minScale:null!=e.minScale?e.minScale:0,maxScale:null!=e.maxScale?e.maxScale:0,opacity:null!=e.opacity?e.opacity:1,visible:null==e.visibility||!!e.visibility}})}function y(e,t,r){return null!=e!=(null!=t)?"not-equal":e?m(e.baseLayers,t.baseLayers)?m(e.referenceLayers,t.referenceLayers)?"equal":r.mustMatchReferences?"not-equal":"base-layers-equal":"not-equal":"equal"}function m(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(!g(e[r],t[r]))return!1;return!0}function g(e,t){return e.type===t.type&&e.url===t.url&&e.minScale===t.minScale&&e.maxScale===t.maxScale&&e.visible===t.visible&&e.opacity===t.opacity}function v(e){return e?i.normalize(e).replace(/^\s*https?:/i,"").toLowerCase():""}Object.defineProperty(t,"__esModule",{value:!0});var b=o.getLogger("esri.support.basemapUtils");t.createCache=function(){return{}},t.ensureType=l,t.clonePreservingTiledLayers=function(e,t){if(void 0===t&&(t=null),!(e=l(e)))return null;var n=new r({id:e.id,title:e.title,baseLayers:e.baseLayers.slice(),referenceLayers:e.referenceLayers.slice()});return t&&(n.baseLayers=u(n.baseLayers,t.baseLayers),n.referenceLayers=u(n.referenceLayers,t.referenceLayers)),n.load(),n.portalItem=e.portalItem,n},t.getWellKnownBasemapId=function(e){var t=null;e=c(e);for(var r in s.esriBasemapDefinitions){var n=f(s.esriBasemapDefinitions[r]),n=y(e,n,{mustMatchReferences:!1});if("equal"===n){t=r;break}"base-layers-equal"===n&&(t=r)}return t},t.contentEquals=function(e,t){return e===t||(e=c(e),t=c(t),"equal"===y(e,t,{mustMatchReferences:!0}))}})},"esri/support/groundUtils":function(){define(["require","exports","../Ground","../core/Logger","../core/accessorSupport/ensureType"],function(e,t,r,n,o){Object.defineProperty(t,"__esModule",{value:!0});var i=n.getLogger("esri.support.groundUtils");t.groundElevationLayers={"world-elevation":{id:"worldElevation",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"},"world-topobathymetry":{id:"worldTopoBathymetry",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/TopoBathy3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"}},t.ensureType=function(e){var n;return"string"==typeof e?e in t.groundElevationLayers?n=new r({resourceInfo:{data:{layers:[t.groundElevationLayers[e]]}}}):i.warn("Unable to find ground definition for: "+e+'. Try "world-elevation"'):n=o.default(r,e),n}})},"esri/support/LayersMixin":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Collection ../core/collectionUtils ../core/Logger ../core/promiseUtils ../core/accessorSupport/decorators ../layers/Layer".split(" "),function(e,t,r,n,o,i,a,s,l,u){function c(e,t,r){var n;if(e)for(var o=0,i=e.length;o<i;o++)if(n=e.getItemAt(o),n[t]===r||n&&"group"===n.type&&(n=c(n.layers,t,r)))return n}Object.defineProperty(t,"__esModule",{value:!0});var p=a.getLogger("esri.support.LayersMixin");t.LayersMixin=function(e){return function(e){function t(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=e.call(this,t)||this;return n.layers=new o,n.layers.on("after-add",function(e){e=e.item,e.parent&&e.parent!==n&&"remove"in e.parent&&e.parent.remove(e),e.parent=n,n.layerAdded(e),"elevation"===e.type&&p.error("Layer '"+e.title+", id:"+e.id+"' of type '"+e.type+"' is not supported as an operational layer and will therefore be ignored.")}),n.layers.on("after-remove",function(e){e=e.item,e.parent=null,n.layerRemoved(e)}),n}return r(t,e),t.prototype.destroy=function(){this.layers.drain(this.layerRemoved,this)},Object.defineProperty(t.prototype,"layers",{set:function(e){this._set("layers",i.referenceSetter(e,this._get("layers")))},enumerable:!0,configurable:!0}),t.prototype.add=function(e,t){var r=this,n=this.layers;t=n.getNextIndex(t),e instanceof u?(e.parent===this&&this.reorder(e,t),n.add(e,t)):s.isPromiseLike(e)?e.then(function(e){r.destroyed||r.add(e,t)}):p.error("#add()","The item being added is not a Layer or a Promise that resolves to a Layer.")},t.prototype.addMany=function(e,t){var r=this,n=this.layers;t=n.getNextIndex(t),e.slice().forEach(function(e){e.parent===r?r.reorder(e,t):(n.add(e,t),t+=1)})},t.prototype.findLayerById=function(e){return c(this.layers,"id",e)},t.prototype.findLayerByUid=function(e){return c(this.layers,"uid",e)},t.prototype.remove=function(e){return this.layers.remove(e)},t.prototype.removeMany=function(e){return this.layers.removeMany(e)},t.prototype.removeAll=function(){return this.layers.removeAll()},t.prototype.reorder=function(e,t){return this.layers.reorder(e,t)},t.prototype.layerAdded=function(e){},t.prototype.layerRemoved=function(e){},n([l.property()],t.prototype,"layers",null),t=n([l.subclass("esri.support.LayersMixin")],t)}(l.declared(e))}})},"esri/layers/Layer":function(){define("require exports ../core/tsSupport/assignHelper ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/generatorHelper ../core/tsSupport/awaiterHelper ../config ../geometry ../request ../core/Error ../core/Evented ../core/Identifiable ../core/Loadable ../core/Logger ../core/urlUtils ../core/accessorSupport/decorators @dojo/framework/shim/Promise".split(" "),function(e,t,r,n,o,i,a,s,l,u,c,p,d,f,h,y,m){var g=0,v=h.getLogger("esri.layers.Layer");return function(t){function r(){var e=null!==t&&t.apply(this,arguments)||this;return e.attributionDataUrl=null,e.fullExtent=new l.Extent(-180,-90,180,90,l.SpatialReference.WGS84),e.legendEnabled=!0,e.listMode="show",e.opacity=1,e.parent=null,e.popupEnabled=!0,e.attributionVisible=!0,e.spatialReference=l.SpatialReference.WGS84,e.title=null,e.type=null,e.url=null,e.visible=!0,e}return n(r,t),r.fromArcGISServerUrl=function(t){return a(this,void 0,void 0,function(){var r,n,o;return i(this,function(i){switch(i.label){case 0:return r="string"==typeof t?{url:t}:t,[4,new Promise(function(t,r){e(["./support/arcgisLayers"],t,r)})];case 1:n=i.sent(),i.label=2;case 2:return i.trys.push([2,4,,5]),[4,n.fromUrl(r)];case 3:return[2,i.sent()];case 4:throw o=i.sent(),v.error("#fromArcGISServerUrl({ url: '"+r.url+"'})","Failed to create layer from arcgis server url",o),o;case 5:return[2]}})})},r.fromPortalItem=function(t){return a(this,void 0,void 0,function(){var r,n,o,a,l,u;return i(this,function(i){switch(i.label){case 0:return r="portalItem"in t?t:{portalItem:t},[4,new Promise(function(t,r){e(["../portal/support/portalLayers"],t,r)})];case 1:n=i.sent(),i.label=2;case 2:return i.trys.push([2,4,,5]),[4,n.fromItem(r)];case 3:return[2,i.sent()];case 4:throw o=i.sent(),l=(a=r&&r.portalItem)&&a.id||"unset",u=a&&a.portal&&a.portal.url||s.portalUrl,v.error("#fromPortalItem()","Failed to create layer from portal item (portal: '"+u+"', id: '"+l+"')",o),o;case 5:return[2]}})})},r.prototype.initialize=function(){var e=this;this.when().catch(function(t){h.getLogger(e.declaredClass).error("#load()","Failed to load layer (title: '"+e.title+"', id: '"+e.id+"')",t)})},Object.defineProperty(r.prototype,"hasAttributionData",{get:function(){return null!=this.attributionDataUrl},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"id",{get:function(){return Date.now().toString(16)+"-layer-"+g++},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"parsedUrl",{get:function(){var e=this._get("url");return e?y.urlToObject(e):null},enumerable:!0,configurable:!0}),r.prototype.fetchAttributionData=function(){return a(this,void 0,void 0,function(){var e,t;return i(this,function(r){switch(r.label){case 0:return e=this.attributionDataUrl,this.hasAttributionData&&e?[4,u(e,{query:{f:"json"},responseType:"json"})]:[3,2];case 1:return t=r.sent(),[2,t.data];case 2:throw new c("layer:no-attribution-data","Layer does not have attribution data")}})})},o([m.property({type:String})],r.prototype,"attributionDataUrl",void 0),o([m.property({type:l.Extent})],r.prototype,"fullExtent",void 0),o([m.property({readOnly:!0,dependsOn:["attributionDataUrl"]})],r.prototype,"hasAttributionData",null),o([m.property({type:String})],r.prototype,"id",null),o([m.property({type:Boolean})],r.prototype,"legendEnabled",void 0),o([m.property({type:["show","hide","hide-children"]})],r.prototype,"listMode",void 0),o([m.property({type:Number,range:{min:0,max:1},nonNullable:!0})],r.prototype,"opacity",void 0),o([m.property()],r.prototype,"parent",void 0),o([m.property({readOnly:!0,dependsOn:["url"]})],r.prototype,"parsedUrl",null),o([m.property({type:Boolean})],r.prototype,"popupEnabled",void 0),o([m.property({type:Boolean})],r.prototype,"attributionVisible",void 0),o([m.property({type:l.SpatialReference})],r.prototype,"spatialReference",void 0),o([m.property({type:String})],r.prototype,"title",void 0),o([m.property({type:String,readOnly:!0,json:{read:!1}})],r.prototype,"type",void 0),o([m.property()],r.prototype,"url",void 0),o([m.property({type:Boolean,nonNullable:!0})],r.prototype,"visible",void 0),r=o([m.subclass("esri.layers.Layer")],r)}(m.declared(p.EventedMixin(d.IdentifiableMixin(f))))})},"esri/core/Identifiable":function(){define(["require","exports","./tsSupport/declareExtendsHelper","./tsSupport/decorateHelper","./accessorSupport/decorators"],function(e,t,r,n,o){Object.defineProperty(t,"__esModule",{value:!0});var i=0;t.IdentifiableMixin=function(e){return function(e){function t(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return t=e.apply(this,t)||this,Object.defineProperty(t,"uid",{writable:!1,configurable:!1,value:Date.now().toString(16)+"-object-"+i++}),t}return r(t,e),t=n([o.subclass("esri.core.Identifiable")],t)}(o.declared(e))},e=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t=n([o.subclass("esri.core.Identifiable")],t)}(o.declared(t.IdentifiableMixin(function(){return function(){}}()))),t.Identifiable=e})},"esri/Viewpoint":function(){define("require exports ./core/tsSupport/declareExtendsHelper ./core/tsSupport/decorateHelper ./Camera ./geometry ./core/JSONSupport ./core/accessorSupport/decorators ./geometry/support/jsonUtils".split(" "),function(e,t,r,n,o,i,a,s,l){function u(){return{enabled:!this.camera}}return function(e){function t(t){return t=e.call(this,t)||this,t.rotation=0,t.scale=0,t.targetGeometry=null,t.camera=null,t}r(t,e),a=t,t.prototype.castRotation=function(e){return e%=360,0>e&&(e+=360),e},t.prototype.clone=function(){return new a({rotation:this.rotation,scale:this.scale,targetGeometry:this.targetGeometry?this.targetGeometry.clone():null,camera:this.camera?this.camera.clone():null})};var a;return n([s.property({type:Number,json:{write:!0,origins:{"web-scene":{write:{overridePolicy:u}}}}})],t.prototype,"rotation",void 0),n([s.cast("rotation")],t.prototype,"castRotation",null),n([s.property({type:Number,json:{write:!0,origins:{"web-scene":{write:{overridePolicy:u}}}}})],t.prototype,"scale",void 0),n([s.property({types:i.geometryTypes,json:{read:l.fromJSON,write:!0,origins:{"web-scene":{read:l.fromJSON,write:{overridePolicy:u}}}}})],t.prototype,"targetGeometry",void 0),n([s.property({type:o,json:{write:!0}})],t.prototype,"camera",void 0),t=a=n([s.subclass("esri.Viewpoint")],t)}(s.declared(a.JSONSupport))})},"esri/Camera":function(){define("require exports ./core/tsSupport/declareExtendsHelper ./core/tsSupport/decorateHelper ./core/JSONSupport ./core/mathUtils ./core/accessorSupport/decorators ./core/accessorSupport/ensureType ./geometry/Point ./views/3d/support/mathUtils".split(" "),function(e,t,r,n,o,i,a,s,l,u){return function(e){function t(t,r,n,o){return t=e.call(this,t)||this,t.position=new l([0,0,0]),t.heading=0,t.tilt=0,t.fov=55,t}r(t,e),o=t,t.prototype.normalizeCtorArgs=function(e,t,r,n){return e&&"object"==typeof e&&("x"in e||Array.isArray(e))&&(e={position:e},null!=t&&(e.heading=t),null!=r&&(e.tilt=r),null!=n&&(e.fov=n)),e},t.prototype.writePosition=function(e,t,r,n){var o=e.clone();o.x=s.ensureNumber(e.x||0),o.y=s.ensureNumber(e.y||0),o.z=e.hasZ?s.ensureNumber(e.z||0):e.z,t[r]=o.write(null,n)},t.prototype.readPosition=function(e,t){var r=new l;return r.read(e,t),r.x=s.ensureNumber(r.x||0),r.y=s.ensureNumber(r.y||0),r.z=r.hasZ?s.ensureNumber(r.z||0):r.z,r},t.prototype.equals=function(e){return!!e&&(this.tilt===e.tilt&&this.heading===e.heading&&this.fov===e.fov&&this.position.equals(e.position))},t.prototype.clone=function(){return new o({position:this.position.clone(),heading:this.heading,tilt:this.tilt,fov:this.fov})};var o;return n([a.property({type:l,json:{write:{isRequired:!0}}})],t.prototype,"position",void 0),n([a.writer("position")],t.prototype,"writePosition",null),n([a.reader("position")],t.prototype,"readPosition",null),n([a.property({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),a.cast(function(e){return u.cyclicalDeg.normalize(s.ensureNumber(e))})],t.prototype,"heading",void 0),n([a.property({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),a.cast(function(e){return i.clamp(s.ensureNumber(e),-180,180)})],t.prototype,"tilt",void 0),n([a.property({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],t.prototype,"fov",void 0),t=o=n([a.subclass("esri.Camera")],t)}(a.declared(o.JSONSupport))})},"esri/views/3d/support/mathUtils":function(){define(["require","exports","../../../core/mathUtils","../../../core/libs/gl-matrix-2/vec3","../../../core/libs/gl-matrix-2/vec3f64"],function(e,t,r,n,o){function i(e){for(var t in e){var r=e[t];r instanceof Function&&(e[t]=r.bind(e))}return e}Object.defineProperty(t,"__esModule",{value:!0}),t.cosCapped=function(e,t){return e>t?Math.cos(t):Math.cos(e)},t.fovx2fovy=function(e,t,r){return 2*Math.atan(r*Math.tan(.5*e)/t)},t.fovy2fovx=function(e,t,r){return 2*Math.atan(t*Math.tan(.5*e)/r)},t.maxScale=function(e){return Math.sqrt(Math.max(Math.max(e[0]*e[0]+e[4]*e[4]+e[8]*e[8],e[1]*e[1]+e[5]*e[5]+e[9]*e[9]),e[2]*e[2]+e[6]*e[6]+e[10]*e[10]))},t.scaleFromMatrix=function(e,t){return n.vec3.set(e,Math.sqrt(t[0]*t[0]+t[4]*t[4]+t[8]*t[8]),Math.sqrt(t[1]*t[1]+t[5]*t[5]+t[9]*t[9]),Math.sqrt(t[2]*t[2]+t[6]*t[6]+t[10]*t[10])),e},t.makeOrthonormal=function(e,t,r){r=r||e;var o=n.vec3.dot(e,t);n.vec3.set(r,e[0]-o*t[0],e[1]-o*t[1],e[2]-o*t[2]),n.vec3.normalize(r,r)},t.tangentFrame=function(e,t,r){Math.abs(e[0])>Math.abs(e[1])?n.vec3.set(t,0,1,0):n.vec3.set(t,1,0,0),n.vec3.cross(r,e,t),n.vec3.normalize(t,t),n.vec3.cross(t,r,e),n.vec3.normalize(r,r)},t.moduloPositive=function(e,t){return(e%t+t)%t},t.cartesianToSpherical=function(e,t){var o=n.vec3.length(e),i=r.asinClamped(e[2]/o);return n.vec3.set(t,o,i,Math.atan2(e[1]/o,e[0]/o)),t},t.sphericalToCartesian=function(e,t){var r=e[0],o=e[1];e=e[2];var i=Math.cos(o);n.vec3.set(t,r*i*Math.cos(e),r*i*Math.sin(e),r*Math.sin(o))},t.directionFromTo=function(e,t,r){var n=r[0]-t[0],o=r[1]-t[1];return t=r[2]-t[2],(r=n*n+o*o+t*t)?(r=1/Math.sqrt(r),e[0]=n*r,e[1]=o*r,e[2]=t*r,e):(e[0]=0,e[1]=0,e[2]=0,e)},t.bilerp=function(e,t,r,n,o,i){return(e+=(t-e)*o)+(r+(n-r)*o-e)*i},t.slerp=function(e,t,r,i){void 0===i&&(i=o.vec3f64.create());var a=n.vec3.length(e),s=n.vec3.length(t),l=n.vec3.dot(e,t)/(a*s);if(.9999999999999999>l){var l=Math.acos(l),p=((1-r)*a+r*s)/Math.sin(l),s=p/s*Math.sin(r*l);return n.vec3.scale(u,e,p/a*Math.sin((1-r)*l)),n.vec3.scale(c,t,s),n.vec3.add(i,u,c)}return n.vec3.lerp(i,e,t,r)},t.angle=function(e,t,o){e=n.vec3.normalize(u,e),t=n.vec3.normalize(c,t);var i=r.acosClamped(n.vec3.dot(e,t));return o&&(e=n.vec3.cross(l,e,t),0>n.vec3.dot(e,o))?-i:i},t.makePiecewiseLinearFunction=function(e){var t=e.length;return function(r){if(r<=e[0][0])return e[0][1];if(r>=e[t-1][0])return e[t-1][1];for(var n=1;r>e[n][0];)n++;var o=e[n][0];return(r=(o-r)/(o-e[n-1][0]))*e[n-1][1]+(1-r)*e[n][1]}},t.vectorEquals=function(e,t){if(null==e||null==t)return e!==t;if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0},e=function(){function e(e,t){this.min=e,this.max=t,this.range=t-e}return e.prototype.ndiff=function(e,t){return void 0===t&&(t=0),Math.ceil((e-t)/this.range)*this.range+t},e.prototype._normalize=function(e,t,r,n){return void 0===n&&(n=0),r-=n,r<e?r+=this.ndiff(e-r):r>t&&(r-=this.ndiff(r-t)),r+n},e.prototype.normalize=function(e,t){return this._normalize(this.min,this.max,e,t)},e.prototype.clamp=function(e,t){return void 0===t&&(t=0),r.clamp(e-t,this.min,this.max)+t},e.prototype.monotonic=function(e,t,r){return e<t?t:t+this.ndiff(e-t,r)},e.prototype.minimalMonotonic=function(e,t,r){return this._normalize(e,e+this.range,t,r)},e.prototype.center=function(e,t,r){return t=this.monotonic(e,t,r),this.normalize((e+t)/2,r)},e.prototype.diff=function(e,t,r){return this.monotonic(e,t,r)-e},e.prototype.shortestSignedDiff=function(e,t){e=this.normalize(e),t=this.normalize(t);var r=t-e;return e=t<e?this.minimalMonotonic(e,t)-e:t-this.minimalMonotonic(t,e),Math.abs(r)<Math.abs(e)?r:e},e.prototype.contains=function(e,t,r){return t=this.minimalMonotonic(e,t),(r=this.minimalMonotonic(e,r))>e&&r<t},e}(),t.Cyclical=e,t.planeFromPoints=function(e,t,r,o){n.vec3.subtract(a,t,e),n.vec3.subtract(s,r,e),n.vec3.cross(o,a,s),n.vec3.normalize(o,o),o[3]=-n.vec3.dot(e,o)};var a=o.vec3f64.create(),s=o.vec3f64.create();t.cyclical2PI=i(new e(0,2*Math.PI)),t.cyclicalPI=i(new e(-Math.PI,Math.PI)),t.cyclicalDeg=i(new e(0,360));var l=o.vec3f64.create(),u=o.vec3f64.create(),c=o.vec3f64.create()})},"esri/core/libs/gl-matrix-2/vec3":function(){define(["require","exports","./math/vec3"],function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.vec3=r})},"esri/core/libs/gl-matrix-2/math/vec3":function(){define(["require","exports","../factories/vec3f64","./common"],function(e,t,r,n){function o(e){var t=e[0],r=e[1];return e=e[2],Math.sqrt(t*t+r*r+e*e)}function i(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function a(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e}function s(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e[2]=t[2]*r[2],e}function l(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e[2]=t[2]/r[2],e}function u(e,t){var r=t[0]-e[0],n=t[1]-e[1];return e=t[2]-e[2],Math.sqrt(r*r+n*n+e*e)}function c(e,t){var r=t[0]-e[0],n=t[1]-e[1];return e=t[2]-e[2],r*r+n*n+e*e}function p(e){var t=e[0],r=e[1];return e=e[2],t*t+r*r+e*e}function d(e,t){var r=t[0],n=t[1],o=t[2],r=r*r+n*n+o*o;return 0<r&&(r=1/Math.sqrt(r),e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r),e}function f(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}Object.defineProperty(t,"__esModule",{value:!0}),t.length=o,t.copy=i,t.set=function(e,t,r,n){return e[0]=t,e[1]=r,e[2]=n,e},t.add=function(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e},t.subtract=a,t.multiply=s,t.divide=l,t.ceil=function(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e},t.floor=function(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e},t.min=function(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e[2]=Math.min(t[2],r[2]),e},t.max=function(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e[2]=Math.max(t[2],r[2]),e},t.round=function(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e},t.scale=function(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e},t.scaleAndAdd=function(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e[2]=t[2]+r[2]*n,e},t.distance=u,t.squaredDistance=c,t.squaredLength=p,t.negate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e},t.inverse=function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e},t.normalize=d,t.dot=f,t.cross=function(e,t,r){var n=t[0],o=t[1];t=t[2];var i=r[0],a=r[1];return r=r[2],e[0]=o*r-t*a,e[1]=t*i-n*r,e[2]=n*a-o*i,e},t.lerp=function(e,t,r,n){var o=t[0],i=t[1];return t=t[2],e[0]=o+n*(r[0]-o),e[1]=i+n*(r[1]-i),e[2]=t+n*(r[2]-t),e},t.hermite=function(e,t,r,n,o,i){var a=i*i,s=a*(2*i-3)+1,l=a*(i-2)+i,u=a*(i-1);return i=a*(3-2*i),e[0]=t[0]*s+r[0]*l+n[0]*u+o[0]*i,e[1]=t[1]*s+r[1]*l+n[1]*u+o[1]*i,e[2]=t[2]*s+r[2]*l+n[2]*u+o[2]*i,e},t.bezier=function(e,t,r,n,o,i){var a=1-i,s=a*a,l=i*i,u=s*a,s=3*i*s,a=3*l*a;return i*=l,e[0]=t[0]*u+r[0]*s+n[0]*a+o[0]*i,e[1]=t[1]*u+r[1]*s+n[1]*a+o[1]*i,e[2]=t[2]*u+r[2]*s+n[2]*a+o[2]*i,e},t.random=function(e,t){t=t||1;var r=2*n.RANDOM()*Math.PI,o=2*n.RANDOM()-1,i=Math.sqrt(1-o*o)*t;return e[0]=Math.cos(r)*i,e[1]=Math.sin(r)*i,e[2]=o*t,e},t.transformMat4=function(e,t,r){var n=t[0],o=t[1];return t=t[2],e[0]=r[0]*n+r[4]*o+r[8]*t+r[12],e[1]=r[1]*n+r[5]*o+r[9]*t+r[13],e[2]=r[2]*n+r[6]*o+r[10]*t+r[14],e},t.transformMat3=function(e,t,r){var n=t[0],o=t[1];return t=t[2],e[0]=n*r[0]+o*r[3]+t*r[6],e[1]=n*r[1]+o*r[4]+t*r[7],e[2]=n*r[2]+o*r[5]+t*r[8],e},t.transformQuat=function(e,t,r){var n=r[0],o=r[1],i=r[2],a=t[0],s=t[1];t=t[2];var l=o*t-i*s,u=i*a-n*t,c=n*s-o*a;return r=2*r[3],e[0]=a+l*r+2*(o*c-i*u),e[1]=s+u*r+2*(i*l-n*c),e[2]=t+c*r+2*(n*u-o*l),e},t.rotateX=function(e,t,r,n){var o=[],i=[];return o[0]=t[0]-r[0],o[1]=t[1]-r[1],o[2]=t[2]-r[2],i[0]=o[0],i[1]=o[1]*Math.cos(n)-o[2]*Math.sin(n),i[2]=o[1]*Math.sin(n)+o[2]*Math.cos(n),e[0]=i[0]+r[0],e[1]=i[1]+r[1],e[2]=i[2]+r[2],e},t.rotateY=function(e,t,r,n){var o=[],i=[];return o[0]=t[0]-r[0],o[1]=t[1]-r[1],o[2]=t[2]-r[2],i[0]=o[2]*Math.sin(n)+o[0]*Math.cos(n),i[1]=o[1],i[2]=o[2]*Math.cos(n)-o[0]*Math.sin(n),e[0]=i[0]+r[0],e[1]=i[1]+r[1],e[2]=i[2]+r[2],e},t.rotateZ=function(e,t,r,n){var o=[],i=[];return o[0]=t[0]-r[0],o[1]=t[1]-r[1],o[2]=t[2]-r[2],i[0]=o[0]*Math.cos(n)-o[1]*Math.sin(n),i[1]=o[0]*Math.sin(n)+o[1]*Math.cos(n),i[2]=o[2],e[0]=i[0]+r[0],e[1]=i[1]+r[1],e[2]=i[2]+r[2],e},t.angle=function(e,t){return i(h,e),i(y,t),d(h,h),d(y,y),e=f(h,y),1<e?0:-1>e?Math.PI:Math.acos(e)};var h=r.create(),y=r.create();t.str=function(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"},t.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]},t.equals=function(e,t){var r=e[0],o=e[1];e=e[2];var i=t[0],a=t[1];return t=t[2],Math.abs(r-i)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(i))&&Math.abs(o-a)<=n.EPSILON*Math.max(1,Math.abs(o),Math.abs(a))&&Math.abs(e-t)<=n.EPSILON*Math.max(1,Math.abs(e),Math.abs(t))},t.sub=a,t.mul=s,t.div=l,t.dist=u,t.sqrDist=c,t.len=o,t.sqrLen=p})},"esri/core/libs/gl-matrix-2/factories/vec3f64":function(){define(["require","exports"],function(e,t){function r(){return[0,0,0]}function n(){return[1,1,1]}function o(){return[1,0,0]}function i(){return[0,1,0]}function a(){return[0,0,1]}Object.defineProperty(t,"__esModule",{value:!0}),t.create=r,t.clone=function(e){return[e[0],e[1],e[2]]},t.fromValues=function(e,t,r){return[e,t,r]},t.fromArray=function(e){for(var t=r(),n=Math.min(3,e.length),o=0;o<n;++o)t[o]=e[o];return t},t.createView=function(e,t){return new Float64Array(e,t,3)},t.zeros=function(){return r()},t.ones=n,t.unitX=o,t.unitY=i,t.unitZ=a,t.ZEROS=r(),t.ONES=n(),t.UNIT_X=o(),t.UNIT_Y=i(),t.UNIT_Z=a()})},"esri/core/libs/gl-matrix-2/math/common":function(){define(["require","exports"],function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.EPSILON=1e-6,t.RANDOM=Math.random;var r=Math.PI/180,n=180/Math.PI;t.toRadian=function(e){return e*r},t.toDegree=function(e){return e*n},t.equals=function(e,r){return Math.abs(e-r)<=t.EPSILON*Math.max(1,Math.abs(e),Math.abs(r))}})},"esri/core/libs/gl-matrix-2/vec3f64":function(){define(["require","exports","./factories/vec3f64"],function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.vec3f64=r})},"esri/layers/mixins/OperationalLayer":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Error ../../core/promiseUtils ../../core/accessorSupport/decorators ../../core/accessorSupport/read ../../core/accessorSupport/write ../support/commonProperties".split(" "),function(e,t,r,n,o,i,a,s,l,u){Object.defineProperty(t,"__esModule",{value:!0}),t.OperationalLayer=function(e){return function(e){function i(){var t=null!==e&&e.apply(this,arguments)||this;return t.title="Layer",t}return r(i,e),i.prototype.writeListMode=function(e,t,r,n){n&&"ground"===n.layerContainerType?t[r]=e:e&&l.willPropertyWrite(this,r,{},n)&&(t[r]=e)},i.prototype.writeTitle=function(e,t){t.title=e||"Layer"},i.prototype.writeOperationalLayerType=function(e,t){e&&(t.layerType=e)},i.prototype.read=function(e,t){var r=this,n=arguments;t&&(t.layer=this),s.readLoadable(this,e,function(t){return r.inherited(n,[e,t])},t)},i.prototype.write=function(e,r){if(r&&r.origin){var n=r.origin+"/"+(r.layerContainerType||"operational-layers"),i=t.supportedTypes[n],i=i&&i[this.operationalLayerType];if("write"!==i&&"readwrite"!==i)return r.messages&&r.messages.push(new o("layer:unsupported","Layers ("+this.title+", "+this.id+") of type '"+this.declaredClass+"' are not supported in the context of '"+n+"'",{layer:this})),null}return n=this.inherited(arguments,[e,r]),i=!!r&&!!r.messages&&!!r.messages.filter(function(e){return e instanceof o&&"web-document-write:property-required"===e.name}).length,!this.url&&i?null:n},n([a.property({type:String,json:{write:{ignoreOrigin:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0}}}}})],i.prototype,"id",void 0),n([a.property({json:{write:{ignoreOrigin:!0}}})],i.prototype,"listMode",void 0),n([a.writer("listMode")],i.prototype,"writeListMode",null),n([a.property({type:String,json:{write:{ignoreOrigin:!0,allowNull:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0}}}}})],i.prototype,"title",void 0),n([a.writer("title")],i.prototype,"writeTitle",null),n([a.property({type:String,readOnly:!0,json:{write:{target:"layerType",ignoreOrigin:!0}}})],i.prototype,"operationalLayerType",void 0),n([a.writer("operationalLayerType")],i.prototype,"writeOperationalLayerType",null),n([a.property(u.opacity)],i.prototype,"opacity",void 0),n([a.property({type:Boolean,json:{read:{source:"visibility"},write:{target:"visibility"},origins:{"web-document":{read:{source:"visibility"},write:{target:"visibility"},default:!0}}}})],i.prototype,"visible",void 0),i=n([a.subclass("esri.layers.mixins.OperationalLayer")],i)}(a.declared(e))},t.typeModuleMap={ArcGISFeatureLayer:function(){return i.create(function(t){return e(["../FeatureLayer"],t)})},ArcGISImageServiceLayer:function(){return i.create(function(t){return e(["../ImageryLayer"],t)})},ArcGISImageServiceVectorLayer:function(){return i.resolve(null)},ArcGISMapServiceLayer:function(){return i.create(function(t){return e(["../MapImageLayer"],t)})},ArcGISSceneServiceLayer:function(){return i.create(function(t){return e(["../SceneLayer"],t)})},ArcGISStreamLayer:function(){return i.create(function(t){return e(["../StreamLayer"],t)})},ArcGISTiledElevationServiceLayer:function(){return i.create(function(t){return e(["../ElevationLayer"],t)})},ArcGISTiledImageServiceLayer:function(){return i.create(function(t){return e(["../TileLayer"],t)})},ArcGISTiledMapServiceLayer:function(){return i.create(function(t){return e(["../TileLayer"],t)})},BingMapsAerial:function(){return i.create(function(t){return e(["../BingMapsLayer"],t)})},BingMapsRoad:function(){return i.create(function(t){return e(["../BingMapsLayer"],t)})},BingMapsHybrid:function(){return i.create(function(t){return e(["../BingMapsLayer"],t)})},BuildingSceneLayer:function(){return i.create(function(t){return e(["../BuildingSceneLayer"],t)})},CSV:function(){return i.create(function(t){return e(["../CSVLayer"],t)})},GeoRSS:function(){return i.create(function(t){return e(["../GeoRSSLayer"],t)})},GroupLayer:function(){return i.create(function(t){return e(["../GroupLayer"],t)})},IntegratedMeshLayer:function(){return i.create(function(t){return e(["../IntegratedMeshLayer"],t)})},KML:function(){return i.create(function(t){return e(["../KMLLayer"],t)})},OpenStreetMap:function(){return i.create(function(t){return e(["../OpenStreetMapLayer"],t)})},PointCloudLayer:function(){return i.create(function(t){return e(["../PointCloudLayer"],t)})},VectorTileLayer:function(){return i.create(function(t){return e(["../VectorTileLayer"],t)})},WebTiledLayer:function(){return i.create(function(t){return e(["../WebTileLayer"],t)})},WFS:function(){return i.resolve(null)},WMS:function(){return i.create(function(t){return e(["../WMSLayer"],t)})},RasterDataLayer:function(){return i.resolve(null)}},t.supportedTypes={"web-scene/operational-layers":{ArcGISFeatureLayer:"readwrite",ArcGISImageServiceLayer:"readwrite",ArcGISMapServiceLayer:"readwrite",ArcGISSceneServiceLayer:"readwrite",ArcGISTiledElevationServiceLayer:"read",ArcGISTiledImageServiceLayer:"readwrite",ArcGISTiledMapServiceLayer:"readwrite",BuildingSceneLayer:"readwrite",GroupLayer:"readwrite",IntegratedMeshLayer:"readwrite",PointCloudLayer:"readwrite",WebTiledLayer:"readwrite",CSV:"readwrite",VectorTileLayer:"readwrite",WMS:"readwrite",KML:"readwrite",RasterDataLayer:"readwrite"},"web-scene/basemap":{ArcGISTiledImageServiceLayer:"readwrite",ArcGISTiledMapServiceLayer:"readwrite",WebTiledLayer:"readwrite",OpenStreetMap:"readwrite",VectorTileLayer:"readwrite",ArcGISImageServiceLayer:"readwrite",WMS:"readwrite",ArcGISMapServiceLayer:"readwrite"},"web-scene/ground":{ArcGISTiledElevationServiceLayer:"readwrite"},"web-map/operational-layers":{ArcGISImageServiceLayer:"readwrite",ArcGISImageServiceVectorLayer:"readwrite",ArcGISMapServiceLayer:"readwrite",ArcGISStreamLayer:"readwrite",ArcGISTiledImageServiceLayer:"readwrite",ArcGISTiledMapServiceLayer:"readwrite",ArcGISFeatureLayer:"readwrite",BingMapsAerial:"readwrite",BingMapsRoad:"readwrite",BingMapsHybrid:"readwrite",CSV:"readwrite",GeoRSS:"readwrite",KML:"readwrite",VectorTileLayer:"readwrite",WFS:"readwrite",WMS:"readwrite",WebTiledLayer:"readwrite"},"web-map/basemap":{ArcGISImageServiceLayer:"readwrite",ArcGISImageServiceVectorLayer:"readwrite",ArcGISMapServiceLayer:"readwrite",ArcGISTiledImageServiceLayer:"readwrite",ArcGISTiledMapServiceLayer:"readwrite",OpenStreetMap:"readwrite",VectorTileLayer:"readwrite",WMS:"readwrite",WebTiledLayer:"readwrite",BingMapsAerial:"readwrite",BingMapsRoad:"readwrite",BingMapsHybrid:"readwrite"}}})},"esri/layers/support/commonProperties":function(){define("require exports ../../core/tsSupport/assignHelper ../../core/urlUtils ../../core/accessorSupport/utils ../../core/accessorSupport/write ../../symbols/support/ElevationInfo ../../webdoc/support/opacityUtils".split(" "),function(e,t,r,n,o,i,a,s){Object.defineProperty(t,"__esModule",{value:!0}),t.screenSizePerspectiveEnabled={type:Boolean,value:!0,json:{origins:{"web-scene":{read:{source:["id","url","layerType"],reader:function(e,t){if(null!=t.screenSizePerspective||"defaults"!==this.originOf("screenSizePerspectiveEnabled"))return t.screenSizePerspective;o.getProperties(this).store.set("screenSizePerspectiveEnabled",!1,0)}},write:{ignoreOrigin:!0,target:"screenSizePerspective",writer:function(e,t,r,n){"defaults"===this.originOf("screenSizePerspectiveEnabled")&&e?t[r]=e:i.willPropertyWrite(this,"screenSizePerspectiveEnabled",{},n)&&(t[r]=e)}}}}}},t.popupEnabled={type:Boolean,value:!0,json:{read:{source:"disablePopup",reader:function(e,t){return!t.disablePopup}},write:{target:"disablePopup",writer:function(e,t,r){t[r]=!e}}}},t.labelsVisible={type:Boolean,json:{read:{source:"showLabels"},write:{target:"showLabels"}}},t.url={type:String,json:{write:{isRequired:!0,ignoreOrigin:!0,writer:n.write}}},t.legendEnabled={type:Boolean,value:!0,json:{origins:{service:{read:{enabled:!1}}},read:{source:"showLegend"},write:{target:"showLegend"}}},t.elevationInfo={value:null,type:a,json:{origins:{service:{read:{source:"elevationInfo"},write:{target:"elevationInfo",enabled:!1}}},read:{source:"layerDefinition.elevationInfo"},write:{target:"layerDefinition.elevationInfo"}}},t.readOnlyService=function(e){return{type:e,readOnly:!0,json:{origins:{service:{read:!0}},read:!1}}},t.opacity={type:Number,json:{origins:{"web-document":{default:1,write:!0,read:!0}}}},t.opacityDrawingInfo=r({},t.opacity,{json:r({},t.opacity.json,{origins:{"web-document":r({},t.opacity.json.origins["web-document"],{write:{enabled:!0,target:{opacity:{type:Number},"layerDefinition.drawingInfo.transparency":{type:Number}}}})},read:{source:["layerDefinition.drawingInfo.transparency","drawingInfo.transparency"],reader:function(e,t,r){return r&&"service"!==r.origin||!t.drawingInfo||void 0===t.drawingInfo.transparency?t.layerDefinition&&t.layerDefinition.drawingInfo&&void 0!==t.layerDefinition.drawingInfo.transparency?s.transparencyToOpacity(t.layerDefinition.drawingInfo.transparency):void 0:s.transparencyToOpacity(t.drawingInfo.transparency)}}})})})},"esri/symbols/support/ElevationInfo":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/tsSupport/generatorHelper ../../core/tsSupport/awaiterHelper ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators ./FeatureExpressionInfo ./unitConversionUtils".split(" "),function(e,t,r,n,o,i,a,s,l,u,c){var p=a.strict()({onTheGround:"on-the-ground",relativeToGround:"relative-to-ground",relativeToScene:"relative-to-scene",absoluteHeight:"absolute-height"}),d=new a.JSONMap({foot:"feet",kilometer:"kilometers",meter:"meters",mile:"miles","us-foot":"us-feet",yard:"yards"});return function(e){function t(){return null!==e&&e.apply(this,arguments)||this}r(t,e),o=t,t.prototype.readFeatureExpressionInfo=function(e,t){return null!=e?e:t.featureExpression&&0===t.featureExpression.value?{expression:"0"}:void 0},t.prototype.writeFeatureExpressionInfo=function(e,t,r,n){t[r]=e.write(null,n),"0"===e.expression&&(t.featureExpression={value:0})},Object.defineProperty(t.prototype,"mode",{get:function(){return this._isOverridden("mode")?this._get("mode"):null!=this.offset||this.featureExpressionInfo?"relative-to-ground":"on-the-ground"},set:function(e){this._override("mode",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"unit",{set:function(e){this._set("unit",e)},enumerable:!0,configurable:!0}),t.prototype.write=function(){return this.offset||this.mode||this.featureExpressionInfo||this.unit?this.inherited(arguments):null},t.prototype.clone=function(){return new o({mode:this.mode,offset:this.offset,featureExpressionInfo:this.featureExpressionInfo?this.featureExpressionInfo.clone():void 0,unit:this.unit})};var o;return n([l.property({type:u,json:{write:!0}})],t.prototype,"featureExpressionInfo",void 0),n([l.reader("featureExpressionInfo",["featureExpressionInfo","featureExpression"])],t.prototype,"readFeatureExpressionInfo",null),n([l.writer("featureExpressionInfo",{featureExpressionInfo:{type:u},"featureExpression.value":{type:[0]}})],t.prototype,"writeFeatureExpressionInfo",null),n([l.property({type:p.apiValues,dependsOn:["offset","featureExpressionInfo"],nonNullable:!0,json:{type:p.jsonValues,read:p.read,write:{writer:p.write,isRequired:!0}}})],t.prototype,"mode",null),n([l.property({type:Number,json:{write:!0}})],t.prototype,"offset",void 0),n([l.property({type:c.supportedUnits,json:{type:String,read:d.read,write:d.write}})],t.prototype,"unit",null),t=o=n([l.subclass("esri.layers.support.ElevationInfo")],t)}(l.declared(s.JSONSupport))})},"esri/symbols/support/FeatureExpressionInfo":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/tsSupport/generatorHelper ../../core/tsSupport/awaiterHelper ../../core/JSONSupport ../../core/accessorSupport/decorators ../../layers/support/fieldUtils".split(" "),function(e,t,r,n,o,i,a,s,l){return function(e){function t(){return null!==e&&e.apply(this,arguments)||this}r(t,e),a=t,t.prototype.collectRequiredFields=function(e,t){return i(this,void 0,void 0,function(){return o(this,function(r){return[2,l.collectArcadeFieldNames(e,t,this.expression)]})})},t.prototype.clone=function(){return new a({expression:this.expression,title:this.title})};var a;return n([s.property({type:String,json:{write:!0}})],t.prototype,"expression",void 0),n([s.property({type:String,json:{write:!0}})],t.prototype,"title",void 0),t=a=n([s.subclass("esri.layers.support.FeatureExpressionInfo")],t)}(s.declared(a.JSONSupport))})},"esri/layers/support/fieldUtils":function(){define("require exports ../../core/tsSupport/assignHelper ../../core/tsSupport/generatorHelper ../../core/tsSupport/awaiterHelper @dojo/framework/shim/array ../../core/Error ../../core/iteratorUtils ../../core/maybe ../../core/object ../../core/promiseUtils ./domains ../../support/arcadeOnDemand".split(" "),function(e,t,r,n,o,i,a,s,l,u,c,p,d){function f(e,t,r){if(e)for(var n=0;n<e.length;n++){var o=e[n],i=u.getDeepValue(o,t);(i=i&&"function"!=typeof i&&g(r,i))&&u.setDeepValue(o,i.name,t)}}function h(e,t){return e&&t?(L.clear(),y(L,e,t),s.valuesOfSet(L).sort()):[]}function y(e,t,r){if(r)if(t&&t.length)if(i.includes(r,"*"))for(r=0;r<t.length;r++)e.add(t[r].name);else for(var n=0;n<r.length;n++)o=r[n],m(e,t,o);else if(i.includes(r,"*"))e.clear(),e.add("*");else for(t=0;t<r.length;t++){var o=r[t];e.add(o)}}function m(e,t,r){t&&t.length?(t=g(t,r))&&e.add(t.name):"string"==typeof r&&e.add(r)}function g(e,t){if("string"!=typeof t)return null;if(null!=e){t=t.toLowerCase();for(var r=0;r<e.length;r++){var n=e[r];if(n&&n.name.toLowerCase()===t)return n}}return null}function v(e,t,r){return o(this,void 0,void 0,function(){var o,i,a,s,l;return n(this,function(n){switch(n.label){case 0:return r?[4,d.loadArcade()]:[2];case 1:for(o=n.sent().arcadeUtils,i=o.extractFieldNames(r),a=0,s=i;a<s.length;a++)l=s[a],m(e,t,l);return[2]}})})}function b(e,t){return o(this,void 0,void 0,function(){var r,o;return n(this,function(n){return t?(r=t.fields,(o=u.getDeepValue("elevationInfo.featureExpressionInfo",t))?[2,o.collectRequiredFields(e,r)]:[2]):[2]})})}function w(e,t){return o(this,void 0,void 0,function(){var r,o;return n(this,function(n){switch(n.label){case 0:return r=t.labelingInfo,o=t.fields,r&&r.length?[4,c.all(r.map(function(t){return S(e,o,t)}))]:[2];case 1:return n.sent(),[2]}})})}function S(e,t,r){return o(this,void 0,void 0,function(){var o,i,a,s,l;return n(this,function(n){switch(n.label){case 0:return r?(o=r.getLabelExpression(),i=r.where,"arcade"!==o.type?[3,2]:[4,v(e,t,o.expression)]):[2];case 1:return n.sent(),[3,3];case 2:(a=o.expression.match(/{[^}]*}/g))&&a.forEach(function(r){m(e,t,r.slice(1,-1))}),n.label=3;case 3:return s=/['"]+/g,i&&(l=i.split(" "),3===l.length&&m(e,t,l[0].replace(s,"")),7===l.length&&(m(e,t,l[0].replace(s,"")),m(e,t,l[4].replace(s,"")))),[2]}})})}function _(e){return"number"==typeof e&&!isNaN(e)&&isFinite(e)}function x(e){return null===e||_(e)}function O(e){return null===e||F(e)}function C(e){return null!=e&&"string"==typeof e}function M(e){return null===e||C(e)}function T(){return!0}function P(e,t){var r;switch(e.type){case"date":case"integer":case"long":case"small-integer":case"esriFieldTypeDate":case"esriFieldTypeInteger":case"esriFieldTypeLong":case"esriFieldTypeSmallInteger":r=e.nullable?O:F;break;case"double":case"single":case"esriFieldTypeSingle":case"esriFieldTypeDouble":r=e.nullable?x:_;break;case"string":case"esriFieldTypeString":r=e.nullable?M:C;break;default:r=T}return 1===arguments.length?r:r(t)}function I(e){return null!=e&&N.has(e.type)}function E(e,t){return e.nullable&&null===t?null:I(e)&&!j(e.type,Number(t))?R.OUT_OF_RANGE:P(e,t)?e.domain?p.validateDomainValue(e.domain,t):null:D.INVALID_TYPE}function j(e,t){return!!(e="string"==typeof e?k(e):e)&&(e.isInteger?F(t)&&t>=e.min&&t<=e.max:t>=e.min&&t<=e.max)}function k(e){switch(e){case"esriFieldTypeSmallInteger":case"small-integer":return t.smallIntegerRange;case"esriFieldTypeInteger":case"integer":return t.integerRange;case"esriFieldTypeSingle":case"single":return t.singleRange;case"esriFieldTypeDouble":case"double":return t.doubleRange}}function A(e,t,r){if(!t||!t.attributes||!e){if(l.isSome(r))for(var n=0;n<e.length;n++)t=e[n],r.add(t);return!0}for(var n=t.attributes,o=!1,i=0;i<e.length;i++)if(!((t=e[i])in n)){if(o=!0,!l.isSome(r))break;r.add(t)}return o}Object.defineProperty(t,"__esModule",{value:!0}),t.rendererFields="field field2 field3 normalizationField rotationInfo.field proportionalSymbolInfo.field proportionalSymbolInfo.normalizationField colorInfo.field colorInfo.normalizationField".split(" "),t.visualVariableFields=["field","normalizationField"],t.fixRendererFields=function(e,r){if(null!=e&&null!=r){var n=0;for(e=Array.isArray(e)?e:[e];n<e.length;n++){var o=e[n];if(f(t.rendererFields,o,r),"visualVariables"in o&&o.visualVariables)for(var i=0,o=o.visualVariables;i<o.length;i++)f(t.visualVariableFields,o[i],r)}}},t.fixTimeInfoFields=function(e,t){if(null!=e&&null!=t)if("startField"in e){var r=g(t,e.startField);t=g(t,e.endField),e.startField=r&&r.name||null,e.endField=t&&t.name||null}else r=g(t,e.startTimeField),t=g(t,e.endTimeField),e.startTimeField=r&&r.name||null,e.endTimeField=t&&t.name||null};var L=new Set;t.fixFields=h,t.collectFields=y,t.collectField=m,t.unpackFieldNames=function(e,t){return t&&e?i.includes(t,"*")?e.map(function(e){return e.name}):t:[]},t.packFields=function(e,t,r){return void 0===r&&(r=1),t&&e?i.includes(t,"*")?["*"]:(t=h(e,t),t.length/e.length>=r?["*"]:t):[]},t.getField=g,t.hasField=function(e,t){if(!e||!t||"string"!=typeof t)return!1;t=t.toLowerCase();for(var r=0;r<e.length;r++){var n=e[r];if(n&&n.name.toLowerCase()===t)return!0}return!1},t.collectArcadeFieldNames=v,t.getElevationFields=function(e){return o(this,void 0,void 0,function(){var t;return n(this,function(r){switch(r.label){case 0:return e?(t=new Set,[4,b(t,e)]):[2,[]];case 1:return r.sent(),[2,s.valuesOfSet(t).sort()]}})})},t.collectElevationFields=b,t.collectFilterFields=function(t,r,i){return o(this,void 0,void 0,function(){var o,s;return n(this,function(n){switch(n.label){case 0:return r&&i&&(i.where&&"1=1"!==i.where||i.timeExtent)?(r.timeInfo&&i.timeExtent&&y(t,r.fields,[r.timeInfo.startField,r.timeInfo.endField]),i.where?[4,c.create(function(t){e(["../../core/sql/WhereClause"],t)})]:[3,2]):[2];case 1:if(o=n.sent(),s=o.WhereClause.create(i.where,r.fieldsIndex),!s.isStandardized)throw new a("fieldUtils:collectFilterFields","Where clause is not standardized");y(t,r.fields,s.fieldNames),n.label=2;case 2:return[2]}})})},t.getTimeFields=function(e){return o(this,void 0,void 0,function(){var t;return n(this,function(r){return e&&(t="timeInfo"in e&&e.timeInfo)?[2,h(e.fields,[e.trackIdField,t.startField,t.endField])]:[2,[]]})})},t.getFeatureEditFields=function(e){if(!e)return[];var t="editFieldsInfo"in e&&e.editFieldsInfo;return t?h(e.fields,[t&&t.creatorField,t&&t.creationDateField,t&&t.editorField,t&&t.editDateField]):[]},t.getFeatureGeometryFields=function(e){if(!e)return[];var t="geometryProperties"in e&&e.geometryProperties;return t?h(e.fields,[t&&t.shapeAreaFieldName,t&&t.shapeLengthFieldName]):[]},t.getLabelingFields=function(e){return o(this,void 0,void 0,function(){var t;return n(this,function(r){switch(r.label){case 0:return e?(t=new Set,[4,w(t,e)]):[2,[]];case 1:return r.sent(),[2,s.valuesOfSet(t).sort()]}})})},t.collectLabelingFields=w,t.getFieldDefaultValue=function(e){var t=e.defaultValue;return void 0!==t&&P(e,t)?t:e.nullable?null:void 0};var F=function(){return"isInteger"in Number?Number.isInteger:function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}}();t.isValueMatchingFieldType=P,t.numericTypes=["integer","small-integer","single","double"];var N=s.createSetFromValues(t.numericTypes.concat(["esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]));t.isNumericField=I,t.isStringField=function(e){return null!=e&&("string"===e.type||"esriFieldTypeString"===e.type)},t.isDateField=function(e){return null!=e&&("date"===e.type||"esriFieldTypeDate"===e.type)},t.isValidFieldValue=function(e,t){return null===E(e,t)};var R;(R=t.NumericRangeValidationError||(t.NumericRangeValidationError={})).OUT_OF_RANGE="numeric-range-validation-error::out-of-range";var D;(D=t.TypeValidationError||(t.TypeValidationError={})).INVALID_TYPE="type-validation-error::invalid-type",t.sanitizeNullFieldValue=function(e){return null==e||"number"==typeof e&&isNaN(e)?null:e},t.validateFieldValue=E,t.isNumberInRange=j,t.getFieldRange=function(e){var t=p.getDomainRange(e.domain);return t||(I(e)?k(e.type):void 0)},t.getNumericTypeForValue=function(e){if(!_(e))return null;if(F(e)){if(e>=t.smallIntegerRange.min&&e<=t.smallIntegerRange.max)return"esriFieldTypeSmallInteger";if(e>=t.integerRange.min&&e<=t.integerRange.max)return"esriFieldTypeInteger"}return e>=t.singleRange.min&&e<=t.singleRange.max?"esriFieldTypeSingle":"esriFieldTypeDouble"},t.smallIntegerRange={min:-32768,max:32767,isInteger:!0},t.integerRange={min:-2147483648,max:2147483647,isInteger:!0},t.singleRange={min:-3.4e38,max:1.2e38,isInteger:!1},t.doubleRange={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1},t.validationErrorToString=function(e,t,r){switch(e){case p.DomainValidationError.INVALID_CODED_VALUE:return"Value "+r+" is not in the coded domain - field: "+t.name+", domain: "+JSON.stringify(t.domain);case p.DomainValidationError.VALUE_OUT_OF_RANGE:return"Value "+r+" is out of the range of valid values - field: "+t.name+", domain: "+JSON.stringify(t.domain);case D.INVALID_TYPE:return"Value "+r+" is not a valid value for the field type - field: "+t.name+", type: "+t.type+", nullable: "+t.nullable;case R.OUT_OF_RANGE:return e=k(t.type),"Value "+r+" is out of range for the number type - field: "+t.name+", type: "+t.type+", value range is "+e.min+" to "+e.max}},t.featureHasFields=function(e,t){return!A(e,t,null)},t.populateMissingFields=A})},"esri/core/iteratorUtils":function(){define(["require","exports","@dojo/framework/shim/array"],function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.someMap=Map.prototype.entries?function(e,t){e=e.entries();for(var r=e.next();!r.done;r=e.next())if(t(r.value[1],r.value[0]))return!0;return!1}:function(e,t){var r=!0;return e.forEach(function(e,n){r&&(r=!t(e,n))}),!r},e=!!Map.prototype.values,t.pairsOfMap=function(e){var t=[];return e.forEach(function(e,r){return t.push([r,e])}),t},t.valuesOfMap=e?function(e){return r.from(e.values())}:function(e){var t=Array(e.size),r=0;return e.forEach(function(e){return t[r++]=e}),t},t.keysOfMap=function(e){var t=Array(e.size),r=0;return e.forEach(function(e,n){return t[r++]=n}),t},t.MapFromValues=e?function(e){return new Map(e)}:function(e){for(var t=new Map,r=0;r<e.length;r++){var n=e[r];t.set(n[0],n[1])}return t},t.someSet=Set.prototype.entries?function(e,t){e=e.entries();for(var r=e.next();!r.done;r=e.next())if(t(r.value[0]))return!0;return!1}:function(e,t){var r=!0;return e.forEach(function(e){r&&(r=!t(e))}),!r},e=!!Set.prototype.values,t.valuesOfSet=e?function(e){return r.from(e.values())}:function(e){var t=Array(e.size),r=0;return e.forEach(function(e){return t[r++]=e}),t},t.createSetFromValues=e?function(e){return new Set(e)}:function(e){for(var t=new Set,r=0;r<e.length;r++)t.add(e[r]);return t}})},"esri/layers/support/domains":function(){define("require exports ../../core/compilerUtils ./CodedValueDomain ./Domain ./InheritedDomain ./RangeDomain".split(" "),function(e,t,r,n,o,i,a){function s(e,t){switch(e.type){case"range":var r="range"in e?e.range[1]:e.maxValue;if(+t<("range"in e?e.range[0]:e.minValue)||+t>r)return l.VALUE_OUT_OF_RANGE;break;case"coded-value":case"codedValue":if(null==e.codedValues||e.codedValues.every(function(e){return null==e||e.code!==t}))return l.INVALID_CODED_VALUE}return null}Object.defineProperty(t,"__esModule",{value:!0}),t.CodedValueDomain=n,t.DomainBase=o,t.InheritedDomain=i,t.RangeDomain=a;var l;!function(e){e.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range",e.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value"}(l=t.DomainValidationError||(t.DomainValidationError={})),t.isValidDomainValue=function(e,t){return null===s(e,t)},t.validateDomainValue=s,t.types={key:"type",base:t.DomainBase,typeMap:{range:t.RangeDomain,"coded-value":t.CodedValueDomain,inherited:t.InheritedDomain}},t.getDomainRange=function(e){if(e&&"range"===e.type)return{min:"range"in e?e.range[0]:e.minValue,max:"range"in e?e.range[1]:e.maxValue}},t.fromJSON=function(e){if(!e||!e.type)return null;switch(e.type){case"range":return t.RangeDomain.fromJSON(e);case"codedValue":return t.CodedValueDomain.fromJSON(e);case"inherited":return t.InheritedDomain.fromJSON(e);default:r.neverReached(e)}return null}})},"esri/layers/support/CodedValueDomain":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/lang ../../core/accessorSupport/decorators ./CodedValue ./Domain".split(" "),function(e,t,r,n,o,i,a,s){return function(e){function t(t){return t=e.call(this,t)||this,t.codedValues=null,t.type="coded-value",t}r(t,e),s=t,t.prototype.getName=function(e){var t=null;if(this.codedValues){var r=String(e);this.codedValues.some(function(e){return String(e.code)===r&&(t=e.name),!!t})}return t},t.prototype.clone=function(){return new s({codedValues:o.clone(this.codedValues),name:this.name})};var s;return n([i.property({type:[a.default],json:{write:!0}})],t.prototype,"codedValues",void 0),n([i.enumeration.serializable()({codedValue:"coded-value"})],t.prototype,"type",void 0),t=s=n([i.subclass("esri.layers.support.CodedValueDomain")],t)}(i.declared(s))})},"esri/layers/support/CodedValue":function(){define("require exports ../../core/tsSupport/decorateHelper ../../core/tsSupport/declareExtendsHelper ../../core/JSONSupport ../../core/accessorSupport/decorators".split(" "),function(e,t,r,n,o,i){Object.defineProperty(t,"__esModule",{value:!0}),e=function(e){function t(t){return t=e.call(this,t)||this,t.name=null,t.code=null,t}n(t,e),o=t,t.prototype.clone=function(){return new o({name:this.name,code:this.code})};var o;return r([i.property({type:String,json:{write:!0}})],t.prototype,"name",void 0),r([i.property({type:[String,Number],json:{write:!0}})],t.prototype,"code",void 0),t=o=r([i.subclass("esri.layers.support.CodedValue")],t)}(i.declared(o.JSONSupport)),t.CodedValue=e,t.default=e})},"esri/layers/support/Domain":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators".split(" "),function(e,t,r,n,o,i,a){var s=new o.default({inherited:"inherited",codedValue:"coded-value",range:"range"});return function(e){function t(t){return t=e.call(this,t)||this,t.name=null,t.type=null,t}return r(t,e),n([a.property({type:String,json:{write:!0}})],t.prototype,"name",void 0),n([a.enumeration.serializable()(s)],t.prototype,"type",void 0),t=n([a.subclass("esri.layers.support.Domain")],t)}(a.declared(i.JSONSupport))})},"esri/layers/support/InheritedDomain":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ./Domain".split(" "),function(e,t,r,n,o,i){return function(e){function t(t){return t=e.call(this,t)||this,t.type="inherited",t}r(t,e),i=t,t.prototype.clone=function(){return new i};var i;return n([o.enumeration.serializable()({inherited:"inherited"})],t.prototype,"type",void 0),t=i=n([o.subclass("esri.layers.support.InheritedDomain")],t)}(o.declared(i))})},"esri/layers/support/RangeDomain":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ./Domain".split(" "),function(e,t,r,n,o,i){return function(e){function t(t){return t=e.call(this,t)||this,t.maxValue=null,t.minValue=null,t.type="range",t}r(t,e),i=t,t.prototype.clone=function(){return new i({maxValue:this.maxValue,minValue:this.minValue,name:this.name})};var i;return n([o.property({type:Number,json:{type:[Number],read:{source:"range",reader:function(e,t){return t.range&&t.range[1]}},write:{enabled:!1,overridePolicy:function(){return{enabled:null!=this.maxValue&&null==this.minValue}},target:"range",writer:function(e,t,r){t[r]=[this.minValue||0,e]}}}})],t.prototype,"maxValue",void 0),n([o.property({type:Number,json:{type:[Number],read:{source:"range",reader:function(e,t){return t.range&&t.range[0]}},write:{target:"range",writer:function(e,t,r){t[r]=[e,this.maxValue||0]}}}})],t.prototype,"minValue",void 0),n([o.enumeration.serializable()({range:"range"})],t.prototype,"type",void 0),t=i=n([o.subclass("esri.layers.support.RangeDomain")],t)}(o.declared(i))})},"esri/support/arcadeOnDemand":function(){define("require exports ../core/tsSupport/generatorHelper ../core/tsSupport/awaiterHelper ../core/tsSupport/assignHelper ../geometry ../core/maybe ../core/promiseUtils @dojo/framework/shim/Promise".split(" "),function(e,t,r,n,o,i,a,s){function l(){return n(this,void 0,void 0,function(){var t=this;return r(this,function(o){return u||(u=function(){return n(t,void 0,void 0,function(){var t;return r(this,function(r){switch(r.label){case 0:return[4,new Promise(function(t,r){e(["./arcadeUtils"],t,r)})];case 1:return t=r.sent(),[4,t.arcade.load()];case 2:return r.sent(),[2,{arcade:t.arcade,arcadeUtils:t,Dictionary:t.Dictionary,Feature:t.arcadeFeature}]}})})}()),[2,u]})})}Object.defineProperty(t,"__esModule",{value:!0});var u;t.loadArcade=l,t.createLabelExpression=function(e,t,r){return c.create(e,t,r,null,["$feature"])},t.createVVExpression=function(e,t,r){return c.create(e,t,r,null,["$feature","$view"])},t.createRendererExpression=function(e,t,r){return c.create(e,t,r,null,["$feature","$view"])},t.createDictionaryExpression=function(e,t,r,n){return c.create(e,t,r,n,["$feature","$view"])};var c=function(){function e(e,t,r,n,o,i,a){this.evaluate=n,this._syntaxTree=r,this._arcade=e,this._arcadeDictionary=t,this._arcadeFeature=o,this._fields=i,this._spatialReference=a,this._referencesGeometry=e.scriptTouchesGeometry(this._syntaxTree),this._referencesScale=this._arcade.referencesMember(this._syntaxTree,"$view.scale")}return e.create=function(t,u,c,p,d,f){return n(this,void 0,void 0,function(){var n,h,y,m,g,v,b,w,S,_,x,O,C,M,T;return r(this,function(r){switch(r.label){case 0:return[4,l()];case 1:return n=r.sent(),h=n.arcade,y=n.Feature,m=n.Dictionary,g=i.SpatialReference.fromJSON(u),v=h.parseScript(t,f),b=d.reduce(function(e,t){var r;return o({},e,(r={},r[t]=null,r))},{}),w=null,a.isSome(p)&&(w=new m(p),w.immutable=!0,b.$config=null),S=h.scriptUsesGeometryEngine(v)&&h.enableGeometrySupport(),_=h.scriptUsesFeatureSet(v)&&h.enableFeatureSetSupport(),x=h.scriptIsAsync(v)&&h.enableAsyncSupport(),O={vars:b,spatialReference:g,useAsync:!!x},C=new m,C.immutable=!1,C.setField("scale",0),M=h.compileScript(v,O),T=function(e){return"$view"in e&&e.$view&&(C.setField("scale",e.$view.scale),e.$view=C),w&&(e.$config=w),M({vars:e,spatialReference:g})},[4,s.all([S,_,x])];case 2:return r.sent(),[2,new e(h,m,v,T,new y,c,g)]}})})},e.prototype.repurposeFeature=function(e){return e.geometry&&!e.geometry.spatialReference&&(e.geometry.spatialReference=this._spatialReference),this._arcadeFeature.repurposeFromGraphicLikeObject(e.geometry,e.attributes,{fields:this._fields}),this._arcadeFeature},e.prototype.createDictionary=function(){return new this._arcadeDictionary},e.prototype.referencesMember=function(e){return this._arcade.referencesMember(this._syntaxTree,e)},e.prototype.referencesFunction=function(e){return this._arcade.referencesFunction(this._syntaxTree,e)},e.prototype.referencesGeometry=function(){return this._referencesGeometry},e.prototype.referencesScale=function(){return this._referencesScale},e.prototype.extractFieldLiterals=function(e){return this._arcade.extractFieldLiterals(this._syntaxTree,e)},e}();t.default=c})},"esri/symbols/support/unitConversionUtils":function(){define(["require","exports","../../renderers/support/utils"],function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.supportsUnit=function(e){return null!=r.meterIn[e]},t.getMetersPerUnit=function(e){return 1/(r.meterIn[e]||1)},t.supportedUnits=function(){var e=Object.keys(r.meterIn);return e.sort(),e}()})},"esri/renderers/support/utils":function(){define("require exports ../../core/tsSupport/assignHelper ../../core/Logger ../../core/unitUtils ../../intl/date ./numberUtils ../visualVariables/support/ColorStop".split(" "),function(e,t,r,n,o,i,a,s){function l(e,t,r){var n="";return 0===t?n=p.lt+" ":t===r&&(n=p.gt+" "),n+e}function u(e){var t=e.minValue,r=e.maxValue,n=e.isFirstBreak?"":p.gt+" ";return e="percent-of-total"===e.normalizationType?p.pct:"",t=null==t?"":a.format(t),r=null==r?"":a.format(r),n+t+e+" "+p.ld+" "+r+e}Object.defineProperty(t,"__esModule",{value:!0});var c=n.getLogger("esri.renderers.support.utils"),p={lte:"<=",gte:">=",lt:"<",gt:">",pct:"%",ld:"–"},d={millisecond:0,second:1,minute:2,hour:3,day:4,month:5,year:6},f={millisecond:"long-month-day-year-long-time",second:"long-month-day-year-long-time",minute:"long-month-day-year-short-time",hour:"long-month-day-year-short-time",day:"long-month-day-year",month:"long-month-day-year",year:"year"};t.meterIn={inches:o.convertUnit(1,"meters","inches"),feet:o.convertUnit(1,"meters","feet"),"us-feet":o.convertUnit(1,"meters","us-feet"),yards:o.convertUnit(1,"meters","yards"),miles:o.convertUnit(1,"meters","miles"),"nautical-miles":o.convertUnit(1,"meters","nautical-miles"),millimeters:o.convertUnit(1,"meters","millimeters"),centimeters:o.convertUnit(1,"meters","centimeters"),decimeters:o.convertUnit(1,"meters","decimeters"),meters:o.convertUnit(1,"meters","meters"),kilometers:o.convertUnit(1,"meters","kilometers"),"decimal-degrees":1/o.lengthToDegrees(1,"meters")},t.timelineDateFormatOptions=i.convertDateFormatToIntlOptions("short-date"),t.createColorStops=function(e){var t=e.values,r=e.colors,n=e.labelIndexes,o=e.isDate,u=e.dateFormatOptions;return t.map(function(e,c){var p=null;if(!n||-1<n.indexOf(c)){var d=void 0;(d=o?i.formatDate(e,u):a.format(e))&&(p=l(d,c,t.length-1))}return new s({value:e,color:r[c],label:p})})},t.updateColorStops=function(e){var t=e.stops,r=e.changes,n=e.isDate,o=e.dateFormatOptions,s=t.map(function(e){return e.value});e=[];for(var u=0;u<r.length;u++){var c=r[u];e.push(c.index),s[c.index]=c.value}var p=a.round(s,{indexes:e});t.forEach(function(e,r){if(e.value=s[r],null!=e.label){var u=void 0,c=null;(u=n?i.formatDate(p[r],o):a.format(p[r]))&&(c=l(u,r,t.length-1)),e.label=c}})},t.createClassBreakLabel=u,t.setLabelsForClassBreaks=function(e){var t=e.classBreakInfos,r=e.normalizationType,n=[];if(t&&t.length)if("standard-deviation"===e.classificationMethod)c.warn("setLabelsForClassBreaks","cannot set labels for class breaks generated using 'standard-deviation' method.");else if(e.round){for(n.push(t[0].minValue),e=0;e<t.length;e++)n.push(t[e].maxValue);n=a.round(n),t.forEach(function(e,t){e.label=u({minValue:0===t?n[0]:n[t],maxValue:n[t+1],isFirstBreak:0===t,normalizationType:r})})}else t.forEach(function(e,t){e.label=u({minValue:e.minValue,maxValue:e.maxValue,isFirstBreak:0===t,normalizationType:r})})},t.updateClassBreak=function(e){if("standard-deviation"===e.classificationMethod)c.warn("updateClassBreak","cannot update labels for class breaks generated using 'standard-deviation' method.");else{var t=e.classBreaks,r=e.change,n=r.index,r=r.value,o=t.length,i=-1,a=-1;0===n?i=n:n===o?a=n-1:(a=n-1,i=n),e=e.normalizationType,n=null,-1<i&&i<o&&(n=t[i],n.minValue=r,n.label=u({minValue:n.minValue,maxValue:n.maxValue,isFirstBreak:0===i,normalizationType:e})),-1<a&&a<o&&(n=t[a],n.maxValue=r,n.label=u({minValue:n.minValue,maxValue:n.maxValue,isFirstBreak:0===a,normalizationType:e}))}},t.calculateDateFormatInterval=function(e){e=e.map(function(e){return new Date(e)});for(var t=e.length,r=1/0,n=null,o=0;o<t-1;o++){for(var i=e[o],a=[],s=1/0,l=null,u=o+1;u<t;u++){var c=e[u],c=i.getFullYear()!==c.getFullYear()&&"year"||i.getMonth()!==c.getMonth()&&"month"||i.getDate()!==c.getDate()&&"day"||i.getHours()!==c.getHours()&&"hour"||i.getMinutes()!==c.getMinutes()&&"minute"||i.getSeconds()!==c.getSeconds()&&"second"||"millisecond",p=d[c];p<s&&(s=p,l=c),a.push(c)}s<r&&(r=s,n=l)}return n},t.createUniqueValueLabel=function(e){var t=e.value,r=e.domain,n=e.fieldInfo;e=e.dateFormatInterval;var o=String(t);return(r=r&&"codedValues"in r&&r.codedValues?r.getName(t):null)?o=r:"number"==typeof t&&(o=n&&"date"===n.type?i.formatDate(t,e&&i.convertDateFormatToIntlOptions(f[e])):a.format(t)),o}})},"esri/core/unitUtils":function(){define("require exports ./compilerUtils ./iteratorUtils ./jsonMap ./wgs84Constants ../geometry/support/WKIDUnitConversion".split(" "),function(e,t,r,n,o,i,a){function s(e){if(e=_[e])return e;throw Error("unknown measure")}function l(e){return S[e].baseUnit}function u(e,t){return void 0===t&&(t=null),t=t||s(e),S[t].baseUnit===e}function c(e,t,r){if(t===r)return e;var n=s(t);if(n!==s(r))throw Error("incompatible units");return e=u(t,n)?e:e*S[n].units[t].inBaseUnits,u(r,n)?e:e/S[n].units[r].inBaseUnits}function p(e){return w.fromJSON(e.toLowerCase())||null}function d(e,t){return void 0===t&&(t=y),f(e,!0)||t}function f(e,t){void 0===t&&(t=!1);var r,n,o;return null!=e&&("object"==typeof e?(r=e.wkid,n=e.wkt):"number"==typeof e?r=e:"string"==typeof e&&(n=e)),r?!(o=v.values[v[r]])&&t&&b.has(r)&&(o=m):n&&-1!==n.search(/^PROJCS/i)&&(e=g.exec(n))&&e[1]&&(o=parseFloat(e[1].split(",")[1])),o}function h(e){var t,r,n;return null!=e&&("object"==typeof e?(t=e.wkid,r=e.wkt):"number"==typeof e?t=e:"string"==typeof e&&(r=e)),t?n=v.units[v[t]]:r&&-1!==r.search(/^PROJCS/i)&&(e=g.exec(r))&&e[1]&&(n=(e=/[\\"\\']{1}([^\\"\\']+)/.exec(e[1]))&&e[1]),n?p(n):null}Object.defineProperty(t,"__esModule",{value:!0}),t.inchesPerMeter=39.37;var y=i.wgs84Radius*Math.PI/180,m=i.wgs84Radius*Math.PI/200,g=/UNIT\[([^\]]+)\]\]$/i,v=a,b=n.createSetFromValues([4261,4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104139,104140]),w=o.strict()({meter:"meters",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",yard_clarke:"clarke-yards",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",chain_benoit_1895_b:"benoit-1895-b-chains",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",foot_gold_coast:"gold-coast-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"});e={millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},decimeters:{inBaseUnits:.1},meters:{inBaseUnits:1},kilometers:{inBaseUnits:1e3},inches:{inBaseUnits:.0254},feet:{inBaseUnits:.3048},yards:{inBaseUnits:.9144},miles:{inBaseUnits:1609.344},"nautical-miles":{inBaseUnits:1852},"us-feet":{inBaseUnits:1200/3937}},n={"square-millimeters":{inBaseUnits:1e-6},"square-centimeters":{inBaseUnits:1e-4},"square-decimeters":{inBaseUnits:.1*.1},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:1e6},"square-inches":{inBaseUnits:64516e-8},"square-feet":{inBaseUnits:.09290304},"square-yards":{inBaseUnits:.83612736},"square-miles":{inBaseUnits:2589988.110336},"square-us-feet":{inBaseUnits:function(e){return e*e}(1200/3937)},acres:{inBaseUnits:4046.8564224},ares:{inBaseUnits:100},hectares:{inBaseUnits:1e4}};var S={length:{baseUnit:"meters",units:e},area:{baseUnit:"square-meters",units:n},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1e3*1e-9},"cubic-centimeters":{inBaseUnits:.001},"cubic-decimeters":{inBaseUnits:1},"cubic-meters":{inBaseUnits:1e3},"cubic-kilometers":{inBaseUnits:1e12},"cubic-inches":{inBaseUnits:.016387064},"cubic-feet":{inBaseUnits:.09290304*304.8},"cubic-yards":{inBaseUnits:764.554857984},"cubic-miles":{inBaseUnits:4168181825440.58}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},_=function(){var e,t={};for(e in S)for(var r in S[e].units)t[r]=e;return t}();t.measurementAreaUnits="metric imperial square-inches square-feet square-yards square-miles square-us-feet square-meters square-kilometers acres ares hectares".split(" "),t.measurementLengthUnits="metric imperial inches feet yards miles nautical-miles us-feet meters kilometers".split(" "),t.measureForUnit=s,t.baseUnitForMeasure=l,t.baseUnitForUnit=function(e){return l(s(e))},t.isBaseUnit=u,t.convertUnit=c,t.preferredMetricLengthUnit=function(e,t){return 3e3>c(e,t,"meters")?"meters":"kilometers"},t.preferredMetricVerticalLengthUnit=function(e,t){return 1e5>c(e,t,"meters")?"meters":"kilometers"},t.preferredImperialLengthUnit=function(e,t){return 1e3>c(e,t,"feet")?"feet":"miles"},t.preferredImperialVerticalLengthUnit=function(e,t){return 1e5>c(e,t,"feet")?"feet":"miles"},t.preferredMetricAreaUnit=function(e,t){return 3e6>c(e,t,"square-meters")?"square-meters":"square-kilometers"},t.preferredImperialAreaUnit=function(e,t){return 1e6>c(e,t,"square-feet")?"square-feet":"square-miles"},t.lengthToDegrees=function(e,t,r){return void 0===r&&(r=i.wgs84Radius),c(e,t,"meters")/(r*Math.PI/180)},t.unitFromRESTJSON=p,t.unitToRESTJSON=function(e){return w.toJSON(e)||null},t.getMetersPerVerticalUnitForSR=function(e){return e=d(e),1e5<e?1:e},t.getVerticalUnitStringForSR=function(e){return 1e5<d(e)?"meters":h(e)},t.getMetersPerUnitForSR=d,t.getMetersPerUnit=f,t.getUnitString=h,t.getDefaultUnitSystem=function(e){if(!e)return null;switch(e=h(e)){case"feet":case"us-feet":case"clarke-feet":case"clarke-yards":case"clarke-links":case"sears-yards":case"sears-feet":case"sears-chains":case"benoit-1895-b-chains":case"indian-yards":case"indian-1937-yards":case"gold-coast-feet":case"sears-1922-truncated-chains":return"imperial";case"50-kilometers":case"150-kilometers":case"meters":return"metric";case null:case void 0:break;default:r.neverReached(e)}return null}})},"esri/intl/date":function(){define("require exports ../core/tsSupport/assignHelper @dojo/framework/shim/WeakMap ../core/jsonMap ./locale".split(" "),function(e,t,r,n,o,i){function a(e){if(e=e||y,!h.has(e)){var t=i.getLocale(),t=f[i.getLocale()]||t;h.set(e,new Intl.DateTimeFormat(t,e))}return h.get(e)}Object.defineProperty(t,"__esModule",{value:!0}),e={year:"numeric",month:"numeric",day:"numeric"};var s={year:"numeric",month:"long",day:"numeric"},l={year:"numeric",month:"short",day:"numeric"},u={year:"numeric",month:"long",weekday:"long",day:"numeric"},c={hour:"numeric",minute:"numeric"},p=r({},c,{second:"numeric"}),d={"short-date":e,"short-date-short-time":r({},e,c),"short-date-short-time-24":r({},e,c,{hour12:!1}),"short-date-long-time":r({},e,p),"short-date-long-time-24":r({},e,p,{hour12:!1}),"short-date-le":e,"short-date-le-short-time":r({},e,c),"short-date-le-short-time-24":r({},e,c,{hour12:!1}),"short-date-le-long-time":r({},e,p),"short-date-le-long-time-24":r({},e,p,{hour12:!1}),"long-month-day-year":s,"long-month-day-year-short-time":r({},s,c),"long-month-day-year-short-time-24":r({},s,c,{hour12:!1}),"long-month-day-year-long-time":r({},s,p),"long-month-day-year-long-time-24":r({},s,p,{hour12:!1}),"day-short-month-year":l,"day-short-month-year-short-time":r({},l,c),"day-short-month-year-short-time-24":r({},l,c,{hour12:!1}),"day-short-month-year-long-time":r({},l,p),"day-short-month-year-long-time-24":r({},l,p,{hour12:!1}),"long-date":u,"long-date-short-time":r({},u,c),"long-date-short-time-24":r({},u,c,{hour12:!1}),"long-date-long-time":r({},u,p),"long-date-long-time-24":r({},u,p,{hour12:!1}),"long-month-year":{month:"long",year:"numeric"},"short-month-year":{month:"short",year:"numeric"},year:{year:"numeric"},"short-time":c,"long-time":p};t.dictionary=o.strict()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"}),t.dateFormats=t.dictionary.apiValues,t.toJSON=t.dictionary.toJSON.bind(t.dictionary),t.fromJSON=t.dictionary.fromJSON.bind(t.dictionary);var f={ar:"ar-u-nu-latn-ca-gregory"},h=new n.default,y=d["short-date-short-time"];i.onLocaleChange(function(){h=new n.default,y=d["short-date-short-time"]}),t.getDateTimeFormatter=a,t.convertDateFormatToIntlOptions=function(e){return d[e]||null},t.formatDate=function(e,t){return a(t).format(e)}})},"@dojo/framework/shim/WeakMap":function(){!function(e){"object"==typeof module&&"object"==typeof module.exports?void 0!==(e=e(require,exports))&&(module.exports=e):"function"==typeof define&&define.amd&&define("require exports tslib ./global ./iterator ../has/has ./Symbol".split(" "),e)}(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=e("tslib"),n=e("./global"),o=e("./iterator"),i=e("../has/has");if(e("./Symbol"),t.WeakMap=n.default.WeakMap,!i.default("es6-weakmap")){var a={},s=function(){var e=Math.floor(Date.now()%1e8);return function(){return"__wm"+Math.floor(1e8*Math.random())+e+++"__"}}();t.WeakMap=function(){function e(e){if(this[Symbol.toStringTag]="WeakMap",this._name=s(),this._frozenEntries=[],e)if(o.isArrayLike(e))for(var t=0;t<e.length;t++){var n=e[t];this.set(n[0],n[1])}else try{for(t=r.__values(e),n=t.next();!n.done;n=t.next()){var i=r.__read(n.value,2);this.set(i[0],i[1])}}catch(e){a={error:e}}finally{try{n&&!n.done&&(l=t.return)&&l.call(t)}finally{if(a)throw a.error}}var a,l}return e.prototype._getFrozenEntryIndex=function(e){for(var t=0;t<this._frozenEntries.length;t++)if(this._frozenEntries[t].key===e)return t;return-1},e.prototype.delete=function(e){if(void 0===e||null===e)return!1;var t=e[this._name];return t&&t.key===e&&t.value!==a?(t.value=a,!0):0<=(e=this._getFrozenEntryIndex(e))&&(this._frozenEntries.splice(e,1),!0)},e.prototype.get=function(e){if(void 0!==e&&null!==e){var t=e[this._name];if(t&&t.key===e&&t.value!==a)return t.value;if(0<=(e=this._getFrozenEntryIndex(e)))return this._frozenEntries[e].value}},e.prototype.has=function(e){if(void 0===e||null===e)return!1;var t=e[this._name];return!!(t&&t.key===e&&t.value!==a||0<=this._getFrozenEntryIndex(e))},e.prototype.set=function(e,t){if(!e||"object"!=typeof e&&"function"!=typeof e)throw new TypeError("Invalid value used as weak map key");var r=e[this._name];return r&&r.key===e||(r=Object.create(null,{key:{value:e}}),Object.isFrozen(e)?this._frozenEntries.push(r):Object.defineProperty(e,this._name,{value:r})),r.value=t,this},e}()}t.default=t.WeakMap})},"esri/intl/locale":function(){define(["require","exports","dojo/_base/kernel"],function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=r.locale;t.getLocale=function(){return n},t.setLocale=function(e){n=e,o.slice().forEach(function(t){t.call(null,e)})};var o=[];t.onLocaleChange=function(e){return o.push(e),{remove:function(){o.splice(o.indexOf(e),1)}}}})},"esri/renderers/support/numberUtils":function(){define(["require","exports","../../intl"],function(e,t,r){function n(e,t){return e-t}function o(e,t){var r;return r=Number(e.toFixed(t)),r<e?e=r+1/Math.pow(10,t):(e=r,r-=1/Math.pow(10,t)),r=Number(r.toFixed(t)),e=Number(e.toFixed(t)),[r,e]}function i(e,t,r,n,o){return e=s(e,t,r,n),t=null==e.next||e.next<=o,(null==e.previous||e.previous<=o)&&t||e.previous+e.next<=2*o}function a(e){e=String(e);var t=e.match(l);if(t&&t[1])return{integer:t[1].split("").length,fractional:t[3]?t[3].split("").length:0};if(-1<e.toLowerCase().indexOf("e")&&(t=e.split("e"),e=t[0],t=t[1],e&&t)){e=Number(e);var t=Number(t),r=0<t;return r||(t=Math.abs(t)),e=a(e),r?(e.integer+=t,e.fractional=t>e.fractional?0:e.fractional-t):(e.fractional+=t,e.integer=t>e.integer?1:e.integer-t),e}return{integer:0,fractional:0}}function s(e,t,r,n){var o={previous:null,next:null};if(null!=r){var i=e-r;o.previous=Math.floor(Math.abs(100*(t-r-i)/i))}return null!=n&&(i=n-e,o.next=Math.floor(Math.abs(100*(n-t-i)/i))),o}Object.defineProperty(t,"__esModule",{value:!0});var l=/^-?(\d+)(\.(\d+))?$/i;t.numDigits=a,t.percentChange=s,t.round=function(e,t){void 0===t&&(t={}),e=e.slice(0);var r=t.tolerance,r=void 0===r?2:r,s=t.strictBounds,s=void 0!==s&&s;t=t.indexes,t=void 0===t?e.map(function(e,t){return t}):t,t.sort(n);for(var l=0;l<t.length;l++){var u=t[l],c=e[u],p=0===u?null:e[u-1],d=u===e.length-1?null:e[u+1],f=a(c).fractional;if(f){for(var h=0,y=!1,m=void 0;h<=f&&!y;)y=o(c,h),m=s&&0===l?y[1]:y[0],y=i(c,m,p,d,r),h++;y&&(e[u]=m)}}return e};var u={maximumFractionDigits:20};t.format=function(e){return r.formatNumber(e,u)}})},"esri/intl":function(){define(["require","exports","./intl/date","./intl/number","./intl/substitute"],function(e,t,r,n,o){Object.defineProperty(t,"__esModule",{value:!0}),t.formatDate=r.formatDate,t.convertDateFormatToIntlOptions=r.convertDateFormatToIntlOptions,t.formatNumber=n.formatNumber,t.convertNumberFormatToIntlOptions=n.convertNumberFormatToIntlOptions,t.substitute=o.substitute})},"esri/intl/number":function(){define(["require","exports","../core/tsSupport/assignHelper","@dojo/framework/shim/WeakMap","./locale"],function(e,t,r,n,o){function i(e){var t=e||l;if(!s.has(t)){var r=o.getLocale(),r=a[o.getLocale()]||r;s.set(t,new Intl.NumberFormat(r,e))}return s.get(t)}Object.defineProperty(t,"__esModule",{value:!0});var a={ar:"ar-u-nu-arab"},s=new n.default,l={};o.onLocaleChange(function(){s=new n.default,l={}}),t.getFormatter=i,t.convertNumberFormatToIntlOptions=function(e){void 0===e&&(e={});var t={};return null!=e.digitSeparator&&(t.useGrouping=e.digitSeparator),null!=e.places&&(t.minimumFractionDigits=t.maximumFractionDigits=e.places),t},t.formatNumber=function(e,t){return i(t).format(e)}})},"esri/intl/substitute":function(){define("require exports ../core/Logger ../core/object ../core/string ./date ./number".split(" "),function(e,t,r,n,o,i,a){function s(e){switch(typeof e){case"string":return e;case"number":return a.formatNumber(e);case"boolean":return""+e;default:return e instanceof Date?i.formatDate(e):""}}Object.defineProperty(t,"__esModule",{value:!0});var l=r.getLogger("esri.intl");t.substitute=function(e,t,r){void 0===r&&(r={}),r=r.format;var u=void 0===r?{}:r;return o.replace(e,function(e){var r,o,c=e.indexOf(":");if(-1===c?o=e.trim():(o=e.slice(0,c).trim(),r=e.slice(c+1).trim()),o)if(null==(e=n.getDeepValue(o,t)))r="";else if(o=u[r]||u[o])e:switch(o.type){case"date":r=i.formatDate(e,o.intlOptions);break e;case"number":r=a.formatNumber(e,o.intlOptions);break e;default:l.warn("missing format descriptor for key {key}"),r=s(e)}else if(r)e:switch(r.toLowerCase()){case"dateformat":r=i.formatDate(e);break e;case"numberformat":r=a.formatNumber(e);break e;default:l.warn("inline format is unsupported since 4.12: "+r),r=/^(dateformat|datestring)/i.test(r)?i.formatDate(e):/^numberformat/i.test(r)?a.formatNumber(e):s(e)}else r=s(e);else r="";return r})}})},"esri/renderers/visualVariables/support/ColorStop":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../Color ../../../core/JSONSupport ../../../core/accessorSupport/decorators ../../../core/accessorSupport/ensureType".split(" "),function(e,t,r,n,o,i,a,s){return function(e){function t(t){return t=e.call(this,t)||this,t.color=null,t.label=null,t.value=null,t}r(t,e),i=t,t.prototype.writeValue=function(e,t,r){t[r]=null==e?0:e},t.prototype.clone=function(){return new i({color:this.color&&this.color.clone(),label:this.label,value:this.value})};var i;return n([a.property({type:o,json:{type:[s.Integer],write:!0}})],t.prototype,"color",void 0),n([a.property({type:String,json:{write:!0}})],t.prototype,"label",void 0),n([a.property({type:Number,json:{write:{allowNull:!0}}})],t.prototype,"value",void 0),n([a.writer("value")],t.prototype,"writeValue",null),t=i=n([a.subclass("esri.renderers.visualVariables.support.ColorStop")],t)}(a.declared(i.JSONSupport))})},"esri/layers/mixins/PortalLayer":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/tsSupport/generatorHelper ../../core/tsSupport/awaiterHelper ../../core/Error ../../core/Logger ../../core/promiseUtils ../../core/urlUtils ../../core/accessorSupport/decorators ../../portal/Portal ../../portal/PortalItem".split(" "),function(e,t,r,n,o,i,a,s,l,u,c,p,d){Object.defineProperty(t,"__esModule",{value:!0});var f=s.getLogger("esri.layers.mixins.PortalLayer");t.PortalLayer=function(t){return function(t){function s(){return null!==t&&t.apply(this,arguments)||this}return r(s,t),Object.defineProperty(s.prototype,"portalItem",{set:function(e){e!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",e))},enumerable:!0,configurable:!0}),s.prototype.readPortalItem=function(e,t,r){if(t.itemId)return new d({id:t.itemId,portal:r&&r.portal})},s.prototype.writePortalItem=function(e,t){e&&e.id&&(t.itemId=e.id)},s.prototype.loadFromPortal=function(t,r){return i(this,void 0,void 0,function(){var n,i;return o(this,function(o){switch(o.label){case 0:if(!this.portalItem||!this.portalItem.id)return[2];o.label=1;case 1:return o.trys.push([1,4,,5]),[4,l.create(function(t){return e(["../../portal/support/layersLoader"],t)})];case 2:return n=o.sent(),l.throwIfAborted(r),[4,n.load({instance:this,supportedTypes:t.supportedTypes,validateItem:t.validateItem,supportsData:t.supportsData},r)];case 3:return[2,o.sent()];case 4:throw i=o.sent(),f.warn("Failed to load layer ("+this.title+", "+this.id+") portal item ("+this.portalItem.id+")\n  "+i),i;case 5:return[2]}})})},s.prototype.read=function(e,t){t&&(t.layer=this),this.inherited(arguments)},s.prototype.write=function(e,t){var r=t&&t.portal,n=this.portalItem&&this.portalItem.id&&(this.portalItem.portal||p.getDefault());return r&&n&&!u.hasSamePortal(n.restUrl,r.restUrl)?(t.messages&&t.messages.push(new a("layer:cross-portal","The layer '"+this.title+" ("+this.id+")' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save the scene, set the layer.portalItem to null or save the scene to the same portal as the item associated with the layer",{layer:this})),null):this.inherited(arguments)},n([c.property({type:d})],s.prototype,"portalItem",null),n([c.reader("web-document","portalItem",["itemId"])],s.prototype,"readPortalItem",null),n([c.writer("portalItem",{itemId:{type:String}})],s.prototype,"writePortalItem",null),s=n([c.subclass("esri.layers.mixins.PortalLayer")],s)}(c.declared(t))}})},"esri/layers/mixins/ScaleRangeLayer":function(){define(["require","exports","../../core/tsSupport/declareExtendsHelper","../../core/tsSupport/decorateHelper","../../core/accessorSupport/decorators"],function(e,t,r,n,o){Object.defineProperty(t,"__esModule",{value:!0}),t.ScaleRangeLayer=function(e){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.minScale=0,t.maxScale=0,t}return r(t,e),Object.defineProperty(t.prototype,"scaleRangeId",{get:function(){return this.minScale+","+this.maxScale},enumerable:!0,configurable:!0}),n([o.property({type:Number,json:{write:!0}})],t.prototype,"minScale",void 0),n([o.property({type:Number,json:{write:!0}})],t.prototype,"maxScale",void 0),n([o.property({readOnly:!0,dependsOn:["minScale","maxScale"]})],t.prototype,"scaleRangeId",null),t=n([o.subclass("esri.layers.mixins.ScaleRangeLayer")],t)}(o.declared(e))}})},"esri/layers/mixins/RefreshableLayer":function(){define(["require","exports","../../core/tsSupport/declareExtendsHelper","../../core/tsSupport/decorateHelper","../../core/accessorSupport/decorators"],function(e,t,r,n,o){Object.defineProperty(t,"__esModule",{value:!0}),t.RefreshableLayer=function(e){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.refreshInterval=0,t}return r(t,e),t.prototype.refresh=function(){this.emit("refresh")},n([o.property({type:Number,cast:function(e){return.1<=e?e:0>=e?0:.1},json:{write:!0,origins:{"web-document":{write:!0}}}})],t.prototype,"refreshInterval",void 0),t=n([o.subclass("esri.layers.mixins.RefreshableLayer")],t)}(o.declared(e))}})},"esri/portal/support/layersCreator":function(){define("require exports ../../core/tsSupport/generatorHelper ../../core/tsSupport/awaiterHelper ../../core/Collection ../../core/has ../../core/promiseUtils ../../layers/support/lazyLayerLoader ../PortalItem ./mapNotesUtils ./portalLayers ../../renderers/support/styleUtils".split(" "),function(e,t,r,n,o,i,a,s,l,u,c,p){function d(e,t,o){return n(this,void 0,void 0,function(){var n;return r(this,function(r){switch(r.label){case 0:return n=new e,n.read(t,o.context),"group"===n.type&&y(t)?[4,g(n,t,o.context)]:[3,2];case 1:r.sent(),r.label=2;case 2:return[4,p.loadStyleRenderer(n,o.context)];case 3:return r.sent(),[2,n]}})})}function f(e,t){return n(this,void 0,void 0,function(){var n;return r(this,function(r){switch(r.label){case 0:return[4,h(e,t)];case 1:return n=r.sent(),[2,d(n,e,t)]}})})}function h(e,t){return n(this,void 0,void 0,function(){var n,o,i,a,p,d,f,h;return r(this,function(r){switch(r.label){case 0:switch(n=t.context,n.origin){case"web-scene":switch(n.layerContainerType){case"basemap":r=S;break;case"ground":r=w;break;default:r=b}break;default:switch(n.layerContainerType){case"basemap":r=x;break;default:r=_}}return o=r,(i=e.layerType||e.type,!i&&t&&t.defaultLayerType&&(i=t.defaultLayerType),p=(a=o[i])?s.layerLookupMap[a]:s.layerLookupMap.UnknownLayer,"Feature Collection"!==e.type)?[3,4]:e.itemId?(d=new l({id:e.itemId,portal:n&&n.portal}),[4,d.load()]):[3,3];case 1:return r.sent(),[4,c.selectLayerClassPath(d)];case 2:f=r.sent(),h=f.className||"UnknownLayer",p=s.layerLookupMap[h],r.label=3;case 3:return[3,5];case 4:"ArcGISFeatureLayer"===i&&(u.isMapNotesLayer(e)?p=s.layerLookupMap.MapNotesLayer:y(e)&&(p=s.layerLookupMap.GroupLayer)),r.label=5;case 5:return e.wmtsInfo&&(p=s.layerLookupMap.WMTSLayer),[2,p()]}})})}function y(e){return"ArcGISFeatureLayer"===e.layerType&&"Feature Collection"!==e.type&&!!((e=e.featureCollection)&&e.layers&&1<e.layers.length)}function m(e,t,i){return n(this,void 0,void 0,function(){var n,a,s;return r(this,function(r){switch(r.label){case 0:return n=new o,a=v(n,Array.isArray(t.layers)?t.layers:[],i),[4,e];case 1:return s=r.sent(),[4,a];case 2:return r.sent(),"group"===s.type?(s.layers.addMany(n),[2,s]):[2,void 0]}})})}function g(e,t,o){return n(this,void 0,void 0,function(){var n,i,a,l,u;return r(this,function(r){switch(r.label){case 0:return n=s.layerLookupMap.FeatureLayer,[4,n()];case 1:return i=r.sent(),a=t.featureCollection,l=a.showLegend,u=a.layers.map(function(e){var t=new i;return t.read(e,o),null!=l&&t.read({showLegend:l},o),t}),e.layers.addMany(u),[2]}})})}function v(e,t,o){return n(this,void 0,void 0,function(){var n,i,s,l,u,c,p,d,h;return r(this,function(r){switch(r.label){case 0:if(!t)return[2];for(n=[],i=0,s=t;i<s.length;i++)l=s[i],u=f(l,o),"GroupLayer"===l.layerType?n.push(m(u,l,o)):n.push(u);return[4,a.eachAlways(n)];case 1:for(c=r.sent(),p=0,d=c;p<d.length;p++)h=d[p],!h.value||o.filter&&!o.filter(h.value)||e.add(h.value);return[2]}})})}Object.defineProperty(t,"__esModule",{value:!0});var b={ArcGISFeatureLayer:"FeatureLayer",ArcGISImageServiceLayer:"ImageryLayer",ArcGISMapServiceLayer:"MapImageLayer",PointCloudLayer:"PointCloudLayer",ArcGISSceneServiceLayer:"SceneLayer",IntegratedMeshLayer:"IntegratedMeshLayer",BuildingSceneLayer:"BuildingSceneLayer",ArcGISTiledElevationServiceLayer:"ElevationLayer",ArcGISTiledImageServiceLayer:"TileLayer",ArcGISTiledMapServiceLayer:"TileLayer",GroupLayer:"GroupLayer",WebTiledLayer:"WebTileLayer",CSV:"CSVLayer",VectorTileLayer:"VectorTileLayer",WMS:"WMSLayer",DefaultTileLayer:"TileLayer",KML:"KMLLayer",RasterDataLayer:"UnsupportedLayer"},w={ArcGISTiledElevationServiceLayer:"ElevationLayer",DefaultTileLayer:"ElevationLayer"},S={ArcGISTiledMapServiceLayer:"TileLayer",ArcGISTiledImageServiceLayer:"TileLayer",OpenStreetMap:"OpenStreetMapLayer",WebTiledLayer:"WebTileLayer",VectorTileLayer:"VectorTileLayer",ArcGISImageServiceLayer:"UnsupportedLayer",WMS:"UnsupportedLayer",ArcGISMapServiceLayer:"UnsupportedLayer",DefaultTileLayer:"TileLayer"},_={ArcGISFeatureLayer:"FeatureLayer",ArcGISImageServiceLayer:"ImageryLayer",ArcGISImageServiceVectorLayer:"UnsupportedLayer",ArcGISMapServiceLayer:"MapImageLayer",ArcGISStreamLayer:"StreamLayer",ArcGISTiledImageServiceLayer:"TileLayer",ArcGISTiledMapServiceLayer:"TileLayer",VectorTileLayer:"VectorTileLayer",WebTiledLayer:"WebTileLayer",CSV:"CSVLayer",GeoRSS:"GeoRSSLayer",KML:"KMLLayer",WFS:"UnsupportedLayer",WMS:"WMSLayer",BingMapsAerial:"BingMapsLayer",BingMapsRoad:"BingMapsLayer",BingMapsHybrid:"BingMapsLayer",DefaultTileLayer:"TileLayer"},x={ArcGISImageServiceLayer:"ImageryLayer",ArcGISImageServiceVectorLayer:"UnsupportedLayer",ArcGISMapServiceLayer:"MapImageLayer",ArcGISTiledImageServiceLayer:"TileLayer",ArcGISTiledMapServiceLayer:"TileLayer",OpenStreetMap:"OpenStreetMapLayer",VectorTileLayer:"VectorTileLayer",WebTiledLayer:"WebTileLayer",BingMapsAerial:"BingMapsLayer",BingMapsRoad:"BingMapsLayer",BingMapsHybrid:"BingMapsLayer",WMS:"WMSLayer",DefaultTileLayer:"TileLayer"};t.createLayer=f,t.populateOperationalLayers=function(e,t,o){return n(this,void 0,void 0,function(){return r(this,function(r){return[2,v(e,t,o)]})})}})},"esri/layers/support/lazyLayerLoader":function(){define(["require","exports","../../core/promiseUtils"],function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.layerLookupMap={CSVLayer:function(){return r.create(function(t){return e(["../CSVLayer"],t)})},ElevationLayer:function(){return r.create(function(t){return e(["../ElevationLayer"],t)})},FeatureLayer:function(){return r.create(function(t){return e(["../FeatureLayer"],t)})},GroupLayer:function(){return r.create(function(t){return e(["../GroupLayer"],t)})},GeoRSSLayer:function(){return r.create(function(t){return e(["../GeoRSSLayer"],t)})},ImageryLayer:function(){return r.create(function(t){return e(["../ImageryLayer"],t)})},KMLLayer:function(){return r.create(function(t){return e(["../KMLLayer"],t)})},MapImageLayer:function(){return r.create(function(t){return e(["../MapImageLayer"],t)})},MapNotesLayer:function(){return r.create(function(t){return e(["../MapNotesLayer"],t)})},OpenStreetMapLayer:function(){return r.create(function(t){return e(["../OpenStreetMapLayer"],t)})},PointCloudLayer:function(){return r.create(function(t){return e(["../PointCloudLayer"],t)})},SceneLayer:function(){return r.create(function(t){return e(["../SceneLayer"],t)})},BuildingSceneLayer:function(){return r.create(function(t){return e(["../BuildingSceneLayer"],t)})},IntegratedMeshLayer:function(){return r.create(function(t){return e(["../IntegratedMeshLayer"],t)})},StreamLayer:function(){return r.create(function(t){return e(["../StreamLayer"],t)})},TileLayer:function(){return r.create(function(t){return e(["../TileLayer"],t)})},UnknownLayer:function(){return r.create(function(t){return e(["../UnknownLayer"],t)})},UnsupportedLayer:function(){return r.create(function(t){return e(["../UnsupportedLayer"],t)})},VectorTileLayer:function(){return r.create(function(t){return e(["../VectorTileLayer"],t)})},WebTileLayer:function(){return r.create(function(t){return e(["../WebTileLayer"],t)})},WMSLayer:function(){return r.create(function(t){return e(["../WMSLayer"],t)})},WMTSLayer:function(){return r.create(function(t){return e(["../WMTSLayer"],t)})},BingMapsLayer:function(){return r.create(function(t){return e(["../BingMapsLayer"],t)})}}})},"esri/portal/support/mapNotesUtils":function(){define(["require","exports"],function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.isMapNotesLayer=function(e){var t=["TITLE","DESCRIPTION","IMAGE_URL","IMAGE_LINK_URL"];if((e=e.layers||e.featureCollection&&e.featureCollection.layers)&&Array.isArray(e))return e=e[0],e.layerDefinition&&Array.isArray(e.layerDefinition.fields)&&e.layerDefinition.fields.forEach(function(e){-1<(e=t.indexOf(e.name))&&t.splice(e,1)}),!t.length}})},"esri/portal/support/portalLayers":function(){define("require exports ../../core/tsSupport/assignHelper ../../request ../../core/Collection ../../core/Error ../../core/promiseUtils ../../layers/support/lazyLayerLoader ../PortalItem ./mapNotesUtils".split(" "),function(e,t,r,n,o,i,a,s,l,u){function c(e){switch(e.type){case"Map Service":return d(e);case"Feature Service":return f(e);case"Feature Collection":return y(e);case"Scene Service":return h(e);case"Image Service":return m(e);case"Stream Service":return{className:"StreamLayer"};case"Vector Tile Service":return{className:"VectorTileLayer"};case"KML":return{className:"KMLLayer"};case"WMTS":return{className:"WMTSLayer"};case"WMS":return{className:"WMSLayer"};default:return a.reject(new i("portal:unknown-item-type","Unknown item type '${type}'",{type:e.type}))}}function p(e){return(0,s.layerLookupMap[e.className])().then(function(t){return{constructor:t,properties:e.properties}})}function d(e){return g(e).then(function(e){return e?{className:"TileLayer"}:{className:"MapImageLayer"}})}function f(e){return v(e).then(function(e){if("object"==typeof e){var t={};return null!=e.id&&(t.layerId=e.id),{className:"FeatureLayer",properties:t}}return{className:"GroupLayer"}})}function h(e){return v(e).then(function(t){if("object"==typeof t){var r={},n=void 0;if(null!=t.id?(r.layerId=t.id,n=e.url+"/layers/"+t.id):n=e.url,Array.isArray(e.typeKeywords)&&0<e.typeKeywords.length){t={IntegratedMesh:"IntegratedMeshLayer","3DObject":"SceneLayer",Point:"SceneLayer",PointCloud:"PointCloudLayer",Building:"BuildingSceneLayer"};for(var o=0,i=Object.keys(t);o<i.length;o++){var a=i[o];if(-1!==e.typeKeywords.indexOf(a))return{className:t[a]}}}return b(n).then(function(e){var t="SceneLayer",n={Point:"SceneLayer","3DObject":"SceneLayer",IntegratedMesh:"IntegratedMeshLayer",PointCloud:"PointCloudLayer",Building:"BuildingSceneLayer"};return e&&e.layerType&&n[e.layerType]&&(t=n[e.layerType]),{className:t,properties:r}})}return{className:"GroupLayer"}})}function y(e){return e.load().then(function(){return e.fetchData()}).then(function(e){if(e&&Array.isArray(e.layers)){if(u.isMapNotesLayer(e))return{className:"MapNotesLayer"};if(1===e.layers.length)return{className:"FeatureLayer"}}return{className:"GroupLayer"}})}function m(e){return g(e).then(function(t){var r=new o(e.typeKeywords);return t?r.find(function(e){return"elevation 3d layer"===e.toLowerCase()})?{className:"ElevationLayer"}:{className:"TileLayer"}:{className:"ImageryLayer"}})}function g(e){return b(e.url).then(function(e){return e.tileInfo})}function v(e){return!e.url||e.url.match(/\/\d+$/)?a.resolve({}):e.load().then(function(){return e.fetchData()}).then(function(t){return t&&Array.isArray(t.layers)?1===t.layers.length&&{id:t.layers[0].id}:b(e.url).then(function(e){return e&&Array.isArray(e.layers)?1===e.layers.length&&{id:e.layers[0].id}:{}})})}function b(e){return n(e,{responseType:"json",query:{f:"json"}}).then(function(e){return e.data})}Object.defineProperty(t,"__esModule",{value:!0}),t.fromItem=function(e){return!e.portalItem||e.portalItem instanceof l||e.portalItem.constructor&&e.portalItem.constructor._meta||(e=r({},e,{portalItem:new l(e.portalItem)})),e.portalItem.load().then(c).then(p).then(function(t){var n=r({portalItem:e.portalItem},t.properties);return a.resolve(new t.constructor(n))})},t.selectLayerClassPath=c})},"esri/renderers/support/styleUtils":function(){define("require exports ../../core/tsSupport/generatorHelper ../../core/tsSupport/awaiterHelper ../../core/asyncUtils ../../core/promiseUtils ../../core/Warning".split(" "),function(e,t,r,n,o,i,a){Object.defineProperty(t,"__esModule",{value:!0}),t.loadStyleRenderer=function(e,t,s){return n(this,void 0,void 0,function(){var n,l,u;return r(this,function(r){switch(r.label){case 0:return(n=e&&e.getAtOrigin&&e.getAtOrigin("renderer",t.origin))&&"unique-value"===n.type&&n.styleOrigin?[4,o.result(n.populateFromStyle())]:[3,2];case 1:l=r.sent(),i.throwIfAborted(s),!1===l.ok&&(u=l.error,t&&t.messages&&t.messages.push(new a("renderer:style-reference","Failed to create unique value renderer from style reference: "+u.message,{error:u,context:t})),e.clear("renderer",t.origin)),r.label=2;case 2:return[2]}})})}})},"esri/layers/FeatureLayer":function(){define("require exports ../core/tsSupport/assignHelper ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/paramHelper ../core/tsSupport/generatorHelper ../core/tsSupport/awaiterHelper ../PopupTemplate ../renderers ../request ../symbols ../core/Collection ../core/Error ../core/Handles ../core/jsonMap ../core/Logger ../core/maybe ../core/MultiOriginJSONSupport ../core/object ../core/promiseUtils ../core/urlUtils ../core/accessorSupport/decorators ../geometry/Extent ../geometry/HeightModelInfo ../geometry/SpatialReference ./Layer ./graphics/sources/MemorySource ./mixins/ArcGISService ./mixins/OperationalLayer ./mixins/PortalLayer ./mixins/RefreshableLayer ./mixins/ScaleRangeLayer ./mixins/TemporalLayer ./support/arcgisLayerUrl ./support/commonProperties ./support/FeatureIndex ./support/FeatureReduction ./support/FeatureReductionCluster ./support/FeatureReductionSelection ./support/featureReductionUtils ./support/FeatureTemplate ./support/FeatureType ./support/fieldProperties ./support/FieldsIndex ./support/fieldUtils ./support/LabelClass ./support/labelingInfo ./support/layerSourceUtils ./support/Relationship ./support/TimeInfo ../renderers/support/jsonUtils ../renderers/support/styleUtils ../support/popupUtils ../symbols/support/jsonUtils ../tasks/support/AttachmentQuery ../tasks/support/FeatureSet ../tasks/support/Query ../tasks/support/RelationshipQuery @dojo/framework/shim/Promise".split(" "),function(e,t,r,n,o,i,a,s,l,u,c,p,d,f,h,y,m,g,v,b,w,S,_,x,O,C,M,T,P,I,E,j,k,A,L,F,N,R,D,U,q,H,V,z,B,G,W,J,Q,K,Z,Y,$,X,ee,te,re,ne,oe){function ie(e,t,r){return!(e&&e.hasOwnProperty(t)?!e[t]:!r)}function ae(e,t,r){return e&&e.hasOwnProperty(t)?e[t]:r}var se=new y.default({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"}),le={name:"supportsName",size:"supportsSize",contentType:"supportsContentType",keywords:"supportsKeywords",exifInfo:"supportsExifInfo"},ue=m.getLogger("esri.layers.FeatureLayer"),ce=z.defineFieldProperties();return function(t){function i(e){return e=t.call(this,e)||this,e._handles=new h,e.capabilities=null,e.copyright=null,e.displayField=null,e.definitionExpression=null,e.dynamicDataSource=null,e.editFieldsInfo=null,e.editingEnabled=!0,e.editingInfo=null,e.elevationInfo=null,e.featureReduction=null,e.fields=null,e.fullExtent=null,e.gdbVersion=null,e.geometryProperties=null,e.geometryType=null,e.hasM=void 0,e.hasZ=void 0,e.heightModelInfo=null,e.historicMoment=null,e.isTable=!1,e.labelsVisible=!0,e.labelingInfo=null,e.layerId=void 0,e.legendEnabled=!0,e.minScale=0,e.maxScale=0,e.globalIdField=null,e.objectIdField=null,e.outFields=null,e.path=null,e.popupEnabled=!0,e.popupTemplate=null,e.relationships=null,e.sourceJSON=null,e.returnM=void 0,e.returnZ=void 0,e.screenSizePerspectiveEnabled=!0,e.serviceDefinitionExpression=null,e.spatialReference=C.WGS84,e.templates=null,e.timeInfo=null,e.title=null,e.sublayerTitleMode="item-title",e.trackIdField=null,e.type="feature",e.typeIdField=null,e.types=null,e.indexes=new(d.ofType(N.FeatureIndex)),e.userIsAdmin=!1,e.version=void 0,e.visible=!0,e}return n(i,t),i.prototype.destroy=function(){this._handles&&(this._handles.destroy(),this._handles=null)},i.prototype.normalizeCtorArgs=function(e,t){return"string"==typeof e?r({url:e},t):e},i.prototype.load=function(e){var t=this,r=g.isSome(e)?e.signal:null;if(!(this.portalItem&&this.portalItem.loaded&&this.source))return e=this.loadFromPortal({supportedTypes:["Feature Service","Feature Collection"]},e).catch(function(e){return e}).then(function(){return s(t,void 0,void 0,function(){var e,t;return a(this,function(n){switch(n.label){case 0:return this.url&&null==this.layerId&&/FeatureServer|MapServer\/*$/i.test(this.url)?[4,this._fetchFirstLayerId(r)]:[3,2];case 1:e=n.sent(),null!=e&&(this.layerId=e),n.label=2;case 2:if(!this.url&&!this._hasMemorySource())throw new f("feature-layer:missing-url-or-source","Feature layer must be created with either a url or a source");return t=this._initLayerProperties,[4,this.createGraphicsSource(r)];case 3:return[2,t.apply(this,[n.sent()])]}})})}),this.addResolvingPromise(e),this.when();this.addResolvingPromise(this.createGraphicsSource(r).then(function(e){return t._initLayerProperties(e)}))},i.prototype.readCapabilities=function(e,t){return t=t.layerDefinition||t,{attachment:this._readAttachmentCapabilities(t.attachmentProperties),data:this._readDataCapabilities(t),metadata:this._readMetadataCapabilities(t),operations:this._readOperationsCapabilities(t.capabilities||e,t),query:this._readQueryCapabilities(t),queryRelated:this._readQueryRelatedCapabilities(t),editing:this._readEditingCapabilities(t)}},i.prototype.readEditingEnabled=function(e,t){return!t.layerDefinition||"Query"!==t.layerDefinition.capabilities},i.prototype.writeEditingEnabled=function(e,t){e||b.setDeepValue("layerDefinition.capabilities","Query",t)},i.prototype.readEditingInfo=function(e,t){return(e=t.editingInfo)?{lastEditDate:null!=e.lastEditDate?new Date(e.lastEditDate):null}:null},i.prototype.readFeatureReduction=function(e,t,r){return q.read(e,t,r)},i.prototype.writeWebSceneFeatureReduction=function(e,t,r,n){q.writeTarget(e,t,"layerDefinition.featureReduction",n)},Object.defineProperty(i.prototype,"fieldsIndex",{get:function(){return new B(this.fields||[])},enumerable:!0,configurable:!0}),i.prototype.readIsTable=function(e,t){return t=t&&t.layerDefinition||t,"Table"===t.type},Object.defineProperty(i.prototype,"hasService",{get:function(){return!this._hasMemorySource()},enumerable:!0,configurable:!0}),i.prototype.readMinScale=function(e,t){return t.effectiveMinScale||e||0},i.prototype.readMaxScale=function(e,t){return t.effectiveMaxScale||e||0},i.prototype.readGlobalIdFieldFromService=function(e,t){if(t=t.layerDefinition||t,t.globalIdField)return t.globalIdField;if(t.fields)for(e=0,t=t.fields;e<t.length;e++){var r=t[e];if("esriFieldTypeGlobalID"===r.type)return r.name}},i.prototype.readObjectIdFieldFromService=function(e,t){if(t=t.layerDefinition||t,t.objectIdField)return t.objectIdField;if(t.fields)for(e=0,t=t.fields;e<t.length;e++){var r=t[e];if("esriFieldTypeOID"===r.type)return r.name}},Object.defineProperty(i.prototype,"parsedUrl",{get:function(){var e=this.url?S.urlToObject(this.url):null;if(null!=e)if(null!=this.layerId)e.path=S.join(e.path,this.layerId.toString());else if(null!=this.dynamicDataSource){var t={source:Q.sourceToJSON(this.dynamicDataSource)};e.query={layer:JSON.stringify(t)}}return e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"defaultPopupTemplate",{get:function(){return this.createPopupTemplate()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"renderer",{set:function(e){G.fixRendererFields(e,this.fields),this._set("renderer",e)},enumerable:!0,configurable:!0}),i.prototype.readRenderer=function(e,t,r){t=t.layerDefinition||t;var n,o,i=t.drawingInfo&&t.drawingInfo.renderer||void 0;if(i)(n=Y.read(i,t,r)||void 0)||ue.error("Failed to create renderer",{rendererDefinition:t.drawingInfo.renderer,layer:this,context:r});else if(t.defaultSymbol)ee.read(t.defaultSymbol,t,r),t.types&&t.types.length?(n=new u.UniqueValueRenderer({defaultSymbol:o,field:t.typeIdField}),t.types.forEach(function(e){i.addUniqueValueInfo(e.id,ee.read(e.symbol,e,r))})):n=new u.SimpleRenderer({symbol:o});else if("Table"!==t.type){switch(t.geometryType){case"esriGeometryPoint":case"esriGeometryMultipoint":o=new p.SimpleMarkerSymbol;break;case"esriGeometryPolyline":o=new p.SimpleLineSymbol;break;case"esriGeometryPolygon":o=new p.SimpleFillSymbol}n=o&&new u.SimpleRenderer({symbol:o})}return n},i.prototype.writeRenderer=function(e,t,r,n){Y.writeTarget(e,t,r,n)},i.prototype.writeWebSceneRenderer=function(e,t,r,n){Y.writeTarget(e,t,"layerDefinition.drawingInfo.renderer",n)},Object.defineProperty(i.prototype,"source",{set:function(e){var t=this._get("source");t!==e&&(t&&t instanceof d&&this._resetMemorySource(t),e&&e instanceof d&&this._initMemorySource(e),this._set("source",e))},enumerable:!0,configurable:!0}),i.prototype.castSource=function(e){return e?Array.isArray(e)||e instanceof d?new T.default({layer:this,items:e}):e:null},i.prototype.readSource=function(e,t){return e=re.fromJSON(t.featureSet),new T.default({layer:this,items:e&&e.features||[]})},i.prototype.readTemplates=function(e,t){var r=t.editFieldsInfo;return t=r&&r.creatorField,r=r&&r.editorField,e=e&&e.map(function(e){return H.fromJSON(e)}),this._fixTemplates(e,t),this._fixTemplates(e,r),e},i.prototype.readTitle=function(e,t){if(e=t.layerDefinition&&t.layerDefinition.name||t.name,t=t.title||t.layerDefinition&&t.layerDefinition.title,e){if(t=this.portalItem&&this.portalItem.title,"item-title"===this.sublayerTitleMode)return this.url?L.titleFromUrlAndName(this.url,e):e;if(!(e=e||this.url&&L.parse(this.url).title))return;return"item-title-and-service-name"===this.sublayerTitleMode&&t&&(e=t+" - "+e),L.cleanTitle(e)}if("item-title"===this.sublayerTitleMode&&t)return t},i.prototype.readTitleFromWebMap=function(e,t){return t.title||t.layerDefinition&&t.layerDefinition.name},i.prototype.readTypeIdField=function(e,t){return t=t.layerDefinition||t,(e=t.typeIdField)&&(t=G.getField(t.fields,e))&&(e=t.name),e},i.prototype.readTypes=function(e,t){var r=this;t=t.layerDefinition||t,e=t.types;var n=(t=t.editFieldsInfo)&&t.creatorField,o=t&&t.editorField;return e&&e.map(function(e){return e=V.fromJSON(e),r._fixTemplates(e.templates,n),r._fixTemplates(e.templates,o),e})},Object.defineProperty(i.prototype,"url",{set:function(e){e=L.sanitizeUrlWithLayerId(this,e,ue),this._set("url",e.url),null!=e.layerId&&this._set("layerId",e.layerId)},enumerable:!0,configurable:!0}),i.prototype.writeUrl=function(e,t,r,n){L.writeUrlWithLayerId(this,e,null,t,n)},i.prototype.readVersion=function(e,t){return t.currentVersion?t.currentVersion:t.hasOwnProperty("capabilities")||t.hasOwnProperty("drawingInfo")||t.hasOwnProperty("hasAttachments")||t.hasOwnProperty("htmlPopupType")||t.hasOwnProperty("relationships")||t.hasOwnProperty("timeInfo")||t.hasOwnProperty("typeIdField")||t.hasOwnProperty("types")?10:9.3},i.prototype.readVisible=function(e,t){return t.layerDefinition&&null!=t.layerDefinition.defaultVisibility?!!t.layerDefinition.defaultVisibility:null!=t.visibility?!!t.visibility:void 0},i.prototype.addAttachment=function(e,t){var r=this;return this.load().then(function(){return r._checkAttachmentSupport(e)}).then(function(){if(!("addAttachment"in r.source))throw new f("FeatureLayer","Layer source does not support addAttachment capability");return r.source.addAttachment(e,t)})},i.prototype.updateAttachment=function(e,t,r){var n=this;return this.load().then(function(){return n._checkAttachmentSupport(e)}).then(function(){if(!("updateAttachment"in n.source))throw new f("FeatureLayer","Layer source does not support updateAttachment capability");return n.source.updateAttachment(e,t,r)})},i.prototype.applyEdits=function(t,r){return s(this,void 0,void 0,function(){var n;return a(this,function(o){switch(o.label){case 0:return[4,new Promise(function(t,r){e(["./graphics/editingSupport"],t,r)})];case 1:return n=o.sent(),[2,n.applyEdits(this,t,r)]}})})},i.prototype.on=function(e,t){return this.inherited(arguments,[e,t])},i.prototype.createPopupTemplate=function(e){return X.createPopupTemplate(this,e)},i.prototype.createGraphicsSource=function(t){return s(this,void 0,void 0,function(){var r,n;return a(this,function(o){switch(o.label){case 0:return this._hasMemorySource()?(this.emit("graphics-source-create",{graphicsSource:this.source}),[2,this.source.load({signal:t})]):[4,w.create(function(t){return e(["./graphics/sources/FeatureLayerSource"],t)})];case 1:return r=o.sent(),w.throwIfAborted(t),[4,new r.default({layer:this}).load({signal:t})];case 2:return n=o.sent(),this.emit("graphics-source-create",{graphicsSource:n}),[2,n]}})})},i.prototype.createQuery=function(){var e=new ne,t=this.get("capabilities.data");return e.gdbVersion=this.gdbVersion,e.historicMoment=this.historicMoment,e.returnGeometry=!0,t&&(t.supportsZ&&null!=this.returnZ&&(e.returnZ=this.returnZ),t.supportsM&&null!=this.returnM&&(e.returnM=this.returnM)),e.outFields=["*"],e.where=this.definitionExpression||"1=1",e.multipatchOption="multipatch"===this.geometryType?"xyFootprint":null,e},i.prototype.deleteAttachments=function(e,t){var r=this;return this.load().then(function(){return r._checkAttachmentSupport(e)}).then(function(){if(!("deleteAttachments"in r.source))throw new f("FeatureLayer","Layer source does not support deleteAttachments capability");return r.source.deleteAttachments(e,t)})},i.prototype.getFeatureType=function(e){var t=this.typeIdField;if(!t||!e)return null;var r=e.attributes?e.attributes[t]:void 0;if(null==r)return null;var n=null;return this.types.some(function(e){var t=e.id;return null!=t&&(t.toString()===r.toString()&&(n=e),!!n)}),n},i.prototype.getFieldDomain=function(e,t){var r,n=this,o=!1;t=(t=t&&t.feature)&&t.attributes;var i=this.typeIdField&&t&&t[this.typeIdField];return null!=i&&this.types&&this.types.some(function(t){return t.id==i&&((r=t.domains&&t.domains[e])&&"inherited"===r.type&&(r=n._getLayerDomain(e),o=!0),!0)}),o||r||(r=this._getLayerDomain(e)),r},i.prototype.getField=function(e){return this.fieldsIndex.get(e)},i.prototype.queryAttachments=function(e,t){var r=this;return e=te.from(e),this.load().then(function(){if(!r.get("capabilities.data.supportsAttachment"))throw new f("FeatureLayer","this layer doesn't support attachments");var t=e.attachmentTypes,n=e.objectIds,o=e.globalIds,i=e.num,a=e.size,s=e.start,l=e.where;if(!r.get("capabilities.operations.supportsQueryAttachments")&&(t=t&&t.length,o=o&&o.length,a=a&&a.length,n&&1<n.length||t||o||a||i||s||l))throw new f("FeatureLayer","when 'supportsQueryAttachments' is false, only objectIds of length 1 are supported",e);if(!(n&&n.length||l))throw new f("FeatureLayer","'objectIds' or 'where' are required to perform attachment query",e);if(!("queryAttachments"in r.source))throw new f("FeatureLayer","Layer source does not support queryAttachments capability",e);return r.source.queryAttachments(e)})},i.prototype.queryFeatures=function(e,t){var r=this;return this.load().then(function(){return r.source.queryFeatures(ne.from(e)||r.createQuery(),t)}).then(function(e){if(e&&e.features)for(var t=0,n=e.features;t<n.length;t++){var o=n[t];o.layer=o.sourceLayer=r}return e})},i.prototype.queryObjectIds=function(e,t){var r=this;return this.load().then(function(){if(r.source.queryObjectIds)return r.source.queryObjectIds(ne.from(e)||r.createQuery(),t);throw new f("FeatureLayer","Layer source does not support queryObjectIds capability")})},i.prototype.queryFeatureCount=function(e,t){var r=this;return this.load().then(function(){if(r.source.queryFeatureCount)return r.source.queryFeatureCount(ne.from(e)||r.createQuery(),t);throw new f("FeatureLayer","Layer source does not support queryFeatureCount capability")})},i.prototype.queryExtent=function(e,t){var r=this;return this.load().then(function(){if(r.source.queryExtent)return r.source.queryExtent(ne.from(e)||r.createQuery(),t);throw new f("FeatureLayer","Layer source does not support queryExtent capability")})},i.prototype.queryRelatedFeatures=function(e,t){var r=this;return this.load().then(function(){if("queryRelatedFeatures"in r.source)return r.source.queryRelatedFeatures(oe.from(e),t);throw new f("FeatureLayer","Layer source does not support queryRelatedFeatures capability")})},i.prototype.read=function(e,t){var r=e.featureCollection;if(r){var n=r.layers;n&&1===n.length&&(this.inherited(arguments,[n[0],t]),null!=r.showLegend&&this.inherited(arguments,[{showLegend:r.showLegend},t]))}this.inherited(arguments,[e,t]),t&&"service"===t.origin&&this.revert(["objectIdField","fields","timeInfo"],"service")},i.prototype.write=function(e,t){return t&&("web-scene"===t.origin||"web-map"===t.origin)&&t.messages&&this.isTable?(t.messages.push(new f("layer:unsupported","Layers ("+this.title+", "+this.id+") of type '"+this.declaredClass+"' using a Table source cannot written to web scenes and web maps",{layer:this})),null):this.inherited(arguments)},i.prototype._checkAttachmentSupport=function(e){var t=e.attributes,r=this.objectIdField;return this.get("capabilities.data.supportsAttachment")?e?t?t[r]?void 0:w.reject(new f("FeatureLayer","feature is missing the identifying attribute "+r)):w.reject(new f("FeatureLayer","'attributes' are required on a feature to query attachments")):w.reject(new f("FeatureLayer","A feature is required to add/delete/update attachments")):w.reject(new f("FeatureLayer","this layer doesn't support attachments"))},i.prototype._getLayerDomain=function(e){if(!this.fields)return null;var t=null;return this.fields.some(function(r){return r.name===e&&(t=r.domain),!!t}),t},i.prototype._fetchFirstLayerId=function(e){return c(this.url,{query:{f:"json"},responseType:"json",signal:e}).then(function(e){if(e=e.data){if(Array.isArray(e.layers)&&0<e.layers.length)return e.layers[0].id;if(Array.isArray(e.tables)&&0<e.tables.length)return e.tables[0].id}})},i.prototype._initLayerProperties=function(e){return s(this,void 0,void 0,function(){return a(this,function(t){return this._set("source",e),e.sourceJSON&&(this.sourceJSON=e.sourceJSON,this.read(e.sourceJSON,{origin:"service",url:this.parsedUrl})),this._verifySource(),this._verifyFields(),G.fixRendererFields(this.renderer,this.fields),G.fixTimeInfoFields(this.timeInfo,this.fields),[2,$.loadStyleRenderer(this,{origin:"service"})]})})},i.prototype._verifyFields=function(){var e=this.parsedUrl&&this.parsedUrl.path||"undefined";this.objectIdField||console.log("FeatureLayer: 'objectIdField' property is not defined (url: "+e+")"),this.isTable||this._hasMemorySource()||-1!==e.search(/\/FeatureServer\//i)||this.fields&&this.fields.some(function(e){return"geometry"===e.type})||console.log("FeatureLayer: unable to find field of type 'geometry' in the layer 'fields' list. If you are using a map service layer, features will not have geometry (url: "+e+")")},i.prototype._fixTemplates=function(e,t){e&&e.forEach(function(e){(e=e.prototype&&e.prototype.attributes)&&t&&delete e[t]})},i.prototype._verifySource=function(){if(this._hasMemorySource()){if(this.url)throw new f("feature-layer:mixed-source-and-url","FeatureLayer cannot be created with both an in-memory source and a url")}else if(!this.url)throw new f("feature-layer:source-or-url-required","FeatureLayer requires either a url, a valid portal item or a source")},i.prototype._initMemorySource=function(e){var t=this;e.forEach(function(e){e.layer=t,e.sourceLayer=t}),this._handles.add([e.on("after-add",function(e){e.item.layer=t,e.item.sourceLayer=t}),e.on("after-remove",function(e){e.item.layer=null,e.item.sourceLayer=null})],"fl-source")},i.prototype._resetMemorySource=function(e){e.forEach(function(e){e.layer=null,e.sourceLayer=null}),this._handles.remove("fl-source")},i.prototype._hasMemorySource=function(){return!(this.url||!this.source)},i.prototype._readAttachmentCapabilities=function(e){var t={supportsName:!1,supportsSize:!1,supportsContentType:!1,supportsKeywords:!1,supportsExifInfo:!1};return e&&Array.isArray(e)&&e.forEach(function(e){var r=le[e.name];r&&(t[r]=!!e.isEnabled)}),t},i.prototype._readDataCapabilities=function(e){return{isVersioned:ie(e,"isDataVersioned",!1),supportsAttachment:ie(e,"hasAttachments",!1),supportsM:ie(e,"hasM",!1),supportsZ:ie(e,"hasZ",!1)}},i.prototype._readMetadataCapabilities=function(e){return{supportsAdvancedFieldProperties:ie(e,"supportsFieldDescriptionProperty",!1)}},i.prototype._readOperationsCapabilities=function(e,t){e=e?e.toLowerCase().split(",").map(function(e){return e.trim()}):[];var r=-1!==e.indexOf("editing"),n=r&&-1!==e.indexOf("create"),o=r&&-1!==e.indexOf("delete"),i=r&&-1!==e.indexOf("update");return!r||n||o||i||(n=o=i=!0),{supportsCalculate:ie(t,"supportsCalculate",!1),supportsTruncate:ie(t,"supportsTruncate",!1),supportsValidateSql:ie(t,"supportsValidateSql",!1),supportsAdd:n,supportsDelete:o,supportsEditing:r,supportsQuery:-1!==e.indexOf("query"),supportsQueryAttachments:ie(t.advancedQueryCapabilities,"supportsQueryAttachments",!1),supportsResizeAttachments:ie(t,"supportsAttachmentsResizing",!1),supportsSync:-1!==e.indexOf("sync"),supportsUpdate:i,supportsExceedsLimitStatistics:ie(t,"supportsExceedsLimitStatistics",!1)}},i.prototype._readQueryCapabilities=function(e){var t=e.advancedQueryCapabilities,r=e.ownershipBasedAccessControlForFeatures,n=e.archivingInfo,o=(e.supportedQueryFormats||"").split(",").reduce(function(e,t){return(t=t.toLowerCase().trim())&&e.add(t),e},new Set);return{supportsStatistics:ie(t,"supportsStatistics",e.supportsStatistics),supportsCentroid:ie(t,"supportsReturningGeometryCentroid",!1),supportsDistance:ie(t,"supportsQueryWithDistance",!1),supportsDistinct:ie(t,"supportsDistinct",e.supportsAdvancedQueries),supportsExtent:ie(t,"supportsReturningQueryExtent",!1),supportsGeometryProperties:ie(t,"supportsReturningGeometryProperties",!1),supportsHavingClause:ie(t,"supportsHavingClause",!1),supportsOrderBy:ie(t,"supportsOrderBy",e.supportsAdvancedQueries),supportsPagination:ie(t,"supportsPagination",!1),supportsQuantization:ie(e,"supportsCoordinatesQuantization",!1),supportsQuantizationEditMode:ie(e,"supportsQuantizationEditMode",!1),supportsQueryGeometry:ie(e,"supportsReturningQueryGeometry",!1),supportsResultType:ie(t,"supportsQueryWithResultType",!1),supportsMaxRecordCountFactor:ie(t,"supportsMaxRecordCountFactor",!1),supportsSqlExpression:ie(t,"supportsSqlExpression",!1),supportsStandardizedQueriesOnly:ie(e,"useStandardizedQueries",!1),supportsQueryByOthers:ie(r,"allowOthersToQuery",!0),supportsHistoricMoment:ie(n,"supportsQueryWithHistoricMoment",!1),supportsFormatPBF:o.has("pbf"),supportsDisjointSpatialRelationship:ie(t,"supportsDisjointSpatialRel",!1),supportsCacheHint:ie(t,"supportsQueryWithCacheHint",!1),maxRecordCountFactor:ae(e,"maxRecordCountFactor",void 0),maxRecordCount:ae(e,"maxRecordCount",void 0),standardMaxRecordCount:ae(e,"standardMaxRecordCount",void 0),tileMaxRecordCount:ae(e,"tileMaxRecordCount",void 0)}},i.prototype._readQueryRelatedCapabilities=function(e){e=e.advancedQueryCapabilities;var t=ie(e,"supportsAdvancedQueryRelated",!1);return{supportsPagination:ie(e,"supportsQueryRelatedPagination",!1),supportsCount:t,supportsOrderBy:t}},i.prototype._readEditingCapabilities=function(e){var t=e.ownershipBasedAccessControlForFeatures;return{supportsGeometryUpdate:ie(e,"allowGeometryUpdates",!0),supportsGlobalId:ie(e,"supportsApplyEditsWithGlobalIds",!1),supportsRollbackOnFailure:ie(e,"supportsRollbackOnFailureParameter",!1),supportsUpdateWithoutM:ie(e,"allowUpdateWithoutMValues",!1),supportsUploadWithItemId:ie(e,"supportsAttachmentsByUploadId",!1),supportsDeleteByAnonymous:ie(t,"allowAnonymousToDelete",!0),supportsDeleteByOthers:ie(t,"allowOthersToDelete",!0),supportsUpdateByAnonymous:ie(t,"allowAnonymousToUpdate",!0),supportsUpdateByOthers:ie(t,"allowOthersToUpdate",!0)}},o([_.property({readOnly:!0,json:{read:!1}})],i.prototype,"capabilities",void 0),o([_.reader("service","capabilities","advancedQueryCapabilities allowGeometryUpdates allowUpdateWithoutMValues archivingInfo capabilities hasAttachments hasM hasZ maxRecordCount maxRecordCountFactor ownershipBasedAccessControlForFeatures standardMaxRecordCount supportedQueryFormats supportsAdvancedQueries supportsApplyEditsWithGlobalIds supportsAttachmentsByUploadId supportsAttachmentsResizing supportsCalculate supportsCoordinatesQuantization supportsExceedsLimitStatistics supportsFieldDescriptionProperty supportsQuantizationEditMode supportsRollbackOnFailureParameter supportsStatistics supportsTruncate supportsValidateSql tileMaxRecordCount useStandardizedQueries".split(" "))],i.prototype,"readCapabilities",null),o([_.property({type:String,json:{read:{source:"layerDefinition.copyrightText"},origins:{service:{read:{source:"copyrightText"}}}}})],i.prototype,"copyright",void 0),o([_.property({type:String,json:{read:{source:"layerDefinition.displayField"},origins:{service:{read:{source:"displayField"}}}}})],i.prototype,"displayField",void 0),o([_.property({type:String,json:{origins:{service:{read:!1,write:!1}},read:{source:"layerDefinition.definitionExpression"},write:{target:"layerDefinition.definitionExpression"}}})],i.prototype,"definitionExpression",void 0),o([_.property({readOnly:!0,json:{read:ee.read}})],i.prototype,"defaultSymbol",void 0),o([_.property()],i.prototype,"dynamicDataSource",void 0),o([_.property({readOnly:!0})],i.prototype,"editFieldsInfo",void 0),o([_.property({type:Boolean})],i.prototype,"editingEnabled",void 0),o([_.reader(["portal-item","web-map","web-scene"],"editingEnabled",["layerDefinition.capabilities"])],i.prototype,"readEditingEnabled",null),o([_.writer(["portal-item","web-map","web-scene"],"editingEnabled",{"layerDefinition.capabilities":{type:String}})],i.prototype,"writeEditingEnabled",null),o([_.property({readOnly:!0})],i.prototype,"editingInfo",void 0),o([_.reader("editingInfo")],i.prototype,"readEditingInfo",null),o([_.property(F.elevationInfo)],i.prototype,"elevationInfo",void 0),o([_.property({types:{key:"type",base:R.default,typeMap:{selection:U.default,cluster:D.default}},json:{write:{target:"layerDefinition.featureReduction"}}})],i.prototype,"featureReduction",void 0),o([_.reader("featureReduction",["layerDefinition.featureReduction"])],i.prototype,"readFeatureReduction",null),o([_.writer("web-scene","featureReduction",{"layerDefinition.featureReduction":{types:q.webSceneFeatureReductionTypes}})],i.prototype,"writeWebSceneFeatureReduction",null),o([_.property(r({},ce.fields,{json:{origins:{service:{read:!0}},read:{source:"layerDefinition.fields"}}}))],i.prototype,"fields",void 0),o([_.property({readOnly:!0,dependsOn:["fields"]})],i.prototype,"fieldsIndex",null),o([_.property({type:x,json:{origins:{service:{read:{source:"extent"}}},read:{source:"layerDefinition.extent"}}})],i.prototype,"fullExtent",void 0),o([_.property()],i.prototype,"gdbVersion",void 0),o([_.property({readOnly:!0})],i.prototype,"geometryProperties",void 0),o([_.property({type:"point polygon polyline multipoint multipatch mesh".split(" "),json:{origins:{service:{read:se.read}},read:{source:"layerDefinition.geometryType",reader:se.read}}})],i.prototype,"geometryType",void 0),o([_.property({type:Boolean,json:{origins:{service:{read:!0}},read:{source:"layerDefinition.hasM"}}})],i.prototype,"hasM",void 0),o([_.property({type:Boolean,json:{origins:{service:{read:!0}},read:{source:"layerDefinition.hasZ"}}})],i.prototype,"hasZ",void 0),o([_.property({readOnly:!0,type:O})],i.prototype,"heightModelInfo",void 0),o([_.property({type:Date})],i.prototype,"historicMoment",void 0),o([_.property({json:{origins:{service:{read:!1},"portal-item":{read:!1}}}})],i.prototype,"id",void 0),o([_.property({readOnly:!0})],i.prototype,"isTable",void 0),o([_.reader("service","isTable",["type"]),_.reader("isTable",["layerDefinition.type"])],i.prototype,"readIsTable",null),o([_.property({dependsOn:["loaded","url","source"],readOnly:!0})],i.prototype,"hasService",null),o([_.property(F.labelsVisible)],i.prototype,"labelsVisible",void 0),o([_.property({type:[W],json:{origins:{service:{read:{source:"drawingInfo.labelingInfo",reader:J.reader},write:{target:"drawingInfo.labelingInfo",enabled:!1}}},read:{source:"layerDefinition.drawingInfo.labelingInfo",reader:J.reader},write:{target:"layerDefinition.drawingInfo.labelingInfo"}}})],i.prototype,"labelingInfo",void 0),o([_.property(F.opacityDrawingInfo)],i.prototype,"opacity",void 0),o([_.property({type:Number,json:{origins:{service:{read:{source:"id"}}},read:!1}})],i.prototype,"layerId",void 0),o([_.property(F.legendEnabled)],i.prototype,"legendEnabled",void 0),o([_.property({type:["show","hide"]})],i.prototype,"listMode",void 0),o([_.property({type:Number,json:{origins:{service:{write:{enabled:!1}}},read:{source:"layerDefinition.minScale"},write:{target:"layerDefinition.minScale"}}})],i.prototype,"minScale",void 0),o([_.reader("service","minScale",["minScale","effectiveMinScale"])],i.prototype,"readMinScale",null),o([_.property({type:Number,json:{origins:{service:{write:{enabled:!1}}},read:{source:"layerDefinition.maxScale"},write:{target:"layerDefinition.maxScale"}}})],i.prototype,"maxScale",void 0),o([_.reader("service","maxScale",["maxScale","effectiveMaxScale"])],i.prototype,"readMaxScale",null),o([_.property({type:String})],i.prototype,"globalIdField",void 0),o([_.reader("globalIdField",["layerDefinition.globalIdField","layerDefinition.fields"]),_.reader("service","globalIdField",["globalIdField","fields"])],i.prototype,"readGlobalIdFieldFromService",null),o([_.property({type:String})],i.prototype,"objectIdField",void 0),o([_.reader("objectIdField",["layerDefinition.objectIdField","layerDefinition.fields"]),_.reader("service","objectIdField",["objectIdField","fields"])],i.prototype,"readObjectIdFieldFromService",null),o([_.property({value:"ArcGISFeatureLayer",type:["ArcGISFeatureLayer"]})],i.prototype,"operationalLayerType",void 0),o([_.property(ce.outFields)],i.prototype,"outFields",void 0),o([_.property({readOnly:!0,dependsOn:["layerId"]})],i.prototype,"parsedUrl",null),o([_.property({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],i.prototype,"path",void 0),o([_.property(F.popupEnabled)],i.prototype,"popupEnabled",void 0),o([_.property({type:l,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],i.prototype,"popupTemplate",void 0),o([_.property({readOnly:!0,dependsOn:["fields","title"]})],i.prototype,"defaultPopupTemplate",null),o([_.property({type:[K],readOnly:!0})],i.prototype,"relationships",void 0),o([_.property({types:u.rendererTypes,json:{origins:{service:{write:{target:"drawingInfo.renderer",enabled:!1}}},write:{target:"layerDefinition.drawingInfo.renderer"}}})],i.prototype,"renderer",null),o([_.reader("service","renderer",["drawingInfo.renderer","defaultSymbol","type"]),_.reader("renderer",["layerDefinition.drawingInfo.renderer","layerDefinition.defaultSymbol","layerDefinition.type"])],i.prototype,"readRenderer",null),o([_.writer("renderer")],i.prototype,"writeRenderer",null),o([_.writer("web-scene","renderer",{"layerDefinition.drawingInfo.renderer":{types:u.webSceneRendererTypes}})],i.prototype,"writeWebSceneRenderer",null),o([_.property()],i.prototype,"sourceJSON",void 0),o([_.property({type:Boolean})],i.prototype,"returnM",void 0),o([_.property({type:Boolean})],i.prototype,"returnZ",void 0),o([_.property(F.screenSizePerspectiveEnabled)],i.prototype,"screenSizePerspectiveEnabled",void 0),o([_.property()],i.prototype,"source",null),o([_.cast("source")],i.prototype,"castSource",null),o([_.reader("portal-item","source",["featureSet"]),_.reader("web-map","source",["featureSet"])],i.prototype,"readSource",null),o([_.property({readOnly:!0,json:{origins:{service:{read:{source:"definitionExpression"}}}}})],i.prototype,"serviceDefinitionExpression",void 0),o([_.property({type:C,json:{origins:{service:{read:{source:"extent.spatialReference"}}},read:{source:"layerDefinition.extent.spatialReference"}}})],i.prototype,"spatialReference",void 0),o([_.property({type:[H]})],i.prototype,"templates",void 0),o([_.reader("templates",["editFieldsInfo","creatorField","editorField","templates"])],i.prototype,"readTemplates",null),o([_.property({type:Z})],i.prototype,"timeInfo",void 0),o([_.property()],i.prototype,"title",void 0),o([_.reader("service","title",["name"]),_.reader("portal-item","title",["layerDefinition.title","layerDefinition.name","title"])],i.prototype,"readTitle",null),o([_.reader("web-map","title",["layerDefinition.name","title"])],i.prototype,"readTitleFromWebMap",null),o([_.property({type:String})],i.prototype,"sublayerTitleMode",void 0),o([_.property({type:String,json:{read:{source:"timeInfo.trackIdField"}}})],i.prototype,"trackIdField",void 0),o([_.property({json:{read:!1}})],i.prototype,"type",void 0),o([_.property({type:String})],i.prototype,"typeIdField",void 0),o([_.reader("service","typeIdField"),_.reader("typeIdField",["layerDefinition.typeIdField"])],i.prototype,"readTypeIdField",null),o([_.property({type:[V]})],i.prototype,"types",void 0),o([_.reader("service","types",["types"]),_.reader("types",["layerDefinition.types"])],i.prototype,"readTypes",null),o([_.property({type:d.ofType(N.FeatureIndex),readOnly:!0})],i.prototype,"indexes",void 0),o([_.property(F.url)],i.prototype,"url",null),o([_.writer("url")],i.prototype,"writeUrl",null),o([_.property({readOnly:!0})],i.prototype,"userIsAdmin",void 0),o([_.property({json:{origins:{service:{read:!0}},read:!1}})],i.prototype,"version",void 0),o([_.reader("service","version","currentVersion capabilities drawingInfo hasAttachments htmlPopupType relationships timeInfo typeIdField types".split(" "))],i.prototype,"readVersion",null),o([_.property({type:Boolean,json:{origins:{"portal-item":{write:{target:"layerDefinition.defaultVisibility"}}}}})],i.prototype,"visible",void 0),o([_.reader("portal-item","visible",["visibility","layerDefinition.defaultVisibility"])],i.prototype,"readVisible",null),i=o([_.subclass("esri.layers.FeatureLayer")],i)}(_.declared(A.TemporalLayer(k.ScaleRangeLayer(j.RefreshableLayer(P.ArcGISService(I.OperationalLayer(E.PortalLayer(v.MultiOriginJSONMixin(M)))))))))})},"esri/PopupTemplate":function(){define("require exports ./core/tsSupport/assignHelper ./core/tsSupport/declareExtendsHelper ./core/tsSupport/decorateHelper ./core/tsSupport/generatorHelper ./core/tsSupport/awaiterHelper ./core/arrayUtils ./core/Collection ./core/iteratorUtils ./core/JSONSupport ./core/lang ./core/Logger ./core/promiseUtils ./core/accessorSupport/decorators ./core/accessorSupport/ensureType ./layers/support/fieldUtils ./popup/content ./popup/ExpressionInfo ./popup/FieldInfo ./popup/LayerOptions ./popup/RelatedRecordsInfo ./popup/content/AttachmentsContent ./popup/content/Content ./popup/content/FieldsContent ./popup/content/MediaContent ./popup/content/TextContent ./popup/content/support/mediaInfoTypes ./support/actions/ActionBase ./support/actions/ActionButton ./support/actions/ActionToggle".split(" "),function(e,t,r,n,o,i,a,s,l,u,c,p,d,f,h,y,m,g,v,b,w,S,_,x,O,C,M,T,P,I,E){var j=l.ofType({key:"type",defaultKeyValue:"button",base:P,typeMap:{button:I,toggle:E}}),k={base:x,key:"type",typeMap:{media:C,text:M,attachments:_,fields:O}},A=d.getLogger("esri.PopupTemplate");return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.actions=null,t.content="",t.expressionInfos=null,t.fieldInfos=null,t.layerOptions=null,t.lastEditInfoEnabled=!0,t.outFields=null,t.overwriteActions=!1,t.title="",t.relatedRecordsInfo=null,t}n(t,e),r=t,t.prototype.castContent=function(e){return Array.isArray(e)?e.map(function(e){return y.ensureOneOfType(k,e)}):"string"==typeof e||"function"==typeof e||e instanceof HTMLElement||f.isPromiseLike(e)?e:(A.error("content error","unsupported content value",{value:e}),null)},t.prototype.readContent=function(e,t){return e=t.popupElements,Array.isArray(e)&&0<e.length?this._readPopupInfoElements(t):this._readPopupInfo(t)},t.prototype.writeContent=function(e,t){var r=this;"string"==typeof e?t.description=e:Array.isArray(e)&&(t.popupElements=e.map(function(e){return e&&e.toJSON()}),t.popupElements.forEach(function(e){"attachments"===e.type?r._writeAttachmentContent(t):"media"===e.type?r._writeMediaContent(e,t):"text"===e.type&&r._writeTextContent(e,t)}))},t.prototype.writeFieldInfos=function(e,t){var r=this.content,r=Array.isArray(r)?r:null;if(e){var n=!!r&&r.some(function(e){return"fields"===e.type&&(!e.fieldInfos||0===e.fieldInfos.length)});t.fieldInfos=e.filter(Boolean).map(function(e){return e=e.toJSON(),n||(e.visible=!1),e})}if(r)for(e=0;e<r.length;e++){var o=r[e];"fields"===o.type&&this._writeFieldsContent(o,t)}},t.prototype.writeLayerOptions=function(e,t){t.layerOptions=!e||null===e.showNoDataRecords&&null===e.returnTopmostRaster?null:e.toJSON()},t.prototype.writeTitle=function(e,t){t.title=e||""},t.prototype.clone=function(){var e=this.actions,e=e?p.clone(e.toArray()):[];return new r({actions:e,content:Array.isArray(this.content)?p.clone(this.content):this.content,expressionInfos:Array.isArray(this.expressionInfos)?p.clone(this.expressionInfos):null,fieldInfos:Array.isArray(this.fieldInfos)?p.clone(this.fieldInfos):null,layerOptions:this.layerOptions?p.clone(this.layerOptions):null,lastEditInfoEnabled:this.lastEditInfoEnabled,outFields:Array.isArray(this.outFields)?p.clone(this.outFields):null,overwriteActions:this.overwriteActions,title:this.title,relatedRecordsInfo:this.relatedRecordsInfo?p.clone(this.relatedRecordsInfo):null})},t.prototype.collectRequiredFields=function(e,t){return a(this,void 0,void 0,function(){return i(this,function(r){switch(r.label){case 0:return[4,this._collectExpressionInfoFields(e,t,this.expressionInfos)];case 1:return r.sent(),m.collectFields(e,t,(this.outFields||[]).concat(this._getActionsFields(this.actions),this._getTitleFields(this.title),this._getContentFields(this.content))),[2]}})})},t.prototype.getRequiredFields=function(e){return a(this,void 0,void 0,function(){var t;return i(this,function(r){switch(r.label){case 0:return t=new Set,[4,this.collectRequiredFields(t,e)];case 1:return r.sent(),[2,u.valuesOfSet(t).sort()]}})})},t.prototype._writeFieldsContent=function(e,t){Array.isArray(e.fieldInfos)&&e.fieldInfos.length&&(e=p.clone(e.fieldInfos),Array.isArray(t.fieldInfos)?e.forEach(function(e){var r=s.find(t.fieldInfos,function(t){return t.fieldName.toLowerCase()===e.fieldName.toLowerCase()});r?r.visible=!0:t.fieldInfos.push(e)}):t.fieldInfos=e)},t.prototype._writeAttachmentContent=function(e){e.showAttachments||(e.showAttachments=!0)},t.prototype._writeTextContent=function(e,t){!t.description&&e.text&&(t.description=e.text)},t.prototype._writeMediaContent=function(e,t){Array.isArray(e.mediaInfos)&&e.mediaInfos.length&&(e=p.clone(e.mediaInfos),Array.isArray(t.mediaInfos)?t.mediaInfos=t.mediaInfos.concat(e):t.mediaInfos=e)},t.prototype._readPopupInfoElements=function(e){var t=e.description,r=e.mediaInfos,n=!1,o=!1;return e.popupElements.map(function(e){return"media"===e.type?(e.mediaInfos||!r||o||(e.mediaInfos=r,o=!0),C.fromJSON(e)):"text"===e.type?(e.text||!t||n||(e.text=t,n=!0),M.fromJSON(e)):"attachments"===e.type?_.fromJSON(e):"fields"===e.type?O.fromJSON(e):void 0}).filter(Boolean)},t.prototype._readPopupInfo=function(e){var t=e.description,r=e.mediaInfos;e=e.showAttachments;var n=[];return t?n.push(new M({text:t})):n.push(new O),Array.isArray(r)&&r.length&&n.push(C.fromJSON({mediaInfos:r})),e&&n.push(_.fromJSON({displayType:"list"})),n.length?n:t},t.prototype._getContentElementFields=function(e){var t=this;return e&&"attachments"!==e.type?"fields"===e.type?this._getFieldInfoFields(e.fieldInfos||this.fieldInfos):"media"===e.type?(e.mediaInfos||[]).reduce(function(e,r){return e.concat(t._getMediaInfoFields(r))},[]):"text"===e.type?this._extractFieldNames(e.text):void 0:[]},t.prototype._getMediaInfoFields=function(e){var t=e.caption,r=e.value||{},n=r.fields,o=void 0===n?[]:n,n=r.normalizeField,i=r.tooltipField,a=r.sourceURL,r=r.linkURL;return e=this._extractFieldNames(e.title).concat(this._extractFieldNames(t),this._extractFieldNames(a),this._extractFieldNames(r),o),n&&e.push(n),i&&e.push(i),e},t.prototype._getContentFields=function(e){var t=this;return"string"==typeof e?this._extractFieldNames(e):Array.isArray(e)?e.reduce(function(e,r){return e.concat(t._getContentElementFields(r))},[]):[]},t.prototype._collectExpressionInfoFields=function(e,t,r){return a(this,void 0,void 0,function(){return i(this,function(n){switch(n.label){case 0:return r?[4,f.all(r.map(function(r){return m.collectArcadeFieldNames(e,t,r.expression)}))]:[2];case 1:return n.sent(),[2]}})})},t.prototype._getFieldInfoFields=function(e){return e?e.filter(function(e){return void 0===e.visible||!!e.visible}).map(function(e){return e.fieldName}).filter(function(e){return-1===e.indexOf("relationships/")&&-1===e.indexOf("expression/")}):[]},t.prototype._getActionsFields=function(e){var t=this;return e?e.toArray().reduce(function(e,r){return e.concat(t._getActionFields(r))},[]):[]},t.prototype._getActionFields=function(e){var t=e.className,r=e.type,r="button"===r||"toggle"===r?e.image:"";return this._extractFieldNames(e.title).concat(this._extractFieldNames(t),this._extractFieldNames(r))},t.prototype._getTitleFields=function(e){return"string"==typeof e?this._extractFieldNames(e):[]},t.prototype._extractFieldNames=function(e){if(!e||"string"!=typeof e)return[];if(!(e=e.match(/{[^}]*}/g)))return[];var t=/\{(\w+):.+\}/;return(e=e.filter(function(e){return!(0===e.indexOf("{relationships/")||0===e.indexOf("{expression/"))}).map(function(e){return e.replace(t,"{$1}")}))?e.map(function(e){return e.slice(1,-1)}):[]};var r;return o([h.property({type:j})],t.prototype,"actions",void 0),o([h.property()],t.prototype,"content",void 0),o([h.cast("content")],t.prototype,"castContent",null),o([h.reader("content",["description","popupElements","mediaInfos","showAttachments"])],t.prototype,"readContent",null),o([h.writer("content",{popupElements:{type:l.ofType(g.types)},showAttachments:{type:Boolean},mediaInfos:{type:l.ofType(T.types)},description:{type:String}})],t.prototype,"writeContent",null),o([h.property({type:[v],json:{write:!0}})],t.prototype,"expressionInfos",void 0),o([h.property({type:[b]})],t.prototype,"fieldInfos",void 0),o([h.writer("fieldInfos")],t.prototype,"writeFieldInfos",null),o([h.property({type:w})],t.prototype,"layerOptions",void 0),o([h.writer("layerOptions")],t.prototype,"writeLayerOptions",null),o([h.property({type:Boolean,json:{read:{source:"showLastEditInfo"},write:{target:"showLastEditInfo"},default:!0}})],t.prototype,"lastEditInfoEnabled",void 0),o([h.property()],t.prototype,"outFields",void 0),o([h.property()],t.prototype,"overwriteActions",void 0),o([h.property({json:{type:String}})],t.prototype,"title",void 0),o([h.writer("title")],t.prototype,"writeTitle",null),o([h.property({type:S,json:{write:!0}})],t.prototype,"relatedRecordsInfo",void 0),t=r=o([h.subclass("esri.PopupTemplate")],t)}(h.declared(c.JSONSupport))})},"esri/popup/content":function(){define("require exports ./content/AttachmentsContent ./content/Content ./content/FieldsContent ./content/MediaContent ./content/TextContent".split(" "),function(e,t,r,n,o,i,a){Object.defineProperty(t,"__esModule",{value:!0}),t.AttachmentsContent=r,t.BaseContent=n,t.FieldsContent=o,t.MediaContent=i,t.TextContent=a,t.isContent=function(e){return e instanceof t.BaseContent},t.types={base:null,key:"type",typeMap:{attachment:t.AttachmentsContent,fields:t.FieldsContent,media:t.MediaContent,text:t.TextContent}}})},"esri/popup/content/AttachmentsContent":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/lang ../../core/accessorSupport/decorators ../../layers/support/AttachmentInfo ./Content".split(" "),function(e,t,r,n,o,i,a,s){return function(e){function t(t){return t=e.call(this,t)||this,t.attachmentInfos=null,t.displayType=null,t.type="attachments",t}r(t,e),s=t,t.prototype.clone=function(){return new s({displayType:this.displayType,attachmentInfos:this.attachmentInfos?o.clone(this.attachmentInfos):null})};var s;return n([i.property({type:[a]})],t.prototype,"attachmentInfos",void 0),n([i.property({type:["preview","list"],json:{write:!0}})],t.prototype,"displayType",void 0),n([i.property({type:["attachments"],readOnly:!0,json:{read:!1,write:!0}})],t.prototype,"type",void 0),t=s=n([i.subclass("esri.popup.content.AttachmentsContent")],t)}(i.declared(s))})},"esri/layers/support/AttachmentInfo":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators ../../core/accessorSupport/ensureType ./exifUtils".split(" "),function(e,t,r,n,o,i,a,s){var l={1:{id:1,rotation:0,mirrored:!1},2:{id:2,rotation:0,mirrored:!0},3:{id:3,rotation:180,mirrored:!1},4:{id:4,rotation:180,mirrored:!0},5:{id:5,rotation:-90,mirrored:!0},6:{id:6,rotation:90,mirrored:!1},7:{id:7,rotation:90,mirrored:!0},8:{id:8,rotation:-90,mirrored:!1}};return function(e){function t(t){return t=e.call(this,t)||this,t.contentType=null,t.exifInfo=null,t.id=null,t.globalId=null,t.keywords=null,t.name=null,t.parentGlobalId=null,t.parentObjectId=null,t.size=null,t.url=null,t}r(t,e),o=t,Object.defineProperty(t.prototype,"orientationInfo",{get:function(){var e=s.getExifValue({exifName:"Exif IFD0",tagName:"Orientation",exifInfo:this.exifInfo});return l[e]||null},enumerable:!0,configurable:!0}),t.prototype.clone=function(){return new o({contentType:this.contentType,exifInfo:this.exifInfo,id:this.id,globalId:this.globalId,keywords:this.keywords,name:this.name,parentGlobalId:this.parentGlobalId,parentObjectId:this.parentObjectId,size:this.size,url:this.url})};var o;return n([i.property({type:String})],t.prototype,"contentType",void 0),n([i.property()],t.prototype,"exifInfo",void 0),n([i.property({readOnly:!0,dependsOn:["exifInfo"]})],t.prototype,"orientationInfo",null),n([i.property({type:a.Integer})],t.prototype,"id",void 0),n([i.property({type:String})],t.prototype,"globalId",void 0),n([i.property({type:String})],t.prototype,"keywords",void 0),n([i.property({type:String})],t.prototype,"name",void 0),n([i.property({json:{read:!1}})],t.prototype,"parentGlobalId",void 0),n([i.property({json:{read:!1}})],t.prototype,"parentObjectId",void 0),n([i.property({type:a.Integer})],t.prototype,"size",void 0),n([i.property({json:{read:!1}})],t.prototype,"url",void 0),t=o=n([i.subclass("esri.layers.support.AttachmentInfo")],t)}(i.declared(o.JSONSupport))})},"esri/layers/support/exifUtils":function(){define(["require","exports","../../core/arrayUtils"],function(e,t,r){function n(e){var t=e.tagName;return e=e.tags,e&&t?(e=r.find(e,function(e){return e.name===t}))&&e.value||null:null}Object.defineProperty(t,"__esModule",{value:!0}),t.getExifValue=function(e){var t=e.exifInfo,o=e.exifName;return e=e.tagName,t&&o&&e&&(t=r.find(t,function(e){return e.name===o}))?n({tagName:e,tags:t.tags}):null}})},"esri/popup/content/Content":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators".split(" "),function(e,t,r,n,o,i){return function(e){function t(t){return t=e.call(this,t)||this,t.type=null,t}return r(t,e),n([i.property({type:["attachments","fields","media","text"],readOnly:!0,json:{read:!1,write:!0}})],t.prototype,"type",void 0),t=n([i.subclass("esri.popup.content.Content")],t)}(i.declared(o.JSONSupport))})},"esri/popup/content/FieldsContent":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/lang ../../core/accessorSupport/decorators ../FieldInfo ./Content".split(" "),function(e,t,r,n,o,i,a,s){return function(e){function t(t){return t=e.call(this,t)||this,t.fieldInfos=null,t.type="fields",t}r(t,e),s=t,t.prototype.writeFieldInfos=function(e,t){t.fieldInfos=e&&e.map(function(e){return e.toJSON()})},t.prototype.clone=function(){return new s({fieldInfos:Array.isArray(this.fieldInfos)?o.clone(this.fieldInfos):null})};var s;return n([i.property({type:[a]})],t.prototype,"fieldInfos",void 0),n([i.writer("fieldInfos")],t.prototype,"writeFieldInfos",null),n([i.property({type:["fields"],readOnly:!0,json:{read:!1,write:!0}})],t.prototype,"type",void 0),t=s=n([i.subclass("esri.popup.content.FieldsContent")],t)}(i.declared(s))})},"esri/popup/FieldInfo":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/jsonMap ../core/JSONSupport ../core/lang ../core/accessorSupport/decorators ./support/FieldInfoFormat".split(" "),function(e,t,r,n,o,i,a,s,l){var u=new o.default({richtext:"rich-text",textarea:"text-area",textbox:"text-box"});return function(e){function t(t){return t=e.call(this,t)||this,t.fieldName=null,t.format=null,t.isEditable=!1,t.label=null,t.stringFieldOption="text-box",t.statisticType=null,t.tooltip=null,t.visible=!0,t}r(t,e),o=t,t.prototype.writeStringFieldOption=function(e,t){t.stringFieldOption=u.toJSON(e)},t.prototype.readStringFieldOption=function(e){if(e)return u.fromJSON(e)},t.prototype.clone=function(){return new o({fieldName:this.fieldName,format:this.format?a.clone(this.format):null,isEditable:this.isEditable,label:this.label,stringFieldOption:this.stringFieldOption,statisticType:this.statisticType,tooltip:this.tooltip,visible:this.visible})};var o;return n([s.property({type:String,json:{write:!0}})],t.prototype,"fieldName",void 0),n([s.property({type:l,json:{write:!0}})],t.prototype,"format",void 0),n([s.property({type:Boolean,json:{write:!0,default:!1}})],t.prototype,"isEditable",void 0),n([s.property({type:String,json:{write:!0}})],t.prototype,"label",void 0),n([s.property({type:u.apiValues,json:{write:!0,default:"text-box",type:u.jsonValues}})],t.prototype,"stringFieldOption",void 0),n([s.writer("stringFieldOption")],t.prototype,"writeStringFieldOption",null),n([s.reader("stringFieldOption")],t.prototype,"readStringFieldOption",null),n([s.property({type:"count sum min max avg stddev var".split(" "),json:{write:!0}})],t.prototype,"statisticType",void 0),n([s.property({type:String,json:{write:!0}})],t.prototype,"tooltip",void 0),n([s.property({type:Boolean,json:{write:!0}})],t.prototype,"visible",void 0),t=o=n([s.subclass("esri.popup.FieldInfo")],t)}(s.declared(i.JSONSupport))})},"esri/popup/support/FieldInfoFormat":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/date ../../core/JSONSupport ../../core/accessorSupport/decorators ../../core/accessorSupport/ensureType ../../intl/date ../../intl/number".split(" "),function(e,t,r,n,o,i,a,s,l,u){return function(e){function t(t){return t=e.call(this,t)||this,t.dateFormat=null,t.digitSeparator=!1,t.places=null,t}r(t,e),i=t,t.prototype.clone=function(){return new i({dateFormat:this.dateFormat,digitSeparator:this.digitSeparator,places:this.places})},t.prototype.format=function(e){return this.dateFormat?l.formatDate(e,l.convertDateFormatToIntlOptions(this.dateFormat)):u.formatNumber(e,u.convertNumberFormatToIntlOptions(this))};var i;return n([a.enumeration.serializable()(o.dictionary)],t.prototype,"dateFormat",void 0),n([a.property({type:Boolean,json:{write:!0}})],t.prototype,"digitSeparator",void 0),n([a.property({type:s.Integer,json:{write:!0}})],t.prototype,"places",void 0),t=i=n([a.subclass("esri.popup.support.FieldInfoFormat")],t)}(a.declared(i.JSONSupport))})},"esri/core/date":function(){define(["require","exports","./jsonMap"],function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.formats={"short-date":"(datePattern: 'M/d/y', selector: 'date')","short-date-short-time":"(datePattern: 'M/d/y', timePattern: 'h:mm a', selector: 'date and time')","short-date-short-time-24":"(datePattern: 'M/d/y', timePattern: 'H:mm', selector: 'date and time')","short-date-long-time":"(datePattern: 'M/d/y', timePattern: 'h:mm:ss a', selector: 'date and time')","short-date-long-time-24":"(datePattern: 'M/d/y', timePattern: 'H:mm:ss', selector: 'date and time')","short-date-le":"(datePattern: 'd/M/y', selector: 'date')","short-date-le-short-time":"(datePattern: 'd/M/y', timePattern: 'h:mm a', selector: 'date and time')","short-date-le-short-time-24":"(datePattern: 'd/M/y', timePattern: 'H:mm', selector: 'date and time')","short-date-le-long-time":"(datePattern: 'd/M/y', timePattern: 'h:mm:ss a', selector: 'date and time')","short-date-le-long-time-24":"(datePattern: 'd/M/y', timePattern: 'H:mm:ss', selector: 'date and time')","long-month-day-year":"(datePattern: 'MMMM d, y', selector: 'date')","long-month-day-year-short-time":"(datePattern: 'MMMM d, y', timePattern: 'h:mm a', selector: 'date and time')","long-month-day-year-short-time-24":"(datePattern: 'MMMM d, y', timePattern: 'H:mm', selector: 'date and time')","long-month-day-year-long-time":"(datePattern: 'MMMM d, y', timePattern: 'h:mm:ss a', selector: 'date and time')","long-month-day-year-long-time-24":"(datePattern: 'MMMM d, y', timePattern: 'H:mm:ss', selector: 'date and time')","day-short-month-year":"(datePattern: 'd MMM y', selector: 'date')","day-short-month-year-short-time":"(datePattern: 'd MMM y', timePattern: 'h:mm a', selector: 'date and time')","day-short-month-year-short-time-24":"(datePattern: 'd MMM y', timePattern: 'H:mm', selector: 'date and time')","day-short-month-year-long-time":"(datePattern: 'd MMM y', timePattern: 'h:mm:ss a', selector: 'date and time')","day-short-month-year-long-time-24":"(datePattern: 'd MMM y', timePattern: 'H:mm:ss', selector: 'date and time')","long-date":"(datePattern: 'EEEE, MMMM d, y', selector: 'date')","long-date-short-time":"(datePattern: 'EEEE, MMMM d, y', timePattern: 'h:mm a', selector: 'date and time')","long-date-short-time-24":"(datePattern: 'EEEE, MMMM d, y', timePattern: 'H:mm', selector: 'date and time')","long-date-long-time":"(datePattern: 'EEEE, MMMM d, y', timePattern: 'h:mm:ss a', selector: 'date and time')","long-date-long-time-24":"(datePattern: 'EEEE, MMMM d, y', timePattern: 'H:mm:ss', selector: 'date and time')","long-month-year":"(datePattern: 'MMMM y', selector: 'date')","short-month-year":"(datePattern: 'MMM y', selector: 'date')",year:"(datePattern: 'y', selector: 'date')"},t.dictionary=r.strict()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"}),t.toJSON=t.dictionary.toJSON.bind(t.dictionary),t.fromJSON=t.dictionary.fromJSON.bind(t.dictionary),t.getFormat=function(e){return t.formats[e]}})},"esri/popup/content/MediaContent":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/lang ../../core/accessorSupport/decorators ./BarChartMediaInfo ./ColumnChartMediaInfo ./Content ./ImageMediaInfo ./LineChartMediaInfo ./PieChartMediaInfo ./support/mediaInfoTypes".split(" "),function(e,t,r,n,o,i,a,s,l,u,c,p,d){return function(e){function t(t){return t=e.call(this,t)||this,t.mediaInfos=null,t.type="media",t}r(t,e),l=t,t.prototype.readMediaInfos=function(e){return e&&e.map(function(e){return"image"===e.type?u.fromJSON(e):"barchart"===e.type?a.fromJSON(e):"columnchart"===e.type?s.fromJSON(e):"linechart"===e.type?c.fromJSON(e):"piechart"===e.type?p.fromJSON(e):void 0}).filter(Boolean)},t.prototype.writeMediaInfos=function(e,t){t.mediaInfos=e&&e.map(function(e){return e.toJSON()})},t.prototype.clone=function(){return new l({mediaInfos:this.mediaInfos?o.clone(this.mediaInfos):null})};var l;return n([i.property({types:[d.types]})],t.prototype,"mediaInfos",void 0),n([i.reader("mediaInfos")],t.prototype,"readMediaInfos",null),n([i.writer("mediaInfos")],t.prototype,"writeMediaInfos",null),n([i.property({type:["media"],readOnly:!0,json:{read:!1,write:!0}})],t.prototype,"type",void 0),t=l=n([i.subclass("esri.popup.content.MediaContent")],t)}(i.declared(l))})},"esri/popup/content/BarChartMediaInfo":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ./mixins/ChartMediaInfo ./support/chartMediaInfoUtils".split(" "),function(e,t,r,n,o,i,a){return function(e){function t(t){return t=e.call(this,t)||this,t.type="bar-chart",t}r(t,e),i=t,t.prototype.clone=function(){return new i({title:this.title,caption:this.caption,value:this.value?this.value.clone():null})};var i;return n([o.property({type:["bar-chart"],readOnly:!0,json:{read:!1,write:a.chartTypeKebabDict.write}})],t.prototype,"type",void 0),t=i=n([o.subclass("esri.popup.content.BarChartMediaInfo")],t)}(o.declared(i))})},"esri/popup/content/mixins/ChartMediaInfo":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/accessorSupport/decorators ./MediaInfo ../support/ChartMediaInfoValue".split(" "),function(e,t,r,n,o,i,a){return function(e){function t(t){return t=e.call(this,t)||this,t.type=null,t.value=null,t}return r(t,e),n([o.property({type:["bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],t.prototype,"type",void 0),n([o.property({type:a,json:{write:!0}})],t.prototype,"value",void 0),t=n([o.subclass("esri.popup.content.mixins.ChartMediaInfo")],t)}(o.declared(i))})},"esri/popup/content/mixins/MediaInfo":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/JSONSupport ../../../core/accessorSupport/decorators".split(" "),function(e,t,r,n,o,i){return function(e){function t(t){return t=e.call(this,t)||this,t.caption="",t.title="",t.type=null,t}return r(t,e),n([i.property({type:String,json:{write:!0}})],t.prototype,"caption",void 0),n([i.property({type:String,json:{write:!0}})],t.prototype,"title",void 0),n([i.property({type:["image","bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],t.prototype,"type",void 0),t=n([i.subclass("esri.popup.content.mixins.MediaInfo")],t)}(i.declared(o.JSONSupport))})},"esri/popup/content/support/ChartMediaInfoValue":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/JSONSupport ../../../core/lang ../../../core/accessorSupport/decorators ./ChartMediaInfoValueSeries".split(" "),function(e,t,r,n,o,i,a,s){return function(e){function t(t){return t=e.call(this,t)||this,t.fields=[],t.normalizeField=null,t.series=[],t.tooltipField=null,t}r(t,e),o=t,t.prototype.clone=function(){return new o({fields:i.clone(this.fields),normalizeField:this.normalizeField,tooltipField:this.tooltipField})};var o;return n([a.property({type:[String],json:{write:!0}})],t.prototype,"fields",void 0),n([a.property({type:String,json:{write:!0}})],t.prototype,"normalizeField",void 0),n([a.property({type:[s],json:{read:!1}})],t.prototype,"series",void 0),n([a.property({type:String,json:{write:!0}})],t.prototype,"tooltipField",void 0),t=o=n([a.subclass("esri.popup.content.support.ChartMediaInfoValue")],t)}(a.declared(o.JSONSupport))})},"esri/popup/content/support/ChartMediaInfoValueSeries":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/Accessor ../../../core/accessorSupport/decorators".split(" "),function(e,t,r,n,o,i){return function(e){function t(t){return t=e.call(this,t)||this,t.tooltip=null,t.x=null,t.y=null,t}r(t,e),o=t,t.prototype.clone=function(){return new o({tooltip:this.tooltip,x:this.x,y:this.y})};var o;return n([i.property()],t.prototype,"tooltip",void 0),n([i.property()],t.prototype,"x",void 0),n([i.property()],t.prototype,"y",void 0),t=o=n([i.subclass("esri.popup.content.support.ChartMediaInfoValueSeries")],t)}(i.declared(o))})},"esri/popup/content/support/chartMediaInfoUtils":function(){define(["require","exports","../../../core/jsonMap"],function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.chartTypeKebabDict=r.strict()({barchart:"bar-chart",columnchart:"column-chart",linechart:"line-chart",piechart:"pie-chart"})})},"esri/popup/content/ColumnChartMediaInfo":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ./mixins/ChartMediaInfo ./support/chartMediaInfoUtils".split(" "),function(e,t,r,n,o,i,a){return function(e){function t(t){return t=e.call(this,t)||this,t.type="column-chart",t}r(t,e),i=t,t.prototype.clone=function(){return new i({title:this.title,caption:this.caption,value:this.value?this.value.clone():null})};var i;return n([o.property({type:["column-chart"],readOnly:!0,json:{read:!1,write:a.chartTypeKebabDict.write}})],t.prototype,"type",void 0),t=i=n([o.subclass("esri.popup.content.ColumnChartMediaInfo")],t)}(o.declared(i))})},"esri/popup/content/ImageMediaInfo":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ./mixins/MediaInfo ./support/ImageMediaInfoValue".split(" "),function(e,t,r,n,o,i,a){return function(e){function t(t){return t=e.call(this,t)||this,t.refreshInterval=null,t.type="image",t.value=null,t}r(t,e),i=t,t.prototype.clone=function(){return new i({title:this.title,caption:this.caption,refreshInterval:this.refreshInterval,value:this.value?this.value.clone():null})};var i;return n([o.property({type:Number,json:{write:!0}})],t.prototype,"refreshInterval",void 0),n([o.property({type:["image"],readOnly:!0,json:{read:!1,write:!0}})],t.prototype,"type",void 0),n([o.property({type:a,json:{write:!0}})],t.prototype,"value",void 0),t=i=n([o.subclass("esri.popup.content.ImageMediaInfo")],t)}(o.declared(i))})},"esri/popup/content/support/ImageMediaInfoValue":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/JSONSupport ../../../core/accessorSupport/decorators".split(" "),function(e,t,r,n,o,i){return function(e){function t(t){return t=e.call(this,t)||this,t.linkURL=null,t.sourceURL=null,t}r(t,e),o=t,t.prototype.clone=function(){return new o({linkURL:this.linkURL,sourceURL:this.sourceURL})};var o;return n([i.property({type:String,json:{write:!0}})],t.prototype,"linkURL",void 0),n([i.property({type:String,json:{write:!0}})],t.prototype,"sourceURL",void 0),t=o=n([i.subclass("esri.popup.content.support.ImageMediaInfoValue")],t)}(i.declared(o.JSONSupport))})},"esri/popup/content/LineChartMediaInfo":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ./mixins/ChartMediaInfo ./support/chartMediaInfoUtils".split(" "),function(e,t,r,n,o,i,a){return function(e){function t(t){return t=e.call(this,t)||this,t.type="line-chart",t}r(t,e),i=t,t.prototype.clone=function(){return new i({title:this.title,caption:this.caption,value:this.value?this.value.clone():null})};var i;return n([o.property({type:["line-chart"],readOnly:!0,json:{read:!1,write:a.chartTypeKebabDict.write}})],t.prototype,"type",void 0),t=i=n([o.subclass("esri.popup.content.LineChartMediaInfo")],t)}(o.declared(i))})},"esri/popup/content/PieChartMediaInfo":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ./mixins/ChartMediaInfo ./support/chartMediaInfoUtils".split(" "),function(e,t,r,n,o,i,a){return function(e){function t(t){return t=e.call(this,t)||this,t.type="pie-chart",t}r(t,e),i=t,t.prototype.clone=function(){return new i({title:this.title,caption:this.caption,value:this.value?this.value.clone():null})};var i;return n([o.property({type:["pie-chart"],readOnly:!0,json:{read:!1,write:a.chartTypeKebabDict.write}})],t.prototype,"type",void 0),t=i=n([o.subclass("esri.popup.content.PieChartMediaInfo")],t)}(o.declared(i))})},"esri/popup/content/support/mediaInfoTypes":function(){define("require exports ../BarChartMediaInfo ../ColumnChartMediaInfo ../ImageMediaInfo ../LineChartMediaInfo ../PieChartMediaInfo ../mixins/MediaInfo".split(" "),function(e,t,r,n,o,i,a,s){Object.defineProperty(t,"__esModule",{value:!0}),t.types={base:s,key:"type",defaultKeyValue:"image",typeMap:{"bar-chart":r,"column-chart":n,"line-chart":i,"pie-chart":a,image:o}},t.default=t.types})},"esri/popup/content/TextContent":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ./Content".split(" "),function(e,t,r,n,o,i){return function(e){function t(t){return t=e.call(this,t)||this,t.text=null,t.type="text",t}r(t,e),i=t,t.prototype.clone=function(){return new i({text:this.text})};var i;return n([o.property({type:String,json:{write:!0}})],t.prototype,"text",void 0),n([o.property({type:["text"],readOnly:!0,json:{read:!1,write:!0}})],t.prototype,"type",void 0),t=i=n([o.subclass("esri.popup.content.TextContent")],t)}(o.declared(i))})},"esri/popup/ExpressionInfo":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/JSONSupport ../core/accessorSupport/decorators".split(" "),function(e,t,r,n,o,i){return function(e){function t(t){return t=e.call(this,t)||this,t.name=null,t.title=null,t.expression=null,t.returnType=null,t}r(t,e),o=t,t.prototype.clone=function(){return new o({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})};var o;return n([i.property({type:String,json:{write:!0}})],t.prototype,"name",void 0),n([i.property({type:String,json:{write:!0}})],t.prototype,"title",void 0),n([i.property({type:String,json:{write:!0}})],t.prototype,"expression",void 0),n([i.property({type:["string","number"],json:{write:!0}})],t.prototype,"returnType",void 0),t=o=n([i.subclass("esri.popup.ExpressionInfo")],t)}(i.declared(o.JSONSupport))})},"esri/popup/LayerOptions":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/JSONSupport ../core/accessorSupport/decorators".split(" "),function(e,t,r,n,o,i){return function(e){function t(t){return t=e.call(this,t)||this,t.returnTopmostRaster=null,t.showNoDataRecords=null,t}r(t,e),o=t,t.prototype.clone=function(){return new o({showNoDataRecords:this.showNoDataRecords,returnTopmostRaster:this.returnTopmostRaster})};var o;return n([i.property({type:Boolean,json:{write:!0}})],t.prototype,"returnTopmostRaster",void 0),n([i.property({type:Boolean,json:{write:!0}})],t.prototype,"showNoDataRecords",void 0),t=o=n([i.subclass("esri.popup.LayerOptions")],t)}(i.declared(o.JSONSupport))})},"esri/popup/RelatedRecordsInfo":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/JSONSupport ../core/lang ../core/accessorSupport/decorators ./support/RelatedRecordsInfoFieldOrder".split(" "),function(e,t,r,n,o,i,a,s){return function(e){function t(t){return t=e.call(this,t)||this,t.showRelatedRecords=null,t.orderByFields=null,t}r(t,e),o=t,t.prototype.clone=function(){return new o({showRelatedRecords:this.showRelatedRecords,orderByFields:this.orderByFields?i.clone(this.orderByFields):null})};var o;return n([a.property({type:Boolean,json:{write:!0}})],t.prototype,"showRelatedRecords",void 0),n([a.property({type:[s],json:{write:!0}})],t.prototype,"orderByFields",void 0),t=o=n([a.subclass("esri.popup.RelatedRecordsInfo")],t)}(a.declared(o.JSONSupport))})},"esri/popup/support/RelatedRecordsInfoFieldOrder":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators".split(" "),function(e,t,r,n,o,i){return function(e){function t(t){return t=e.call(this,t)||this,t.field=null,t.order=null,t}r(t,e),o=t,t.prototype.clone=function(){return new o({field:this.field,order:this.order})};var o;return n([i.property({type:String,json:{write:!0}})],t.prototype,"field",void 0),n([i.property({type:["asc","desc"],json:{write:!0}})],t.prototype,"order",void 0),t=o=n([i.subclass("esri.popup.support.RelatedRecordsInfoFieldOrder")],t)}(i.declared(o.JSONSupport))})},"esri/support/actions/ActionBase":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/Identifiable ../../core/accessorSupport/decorators".split(" "),function(e,t,r,n,o,i,a){return function(e){function t(t){return t=e.call(this,t)||this,t.active=!1,t.className=null,t.disabled=!1,t.id=null,t.indicator=!1,t.title=null,t.type=null,t.visible=!0,t}r(t,e),o=t,t.prototype.clone=function(){return new o({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible})};var o;return n([a.property()],t.prototype,"active",void 0),n([a.property()],t.prototype,"className",void 0),n([a.property()],t.prototype,"disabled",void 0),n([a.property()],t.prototype,"id",void 0),n([a.property()],t.prototype,"indicator",void 0),n([a.property()],t.prototype,"title",void 0),n([a.property()],t.prototype,"type",void 0),n([a.property()],t.prototype,"visible",void 0),t=o=n([a.subclass("esri.support.actions.ActionBase")],t)}(a.declared(i.IdentifiableMixin(o)))})},"esri/support/actions/ActionButton":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ./ActionBase".split(" "),function(e,t,r,n,o,i){return function(e){function t(t){return t=e.call(this,t)||this,t.image=null,t.type="button",t}r(t,e),i=t,t.prototype.clone=function(){return new i({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image})};var i;return n([o.property()],t.prototype,"image",void 0),t=i=n([o.subclass("esri.support.Action.ActionButton")],t)}(o.declared(i))})},"esri/support/actions/ActionToggle":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ./ActionBase".split(" "),function(e,t,r,n,o,i){return function(e){function t(t){return t=e.call(this,t)||this,t.image=null,t.type="toggle",t.value=!1,t}r(t,e),i=t,t.prototype.clone=function(){return new i({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image,value:this.value})};var i;return n([o.property()],t.prototype,"image",void 0),n([o.property()],t.prototype,"value",void 0),t=i=n([o.subclass("esri.support.Action.ActionToggle")],t)}(o.declared(i))})},"esri/renderers":function(){define("require exports ./renderers/ClassBreaksRenderer ./renderers/DictionaryRenderer ./renderers/DotDensityRenderer ./renderers/HeatmapRenderer ./renderers/Renderer ./renderers/SimpleRenderer ./renderers/UniqueValueRenderer ./renderers/support/jsonUtils".split(" "),function(e,t,r,n,o,i,a,s,l,u){Object.defineProperty(t,"__esModule",{value:!0}),t.ClassBreaksRenderer=r,t.DictionaryRenderer=n,t.DotDensityRenderer=o,t.HeatmapRenderer=i,t.BaseRenderer=a,t.SimpleRenderer=s,t.UniqueValueRenderer=l,t.isRenderer=function(e){return e instanceof t.BaseRenderer},t.read=u.read,t.write=u.write,t.fromJSON=u.fromJSON,t.rendererTypes={key:"type",base:t.BaseRenderer,typeMap:{heatmap:t.HeatmapRenderer,simple:t.SimpleRenderer,"unique-value":t.UniqueValueRenderer,"class-breaks":t.ClassBreaksRenderer,"dot-density":t.DotDensityRenderer,dictionary:t.DictionaryRenderer}},t.webSceneRendererTypes={key:"type",base:t.BaseRenderer,typeMap:{simple:t.SimpleRenderer,"unique-value":t.UniqueValueRenderer,"class-breaks":t.ClassBreaksRenderer}}})},"esri/renderers/ClassBreaksRenderer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/paramHelper ../core/tsSupport/generatorHelper ../core/tsSupport/awaiterHelper ../core/tsSupport/assignHelper ../symbols ../symbols ../core/jsonMap ../core/lang ../core/Logger ../core/maybe ../core/promiseUtils ../core/accessorSupport/decorators ../core/accessorSupport/ensureType ../layers/support/fieldUtils ./Renderer ./mixins/VisualVariablesMixin ./support/ClassBreakInfo ./support/LegendOptions ../support/arcadeOnDemand ../symbols/support/jsonUtils".split(" "),function(e,t,r,n,o,i,a,s,l,u,c,p,d,f,h,y,m,g,v,b,w,S,_,x){var O=d.getLogger("esri.renderers.ClassBreaksRenderer"),C=new c.default({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"}),M=m.ensureType(w.ClassBreakInfo);return function(e){function t(t){return t=e.call(this,t)||this,t.backgroundFillSymbol=null,t.classBreakInfos=null,t.defaultLabel=null,t.defaultSymbol=null,t.field=null,t.isMaxInclusive=!0,t.legendOptions=null,t.normalizationField=null,t.normalizationTotal=null,t.type="class-breaks",t.valueExpression=null,t.valueExpressionTitle=null,t._set("classBreakInfos",[]),t}r(t,e),o=t,Object.defineProperty(t.prototype,"_cache",{get:function(){return{compiledFunc:null}},enumerable:!0,configurable:!0}),t.prototype.readClassBreakInfos=function(e,t,r){if(Array.isArray(e)){var n=t.minValue;return e.map(function(e){var t=new w.ClassBreakInfo;return t.read(e,r),null==t.minValue&&(t.minValue=n),null==t.maxValue&&(t.maxValue=t.minValue),n=t.maxValue,t})}},t.prototype.writeClassBreakInfos=function(e,t,r,n){e=e.map(function(e){return e.write({},n)}),this._areClassBreaksConsecutive()&&e.forEach(function(e){return delete e.classMinValue}),t[r]=e},t.prototype.readDefaultSymbol=function(e,t,r){return x.read(e,t,r)},t.prototype.writeDefaultSymbolWebScene=function(e,t,r,n){x.writeTarget(e,t,r,n)},t.prototype.writeDefaultSymbol=function(e,t,r,n){x.writeTarget(e,t,r,n)},t.prototype.castField=function(e){return null==e?e:"function"==typeof e?(O.error(".field: field must be a string value"),null):m.ensureString(e)},Object.defineProperty(t.prototype,"minValue",{get:function(){return this.classBreakInfos&&this.classBreakInfos[0]&&this.classBreakInfos[0].minValue||0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"normalizationType",{get:function(){var e=this._get("normalizationType"),t=!!this.normalizationField,r=null!=this.normalizationTotal;return t||r?(e=t&&"field"||r&&"percent-of-total"||null,t&&r&&O.warn("warning: both normalizationField and normalizationTotal are set!")):"field"!==e&&"percent-of-total"!==e||(e=null),e},set:function(e){this._set("normalizationType",e)},enumerable:!0,configurable:!0}),t.prototype.addClassBreakInfo=function(e,t,r){var n=null,n="number"==typeof e?new w.ClassBreakInfo({minValue:e,maxValue:t,symbol:u.ensureType(r)}):M(p.clone(e));this.classBreakInfos.push(n),1===this.classBreakInfos.length&&this.notifyChange("minValue")},t.prototype.removeClassBreakInfo=function(e,t){for(var r=this.classBreakInfos.length,n=0;n<r;n++){var o=[this.classBreakInfos[n].minValue,this.classBreakInfos[n].maxValue];if(o[0]===e&&o[1]===t){this.classBreakInfos.splice(n,1);break}}},t.prototype.getBreakIndex=function(e,t){return this.valueExpression&&(f.isNone(t)||f.isNone(t.arcade))&&O.warn(""),this.valueExpression?this._getBreakIndexForExpression(e,t):this._getBreakIndexForField(e)},t.prototype.getClassBreakInfo=function(e,t){return a(this,void 0,void 0,function(){var r,n,o,a;return i(this,function(i){switch(i.label){case 0:return r=t,this.valueExpression&&(f.isNone(t)||f.isNone(t.arcade))?(n=[{},r],o={},[4,_.loadArcade()]):[3,2];case 1:r=s.apply(void 0,n.concat([(o.arcade=i.sent(),o)])),i.label=2;case 2:return a=this.getBreakIndex(e,r),[2,-1!==a?this.classBreakInfos[a]:null]}})})},t.prototype.getSymbol=function(e,t){if(!this.valueExpression||!f.isNone(t)&&!f.isNone(t.arcade))return e=this.getBreakIndex(e,t),-1<e?this.classBreakInfos[e].symbol:this.defaultSymbol;O.error("#getSymbol()","Please use getSymbolAsync if valueExpression is used")},t.prototype.getSymbolAsync=function(e,t){return a(this,void 0,void 0,function(){var r,n,o,a;return i(this,function(i){switch(i.label){case 0:return r=t,this.valueExpression&&(f.isNone(t)||f.isNone(t.arcade))?(n=[{},r],o={},[4,_.loadArcade()]):[3,2];case 1:r=s.apply(void 0,n.concat([(o.arcade=i.sent(),o)])),i.label=2;case 2:return a=this.getBreakIndex(e,r),[2,-1<a?this.classBreakInfos[a].symbol:this.defaultSymbol]}})})},t.prototype.getSymbols=function(){var e=[];return this.classBreakInfos.forEach(function(t){t.symbol&&e.push(t.symbol)}),this.defaultSymbol&&e.push(this.defaultSymbol),e},t.prototype.getAttributeHash=function(){return this.visualVariables&&this.visualVariables.reduce(function(e,t){return e+t.getAttributeHash()},"")},t.prototype.getMeshHash=function(){var e=JSON.stringify(this.backgroundFillSymbol),t=JSON.stringify(this.defaultSymbol),r=this.normalizationField+"."+this.normalizationType+"."+this.normalizationTotal;return e+"."+t+"."+this.classBreakInfos.reduce(function(e,t){return e+t.getMeshHash()},"")+"."+r+"."+this.field+"."+this.valueExpression},Object.defineProperty(t.prototype,"arcadeRequired",{get:function(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression},enumerable:!0,configurable:!0}),t.prototype.clone=function(){return new o({field:this.field,backgroundFillSymbol:this.backgroundFillSymbol&&this.backgroundFillSymbol.clone(),defaultLabel:this.defaultLabel,defaultSymbol:this.defaultSymbol&&this.defaultSymbol.clone(),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,classBreakInfos:p.clone(this.classBreakInfos),isMaxInclusive:this.isMaxInclusive,normalizationField:this.normalizationField,normalizationTotal:this.normalizationTotal,normalizationType:this.normalizationType,visualVariables:p.clone(this.visualVariables),legendOptions:p.clone(this.legendOptions),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})},t.prototype.collectRequiredFields=function(e,t){return a(this,void 0,void 0,function(){var r;return i(this,function(n){switch(n.label){case 0:return r=[this.collectVVRequiredFields(e,t),this.collectSymbolFields(e,t)],[4,h.all(r)];case 1:return n.sent(),[2]}})})},t.prototype.collectSymbolFields=function(e,t){return a(this,void 0,void 0,function(){var r;return i(this,function(n){switch(n.label){case 0:return r=this.getSymbols().map(function(r){return r.collectRequiredFields(e,t)}).concat([g.collectArcadeFieldNames(e,t,this.valueExpression)]),g.collectField(e,t,this.field),g.collectField(e,t,this.normalizationField),[4,h.all(r)];case 1:return n.sent(),[2]}})})},t.prototype._getBreakIndexForExpression=function(e,t){var r=f.unwrapOr(t,{});t=r.viewingMode;var n=r.scale,o=r.spatialReference,i=this._cache.compiledFunc,r=f.expect(r.arcade).arcadeUtils;return i||(i=r.createSyntaxTree(this.valueExpression),i=r.createFunction(i),this._cache.compiledFunc=i),e=r.executeFunction(i,r.createExecContext(e,r.getViewInfo({viewingMode:t,scale:n,spatialReference:o}))),this._getBreakIndexfromInfos(e)},t.prototype._getBreakIndexForField=function(e){var t=e.attributes;e=this.normalizationType;var r=parseFloat(t[this.field]);if(e){var n=this.normalizationTotal,t=parseFloat(t[this.normalizationField]);if("log"===e)r=Math.log(r)*Math.LOG10E;else if("percent-of-total"!==e||isNaN(n)){if("field"===e&&!isNaN(t)){if(isNaN(r)||isNaN(t))return-1;r/=t}}else r=r/n*100}return this._getBreakIndexfromInfos(r)},t.prototype._getBreakIndexfromInfos=function(e){var t=this.isMaxInclusive;if(null!=e&&"number"==typeof e&&!isNaN(e))for(var r=0;r<this.classBreakInfos.length;r++){var n=[this.classBreakInfos[r].minValue,this.classBreakInfos[r].maxValue];if(n[0]<=e&&(t?e<=n[1]:e<n[1]))return r}return-1},t.prototype._areClassBreaksConsecutive=function(){for(var e=this.classBreakInfos,t=e.length,r=1;r<t;r++)if(e[r-1].maxValue!==e[r].minValue)return!1;return!0};var o;return n([y.property({readOnly:!0,dependsOn:["valueExpression"]})],t.prototype,"_cache",null),n([y.property({types:{base:l.BaseSymbol,key:"type",typeMap:{"simple-fill":u.symbolTypesRenderer.typeMap["simple-fill"],"picture-fill":u.symbolTypesRenderer.typeMap["picture-fill"],"polygon-3d":u.symbolTypesRenderer.typeMap["polygon-3d"]}},json:{origins:{"web-scene":{type:l.PolygonSymbol3D,read:x.read,write:x.writeTarget}},read:x.read,write:x.writeTarget}})],t.prototype,"backgroundFillSymbol",void 0),n([y.property({type:[w.ClassBreakInfo]})],t.prototype,"classBreakInfos",void 0),n([y.reader("classBreakInfos")],t.prototype,"readClassBreakInfos",null),n([y.writer("classBreakInfos")],t.prototype,"writeClassBreakInfos",null),n([y.property({type:String,json:{write:!0}})],t.prototype,"defaultLabel",void 0),n([y.property({types:u.symbolTypesRenderer})],t.prototype,"defaultSymbol",void 0),n([y.reader("defaultSymbol")],t.prototype,"readDefaultSymbol",null),n([y.writer("web-scene","defaultSymbol",{defaultSymbol:{types:u.symbolTypesRenderer3D}})],t.prototype,"writeDefaultSymbolWebScene",null),n([y.writer("defaultSymbol")],t.prototype,"writeDefaultSymbol",null),n([y.property({type:String,json:{write:!0}})],t.prototype,"field",void 0),n([y.cast("field")],t.prototype,"castField",null),n([y.property({type:Boolean})],t.prototype,"isMaxInclusive",void 0),n([y.property({type:S.default,json:{write:!0}})],t.prototype,"legendOptions",void 0),n([y.property({type:Number,readOnly:!0,value:null,dependsOn:["classBreakInfos"],json:{read:!1,write:{overridePolicy:function(){return 0!==this.classBreakInfos.length&&this._areClassBreaksConsecutive()?{enabled:!0}:{enabled:!1}}}}})],t.prototype,"minValue",null),n([y.property({type:String,json:{write:!0}})],t.prototype,"normalizationField",void 0),n([y.property({type:Number,cast:function(e){return m.ensureNumber(e)},json:{write:!0}})],t.prototype,"normalizationTotal",void 0),n([y.property({type:C.apiValues,value:null,dependsOn:["normalizationField","normalizationTotal"],json:{type:C.jsonValues,read:C.read,write:C.write}})],t.prototype,"normalizationType",null),n([y.enumeration.serializable()({classBreaks:"class-breaks"})],t.prototype,"type",void 0),n([y.property({type:String,json:{write:!0}})],t.prototype,"valueExpression",void 0),n([y.property({type:String,json:{write:!0}})],t.prototype,"valueExpressionTitle",void 0),t=o=n([y.subclass("esri.renderers.ClassBreaksRenderer")],t)}(y.declared(b.VisualVariablesMixin(v)))})},"esri/symbols":function(){define("require exports ./core/accessorSupport/ensureType ./symbols/CIMSymbol ./symbols/ExtrudeSymbol3DLayer ./symbols/FillSymbol ./symbols/FillSymbol3DLayer ./symbols/Font ./symbols/IconSymbol3DLayer ./symbols/LabelSymbol3D ./symbols/LineSymbol3D ./symbols/LineSymbol3DLayer ./symbols/MarkerSymbol ./symbols/MeshSymbol3D ./symbols/ObjectSymbol3DLayer ./symbols/PathSymbol3DLayer ./symbols/PictureFillSymbol ./symbols/PictureMarkerSymbol ./symbols/PointSymbol3D ./symbols/PolygonSymbol3D ./symbols/SimpleFillSymbol ./symbols/SimpleLineSymbol ./symbols/SimpleMarkerSymbol ./symbols/Symbol ./symbols/Symbol3D ./symbols/Symbol3DLayer ./symbols/TextSymbol ./symbols/TextSymbol3DLayer ./symbols/WaterSymbol3DLayer ./symbols/WebStyleSymbol ./symbols/callouts/LineCallout3D ./symbols/callouts/LineCallout3DBorder ./symbols/support/Symbol3DVerticalOffset ./symbols/support/jsonUtils".split(" "),function(e,t,r,n,o,i,a,s,l,u,c,p,d,f,h,y,m,g,v,b,w,S,_,x,O,C,M,T,P,I,E,j,k,A){Object.defineProperty(t,"__esModule",{value:!0}),t.CIMSymbol=n,t.ExtrudeSymbol3DLayer=o,t.BaseFillSymbol=i,t.FillSymbol3DLayer=a,t.Font=s,t.IconSymbol3DLayer=l,t.LabelSymbol3D=u,t.LineSymbol3D=c,t.LineSymbol3DLayer=p,t.BaseMarkerSymbol=d,t.MeshSymbol3D=f,t.ObjectSymbol3DLayer=h,t.PathSymbol3DLayer=y,t.PictureFillSymbol=m,t.PictureMarkerSymbol=g,t.PointSymbol3D=v,t.PolygonSymbol3D=b,t.SimpleFillSymbol=w,t.SimpleLineSymbol=S,t.SimpleMarkerSymbol=_,t.BaseSymbol=x,t.BaseSymbol3D=O,t.BaseSymbol3DLayer=C,t.TextSymbol=M,t.TextSymbol3DLayer=T,t.WaterSymbol3DLayer=P,t.WebStyleSymbol=I,t.LineCallout3D=E,t.LineCallout3DBorder=j,t.Symbol3DVerticalOffset=k.Symbol3DVerticalOffset,t.fromJSON=A.fromJSON,t.isSymbol=function(e){return e instanceof t.BaseSymbol},t.isSymbol2D=function(e){if(!e)return!1;switch(e.type){case"picture-fill":case"picture-marker":case"simple-fill":case"simple-line":case"simple-marker":case"text":case"cim":return!0;default:return!1}},t.isSymbol3D=function(e){if(!e)return!1;switch(e.type){case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":return!0;default:return!1}},t.symbolTypes={base:t.BaseSymbol,key:"type",typeMap:{"simple-fill":t.SimpleFillSymbol,"picture-fill":t.PictureFillSymbol,"picture-marker":t.PictureMarkerSymbol,"simple-line":t.SimpleLineSymbol,"simple-marker":t.SimpleMarkerSymbol,text:t.TextSymbol,"label-3d":t.LabelSymbol3D,"line-3d":t.LineSymbol3D,"mesh-3d":t.MeshSymbol3D,"point-3d":t.PointSymbol3D,"polygon-3d":t.PolygonSymbol3D,"web-style":t.WebStyleSymbol,cim:t.CIMSymbol}},t.symbolTypesRenderer={base:t.BaseSymbol,key:"type",typeMap:{"simple-fill":t.SimpleFillSymbol,"picture-fill":t.PictureFillSymbol,"picture-marker":t.PictureMarkerSymbol,"simple-line":t.SimpleLineSymbol,"simple-marker":t.SimpleMarkerSymbol,text:t.TextSymbol,"line-3d":t.LineSymbol3D,"mesh-3d":t.MeshSymbol3D,"point-3d":t.PointSymbol3D,"polygon-3d":t.PolygonSymbol3D,"web-style":t.WebStyleSymbol,cim:t.CIMSymbol}},t.symbolTypesLabel={base:t.BaseSymbol,key:"type",typeMap:{text:t.TextSymbol,"label-3d":t.LabelSymbol3D}},t.symbolTypes3D={base:t.BaseSymbol,key:"type",typeMap:{"label-3d":t.LabelSymbol3D,"line-3d":t.LineSymbol3D,"mesh-3d":t.MeshSymbol3D,"point-3d":t.PointSymbol3D,"polygon-3d":t.PolygonSymbol3D,"web-style":t.WebStyleSymbol}},t.symbolTypesRenderer3D={base:t.BaseSymbol,key:"type",typeMap:{"line-3d":t.LineSymbol3D,"mesh-3d":t.MeshSymbol3D,"point-3d":t.PointSymbol3D,"polygon-3d":t.PolygonSymbol3D,"web-style":t.WebStyleSymbol}},t.symbolTypesLabel3D={base:t.BaseSymbol,key:"type",typeMap:{"label-3d":t.LabelSymbol3D}},t.ensureType=r.ensureOneOfType(t.symbolTypes)})},"esri/symbols/CIMSymbol":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/generatorHelper ../core/tsSupport/awaiterHelper ../core/lang ../core/promiseUtils ../core/accessorSupport/decorators ../layers/support/fieldUtils ../portal/Portal ./Symbol ./support/cimSymbolUtils".split(" "),function(e,t,r,n,o,i,a,s,l,u,c,p,d){return function(e){function t(t){return t=e.call(this,t)||this,t.data=null,t.portal=null,t.styleUrl="",t.type="cim",t}r(t,e),p=t,t.prototype.readData=function(e,t){return t.symbol},t.prototype.writeData=function(e,t){e&&(t.symbol=e)},t.prototype.readStyleUrl=function(e,t){return t.symbolUrl?t.symbolUrl:e},t.prototype.writeStyleUrl=function(e,t){e&&(t.symbolUrl=e)},t.prototype.collectRequiredFields=function(e,t){return i(this,void 0,void 0,function(){var r,n,i,a,l,c,p;return o(this,function(o){switch(o.label){case 0:return[4,d.expandSymbol(this)];case 1:o.sent(),n=(r="object"==typeof this.data&&this.data.length)?this.data:[this.data],i=0,a=n,o.label=2;case 2:return i<a.length?(l=a[i],(c=l.primitiveOverrides)?(p=c.map(function(r){return u.collectArcadeFieldNames(e,t,r.valueExpressionInfo.expression)}),[4,s.all(p)]):[3,4]):[3,5];case 3:o.sent(),o.label=4;case 4:return i++,[3,2];case 5:return[2]}})})},t.prototype.clone=function(){return new p({color:this.color.clone(),data:a.clone(this.data),portal:this.portal,styleName:this.styleName,styleUrl:this.styleUrl})};var p;return n([l.property({json:{write:!1}})],t.prototype,"color",void 0),n([l.property({json:{write:!0}})],t.prototype,"data",void 0),n([l.reader("data",["data","symbol"])],t.prototype,"readData",null),n([l.writer("data")],t.prototype,"writeData",null),n([l.property({type:c,json:{write:!1}})],t.prototype,"portal",void 0),n([l.property({json:{write:!0}})],t.prototype,"styleName",void 0),n([l.property({type:String,json:{write:!0}})],t.prototype,"styleUrl",void 0),n([l.reader("styleUrl",["styleUrl","symbolUrl"])],t.prototype,"readStyleUrl",null),n([l.writer("styleUrl")],t.prototype,"writeStyleUrl",null),n([l.enumeration.serializable()({CIMSymbolReference:"cim"})],t.prototype,"type",void 0),t=p=n([l.subclass("esri.symbols.CIMSymbol")],t)}(l.declared(p))})},"esri/symbols/Symbol":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/generatorHelper ../core/tsSupport/awaiterHelper ../Color ../core/jsonMap ../core/JSONSupport ../core/accessorSupport/decorators".split(" "),function(e,t,r,n,o,i,a,s,l,u){var c=new s.default({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",WebStyleSymbol:"web-style",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d",CIMSymbolReference:"cim"}),p=0;return function(e){function t(t){return t=e.call(this,t)||this,t.id="sym"+p++,t.type=null,t}return r(t,e),Object.defineProperty(t.prototype,"color",{set:function(e){this._set("color",e)},enumerable:!0,configurable:!0}),t.prototype.readColor=function(e){return e&&null!=e[0]?[e[0],e[1],e[2],e[3]/255]:e},t.prototype.collectRequiredFields=function(e,t){return i(this,void 0,void 0,function(){return o(this,function(e){return[2]})})},t.prototype.clone=function(){},n([u.property({type:c.apiValues,json:{read:c.read,write:{ignoreOrigin:!0,writer:c.write}}})],t.prototype,"type",void 0),n([u.property({type:a,value:new a([0,0,0,1]),json:{write:{allowNull:!0}}})],t.prototype,"color",null),n([u.reader("color")],t.prototype,"readColor",null),t=n([u.subclass("esri.symbols.Symbol")],t)}(u.declared(l.JSONSupport))})},"esri/symbols/support/cimSymbolUtils":function(){define("require exports ../../core/tsSupport/awaiterHelper ../../core/tsSupport/generatorHelper ../../core/tsSupport/assignHelper ../../request ../../core/Logger ../../core/promiseUtils".split(" "),function(e,t,r,n,o,i,a,s){function l(e,t){return r(this,void 0,void 0,function(){var r,o;return n(this,function(n){switch(n.label){case 0:return!e.data&&e.styleUrl&&e.styleName?(r=e.styleName,o=e,[4,u(r,e.styleUrl,t)]):[2,e];case 1:return o.data=n.sent(),[2,e]}})})}function u(e,a,s){return r(this,void 0,void 0,function(){var r,l;return n(this,function(n){if(d.has(e))return[2,d.get(e).then(function(e){return t.makeSymbolRef(e.data)})];try{return r=a+"/resources/styles/cim/"+e+".json",l=i(r,o({responseType:"json",query:{f:"json"}},s)),d.set(e,l),[2,l.then(function(e){return t.makeSymbolRef(e.data)})]}catch(t){return p.error("error requesting "+e+", reason is "+t.message),d.has(e)&&d.delete(e),[2,null]}})})}var c=this;Object.defineProperty(t,"__esModule",{value:!0});var p=a.getLogger("esri/symbols/support/cimSymbolUtils");t.expandSymbols=function(e,o){return r(c,void 0,void 0,function(){return n(this,function(r){return[2,s.all(e.map(function(e){return t.expandSymbol(e,o)}))]})})},t.expandSymbol=function(e,t){return r(c,void 0,void 0,function(){return n(this,function(r){return e?"cim"===e.type?[2,l(e,t)]:"web-style"===e.type?[2,e.fetchCIMSymbol(t)]:[2,e]:[2,null]})})},t.makeSymbolRef=function(e,t){return null===e?null:"CIMSymbolReference"===e.type?e:{type:"CIMSymbolReference",symbol:e,primitiveOverrides:t}};var d=new Map})},"esri/symbols/ExtrudeSymbol3DLayer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/maybe ../core/accessorSupport/decorators ./Symbol3DLayer ./edges/utils ./support/Symbol3DMaterial".split(" "),function(e,t,r,n,o,i,a,s,l){return function(e){function t(t){return t=e.call(this,t)||this,t.type="extrude",t.size=void 0,t.material=null,t.castShadows=!0,t.edges=null,t}r(t,e),a=t,t.prototype.clone=function(){return new a({edges:this.edges&&this.edges.clone(),enabled:this.enabled,material:o.isSome(this.material)?this.material.clone():null,castShadows:this.castShadows,size:this.size})};var a;return n([i.enumeration.serializable()({Extrude:"extrude"})],t.prototype,"type",void 0),n([i.property({type:Number,json:{write:!0}})],t.prototype,"size",void 0),n([i.property({type:l.default,json:{write:!0}})],t.prototype,"material",void 0),n([i.property({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],t.prototype,"castShadows",void 0),n([i.property(s.symbol3dEdgesProperty)],t.prototype,"edges",void 0),t=a=n([i.subclass("esri.symbols.ExtrudeSymbol3DLayer")],t)}(i.declared(a))})},"esri/symbols/Symbol3DLayer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/jsonMap ../core/JSONSupport ../core/accessorSupport/decorators".split(" "),function(e,t,r,n,o,i,a){var s=o.strict()({Icon:"icon",Object:"object",Line:"line",Path:"path",Fill:"fill",Extrude:"extrude",Text:"text",Water:"water"});return e=function(e){function t(t){return t=e.call(this,t)||this,t.enabled=!0,t.type=null,t}return r(t,e),t.prototype.writeEnabled=function(e,t,r){e||(t[r]=e)},n([a.property({type:Boolean,json:{read:{source:"enable"},write:{target:"enable"}}})],t.prototype,"enabled",void 0),n([a.writer("enabled")],t.prototype,"writeEnabled",null),n([a.property({type:s.apiValues,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:s.write}}})],t.prototype,"type",void 0),t=n([a.subclass("esri.symbols.Symbol3DLayer")],t)}(a.declared(i.JSONSupport)),(e||(e={})).typeJSONDictionary=s,e})},"esri/symbols/edges/utils":function(){define(["require","exports","./Edges3D","./SketchEdges3D","./SolidEdges3D"],function(e,t,r,n,o){function i(e,t,r){if(!e)return e;switch(e.type){case"solid":return t=new o,t.read(e,r),t;case"sketch":return t=new n,t.read(e,r),t}}Object.defineProperty(t,"__esModule",{value:!0}),t.read=i,t.symbol3dEdgesProperty={types:{key:"type",base:r,typeMap:{solid:o,sketch:n}},json:{read:i,write:!0}}})},"esri/symbols/edges/Edges3D":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/tsSupport/assignHelper ../../Color ../../core/JSONSupport ../../core/lang ../../core/screenUtils ../../core/accessorSupport/decorators ../support/materialUtils".split(" "),function(e,t,r,n,o,i,a,s,l,u,c){return function(e){function t(t){return t=e.call(this,t)||this,t.color=new i([0,0,0,1]),t.extensionLength=0,t.size=l.px2pt(1),t}return r(t,e),t.prototype.normalizeCtorArgs=function(e){return e&&e.type&&(e=o({},e),delete e.type),e},t.prototype.clone=function(){},t.prototype.cloneProperties=function(){return{color:s.clone(this.color),size:this.size,extensionLength:this.extensionLength}},n([u.property({type:["solid","sketch"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],t.prototype,"type",void 0),n([u.property(c.colorAndTransparencyProperty)],t.prototype,"color",void 0),n([u.property(o({},c.screenSizeProperty,{json:{write:{overridePolicy:function(e){return{enabled:!!e}}}}}))],t.prototype,"extensionLength",void 0),n([u.property(c.screenSizeProperty)],t.prototype,"size",void 0),t=n([u.subclass("esri.symbols.edges.Edges3D")],t)}(u.declared(a.JSONSupport))})},"esri/core/screenUtils":function(){define(["require","exports","./compilerUtils"],function(e,t,r){function n(e){return e?72*e/96:0}function o(e,t){return void 0===e&&(e=0),void 0===t&&(t=0),{x:e,y:t}}function i(e,t){return void 0===e&&(e=0),void 0===t&&(t=0),[e,t]}function a(e,t){return void 0===e&&(e=0),void 0===t&&(t=0),{x:e,y:t}}function s(e,t){return void 0===e&&(e=0),void 0===t&&(t=0),[e,t]}function l(e,t){return t?(t[0]=e.x,t[1]=e.y,2<t.length&&(t[2]=0),t):[e.x,e.y]}function u(e){return o(e.x,e.y)}function c(e,t){return e=(e instanceof HTMLElement?e:e.surface).getBoundingClientRect(),o(t.clientX-e.left,t.clientY-e.top)}Object.defineProperty(t,"__esModule",{value:!0});var p=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i;t.pt2px=function(e){return e?e/72*96:0},t.px2pt=n,t.toPt=function(e){if("string"==typeof e){if(p.test(e)){var t=e.match(p),r=Number(t[1]),t=t[3]&&t[3].toLowerCase();return e="-"===e.charAt(0),r="px"===t?n(r):r,e?-r:r}return console.warn("screenUtils.toPt: input not recognized!"),null}return e},t.createScreenPoint=o,t.createScreenPointArray=i,t.createRenderScreenPoint=a,t.createRenderScreenPointArray=s,t.createRenderScreenPointArray3=function(e,t,r){return void 0===e&&(e=0),void 0===t&&(t=0),void 0===r&&(r=0),[e,t,r]},t.castRenderScreenPointArray=function(e){return e},t.castRenderScreenPointArray3=function(e){return e},t.castScreenPointArray=function(e){return e},t.screenToRender=function(e,t,r){var n,o;switch(e.type){case"2d":e=window.devicePixelRatio||1,n=t.x*e,o=t.y*e;break;case"3d":l(t,f),e.state.camera.screenToRender(f,d),n=d[0],o=d[1]}return r?(r.x=n,r.y=o,r):a(n,o)},t.renderToScreen=function(e,t,r){var n,i;switch(e.type){case"2d":e=window.devicePixelRatio||1,n=t.x/e,i=t.y/e;break;case"3d":l(t,d),e.state.camera.renderToScreen(d,f),n=f[0],i=f[1]}return r?(r.x=n,r.y=i,r):o(n,i)},t.screenArrayToRender=function(e,t,r){var n,o;switch(e.type){case"2d":e=window.devicePixelRatio||1,n=t[0]*e,o=t[1]*e;break;case"3d":e.state.camera.screenToRender(t,d),n=d[0],o=d[1]}return r?(r[0]=n,r[1]=o,2<r.length&&(r[2]=0),r):s(n,o)},t.renderArrayToScreen=function(e,t,r){var n,o;switch(e.type){case"2d":e=window.devicePixelRatio||1,n=t[0]/e,o=t[0]/e;break;case"3d":e.state.camera.renderToScreen(t,f),n=f[0],o=f[1]}return r?(r[0]=n,r[1]=o,r):i(n,o)},t.screenPointArrayToObject=function(e,t){return t?(t.x=e[0],t.y=e[1],t):{x:e[0],y:e[1]}},t.screenPointObjectToArray=l,t.createScreenPointFromEvent=u,t.createScreenPointFromNativeEvent=c,t.createScreenPointFromSupportedEvent=function(e,t){return t instanceof Event?c(e,t):u(t)},t.isSupportedScreenPointEvent=function(e){if(e instanceof Event)return!0;if("object"==typeof e&&"type"in e)switch(e=e.type){case"click":case"double-click":case"pointer-down":case"pointer-drag":case"pointer-enter":case"pointer-leave":case"pointer-up":case"pointer-move":case"immediate-click":case"hold":case"drag":case"mouse-wheel":return!0;case"key-down":case"key-up":case"gamepad":case"focus":case"blur":break;default:r.neverReachedSilent(e)}return!1};var d=s(),f=i()})},"esri/symbols/support/materialUtils":function(){define("require exports ../../Color ../../core/screenUtils ../../core/accessorSupport/ensureType ../../webdoc/support/opacityUtils".split(" "),function(e,t,r,n,o,i){Object.defineProperty(t,"__esModule",{value:!0}),t.colorAndTransparencyProperty={type:r,json:{type:[o.Integer],default:null,read:{source:["color","transparency"],reader:function(e,t){return e=null!=t.transparency?i.transparencyToOpacity(t.transparency):1,(t=t.color)&&Array.isArray(t)?new r([t[0]||0,t[1]||0,t[2]||0,e]):null}},write:{target:{color:{type:[o.Integer]},transparency:{type:o.Integer}},writer:function(e,t){t.color=e.toJSON().slice(0,3),0!==(e=i.opacityToTransparency(e.a))&&(t.transparency=e)}}}},t.screenSizeProperty={type:Number,cast:n.toPt,json:{write:!0}},t.stipplePatternProperty={type:[Number],cast:function(e){return null!=e?e:Array.isArray(e)?e.map(n.toPt):null},json:{read:!1,write:!1}}})},"esri/symbols/edges/SketchEdges3D":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ./Edges3D".split(" "),function(e,t,r,n,o,i){return function(e){function t(t){return t=e.call(this,t)||this,t.type="sketch",t}r(t,e),i=t,t.prototype.clone=function(){return new i(this.cloneProperties())};var i;return n([o.property({type:["sketch"]})],t.prototype,"type",void 0),t=i=n([o.subclass("esri.symbols.edges.SketchEdges3D")],t)}(o.declared(i))})},"esri/symbols/edges/SolidEdges3D":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ./Edges3D".split(" "),function(e,t,r,n,o,i){return function(e){function t(t){return t=e.call(this,t)||this,t.type="solid",t}r(t,e),i=t,t.prototype.clone=function(){return new i(this.cloneProperties())};var i;return n([o.property({type:["solid"]})],t.prototype,"type",void 0),t=i=n([o.subclass("esri.symbols.support.SolidEdges3D")],t)}(o.declared(i))})},"esri/symbols/support/Symbol3DMaterial":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/maybe ../../core/accessorSupport/decorators ./materialUtils".split(" "),function(e,t,r,n,o,i,a,s){Object.defineProperty(t,"__esModule",{value:!0}),e=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.color=null,t}r(t,e),o=t,t.prototype.clone=function(){return new o({color:i.isSome(this.color)?this.color.clone():null})};var o;return n([a.property(s.colorAndTransparencyProperty)],t.prototype,"color",void 0),t=o=n([a.subclass("esri.symbols.support.Symbol3DMaterial")],t)}(a.declared(o.JSONSupport)),t.Symbol3DMaterial=e,t.default=e})},"esri/symbols/FillSymbol":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/jsonMap ../core/accessorSupport/decorators ./SimpleLineSymbol ./Symbol".split(" "),function(e,t,r,n,o,i,a,s){var l=new o.default({esriSFS:"simple-fill",esriPFS:"picture-fill"});return function(e){function t(t){return t=e.call(this,t)||this,t.outline=null,t.type=null,t}return r(t,e),n([i.property({type:a,json:{default:null,write:!0}})],t.prototype,"outline",void 0),n([i.property({type:l.apiValues,readOnly:!0,json:{type:l.jsonValues}})],t.prototype,"type",void 0),t=n([i.subclass("esri.symbols.FillSymbol")],t)}(i.declared(s))})},"esri/symbols/SimpleLineSymbol":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/jsonMap ../core/lang ../core/screenUtils ../core/accessorSupport/decorators ./LineSymbol".split(" "),function(e,t,r,n,o,i,a,s,l){var u=new o.default({esriSLSSolid:"solid",esriSLSDash:"dash",esriSLSDot:"dot",esriSLSDashDot:"dash-dot",esriSLSDashDotDot:"long-dash-dot-dot",esriSLSNull:"none",esriSLSInsideFrame:"inside-frame",esriSLSShortDash:"short-dash",esriSLSShortDot:"short-dot",esriSLSShortDashDot:"short-dash-dot",esriSLSShortDashDotDot:"short-dash-dot-dot",esriSLSLongDash:"long-dash",esriSLSLongDashDot:"long-dash-dot"});return function(e){function t(t,r,n,o,i,a){return t=e.call(this,t)||this,t.type="simple-line",t.style="solid",t.cap="round",t.join="round",t.miterLimit=2,t}r(t,e),o=t,t.prototype.normalizeCtorArgs=function(e,t,r,n,o,i){if(e&&"string"!=typeof e)return e;var s={};return null!=e&&(s.style=e),null!=t&&(s.color=t),null!=r&&(s.width=a.toPt(r)),null!=n&&(s.cap=n),null!=o&&(s.join=o),null!=i&&(s.miterLimit=a.toPt(i)),s},t.prototype.clone=function(){return new o({color:i.clone(this.color),style:this.style,width:this.width,cap:this.cap,join:this.join,miterLimit:this.miterLimit})};var o;return n([s.enumeration.serializable()({esriSLS:"simple-line"})],t.prototype,"type",void 0),n([s.property({type:u.apiValues,json:{read:u.read,write:u.write}})],t.prototype,"style",void 0),n([s.property({type:["butt","round","square"],json:{write:{overridePolicy:function(e,t,r){return{enabled:"round"!==e&&(null==r||null==r.origin)}}}}})],t.prototype,"cap",void 0),n([s.property({type:["miter","round","bevel"],json:{write:{overridePolicy:function(e,t,r){return{enabled:"round"!==e&&(null==r||null==r.origin)}}}}})],t.prototype,"join",void 0),n([s.property({type:Number,json:{read:!1,write:!1}})],t.prototype,"miterLimit",void 0),t=o=n([s.subclass("esri.symbols.SimpleLineSymbol")],t)}(s.declared(l))})},"esri/symbols/LineSymbol":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/screenUtils ../core/accessorSupport/decorators ./Symbol".split(" "),function(e,t,r,n,o,i,a){return function(e){function t(t){return t=e.call(this,t)||this,t.type="simple-line",t.width=.75,t}return r(t,e),n([i.enumeration.serializable()({esriSLS:"simple-line"})],t.prototype,"type",void 0),n([i.property({type:Number,cast:o.toPt,json:{write:!0}})],t.prototype,"width",void 0),t=n([i.subclass("esri.symbols.LineSymbol")],t)}(i.declared(a))})},"esri/symbols/FillSymbol3DLayer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/maybe ../core/accessorSupport/decorators ./Symbol3DLayer ./edges/utils ./support/colors ./support/Symbol3DFillMaterial ./support/Symbol3DOutline".split(" "),function(e,t,r,n,o,i,a,s,l,u,c){return function(e){function t(t){return t=e.call(this,t)||this,t.type="fill",t.material=null,t.castShadows=!0,t.outline=null,t.edges=null,t}r(t,e),a=t,t.prototype.clone=function(){return new a({edges:o.isSome(this.edges)?this.edges.clone():null,enabled:this.enabled,material:o.isSome(this.material)?this.material.clone():null,castShadows:this.castShadows,outline:o.isSome(this.outline)?this.outline.clone():null})},t.fromSimpleFillSymbol=function(e){return new a({material:{color:(e.color||l.transparentWhite).clone()},outline:e.outline?new c.default({size:e.outline.width||0,color:(e.outline.color||l.white).clone()}):null})};var a;return n([i.enumeration.serializable()({Fill:"fill"})],t.prototype,"type",void 0),n([i.property({type:u.default,json:{write:!0}})],t.prototype,"material",void 0),n([i.property({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],t.prototype,"castShadows",void 0),n([i.property({type:c.default,json:{write:!0}})],t.prototype,"outline",void 0),n([i.property(s.symbol3dEdgesProperty)],t.prototype,"edges",void 0),t=a=n([i.subclass("esri.symbols.FillSymbol3DLayer")],t)}(i.declared(a))})},"esri/symbols/support/colors":function(){define(["require","exports","../../Color"],function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.white=new r("white"),t.black=new r("black"),t.transparentWhite=new r([255,255,255,0]),t.isBlack=function(e){return 0===e.r&&0===e.g&&0===e.b}})},"esri/symbols/support/Symbol3DFillMaterial":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/maybe ../../core/accessorSupport/decorators ./Symbol3DMaterial".split(" "),function(e,t,r,n,o,i,a){Object.defineProperty(t,"__esModule",{value:!0}),e=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}r(t,e),a=t,t.prototype.clone=function(){return new a({color:o.isSome(this.color)?this.color.clone():null,colorMixMode:this.colorMixMode})};var a;return n([i.enumeration.serializable()({multiply:"multiply",replace:"replace",tint:"tint"})],t.prototype,"colorMixMode",void 0),t=a=n([i.subclass("esri.symbols.support.Symbol3DFillMaterial")],t)}(i.declared(a.default)),t.Symbol3DFillMaterial=e,t.default=e})},"esri/symbols/support/Symbol3DOutline":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../Color ../../core/JSONSupport ../../core/maybe ../../core/screenUtils ../../core/accessorSupport/decorators ./materialUtils".split(" "),function(e,t,r,n,o,i,a,s,l,u){Object.defineProperty(t,"__esModule",{value:!0}),e=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.color=new o([0,0,0,1]),t.size=s.px2pt(1),t.stipplePattern=null,t.stippleOffColor=null,t}r(t,e),i=t,t.prototype.clone=function(){return new i({color:a.isSome(this.color)?this.color.clone():null,size:this.size,stipplePattern:this.stipplePattern?this.stipplePattern.slice():null,stippleOffColor:this.stippleOffColor?this.stippleOffColor.clone():null})};var i;return n([l.property(u.colorAndTransparencyProperty)],t.prototype,"color",void 0),n([l.property(u.screenSizeProperty)],t.prototype,"size",void 0),n([l.property(u.stipplePatternProperty)],t.prototype,"stipplePattern",void 0),n([l.property({type:o})],t.prototype,"stippleOffColor",void 0),t=i=n([l.subclass("esri.symbols.support.Symbol3DOutline")],t)}(l.declared(i.JSONSupport)),t.Symbol3DOutline=e,t.default=e})},"esri/symbols/Font":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/JSONSupport ../core/screenUtils ../core/accessorSupport/decorators".split(" "),function(e,t,r,n,o,i,a){return function(e){function t(t){return t=e.call(this,t)||this,t.decoration="none",t.family="sans-serif",t.size=9,t.style="normal",t.weight="normal",t}r(t,e),o=t,t.prototype.castSize=function(e){return i.toPt(e)},t.prototype.clone=function(){return new o({decoration:this.decoration,family:this.family,size:this.size,style:this.style,weight:this.weight})};var o;return n([a.property({type:["underline","line-through","none"],json:{default:"none",write:!0}})],t.prototype,"decoration",void 0),n([a.property({type:String,json:{write:!0}})],t.prototype,"family",void 0),n([a.property({type:Number,json:{write:{overridePolicy:function(e,t,r){return{enabled:!r||!r.textSymbol3D}}}}})],t.prototype,"size",void 0),n([a.cast("size")],t.prototype,"castSize",null),n([a.property({type:["normal","italic","oblique"],json:{default:"normal",write:!0}})],t.prototype,"style",void 0),n([a.property({type:["normal","bold","bolder","lighter"],json:{default:"normal",write:!0}})],t.prototype,"weight",void 0),t=o=n([a.subclass("esri.symbols.Font")],t)}(a.declared(o.JSONSupport))})},"esri/symbols/IconSymbol3DLayer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Logger ../core/maybe ../core/urlUtils ../core/accessorSupport/decorators ./Symbol3DLayer ./support/colors ./support/IconSymbol3DLayerResource ./support/materialUtils ./support/Symbol3DAnchorPosition2D ./support/Symbol3DMaterial ./support/Symbol3DOutline".split(" "),function(e,t,r,n,o,i,a,s,l,u,c,p,d,f,h){function y(e){var t="width"in e?e.width:e.size,r="height"in e?e.height:e.size,n=m(e.xoffset);return e=m(e.yoffset),(n||e)&&t&&r?{x:-n/t,y:e/r}:null}function m(e){return isFinite(e)?e:0}var g=o.getLogger("esri.symbols.IconSymbol3DLayer"),v={circle:"circle",cross:"cross",diamond:"kite",square:"square",x:"x",triangle:"triangle",path:null};return function(e){function t(t){return t=e.call(this,t)||this,t.material=null,t.resource=null,t.type="icon",t.size=12,t.anchor="center",t.anchorPosition=void 0,t.outline=void 0,t}r(t,e),o=t,t.prototype.clone=function(){return new o({anchor:this.anchor,anchorPosition:this.anchorPosition&&this.anchorPosition.clone(),enabled:this.enabled,material:i.isSome(this.material)?this.material.clone():null,outline:i.isSome(this.outline)?this.outline.clone():null,resource:this.resource&&this.resource.clone(),size:this.size})},t.fromSimpleMarkerSymbol=function(e){var t=e.color||u.white,r=y(e),n=e.outline&&0<e.outline.width?{size:e.outline.width,color:(e.outline.color||u.white).clone()}:null,i=o,a=e.size;e=e.style;var s=v[e];return s?e=s:(g.warn(e+' cannot be mapped to Icon symbol. Fallback to "circle"'),e="circle"),new i({size:a,resource:{primitive:e},material:{color:t},outline:n,anchor:r?"relative":void 0,anchorPosition:r})},t.fromPictureMarkerSymbol=function(e){var t=!e.color||u.isBlack(e.color)?u.white:e.color,r=y(e);return new o({size:e.width<=e.height?e.height:e.width,resource:{href:e.url},material:{color:t.clone()},anchor:r?"relative":void 0,anchorPosition:r})},t.fromCIMSymbol=function(e){return new o({resource:{href:a.makeData({mediaType:"application/json",data:JSON.stringify(e.data)})}})};var o;return n([s.property({type:f.default,json:{write:!0}})],t.prototype,"material",void 0),n([s.property({type:c.default,json:{write:!0}})],t.prototype,"resource",void 0),n([s.enumeration.serializable()({Icon:"icon"})],t.prototype,"type",void 0),n([s.property(p.screenSizeProperty)],t.prototype,"size",void 0),n([s.enumeration.serializable()({center:"center",left:"left",right:"right",top:"top",bottom:"bottom",topLeft:"top-left",topRight:"top-right",bottomLeft:"bottom-left",bottomRight:"bottom-right",relative:"relative"}),s.property({json:{default:"center"}})],t.prototype,"anchor",void 0),n([s.property({type:d.Symbol3DAnchorPosition2D,json:{type:[Number],read:{reader:function(e){return new d.Symbol3DAnchorPosition2D({x:e[0],y:e[1]})}},write:{writer:function(e,t){t.anchorPosition=[e.x,e.y]},overridePolicy:function(){return{enabled:"relative"===this.anchor}}}}})],t.prototype,"anchorPosition",void 0),n([s.property({type:h.default,json:{write:!0}})],t.prototype,"outline",void 0),t=o=n([s.subclass("esri.symbols.IconSymbol3DLayer")],t)}(s.declared(l))})},"esri/symbols/support/IconSymbol3DLayerResource":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/jsonMap ../../core/JSONSupport ../../core/urlUtils ../../core/accessorSupport/decorators".split(" "),function(e,t,r,n,o,i,a,s){Object.defineProperty(t,"__esModule",{value:!0});var l=o.strict()({circle:"circle",square:"square",cross:"cross",x:"x",kite:"kite",triangle:"triangle"});e=function(e){function t(t){return e.call(this,t)||this}r(t,e),o=t,t.prototype.readHref=function(e,t,r){return e?a.fromJSON(e,r):t.dataURI},t.prototype.writeHref=function(e,t,r,n){e&&(a.isDataProtocol(e)?t.dataURI=e:(t.href=a.toJSON(e,n),a.isAbsolute(t.href)&&(t.href=a.normalize(t.href))))},t.prototype.clone=function(){return new o({href:this.href,primitive:this.primitive})};var o;return n([s.property({type:String,json:{write:!0,read:{source:["href","dataURI"]}}})],t.prototype,"href",void 0),n([s.reader("href")],t.prototype,"readHref",null),n([s.writer("href",{href:{type:String},dataURI:{type:String}})],t.prototype,"writeHref",null),n([s.enumeration.serializable()(l)],t.prototype,"primitive",void 0),t=o=n([s.subclass("esri.symbols.support.IconSymbol3DLayerResource")],t)}(s.declared(i.JSONSupport)),t.IconSymbol3DLayerResource=e,t.defaultPrimitive="circle",t.default=e})},"esri/symbols/support/Symbol3DAnchorPosition2D":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/accessorSupport/decorators".split(" "),function(e,t,r,n,o,i){Object.defineProperty(t,"__esModule",{value:!0}),e=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.x=0,t.y=0,t}r(t,e),o=t,t.prototype.clone=function(){return new o({x:this.x,y:this.y})};var o;return n([i.property({type:Number})],t.prototype,"x",void 0),n([i.property({type:Number})],t.prototype,"y",void 0),t=o=n([i.subclass("esri.symbols.support.Symbol3DAnchorPosition2D")],t)}(i.declared(o)),t.Symbol3DAnchorPosition2D=e,t.default=e})},"esri/symbols/LabelSymbol3D":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Collection ../core/lang ../core/accessorSupport/decorators ./Symbol3D ./TextSymbol3DLayer ./callouts/calloutUtils ./support/Symbol3DVerticalOffset".split(" "),function(e,t,r,n,o,i,a,s,l,u,c){var p=o.ofType({base:null,key:"type",typeMap:{text:l}});return function(e){function t(t){return t=e.call(this,t)||this,t.verticalOffset=null,t.callout=null,t.styleOrigin=null,t.symbolLayers=new p,t.type="label-3d",t}r(t,e),o=t,t.prototype.supportsCallout=function(){return!0},t.prototype.hasVisibleCallout=function(){return u.hasVisibleCallout(this)},t.prototype.hasVisibleVerticalOffset=function(){return u.hasVisibleVerticalOffset(this)},t.prototype.clone=function(){return new o({styleOrigin:i.clone(this.styleOrigin),symbolLayers:i.clone(this.symbolLayers),thumbnail:i.clone(this.thumbnail),callout:i.clone(this.callout),verticalOffset:i.clone(this.verticalOffset)})},t.fromTextSymbol=function(e){return new o({symbolLayers:[l.fromTextSymbol(e)]})};var o;return n([a.property({type:c.default,json:{write:!0}})],t.prototype,"verticalOffset",void 0),n([a.property(u.calloutProperty)],t.prototype,"callout",void 0),n([a.property({json:{read:!1,write:!1}})],t.prototype,"styleOrigin",void 0),n([a.property({type:p})],t.prototype,"symbolLayers",void 0),n([a.enumeration.serializable()({LabelSymbol3D:"label-3d"})],t.prototype,"type",void 0),t=o=n([a.subclass("esri.symbols.LabelSymbol3D")],t)}(a.declared(s))})},"esri/symbols/Symbol3D":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Collection ../core/collectionUtils ../core/jsonMap ../core/Logger ../core/urlUtils ../core/Warning ../core/accessorSupport/decorators ../portal/Portal ./ExtrudeSymbol3DLayer ./FillSymbol3DLayer ./IconSymbol3DLayer ./LineSymbol3DLayer ./ObjectSymbol3DLayer ./PathSymbol3DLayer ./Symbol ./Symbol3DLayer ./TextSymbol3DLayer ./WaterSymbol3DLayer ./support/StyleOrigin ./support/Thumbnail".split(" "),function(e,t,r,n,o,i,a,s,l,u,c,p,d,f,h,y,m,g,v,b,w,S,_,x){var O={icon:h,object:m,line:y,path:g,fill:f,extrude:d,text:w,water:S},C=o.ofType({base:b,key:"type",typeMap:O}),M=a.strict()({PointSymbol3D:"point-3d",PolygonSymbol3D:"polygon-3d",LineSymbol3D:"line-3d",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d"}),T=s.getLogger("esri.symbols.Symbol3D");return function(e){function t(t){t=e.call(this,t)||this,t.styleOrigin=null,t.thumbnail=null,t.type=null;var r=t.__accessor__&&t.__accessor__.metadatas&&t.__accessor__.metadatas.symbolLayers;return t._set("symbolLayers",new(r&&r.type||o)),t}return r(t,e),Object.defineProperty(t.prototype,"color",{get:function(){return null},set:function(e){T.error("Symbol3D does not support colors on the symbol level. Colors may be set on individual symbol layer materials instead.")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"symbolLayers",{set:function(e){i.referenceSetter(e,this._get("symbolLayers"))},enumerable:!0,configurable:!0}),t.prototype.readSymbolLayers=function(e,t,r){t=[];for(var n=0;n<e.length;n++){var o=e[n],i=b.typeJSONDictionary.read(o.type),a=i&&O[i];a?(o=new a,o.read(e[n],r),t.push(o)):(T.warn("Unknown symbol layer type: "+i),r&&r.messages&&r.messages.push(new u("symbol-layer:unsupported","Symbol layers of type '"+(i||o.type||"unknown")+"' are not supported",{definition:o,context:r})))}return t},t.prototype.readStyleOrigin=function(e,t,r){return e.styleUrl&&e.name?(t=l.fromJSON(e.styleUrl,r),new _({styleUrl:t,name:e.name})):e.styleName&&e.name?new _({portal:r&&r.portal||p.getDefault(),styleName:e.styleName,name:e.name}):void(r&&r.messages&&r.messages.push(new u("symbol3d:incomplete-style-origin","Style origin requires either a 'styleUrl' or 'styleName' and a 'name' property",{context:r,definition:e})))},t.prototype.writeStyleOrigin=function(e,t,r,n){e.styleUrl&&e.name?(r=l.toJSON(e.styleUrl,n),l.isAbsolute(r)&&(r=l.normalize(r)),t.styleOrigin={styleUrl:r,name:e.name}):e.styleName&&e.name&&(e.portal&&n&&n.portal&&!l.hasSamePortal(e.portal.restUrl,n.portal.restUrl)?n&&n.messages&&n.messages.push(new u("symbol:cross-portal","The symbol style origin cannot be persisted because it refers to an item on a different portal than the one being saved to.",{symbol:this})):t.styleOrigin={styleName:e.styleName,name:e.name})},t.prototype.normalizeCtorArgs=function(e){return e instanceof b||e&&O[e.type]?{symbolLayers:[e]}:Array.isArray(e)?{symbolLayers:e}:e},n([c.property({json:{read:!1,write:!1}})],t.prototype,"color",null),n([c.property({type:C,nonNullable:!0,json:{write:!0}}),c.cast(i.castForReferenceSetter)],t.prototype,"symbolLayers",null),n([c.reader("symbolLayers")],t.prototype,"readSymbolLayers",null),n([c.property({type:_})],t.prototype,"styleOrigin",void 0),n([c.reader("styleOrigin")],t.prototype,"readStyleOrigin",null),n([c.writer("styleOrigin",{"styleOrigin.styleUrl":{type:String},"styleOrigin.styleName":{type:String},"styleOrigin.name":{type:String}})],t.prototype,"writeStyleOrigin",null),n([c.property({type:x.default,json:{read:!1}})],t.prototype,"thumbnail",void 0),n([c.property({type:M.apiValues,readOnly:!0,json:{type:M.jsonValues,read:!1}})],t.prototype,"type",void 0),t=n([c.subclass("esri.symbols.Symbol3D")],t)}(c.declared(v))})},"esri/symbols/LineSymbol3DLayer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../Color ../core/maybe ../core/screenUtils ../core/accessorSupport/decorators ./Symbol3DLayer ./support/colors ./support/materialUtils ./support/Symbol3DMaterial".split(" "),function(e,t,r,n,o,i,a,s,l,u,c,p){return function(e){function t(t){return t=e.call(this,t)||this,t.material=null,t.type="line",t.join="miter",t.cap="butt",t.size=a.px2pt(1),t.stipplePattern=null,t.stippleOffColor=null,t}r(t,e),l=t,t.prototype.clone=function(){return new l({enabled:this.enabled,material:i.isSome(this.material)?this.material.clone():null,size:this.size,join:this.join,cap:this.cap,stipplePattern:this.stipplePattern?this.stipplePattern.slice():null,stippleOffColor:this.stippleOffColor?this.stippleOffColor.clone():null})},t.fromSimpleLineSymbol=function(e){return new l({size:e.width||1,cap:e.cap||"butt",join:e.join||"miter",material:{color:(e.color||u.white).clone()}})};var l;return n([s.property({type:p.default,json:{write:!0}})],t.prototype,"material",void 0),n([s.enumeration.serializable()({Line:"line"})],t.prototype,"type",void 0),n([s.property({type:["miter","bevel","round"],json:{write:!0,default:"miter"}})],t.prototype,"join",void 0),n([s.property({type:["butt","square","round"],json:{write:!0,default:"butt"}})],t.prototype,"cap",void 0),n([s.property(c.screenSizeProperty)],t.prototype,"size",void 0),n([s.property(c.stipplePatternProperty)],t.prototype,"stipplePattern",void 0),n([s.property({type:o})],t.prototype,"stippleOffColor",void 0),t=l=n([s.subclass("esri.symbols.LineSymbol3DLayer")],t)}(s.declared(l))})},"esri/symbols/ObjectSymbol3DLayer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/maybe ../core/accessorSupport/decorators ./Symbol3DLayer ./support/ObjectSymbol3DLayerResource ./support/Symbol3DAnchorPosition3D ./support/Symbol3DMaterial".split(" "),function(e,t,r,n,o,i,a,s,l,u){return function(e){function t(t){return t=e.call(this,t)||this,t.material=null,t.castShadows=!0,t.resource=null,t.type="object",t.width=void 0,t.height=void 0,t.depth=void 0,t.anchor=void 0,t.anchorPosition=void 0,t.heading=void 0,t.tilt=void 0,t.roll=void 0,t}r(t,e),a=t,t.prototype.clone=function(){return new a({heading:this.heading,tilt:this.tilt,roll:this.roll,anchor:this.anchor,anchorPosition:this.anchorPosition&&this.anchorPosition.clone(),depth:this.depth,enabled:this.enabled,height:this.height,material:o.isSome(this.material)?this.material.clone():null,castShadows:this.castShadows,resource:this.resource&&this.resource.clone(),width:this.width})},Object.defineProperty(t.prototype,"isPrimitive",{get:function(){return!this.resource||"string"!=typeof this.resource.href},enumerable:!0,configurable:!0});var a;return n([i.property({type:u.default,json:{write:!0}})],t.prototype,"material",void 0),n([i.property({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],t.prototype,"castShadows",void 0),n([i.property({type:s.default,json:{write:!0}})],t.prototype,"resource",void 0),n([i.enumeration.serializable()({Object:"object"})],t.prototype,"type",void 0),n([i.property({type:Number,json:{write:!0}})],t.prototype,"width",void 0),n([i.property({type:Number,json:{write:!0}})],t.prototype,"height",void 0),n([i.property({type:Number,json:{write:!0}})],t.prototype,"depth",void 0),n([i.enumeration.serializable()({center:"center",top:"top",bottom:"bottom",origin:"origin",relative:"relative"}),i.property({json:{default:"origin"}})],t.prototype,"anchor",void 0),n([i.property({type:l.Symbol3DAnchorPosition3D,json:{type:[Number],read:{reader:function(e){return new l.Symbol3DAnchorPosition3D({x:e[0],y:e[1],z:e[2]})}},write:{writer:function(e,t){t.anchorPosition=[e.x,e.y,e.z]},overridePolicy:function(){return{enabled:"relative"===this.anchor}}}}})],t.prototype,"anchorPosition",void 0),n([i.property({type:Number,json:{write:!0}})],t.prototype,"heading",void 0),n([i.property({type:Number,json:{write:!0}})],t.prototype,"tilt",void 0),n([i.property({type:Number,json:{write:!0}})],t.prototype,"roll",void 0),n([i.property({readOnly:!0,dependsOn:["resource","resource.href"]})],t.prototype,"isPrimitive",null),t=a=n([i.subclass("esri.symbols.ObjectSymbol3DLayer")],t)}(i.declared(a))})},"esri/symbols/support/ObjectSymbol3DLayerResource":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/jsonMap ../../core/JSONSupport ../../core/urlUtils ../../core/accessorSupport/decorators".split(" "),function(e,t,r,n,o,i,a,s){Object.defineProperty(t,"__esModule",{value:!0});var l=o.strict()({sphere:"sphere",cylinder:"cylinder",cube:"cube",cone:"cone",diamond:"diamond",tetrahedron:"tetrahedron",invertedCone:"inverted-cone"});e=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}r(t,e),o=t,t.prototype.clone=function(){return new o({href:this.href,primitive:this.primitive})};var o;return n([s.property({type:String,json:{read:a.read,write:a.write}})],t.prototype,"href",void 0),n([s.enumeration.serializable()(l)],t.prototype,"primitive",void 0),t=o=n([s.subclass("esri.symbols.support.ObjectSymbol3DLayerResource")],t)}(s.declared(i.JSONSupport)),t.ObjectSymbol3DLayerResource=e,t.defaultPrimitive="sphere",t.default=e})},"esri/symbols/support/Symbol3DAnchorPosition3D":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/accessorSupport/decorators".split(" "),function(e,t,r,n,o,i){Object.defineProperty(t,"__esModule",{value:!0}),e=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.x=0,t.y=0,t.z=0,t}r(t,e),o=t,t.prototype.clone=function(){return new o({x:this.x,y:this.y,z:this.z})};var o;return n([i.property({type:Number})],t.prototype,"x",void 0),n([i.property({type:Number})],t.prototype,"y",void 0),n([i.property({type:Number})],t.prototype,"z",void 0),t=o=n([i.subclass("esri.symbols.support.Symbol3DAnchorPosition3D")],t)}(i.declared(o)),t.Symbol3DAnchorPosition3D=e,t.default=e})},"esri/symbols/PathSymbol3DLayer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/maybe ../core/accessorSupport/decorators ./Symbol3DLayer ./support/Symbol3DMaterial".split(" "),function(e,t,r,n,o,i,a,s){return function(e){function t(t){return t=e.call(this,t)||this,t.material=null,t.castShadows=!0,t.type="path",t.profile="circle",t.join="miter",t.cap="butt",t.width=void 0,t.height=void 0,t.anchor="center",t.profileRotation="all",t}r(t,e),a=t,Object.defineProperty(t.prototype,"size",{get:function(){if(this.width&&this.height){if(this.width===this.height)return this.width}else{if(this.width)return this.width;if(this.height)return this.height}},set:function(e){this.height=this.width=e},enumerable:!0,configurable:!0}),t.prototype.readSize=function(e,t){return t.height||t.width?e:t.size},t.prototype.clone=function(){return new a({enabled:this.enabled,material:o.isSome(this.material)?this.material.clone():null,castShadows:this.castShadows,size:this.size,profile:this.profile,join:this.join,cap:this.cap,width:this.width,height:this.height,profileRotation:this.profileRotation,anchor:this.anchor})};var a;return n([i.property({type:s.default,json:{write:!0}})],t.prototype,"material",void 0),n([i.property({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],t.prototype,"castShadows",void 0),n([i.enumeration.serializable()({Path:"path"})],t.prototype,"type",void 0),n([i.property({type:Number})],t.prototype,"size",null),n([i.reader("size")],t.prototype,"readSize",null),n([i.property({type:["circle","quad"],json:{write:!0,default:"circle"}})],t.prototype,"profile",void 0),n([i.property({type:["miter","bevel","round"],json:{write:!0,default:"miter"}})],t.prototype,"join",void 0),n([i.property({type:["none","butt","square","round"],json:{write:!0,default:"butt"}})],t.prototype,"cap",void 0),n([i.property({type:Number,json:{write:{enabled:!0,target:{width:{type:Number},size:{type:Number}}}}})],t.prototype,"width",void 0),n([i.property({type:Number,json:{write:!0}})],t.prototype,"height",void 0),n([i.property({type:["center","bottom","top"],json:{write:!0,default:"center"}})],t.prototype,"anchor",void 0),n([i.property({type:["heading","all"],json:{write:!0,default:"all"}})],t.prototype,"profileRotation",void 0),t=a=n([i.subclass("esri.symbols.PathSymbol3DLayer")],t)}(i.declared(a))})},"esri/symbols/TextSymbol3DLayer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/assignHelper ../core/lang ../core/maybe ../core/accessorSupport/decorators ./Font ./Symbol3DLayer ./support/materialUtils ./support/Symbol3DHalo ./support/Symbol3DMaterial".split(" "),function(e,t,r,n,o,i,a,s,l,u,c,p,d){return function(e){function t(t){return t=e.call(this,t)||this,t._userSize=void 0,t.halo=null,t.material=null,t.text=void 0,t.type="text",t}r(t,e),u=t,Object.defineProperty(t.prototype,"font",{get:function(){return this._get("font")||null},set:function(e){e&&this._userSize&&(e.size=this._userSize),this._set("font",e)},enumerable:!0,configurable:!0}),t.prototype.writeFont=function(e,t,r,n){r=o({},n,{textSymbol3D:!0}),t.font=e.write({},r),delete t.font.size},Object.defineProperty(t.prototype,"size",{get:function(){return null!=this._userSize?this._userSize:this.font&&null!=this.font.size?this.font.size:9},set:function(e){this._userSize=e,this.font&&(this.font.size=this._userSize),this.notifyChange("size")},enumerable:!0,configurable:!0}),t.prototype.clone=function(){return new u({enabled:this.enabled,font:this.font&&i.clone(this.font),halo:this.halo&&i.clone(this.halo),material:a.isSome(this.material)?this.material.clone():null,size:this.size,text:this.text})},t.fromTextSymbol=function(e){var t;t=e.haloColor;var r=e.haloSize;return t=t&&0<r?{color:i.clone(t),size:r}:null,r=e.font?e.font.clone():new l,new u({size:r.size,font:r,halo:t,material:e.color?{color:e.color.clone()}:null,text:e.text})};var u;return n([s.property({type:l,json:{write:!0}})],t.prototype,"font",null),n([s.writer("font")],t.prototype,"writeFont",null),n([s.property({type:p.default,json:{write:!0}})],t.prototype,"halo",void 0),n([s.property({type:d.default,json:{write:!0}})],t.prototype,"material",void 0),n([s.property(c.screenSizeProperty),s.property({dependsOn:["font.size"]})],t.prototype,"size",null),n([s.property({type:String,json:{write:!0}})],t.prototype,"text",void 0),n([s.enumeration.serializable()({Text:"text"})],t.prototype,"type",void 0),t=u=n([s.subclass("esri.symbols.TextSymbol3DLayer")],t)}(s.declared(u))})},"esri/symbols/support/Symbol3DHalo":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../Color ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators ./materialUtils".split(" "),function(e,t,r,n,o,i,a,s,l){Object.defineProperty(t,"__esModule",{value:!0}),e=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.color=new o([0,0,0,1]),t.size=0,t}r(t,e),i=t,t.prototype.clone=function(){return new i({color:a.clone(this.color),size:this.size})};var i;return n([s.property(l.colorAndTransparencyProperty)],t.prototype,"color",void 0),n([s.property(l.screenSizeProperty)],t.prototype,"size",void 0),t=i=n([s.subclass("esri.symbols.support.Symbol3DHalo")],t)}(s.declared(i.JSONSupport)),t.Symbol3DHalo=e,t.default=e})},"esri/symbols/WaterSymbol3DLayer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../Color ../core/lang ../core/accessorSupport/decorators ../core/accessorSupport/ensureType ./Symbol3DLayer".split(" "),function(e,t,r,n,o,i,a,s,l){return function(e){function t(t){return t=e.call(this,t)||this,t.color=new o("#0077BE"),t.type="water",t.waterbodySize="medium",t.waveDirection=null,t.waveStrength="moderate",t}r(t,e),l=t,t.prototype.clone=function(){return new l({color:i.clone(this.color),waterbodySize:this.waterbodySize,waveDirection:this.waveDirection,waveStrength:this.waveStrength})};var l;return n([a.property({type:o,json:{type:[s.Integer],write:!0,default:null}})],t.prototype,"color",void 0),n([a.enumeration.serializable()({Water:"water"})],t.prototype,"type",void 0),n([a.property({type:["small","medium","large"],json:{write:!0,default:"medium"}})],t.prototype,"waterbodySize",void 0),n([a.property({type:Number,json:{write:!0,default:null}})],t.prototype,"waveDirection",void 0),n([a.property({type:["calm","rippled","slight","moderate"],json:{write:!0,default:"moderate"}})],t.prototype,"waveStrength",void 0),t=l=n([a.subclass("esri.symbols.WaterSymbol3DLayer")],t)}(a.declared(l))})},"esri/symbols/support/StyleOrigin":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/accessorSupport/decorators ../../portal/Portal".split(" "),function(e,t,r,n,o,i,a){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.portal=null,t}r(t,e),o=t,t.prototype.clone=function(){return new o({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})};var o;return n([i.property({type:String})],t.prototype,"name",void 0),n([i.property({type:String})],t.prototype,"styleUrl",void 0),n([i.property({type:String})],t.prototype,"styleName",void 0),n([i.property({type:a})],t.prototype,"portal",void 0),t=o=n([i.subclass("esri.symbols.support.StyleOrigin")],t)}(i.declared(o))})},"esri/symbols/support/Thumbnail":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/accessorSupport/decorators".split(" "),function(e,t,r,n,o,i){Object.defineProperty(t,"__esModule",{value:!0}),e=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}r(t,e),o=t,t.prototype.clone=function(){return new o({url:this.url})};var o;return n([i.property({type:String})],t.prototype,"url",void 0),t=o=n([i.subclass("esri.symbols.support.Thumbnail")],t)}(i.declared(o)),t.Thumbnail=e,t.default=e})},"esri/symbols/callouts/calloutUtils":function(){define(["require","exports","./Callout3D","./LineCallout3D"],function(e,t,r,n){function o(e){return!!e&&!(!(e=e.verticalOffset)||0>=e.screenLength||0>=e.maxWorldLength)}function i(e,t,r){if(!e)return e;switch(e.type){case"line":return t=new n,t.read(e,r),t}}Object.defineProperty(t,"__esModule",{value:!0}),t.hasVisibleVerticalOffset=o,t.hasVisibleCallout=function(e){if(!e||!e.supportsCallout||!e.supportsCallout())return!1;var t=e.callout;return!(!t||!t.visible)&&!!o(e)},t.isCalloutSupport=function(e){return"point-3d"===e.type||"label-3d"===e.type},t.read=i,t.calloutProperty={types:{key:"type",base:r,typeMap:{line:n}},json:{read:i,write:!0}}})},"esri/symbols/callouts/Callout3D":function(){define("require exports ../../core/tsSupport/assignHelper ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators".split(" "),function(e,t,r,n,o,i,a){return function(e){function t(t){return t=e.call(this,t)||this,t.visible=!0,t}return n(t,e),t.prototype.normalizeCtorArgs=function(e){return e&&e.type&&(e=r({},e),delete e.type),e},t.prototype.clone=function(){},o([a.property({type:["line"],readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0}}})],t.prototype,"type",void 0),o([a.property({readOnly:!0})],t.prototype,"visible",void 0),t=o([a.subclass("esri.symbols.callouts.Callout3D")],t)}(a.declared(i.JSONSupport))})},"esri/symbols/callouts/LineCallout3D":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../Color ../../core/lang ../../core/maybe ../../core/screenUtils ../../core/accessorSupport/decorators ./Callout3D ./LineCallout3DBorder ../support/materialUtils".split(" "),function(e,t,r,n,o,i,a,s,l,u,c,p){return function(e){function t(t){return t=e.call(this,t)||this,t.type="line",t.color=new o([0,0,0,1]),t.size=s.px2pt(1),t.border=null,t}r(t,e),u=t,Object.defineProperty(t.prototype,"visible",{get:function(){return 0<this.size&&a.isSome(this.color)&&0<this.color.a},enumerable:!0,configurable:!0}),t.prototype.clone=function(){return new u({color:i.clone(this.color),size:this.size,border:i.clone(this.border)})};var u;return n([l.property({type:["line"]})],t.prototype,"type",void 0),n([l.property(p.colorAndTransparencyProperty)],t.prototype,"color",void 0),n([l.property(p.screenSizeProperty)],t.prototype,"size",void 0),n([l.property({type:c.default,json:{write:!0}})],t.prototype,"border",void 0),n([l.property({dependsOn:["size","color"],readOnly:!0})],t.prototype,"visible",null),t=u=n([l.subclass("esri.symbols.callouts.LineCallout3D")],t)}(l.declared(u))})},"esri/symbols/callouts/LineCallout3DBorder":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../Color ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators ../support/materialUtils".split(" "),function(e,t,r,n,o,i,a,s,l){Object.defineProperty(t,"__esModule",{value:!0}),e=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.color=new o("white"),t}r(t,e),i=t,t.prototype.clone=function(){return new i({color:a.clone(this.color)})};var i;return n([s.property(l.colorAndTransparencyProperty)],t.prototype,"color",void 0),t=i=n([s.subclass("esri.symbols.callouts.LineCallout3DBorder")],t)}(s.declared(i.JSONSupport)),t.LineCallout3DBorder=e,t.default=e})},"esri/symbols/support/Symbol3DVerticalOffset":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators ./materialUtils".split(" "),function(e,t,r,n,o,i,a){Object.defineProperty(t,"__esModule",{value:!0}),e=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.screenLength=0,t.minWorldLength=0,t}r(t,e),o=t,t.prototype.clone=function(){return new o({screenLength:this.screenLength,minWorldLength:this.minWorldLength,maxWorldLength:this.maxWorldLength})};var o;return n([i.property(a.screenSizeProperty)],t.prototype,"screenLength",void 0),n([i.property({type:Number,json:{write:!0,default:0}})],t.prototype,"minWorldLength",void 0),n([i.property({type:Number,json:{write:!0}})],t.prototype,"maxWorldLength",void 0),t=o=n([i.subclass("esri.symbols.support.Symbol3DVerticalOffset")],t)}(i.declared(o.JSONSupport)),t.Symbol3DVerticalOffset=e,t.default=e})},"esri/symbols/LineSymbol3D":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Collection ../core/lang ../core/accessorSupport/decorators ./LineSymbol3DLayer ./PathSymbol3DLayer ./Symbol3D".split(" "),function(e,t,r,n,o,i,a,s,l,u){var c=o.ofType({base:null,key:"type",typeMap:{line:s,path:l}}),p=o.ofType({base:null,key:"type",typeMap:{line:s,path:l}});return function(e){function t(t){return t=e.call(this,t)||this,t.symbolLayers=new c,t.type="line-3d",t}r(t,e),o=t,t.prototype.clone=function(){return new o({styleOrigin:i.clone(this.styleOrigin),symbolLayers:i.clone(this.symbolLayers),thumbnail:i.clone(this.thumbnail)})},t.fromSimpleLineSymbol=function(e){return new o({symbolLayers:[s.fromSimpleLineSymbol(e)]})};var o;return n([a.property({type:c,json:{type:p}})],t.prototype,"symbolLayers",void 0),n([a.enumeration.serializable()({LineSymbol3D:"line-3d"})],t.prototype,"type",void 0),t=o=n([a.subclass("esri.symbols.LineSymbol3D")],t)}(a.declared(u))})},"esri/symbols/MarkerSymbol":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/jsonMap ../core/screenUtils ../core/accessorSupport/decorators ./Symbol".split(" "),function(e,t,r,n,o,i,a,s){var l=new o.default({esriSMS:"simple-marker",esriPMS:"picture-marker"});return function(e){function t(t){return t=e.call(this,t)||this,t.angle=0,t.type=null,t.xoffset=0,t.yoffset=0,t.size=9,t}return r(t,e),n([a.property({type:Number,json:{read:function(e){return e&&-1*e},write:function(e,t){return t.angle=e&&-1*e}}})],t.prototype,"angle",void 0),n([a.property({type:l.apiValues,readOnly:!0,json:{type:l.jsonValues}})],t.prototype,"type",void 0),n([a.property({type:Number,cast:i.toPt,json:{write:!0}})],t.prototype,"xoffset",void 0),n([a.property({type:Number,cast:i.toPt,json:{write:!0}})],t.prototype,"yoffset",void 0),n([a.property({type:Number,cast:function(e){return"auto"===e?e:i.toPt(e)},json:{write:!0}})],t.prototype,"size",void 0),t=n([a.subclass("esri.symbols.MarkerSymbol")],t)}(a.declared(s))})},"esri/symbols/MeshSymbol3D":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Collection ../core/lang ../core/accessorSupport/decorators ./FillSymbol3DLayer ./Symbol3D".split(" "),function(e,t,r,n,o,i,a,s,l){var u=o.ofType({base:null,key:"type",typeMap:{fill:s}});return function(e){function t(t){return t=e.call(this,t)||this,t.symbolLayers=new u,t.type="mesh-3d",t}r(t,e),o=t,t.prototype.clone=function(){return new o({styleOrigin:i.clone(this.styleOrigin),symbolLayers:i.clone(this.symbolLayers),thumbnail:i.clone(this.thumbnail)})};var o;return n([a.property({type:u})],t.prototype,"symbolLayers",void 0),n([a.enumeration.serializable()({MeshSymbol3D:"mesh-3d"})],t.prototype,"type",void 0),t=o=n([a.subclass("esri.symbols.MeshSymbol3D")],t)}(a.declared(l))})},"esri/symbols/PictureFillSymbol":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/assignHelper ../core/lang ../core/screenUtils ../core/accessorSupport/decorators ./FillSymbol ./support/urlUtils".split(" "),function(e,t,r,n,o,i,a,s,l,u){return function(e){function t(t,r,n,o){return t=e.call(this,t)||this,t.type="picture-fill",t.url=null,t.xscale=1,t.yscale=1,t.width=12,t.height=12,t.xoffset=0,t.yoffset=0,t.source=null,t}r(t,e),o=t,t.prototype.normalizeCtorArgs=function(e,t,r,n){if(e&&"string"!=typeof e&&null==e.imageData)return e;var o={};return e&&(o.url=e),t&&(o.outline=t),null!=r&&(o.width=a.toPt(r)),null!=n&&(o.height=a.toPt(n)),o},t.prototype.clone=function(){var e=new o({color:i.clone(this.color),height:this.height,outline:this.outline&&this.outline.clone(),url:this.url,width:this.width,xoffset:this.xoffset,xscale:this.xscale,yoffset:this.yoffset,yscale:this.yscale});return e._set("source",i.clone(this.source)),e};var o;return n([s.enumeration.serializable()({esriPFS:"picture-fill"})],t.prototype,"type",void 0),n([s.property(u.urlPropertyDefinition)],t.prototype,"url",void 0),n([s.property({type:Number,json:{write:!0}})],t.prototype,"xscale",void 0),n([s.property({type:Number,json:{write:!0}})],t.prototype,"yscale",void 0),n([s.property({type:Number,cast:a.toPt,json:{write:!0}})],t.prototype,"width",void 0),n([s.property({type:Number,cast:a.toPt,json:{write:!0}})],t.prototype,"height",void 0),n([s.property({type:Number,cast:a.toPt,json:{write:!0}})],t.prototype,"xoffset",void 0),n([s.property({type:Number,cast:a.toPt,json:{write:!0}})],t.prototype,"yoffset",void 0),n([s.property(u.sourcePropertyDefinition)],t.prototype,"source",void 0),t=o=n([s.subclass("esri.symbols.PictureFillSymbol")],t)}(s.declared(l))})},"esri/symbols/support/urlUtils":function(){define(["require","exports","../../core/urlUtils"],function(e,t,r){function n(e,t,n){return t.imageData?r.makeData({mediaType:t.contentType||"image/png",isBase64:!0,data:t.imageData}):o(t.url,n)}function o(e,t){return!t||"service"!==t.origin&&"portal-item"!==t.origin||!t.layer||"feature"!==t.layer.type&&"stream"!==t.layer.type||r.isAbsolute(e)||!t.layer.parsedUrl?r.fromJSON(e,t):r.join(t.layer.parsedUrl.path,"images",e)}function i(e,t,n,o){r.isDataProtocol(e)?(e=r.dataComponents(e),t.contentType=e.mediaType,t.imageData=e.data,n&&n.imageData===t.imageData&&n.url&&r.write(n.url,t,"url",o)):r.write(e,t,"url",o)}Object.defineProperty(t,"__esModule",{value:!0}),t.readImageDataOrUrl=n,t.read=o,t.writeImageDataAndUrl=i,t.urlPropertyDefinition={json:{read:{source:["imageData","url"],reader:n},write:{writer:function(e,t,r,n){i(e,t,this.source,n)}}}},t.sourcePropertyDefinition={readOnly:!0,json:{read:{source:["imageData","url"],reader:function(e,t,r){return e={},t.imageData&&(e.imageData=t.imageData),t.contentType&&(e.contentType=t.contentType),t.url&&(e.url=o(t.url,r)),e}}}}})},"esri/symbols/PictureMarkerSymbol":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/lang ../core/screenUtils ../core/accessorSupport/decorators ./MarkerSymbol ./support/urlUtils".split(" "),function(e,t,r,n,o,i,a,s,l){return function(e){function t(t,r,n){return t=e.call(this,t)||this,t.color=null,t.type="picture-marker",t.url=null,t.source=null,t.height=12,t.width=12,t.size=null,t}r(t,e),s=t,t.prototype.normalizeCtorArgs=function(e,t,r){if(e&&"string"!=typeof e&&null==e.imageData)return e;var n={};return e&&(n.url=e),null!=t&&(n.width=i.toPt(t)),null!=r&&(n.height=i.toPt(r)),n},t.prototype.readHeight=function(e,t){return t.size||e},t.prototype.readWidth=function(e,t){return t.size||e},t.prototype.clone=function(){var e=new s({angle:this.angle,height:this.height,url:this.url,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset});return e._set("source",o.clone(this.source)),e};var s;return n([a.property({json:{write:!1}})],t.prototype,"color",void 0),n([a.enumeration.serializable()({esriPMS:"picture-marker"})],t.prototype,"type",void 0),n([a.property(l.urlPropertyDefinition)],t.prototype,"url",void 0),n([a.property(l.sourcePropertyDefinition)],t.prototype,"source",void 0),n([a.property({type:Number,cast:i.toPt,json:{write:!0}})],t.prototype,"height",void 0),n([a.reader("height",["height","size"])],t.prototype,"readHeight",null),n([a.property({type:Number,cast:i.toPt,json:{write:!0}})],t.prototype,"width",void 0),n([a.property({json:{write:!1}})],t.prototype,"size",void 0),t=s=n([a.subclass("esri.symbols.PictureMarkerSymbol")],t)}(a.declared(s))})},"esri/symbols/PointSymbol3D":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Collection ../core/Error ../core/lang ../core/accessorSupport/decorators ./IconSymbol3DLayer ./ObjectSymbol3DLayer ./Symbol3D ./TextSymbol3DLayer ./callouts/calloutUtils ./support/Symbol3DVerticalOffset".split(" "),function(e,t,r,n,o,i,a,s,l,u,c,p,d,f){var h=o.ofType({base:null,key:"type",typeMap:{icon:l,object:u,text:p}}),y=o.ofType({base:null,key:"type",typeMap:{icon:l,object:u}});return function(e){function t(t){return t=e.call(this,t)||this,t.verticalOffset=null,t.callout=null,t.symbolLayers=new h,t.type="point-3d",t}r(t,e),o=t,t.prototype.writeSymbolLayers=function(e,t,r,n){var o=e.filter(function(e){return"text"!==e.type});n&&n.messages&&o.length<e.length&&(e=e.find(function(e){return"text"===e.type}),n.messages.push(new i("symbol-layer:unsupported","Symbol layers of type 'text' cannot be persisted in PointSymbol3D",{symbolLayer:e}))),t[r]=o.map(function(e){return e.write({},n)}).toArray()},t.prototype.supportsCallout=function(){if(1>(this.symbolLayers?this.symbolLayers.length:0))return!1;for(var e=0,t=this.symbolLayers.items;e<t.length;e++)switch(t[e].type){case"icon":case"text":case"object":continue;default:return!1}return!0},t.prototype.hasVisibleCallout=function(){return d.hasVisibleCallout(this)},t.prototype.hasVisibleVerticalOffset=function(){return d.hasVisibleVerticalOffset(this)},t.prototype.clone=function(){return new o({verticalOffset:a.clone(this.verticalOffset),callout:a.clone(this.callout),styleOrigin:a.clone(this.styleOrigin),symbolLayers:a.clone(this.symbolLayers),thumbnail:a.clone(this.thumbnail)})},t.fromSimpleMarkerSymbol=function(e){return new o({symbolLayers:[l.fromSimpleMarkerSymbol(e)]})},t.fromPictureMarkerSymbol=function(e){return new o({symbolLayers:[l.fromPictureMarkerSymbol(e)]})},t.fromCIMSymbol=function(e){return new o({symbolLayers:[l.fromCIMSymbol(e)],callout:{type:"line",size:.5,color:[0,0,0]},verticalOffset:{screenLength:40}})},t.fromTextSymbol=function(e){return new o({symbolLayers:[p.fromTextSymbol(e)]})};var o;return n([s.property({type:f.default,json:{write:!0}})],t.prototype,"verticalOffset",void 0),n([s.property(d.calloutProperty)],t.prototype,"callout",void 0),n([s.property({type:h,json:{type:y,origins:{"web-scene":{type:y}}}})],t.prototype,"symbolLayers",void 0),n([s.writer("web-scene","symbolLayers")],t.prototype,"writeSymbolLayers",null),n([s.enumeration.serializable()({PointSymbol3D:"point-3d"})],t.prototype,"type",void 0),t=o=n([s.subclass("esri.symbols.PointSymbol3D")],t)}(s.declared(c))})},"esri/symbols/PolygonSymbol3D":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Collection ../core/Error ../core/lang ../core/maybe ../core/accessorSupport/decorators ./ExtrudeSymbol3DLayer ./FillSymbol3DLayer ./IconSymbol3DLayer ./LineSymbol3DLayer ./ObjectSymbol3DLayer ./Symbol3D ./TextSymbol3DLayer ./WaterSymbol3DLayer".split(" "),function(e,t,r,n,o,i,a,s,l,u,c,p,d,f,h,y,m){var g=o.ofType({base:null,key:"type",typeMap:{extrude:u,fill:c,icon:p,line:d,object:f,text:y,water:m}}),v=o.ofType({base:null,key:"type",typeMap:{extrude:u,fill:c,icon:p,line:d,object:f,water:m}});return function(e){function t(t){return t=e.call(this,t)||this,t.type="polygon-3d",t}r(t,e),o=t,t.prototype.writeSymbolLayers=function(e,t,r,n){var o=e.filter(function(e){return"text"!==e.type});n&&n.messages&&o.length<e.length&&(e=e.find(function(e){return"text"===e.type}),n.messages.push(new i("symbol-layer:unsupported","Symbol layers of type 'text' cannot be persisted in PolygonSymbol3D",{symbolLayer:e}))),t[r]=o.map(function(e){return e.write({},n)}).toArray()},t.prototype.clone=function(){return new o({styleOrigin:a.clone(this.styleOrigin),symbolLayers:a.clone(this.symbolLayers),thumbnail:a.clone(this.thumbnail)})},t.fromJSON=function(e){var t=new o;if(t.read(e),2===t.symbolLayers.length&&"fill"===t.symbolLayers.getItemAt(0).type&&"line"===t.symbolLayers.getItemAt(1).type){var r=t.symbolLayers.getItemAt(0),n=t.symbolLayers.getItemAt(1);!n.enabled||e.symbolLayers&&e.symbolLayers[1]&&!1===e.symbolLayers[1].enable||(r.outline={size:n.size,color:s.isSome(n.material)?n.material.color:null}),t.symbolLayers.removeAt(1)}return t},t.fromSimpleFillSymbol=function(e){return new o({symbolLayers:[c.fromSimpleFillSymbol(e)]})};var o;return n([l.property({type:g,json:{type:v}})],t.prototype,"symbolLayers",void 0),n([l.writer("web-scene","symbolLayers")],t.prototype,"writeSymbolLayers",null),n([l.enumeration.serializable()({PolygonSymbol3D:"polygon-3d"})],t.prototype,"type",void 0),t=o=n([l.subclass("esri.symbols.PolygonSymbol3D")],t)}(l.declared(h))})},"esri/symbols/SimpleFillSymbol":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/assignHelper ../Color ../core/jsonMap ../core/lang ../core/accessorSupport/decorators ./FillSymbol ./SimpleLineSymbol".split(" "),function(e,t,r,n,o,i,a,s,l,u,c){var p=new a.default({esriSFSSolid:"solid",esriSFSNull:"none",esriSFSHorizontal:"horizontal",esriSFSVertical:"vertical",esriSFSForwardDiagonal:"forward-diagonal",esriSFSBackwardDiagonal:"backward-diagonal",esriSFSCross:"cross",esriSFSDiagonalCross:"diagonal-cross"});return function(e){function t(t,r,n){return t=e.call(this,t)||this,t.color=new i([0,0,0,.25]),t.outline=new c,t.type="simple-fill",t.style="solid",t}r(t,e),o=t,t.prototype.normalizeCtorArgs=function(e,t,r){if(e&&"string"!=typeof e)return e;var n={};return e&&(n.style=e),t&&(n.outline=t),r&&(n.color=r),n},t.prototype.clone=function(){return new o({color:s.clone(this.color),outline:this.outline&&this.outline.clone(),style:this.style})};var o;return n([l.property()],t.prototype,"color",void 0),n([l.property()],t.prototype,"outline",void 0),n([l.enumeration.serializable()({esriSFS:"simple-fill"})],t.prototype,"type",void 0),n([l.property({type:p.apiValues,json:{read:p.read,write:p.write}})],t.prototype,"style",void 0),t=o=n([l.subclass("esri.symbols.SimpleFillSymbol")],t)}(l.declared(u))})},"esri/symbols/SimpleMarkerSymbol":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../Color ../core/jsonMap ../core/lang ../core/screenUtils ../core/accessorSupport/decorators ./MarkerSymbol ./SimpleLineSymbol".split(" "),function(e,t,r,n,o,i,a,s,l,u,c){var p=new i.default({esriSMSCircle:"circle",esriSMSSquare:"square",esriSMSCross:"cross",esriSMSX:"x",esriSMSDiamond:"diamond",esriSMSTriangle:"triangle",esriSMSPath:"path"});return function(e){function t(t,r,n,i){return t=e.call(this,t)||this,t.color=new o([255,255,255,.25]),t.type="simple-marker",t.size=12,t.style="circle",t.outline=new c,t}r(t,e),i=t,t.prototype.normalizeCtorArgs=function(e,t,r,n){if(e&&"string"!=typeof e)return e;var o={};return e&&(o.style=e),null!=t&&(o.size=s.toPt(t)),r&&(o.outline=r),n&&(o.color=n),o},t.prototype.writeColor=function(e,t){e&&"x"!==this.style&&"cross"!==this.style&&(t.color=e.toJSON()),null===e&&(t.color=null)},Object.defineProperty(t.prototype,"path",{set:function(e){this.style="path",this._set("path",e)},enumerable:!0,configurable:!0}),t.prototype.clone=function(){return new i({angle:this.angle,color:a.clone(this.color),outline:this.outline&&this.outline.clone(),path:this.path,size:this.size,style:this.style,xoffset:this.xoffset,yoffset:this.yoffset})};var i;return n([l.property()],t.prototype,"color",void 0),n([l.writer("color")],t.prototype,"writeColor",null),n([l.enumeration.serializable()({esriSMS:"simple-marker"})],t.prototype,"type",void 0),n([l.property()],t.prototype,"size",void 0),n([l.property({type:p.apiValues,json:{read:p.read,write:p.write}})],t.prototype,"style",void 0),n([l.property({type:String,json:{write:!0}})],t.prototype,"path",null),n([l.property({type:c,json:{default:null,write:!0}})],t.prototype,"outline",void 0),t=i=n([l.subclass("esri.symbols.SimpleMarkerSymbol")],t)}(l.declared(u))})},"esri/symbols/TextSymbol":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../Color ../core/lang ../core/screenUtils ../core/accessorSupport/decorators ./Font ./Symbol".split(" "),function(e,t,r,n,o,i,a,s,l,u){return function(e){function t(t,r,n){return t=e.call(this,t)||this,t.backgroundColor=null,t.borderLineColor=null,t.borderLineSize=null,t.font=new l,t.horizontalAlignment="center",t.kerning=!0,t.haloColor=null,t.haloSize=null,t.rightToLeft=null,t.rotated=!1,t.text="",t.type="text",t.verticalAlignment=null,t.xoffset=0,t.yoffset=0,t.angle=0,t.width=null,t}r(t,e),u=t,t.prototype.normalizeCtorArgs=function(e,t,r){if(e&&"string"!=typeof e)return e;var n={};return e&&(n.text=e),t&&(n.font=t),r&&(n.color=r),n},t.prototype.clone=function(){return new u({angle:this.angle,backgroundColor:i.clone(this.backgroundColor),borderLineColor:i.clone(this.borderLineColor),borderLineSize:this.borderLineSize,color:i.clone(this.color),font:this.font&&this.font.clone(),haloColor:i.clone(this.haloColor),haloSize:this.haloSize,horizontalAlignment:this.horizontalAlignment,kerning:this.kerning,rightToLeft:this.rightToLeft,rotated:this.rotated,text:this.text,verticalAlignment:this.verticalAlignment,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset})};var u;return n([s.property({type:o,json:{write:!0}})],t.prototype,"backgroundColor",void 0),n([s.property({type:o,json:{write:!0}})],t.prototype,"borderLineColor",void 0),n([s.property({type:Number,json:{write:!0}})],t.prototype,"borderLineSize",void 0),n([s.property({type:l,json:{write:!0}})],t.prototype,"font",void 0),n([s.property({type:["left","right","center","justify"],json:{write:!0}})],t.prototype,"horizontalAlignment",void 0),n([s.property({type:Boolean,json:{write:!0}})],t.prototype,"kerning",void 0),n([s.property({type:o,json:{write:!0}})],t.prototype,"haloColor",void 0),n([s.property({type:Number,cast:a.toPt,json:{write:!0}})],t.prototype,"haloSize",void 0),n([s.property({type:Boolean,json:{write:!0}})],t.prototype,"rightToLeft",void 0),n([s.property({type:Boolean,json:{write:!0}})],t.prototype,"rotated",void 0),n([s.property({type:String,json:{write:!0}})],t.prototype,"text",void 0),n([s.property({type:String,readOnly:!0})],t.prototype,"type",void 0),n([s.property({type:["baseline","top","middle","bottom"],json:{write:!0}})],t.prototype,"verticalAlignment",void 0),n([s.property({type:Number,cast:a.toPt,json:{write:!0}})],t.prototype,"xoffset",void 0),n([s.property({type:Number,cast:a.toPt,json:{write:!0}})],t.prototype,"yoffset",void 0),n([s.property({type:Number,json:{read:function(e){return e&&-1*e},write:function(e,t){return t.angle=e&&-1*e}}})],t.prototype,"angle",void 0),n([s.property({type:Number,json:{write:!0}})],t.prototype,"width",void 0),t=u=n([s.subclass("esri.symbols.TextSymbol")],t)}(s.declared(u))})},"esri/symbols/WebStyleSymbol":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/generatorHelper ../core/tsSupport/awaiterHelper ../core/jsonMap ../core/Logger ../core/promiseUtils ../core/urlUtils ../core/accessorSupport/decorators ../portal/Portal ./Symbol ./support/Thumbnail".split(" "),function(e,t,r,n,o,i,a,s,l,u,c,p,d,f){function h(){return i(this,void 0,void 0,function(){return o(this,function(t){return[2,l.create(function(t){return e(["./support/styleUtils"],t)})]})})}var y=s.getLogger("esri.symbols.WebStyleSymbol"),m=a.strict()({styleSymbolReference:"web-style"});return function(e){function t(t){return t=e.call(this,t)||this,t.styleName=null,t.portal=null,t.styleUrl=null,t.thumbnail=null,t.name=null,t.type="web-style",t}r(t,e),a=t,t.prototype.read=function(e,t){this.portal=t?t.portal:void 0,this.inherited(arguments,[e,t])},t.prototype.clone=function(){return new a({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})},t.prototype.fetchSymbol=function(e){return this._fetchSymbol("webRef",e)},t.prototype.fetchCIMSymbol=function(e){return this._fetchSymbol("cimRef",e)},t.prototype._fetchSymbol=function(e,t){return i(this,void 0,void 0,function(){var r,n;return o(this,function(o){switch(o.label){case 0:return[4,h()];case 1:return r=o.sent(),l.throwIfAborted(t),n=r.resolveWebStyleSymbol(this,{portal:this.portal},e,t),n.catch(function(e){y.error("#fetchSymbol()","Failed to create symbol from style",e)}),[2,n]}})})};var a;return n([c.property({json:{write:!1}})],t.prototype,"color",void 0),n([c.property({type:String,json:{write:!0}})],t.prototype,"styleName",void 0),n([c.property({type:p,json:{write:!1}})],t.prototype,"portal",void 0),n([c.property({type:String,json:{read:u.read,write:u.write}})],t.prototype,"styleUrl",void 0),n([c.property({type:f.default,json:{read:!1}})],t.prototype,"thumbnail",void 0),n([c.property({type:String,json:{write:!0}})],t.prototype,"name",void 0),n([c.property({type:m.apiValues,readOnly:!0,json:{type:m.jsonValues,read:!1,write:m.write}})],t.prototype,"type",void 0),t=a=n([c.subclass("esri.symbols.WebStyleSymbol")],t)}(c.declared(d))})},"esri/symbols/support/jsonUtils":function(){define("require exports ../../core/Error ../../core/Warning ../CIMSymbol ../LabelSymbol3D ../LineSymbol3D ../MeshSymbol3D ../PictureFillSymbol ../PictureMarkerSymbol ../PointSymbol3D ../PolygonSymbol3D ../SimpleFillSymbol ../SimpleLineSymbol ../SimpleMarkerSymbol ../Symbol3D ../TextSymbol ../WebStyleSymbol ../callouts/LineCallout3D ./symbolConversion".split(" "),function(e,t,r,n,o,i,a,s,l,u,c,p,d,f,h,y,m,g,v,b){function w(e,t,r){return(t=e?_[e.type]||null:null)?(t=new t,t.read(e,r),t):(r&&r.messages&&e&&r.messages.push(new n("symbol:unsupported","Symbols of type '"+(e.type||"unknown")+"' are not supported",{definition:e,context:r})),null)}function S(e,t,n){if(!e)return null;if(!(!n||"web-scene"!==n.origin||e instanceof y||e instanceof g)){var o="cim"!==e.type?b.to3D(e):{symbol:null,error:new r("symbol-conversion:unsupported-cim-symbol","CIM symbol is unsupported in web scenes",{symbol:e})};return o.symbol?o.symbol.write(t,n):(n.messages&&n.messages.push(new r("symbol:unsupported","Symbols of type '"+e.declaredClass+"' are not supported in scenes. Use 3D symbology instead when working with WebScene and SceneView",{symbol:e,context:n,error:o.error})),null)}return e.write(t,n)}Object.defineProperty(t,"__esModule",{value:!0});var _={esriSMS:h,esriPMS:u,esriTS:m,esriSLS:f,esriSFS:d,esriPFS:l,PointSymbol3D:c,LineSymbol3D:a,PolygonSymbol3D:p,MeshSymbol3D:s,LabelSymbol3D:i,styleSymbolReference:g,CIMSymbolReference:o};t.read=w,t.writeTarget=function(e,t,r,n){(e=S(e,{},n))&&(t[r]=e)},t.write=S,t.fromJSON=function(e,t){return w(e,null,t)},t.readCallout3D=function(e,t){if(!e||!e.type)return null;var r=null;switch(e.type){case"line":r=new v}return r&&r.read(e,t),r}})},"esri/symbols/support/symbolConversion":function(){define(["require","exports","../../symbols","../../core/Error"],function(e,t,r,n){Object.defineProperty(t,"__esModule",{value:!0}),t.to3D=function(e,t,o,i){if(void 0===t&&(t=!1),void 0===o&&(o=!1),void 0===i&&(i=!0),!e)return{symbol:null};if(r.isSymbol3D(e)||e instanceof r.WebStyleSymbol)i=e.clone();else if("cim"===e.type)i=r.PointSymbol3D.fromCIMSymbol(e);else if(e instanceof r.SimpleLineSymbol)i=r.LineSymbol3D.fromSimpleLineSymbol(e);else if(e instanceof r.SimpleMarkerSymbol)i=r.PointSymbol3D.fromSimpleMarkerSymbol(e);else if(e instanceof r.PictureMarkerSymbol)i=r.PointSymbol3D.fromPictureMarkerSymbol(e);else if(e instanceof r.SimpleFillSymbol)i=r.PolygonSymbol3D.fromSimpleFillSymbol(e);else{if(!(e instanceof r.TextSymbol))return{error:new n("symbol-conversion:unsupported-2d-symbol","2D symbol of type '"+(e.type||e.declaredClass)+"' is unsupported in 3D",{symbol:e})};i=i?r.LabelSymbol3D.fromTextSymbol(e):r.PointSymbol3D.fromTextSymbol(e)}if(t&&(i.id=e.id),o&&r.isSymbol3D(i))for(e=0;e<i.symbolLayers.length;++e)i.symbolLayers.getItemAt(e)._ignoreDrivers=!0;return{symbol:i}}})},"esri/renderers/Renderer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/generatorHelper ../core/tsSupport/awaiterHelper ../core/iteratorUtils ../core/jsonMap ../core/JSONSupport ../core/accessorSupport/decorators ./support/AuthoringInfo".split(" "),function(e,t,r,n,o,i,a,s,l,u,c){var p=new s.default({simple:"simple",uniqueValue:"unique-value",classBreaks:"class-breaks",heatmap:"heatmap",dotDensity:"dot-density",dictionary:"dictionary"},{ignoreUnknown:!0});return function(e){function t(t){return t=e.call(this,t)||this,t.authoringInfo=null,t.type=null,t}return r(t,e),t.prototype.getRequiredFields=function(e){return i(this,void 0,void 0,function(){var t;return o(this,function(r){switch(r.label){case 0:return this.collectRequiredFields?(t=new Set,[4,this.collectRequiredFields(t,e)]):[2,[]];case 1:return r.sent(),[2,a.valuesOfSet(t).sort()]}})})},t.prototype.getSymbol=function(e,t){},t.prototype.getSymbolAsync=function(e,t){return i(this,void 0,void 0,function(){return o(this,function(e){return[2]})})},t.prototype.getSymbols=function(){return[]},t.prototype.getAttributeHash=function(){return JSON.stringify(this)},t.prototype.getMeshHash=function(){return JSON.stringify(this)},n([u.property({type:c,json:{write:!0}})],t.prototype,"authoringInfo",void 0),n([u.property({type:p.apiValues,readOnly:!0,json:{type:p.jsonValues,read:!1,write:{writer:p.write,ignoreOrigin:!0}}})],t.prototype,"type",void 0),t=n([u.subclass("esri.renderers.Renderer")],t)}(u.declared(l.JSONSupport))})},"esri/renderers/support/AuthoringInfo":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/jsonMap ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators ../../core/accessorSupport/ensureType ./AuthoringInfoFieldInfo ./AuthoringInfoVisualVariable ../../tasks/support/colorRamps".split(" "),function(e,t,r,n,o,i,a,s,l,u,c,p){var d=new o.default({esriClassifyDefinedInterval:"defined-interval",esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation"}),f=new o.default({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density"}),h="inches feet yards miles nautical-miles millimeters centimeters decimeters meters kilometers decimal-degrees".split(" ");return function(e){function t(t){return t=e.call(this,t)||this,t.colorRamp=null,t.lengthUnit=null,t.maxSliderValue=null,t.minSliderValue=null,t.visualVariables=null,t}r(t,e),o=t,Object.defineProperty(t.prototype,"classificationMethod",{get:function(){var e=this._get("classificationMethod"),t=this.type;return t&&"relationship"!==t?"class-breaks-size"===t||"class-breaks-color"===t?e||"manual":null:e},set:function(e){this._set("classificationMethod",e)},enumerable:!0,configurable:!0}),t.prototype.readColorRamp=function(e){if(e)return p.fromJSON(e)},Object.defineProperty(t.prototype,"fields",{get:function(){return this.type&&"predominance"!==this.type?null:this._get("fields")},set:function(e){this._set("fields",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"field1",{get:function(){return this.type&&"relationship"!==this.type?null:this._get("field1")},set:function(e){this._set("field1",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"field2",{get:function(){return this.type&&"relationship"!==this.type?null:this._get("field2")},set:function(e){this._set("field2",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"focus",{get:function(){return this.type&&"relationship"!==this.type?null:this._get("focus")},set:function(e){this._set("focus",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"numClasses",{get:function(){return this.type&&"relationship"!==this.type?null:this._get("numClasses")},set:function(e){this._set("numClasses",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"standardDeviationInterval",{get:function(){var e=this.type;return e&&"relationship"!==e&&"class-breaks-size"!==e&&"class-breaks-color"!==e?null:this.classificationMethod&&"standard-deviation"!==this.classificationMethod?null:this._get("standardDeviationInterval")},set:function(e){this._set("standardDeviationInterval",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"type",{get:function(){return this._get("type")},set:function(e){var t=e;"classed-size"===e?t="class-breaks-size":"classed-color"===e&&(t="class-breaks-color"),this._set("type",t)},enumerable:!0,configurable:!0}),t.prototype.clone=function(){return new o({classificationMethod:this.classificationMethod,colorRamp:a.clone(this.colorRamp),fields:this.fields&&this.fields.slice(0),field1:a.clone(this.field1),field2:a.clone(this.field2),focus:this.focus,numClasses:this.numClasses,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,lengthUnit:this.lengthUnit,standardDeviationInterval:this.standardDeviationInterval,type:this.type,visualVariables:this.visualVariables&&this.visualVariables.map(function(e){return e.clone()})})};var o;return n([s.property({type:d.apiValues,value:null,dependsOn:["type"],json:{type:d.jsonValues,read:d.read,write:d.write,origins:{"web-document":{default:"manual",type:d.jsonValues,read:d.read,write:d.write}}}})],t.prototype,"classificationMethod",null),n([s.property({types:p.types,json:{write:!0}})],t.prototype,"colorRamp",void 0),n([s.reader("colorRamp")],t.prototype,"readColorRamp",null),n([s.property({type:[String],value:null,dependsOn:["type"],json:{write:!0}})],t.prototype,"fields",null),n([s.property({type:u.default,value:null,dependsOn:["type"],json:{write:!0}})],t.prototype,"field1",null),n([s.property({type:u.default,value:null,dependsOn:["type"],json:{write:!0}})],t.prototype,"field2",null),n([s.property({type:["HH","HL","LH","LL"],value:null,dependsOn:["type"],json:{write:!0}})],t.prototype,"focus",null),n([s.property({type:Number,value:null,dependsOn:["type"],json:{type:l.Integer,write:!0}})],t.prototype,"numClasses",null),n([s.property({type:h,json:{type:h,read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],t.prototype,"lengthUnit",void 0),n([s.property({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],t.prototype,"maxSliderValue",void 0),n([s.property({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],t.prototype,"minSliderValue",void 0),n([s.property({type:[.25,.33,.5,1],value:null,dependsOn:["classificationMethod","type"],json:{type:[.25,.33,.5,1],write:!0}})],t.prototype,"standardDeviationInterval",null),n([s.property({type:String,value:null,json:{type:f.jsonValues,read:f.read,write:f.write,origins:{"web-scene":{type:f.jsonValues.filter(function(e){return"dotDensity"!==e}),read:f.read,write:f.write}}}})],t.prototype,"type",null),n([s.property({type:[c],json:{write:!0}})],t.prototype,"visualVariables",void 0),t=o=n([s.subclass("esri.renderers.support.AuthoringInfo")],t)}(s.declared(i.JSONSupport))})},"esri/renderers/support/AuthoringInfoFieldInfo":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators ./AuthoringInfoClassBreakInfo".split(" "),function(e,t,r,n,o,i,a,s){Object.defineProperty(t,"__esModule",{value:!0}),e=function(e){function t(t){return t=e.call(this,t)||this,t.field="",t.normalizationField="",t.classBreakInfos=[],t}r(t,e),o=t,t.prototype.clone=function(){return new o({field:this.field,normalizationField:this.normalizationField,classBreakInfos:i.clone(this.classBreakInfos)})};var o;return n([a.property({type:String,json:{write:!0}})],t.prototype,"field",void 0),n([a.property({type:String,json:{write:!0}})],t.prototype,"normalizationField",void 0),n([a.property({type:[s.default],json:{write:!0}})],t.prototype,"classBreakInfos",void 0),t=o=n([a.subclass("esri.renderers.support.AuthoringInfoFieldInfo")],t)}(a.declared(o.JSONSupport)),t.AuthoringInfoFieldInfo=e,t.default=e})},"esri/renderers/support/AuthoringInfoClassBreakInfo":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators".split(" "),function(e,t,r,n,o,i){Object.defineProperty(t,"__esModule",{value:!0}),e=function(e){function t(t){return t=e.call(this,t)||this,t.minValue=0,t.maxValue=0,t}r(t,e),o=t,t.prototype.clone=function(){return new o({minValue:this.minValue,maxValue:this.maxValue})};var o;return n([i.property({type:Number,json:{write:!0}})],t.prototype,"minValue",void 0),n([i.property({type:Number,json:{write:!0}})],t.prototype,"maxValue",void 0),t=o=n([i.subclass("esri.renderer.support.AuthoringInfoClassBreakInfo")],t)}(i.declared(o.JSONSupport)),t.AuthoringInfoClassBreakInfo=e,t.default=e})},"esri/renderers/support/AuthoringInfoVisualVariable":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators ../../core/accessorSupport/decorators/cast".split(" "),function(e,t,r,n,o,i,a,s){var l=new o.default({percentTotal:"percent-of-total",ratio:"ratio",percent:"percent"}),u=new o.default({sizeInfo:"size",colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation"}),c={key:function(e){return"number"==typeof e?"number":"string"},typeMap:{number:Number,string:String},base:null},p=["high-to-low","above-and-below","centered-on","extremes"],d="seconds minutes hours days months years".split(" ");return function(e){function t(t){return t=e.call(this,t)||this,t.endTime=null,t.field=null,t.maxSliderValue=null,t.minSliderValue=null,t.startTime=null,t.type=null,t.units=null,t}r(t,e),o=t,t.prototype.castEndTime=function(e){return"string"==typeof e||"number"==typeof e?e:null},t.prototype.castStartTime=function(e){return"string"==typeof e||"number"==typeof e?e:null},Object.defineProperty(t.prototype,"style",{get:function(){return"color"===this.type?this._get("style"):null},set:function(e){this._set("style",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"theme",{get:function(){return"color"===this.type?this._get("theme")||"high-to-low":null},set:function(e){this._set("theme",e)},enumerable:!0,configurable:!0}),t.prototype.clone=function(){return new o({endTime:this.endTime,field:this.field,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,startTime:this.startTime,style:this.style,theme:this.theme,type:this.type,units:this.units})};var o;return n([a.property({types:c,json:{write:!0}})],t.prototype,"endTime",void 0),n([s.cast("endTime")],t.prototype,"castEndTime",null),n([a.property({type:String,json:{write:!0}})],t.prototype,"field",void 0),n([a.property({type:Number,json:{write:!0}})],t.prototype,"maxSliderValue",void 0),n([a.property({type:Number,json:{write:!0}})],t.prototype,"minSliderValue",void 0),n([a.property({types:c,json:{write:!0}})],t.prototype,"startTime",void 0),n([s.cast("startTime")],t.prototype,"castStartTime",null),n([a.property({type:l.apiValues,value:null,dependsOn:["type"],json:{type:l.jsonValues,read:l.read,write:l.write}})],t.prototype,"style",null),n([a.property({type:p,value:null,dependsOn:["type"],json:{type:p,write:!0}})],t.prototype,"theme",null),n([a.property({type:u.apiValues,json:{type:u.jsonValues,read:u.read,write:u.write}})],t.prototype,"type",void 0),n([a.property({type:d,json:{type:d,write:!0}})],t.prototype,"units",void 0),t=o=n([a.subclass("esri.renderers.support.AuthoringInfoVisualVariable")],t)}(a.declared(i.JSONSupport))})},"esri/tasks/support/colorRamps":function(){define(["require","exports","./AlgorithmicColorRamp","./ColorRamp","./MultipartColorRamp"],function(e,t,r,n,o){Object.defineProperty(t,"__esModule",{value:!0}),t.types={key:"type",base:n,typeMap:{algorithmic:r,multipart:o}},t.fromJSON=function(e){return e&&e.type?"algorithmic"===e.type?r.fromJSON(e):"multipart"===e.type?o.fromJSON(e):null:null}})},"esri/tasks/support/AlgorithmicColorRamp":function(){define("require exports ../../core/tsSupport/decorateHelper ../../core/tsSupport/declareExtendsHelper ../../Color ../../core/lang ../../core/accessorSupport/decorators ../../core/accessorSupport/ensureType ./ColorRamp".split(" "),function(e,t,r,n,o,i,a,s,l){return function(e){function t(t){return t=e.call(this,t)||this,t.algorithm=null,t.fromColor=null,t.toColor=null,t.type="algorithmic",t}n(t,e),l=t,t.prototype.clone=function(){return new l({fromColor:i.clone(this.fromColor),toColor:i.clone(this.toColor),algorithm:this.algorithm})};var l;return r([a.enumeration.serializable()({esriCIELabAlgorithm:"cie-lab",esriHSVAlgorithm:"hsv",esriLabLChAlgorithm:"lab-lch"})],t.prototype,"algorithm",void 0),r([a.property({type:o,json:{type:[s.Integer],write:!0}})],t.prototype,"fromColor",void 0),r([a.property({type:o,json:{type:[s.Integer],write:!0}})],t.prototype,"toColor",void 0),r([a.property({type:["algorithmic"]})],t.prototype,"type",void 0),t=l=r([a.subclass("esri.tasks.support.AlgorithmicColorRamp")],t)}(a.declared(l))})},"esri/tasks/support/ColorRamp":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators".split(" "),function(e,t,r,n,o,i){return function(e){function t(t){return t=e.call(this,t)||this,t.type=null,t}return r(t,e),n([i.property({readOnly:!0,json:{read:!1,write:!0}})],t.prototype,"type",void 0),t=n([i.subclass("esri.tasks.support.ColorRamp")],t)}(i.declared(o.JSONSupport))})},"esri/tasks/support/MultipartColorRamp":function(){define("require exports ../../core/tsSupport/decorateHelper ../../core/tsSupport/declareExtendsHelper ../../core/lang ../../core/accessorSupport/decorators ./AlgorithmicColorRamp ./ColorRamp".split(" "),function(e,t,r,n,o,i,a,s){return function(e){function t(t){return t=e.call(this,t)||this,t.colorRamps=null,t.type="multipart",t}n(t,e),s=t,t.prototype.clone=function(){return new s({colorRamps:o.clone(this.colorRamps)})};var s;return r([i.property({type:[a],json:{write:!0}})],t.prototype,"colorRamps",void 0),r([i.property({type:["multipart"]})],t.prototype,"type",void 0),t=s=r([i.subclass("esri.tasks.support.MultipartColorRamp")],t)}(i.declared(s))})},"esri/renderers/mixins/VisualVariablesMixin":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/tsSupport/generatorHelper ../../core/tsSupport/awaiterHelper ../../core/accessorSupport/decorators ../../layers/support/fieldUtils ../visualVariables/ColorVariable ../visualVariables/OpacityVariable ../visualVariables/RotationVariable ../visualVariables/SizeVariable ../visualVariables/VisualVariable ../visualVariables/VisualVariableFactory".split(" "),function(e,t,r,n,o,i,a,s,l,u,c,p,d,f){Object.defineProperty(t,"__esModule",{value:!0});var h={base:d,key:"type",typeMap:{opacity:u,color:l,rotation:c,size:p}};t.VisualVariablesMixin=function(e){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._vvFactory=new f,t}return r(t,e),Object.defineProperty(t.prototype,"visualVariables",{set:function(e){this._vvFactory.visualVariables=e,this._set("visualVariables",this._vvFactory.visualVariables)},enumerable:!0,configurable:!0}),t.prototype.readVisualVariables=function(e,t,r){return this._vvFactory.readVariables(e,t,r)},t.prototype.writeVisualVariables=function(e,t,r,n){t[r]=this._vvFactory.writeVariables(e,n)},Object.defineProperty(t.prototype,"arcadeRequiredForVisualVariables",{get:function(){if(!this.visualVariables)return!1;for(var e=0,t=this.visualVariables;e<t.length;e++)if(t[e].arcadeRequired)return!0;return!1},enumerable:!0,configurable:!0}),t.prototype.hasVisualVariables=function(e,t){return e?!!this.getVisualVariablesForType(e,t):!!(this.getVisualVariablesForType("size",t)||this.getVisualVariablesForType("color",t)||this.getVisualVariablesForType("opacity",t)||this.getVisualVariablesForType("rotation",t))},t.prototype.getVisualVariablesForType=function(e,t){var r=this.visualVariables;if(r&&(!(r=r.filter(function(r){return r.type===e&&("string"==typeof t?r.target===t:!1!==t||!r.target)}))||0!==r.length))return r},t.prototype.collectVVRequiredFields=function(e,t){return i(this,void 0,void 0,function(){var r,n,i,a;return o(this,function(o){switch(o.label){case 0:r=[],this.visualVariables&&(r=r.concat(this.visualVariables)),n=0,i=r,o.label=1;case 1:return n<i.length?(a=i[n])?(a.field&&s.collectField(e,t,a.field),a.normalizationField&&s.collectField(e,t,a.normalizationField),a.valueExpression?[4,s.collectArcadeFieldNames(e,t,a.valueExpression)]:[3,3]):[3,3]:[3,4];case 2:o.sent(),o.label=3;case 3:return n++,[3,1];case 4:return[2]}})})},n([a.property({types:[h],value:null,json:{write:!0}})],t.prototype,"visualVariables",null),n([a.reader("visualVariables",["visualVariables","rotationType","rotationExpression"])],t.prototype,"readVisualVariables",null),n([a.writer("visualVariables")],t.prototype,"writeVisualVariables",null),t=n([a.subclass("esri.renderers.mixins.VisualVariablesMixin")],t)}(a.declared(e))}})},"esri/renderers/visualVariables/ColorVariable":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ./VisualVariable ./support/ColorStop".split(" "),function(e,t,r,n,o,i,a){return function(e){function t(t){return t=e.call(this,t)||this,t.type="color",t.normalizationField=null,t}r(t,e),i=t,Object.defineProperty(t.prototype,"cache",{get:function(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"stops",{set:function(e){e&&Array.isArray(e)&&(e=e.filter(function(e){return!!e}),e.sort(function(e,t){return e.value-t.value})),this._set("stops",e)},enumerable:!0,configurable:!0}),t.prototype.clone=function(){return new i({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(function(e){return e.clone()}),legendOptions:this.legendOptions&&this.legendOptions.clone()})},t.prototype.getAttributeHash=function(){return this.inherited(arguments)+"-"+this.normalizationField},t.prototype._interpolateData=function(){return this.stops&&this.stops.map(function(e){return e.value||0})};var i;return n([o.property({readOnly:!0,dependsOn:["valueExpression","stops"]})],t.prototype,"cache",null),n([o.property({type:["color"],json:{type:["colorInfo"]}})],t.prototype,"type",void 0),n([o.property({type:String,json:{write:!0}})],t.prototype,"normalizationField",void 0),n([o.property({type:[a],json:{write:!0}})],t.prototype,"stops",null),t=i=n([o.subclass("esri.renderers.visualVariables.ColorVariable")],t)}(o.declared(i))})},"esri/renderers/visualVariables/VisualVariable":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/jsonMap ../../core/JSONSupport ../../core/Logger ../../core/accessorSupport/decorators ../../core/accessorSupport/ensureType ./support/VisualVariableLegendOptions".split(" "),function(e,t,r,n,o,i,a,s,l,u){var c=a.getLogger("esri.renderers.visualVariables.VisualVariable"),p=new o.default({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"});return function(e){function t(t){return t=e.call(this,t)||this,t.index=null,t.type=null,t.field=null,t.valueExpression=null,t.valueExpressionTitle=null,t.legendOptions=null,t}return r(t,e),t.prototype.castField=function(e){return null==e?e:"function"==typeof e?(c.error(".field: field must be a string value"),null):l.ensureString(e)},Object.defineProperty(t.prototype,"arcadeRequired",{get:function(){return!!this.valueExpression},enumerable:!0,configurable:!0}),t.prototype.clone=function(){},t.prototype.getAttributeHash=function(){return this.type+"-"+this.field+"-"+this.valueExpression},n([s.property()],t.prototype,"index",void 0),n([s.property({type:p.apiValues,readOnly:!0,json:{read:p.read,write:p.write}})],t.prototype,"type",void 0),n([s.property({type:String,json:{write:!0}})],t.prototype,"field",void 0),n([s.cast("field")],t.prototype,"castField",null),n([s.property({type:String,json:{write:!0}})],t.prototype,"valueExpression",void 0),n([s.property({type:String,json:{write:!0}})],t.prototype,"valueExpressionTitle",void 0),n([s.property({readOnly:!0,dependsOn:["valueExpression"]})],t.prototype,"arcadeRequired",null),n([s.property({type:u,json:{write:!0}})],t.prototype,"legendOptions",void 0),t=n([s.subclass("esri.renderers.visualVariables.VisualVariable")],t)}(s.declared(i.JSONSupport))})},"esri/renderers/visualVariables/support/VisualVariableLegendOptions":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/accessorSupport/decorators ../../support/LegendOptions".split(" "),function(e,t,r,n,o,i){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.showLegend=null,t}r(t,e),i=t,t.prototype.clone=function(){return new i({title:this.title,showLegend:this.showLegend})};var i;return n([o.property({type:Boolean,json:{write:!0}})],t.prototype,"showLegend",void 0),t=i=n([o.subclass("esri.renderers.visualVariables.support.VisualVariableLegendOptions")],t)}(o.declared(i.default))})},"esri/renderers/support/LegendOptions":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators".split(" "),function(e,t,r,n,o,i){Object.defineProperty(t,"__esModule",{value:!0}),e=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.title=null,t}r(t,e),o=t,t.prototype.clone=function(){return new o({title:this.title})};var o;return n([i.property({type:String,json:{write:!0}})],t.prototype,"title",void 0),t=o=n([i.subclass("esri.renderers.support.LegendOptions")],t)}(i.declared(o.JSONSupport)),t.LegendOptions=e,t.default=e})},"esri/renderers/visualVariables/OpacityVariable":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ./VisualVariable ./support/OpacityStop".split(" "),function(e,t,r,n,o,i,a){return function(e){function t(t){return t=e.call(this,t)||this,t.type="opacity",t.normalizationField=null,t}r(t,e),i=t,Object.defineProperty(t.prototype,"cache",{get:function(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"stops",{set:function(e){e&&Array.isArray(e)&&(e=e.filter(function(e){return!!e}),e.sort(function(e,t){return e.value-t.value})),this._set("stops",e)},enumerable:!0,configurable:!0}),t.prototype.clone=function(){return new i({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(function(e){return e.clone()}),legendOptions:this.legendOptions&&this.legendOptions.clone()})},t.prototype.getAttributeHash=function(){return this.inherited(arguments)+"-"+this.normalizationField},t.prototype._interpolateData=function(){return this.stops&&this.stops.map(function(e){return e.value||0})};var i;return n([o.property({readOnly:!0,dependsOn:["valueExpression","stops"]})],t.prototype,"cache",null),n([o.property({type:["opacity"],json:{type:["transparencyInfo"]}})],t.prototype,"type",void 0),n([o.property({type:String,json:{write:!0}})],t.prototype,"normalizationField",void 0),n([o.property({type:[a],json:{write:!0}})],t.prototype,"stops",null),t=i=n([o.subclass("esri.renderers.visualVariables.OpacityVariable")],t)}(o.declared(i))})},"esri/renderers/visualVariables/support/OpacityStop":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/JSONSupport ../../../core/accessorSupport/decorators ../../../core/accessorSupport/ensureType ../../../webdoc/support/opacityUtils".split(" "),function(e,t,r,n,o,i,a,s){return function(e){function t(t){return t=e.call(this,t)||this,t.label=null,t.opacity=null,t.value=null,t}r(t,e),o=t,t.prototype.readOpacity=function(e,t){return s.transparencyToOpacity(t.transparency)},t.prototype.writeOpacity=function(e,t,r){t[r]=s.opacityToTransparency(e)},t.prototype.clone=function(){return new o({label:this.label,opacity:this.opacity,value:this.value})};var o;return n([i.property({type:String,json:{write:!0}})],t.prototype,"label",void 0),n([i.property({type:Number,json:{type:a.Integer,write:{target:"transparency"}}})],t.prototype,"opacity",void 0),n([i.reader("opacity",["transparency"])],t.prototype,"readOpacity",null),n([i.writer("opacity")],t.prototype,"writeOpacity",null),n([i.property({type:Number,json:{write:!0}})],t.prototype,"value",void 0),t=o=n([i.subclass("esri.renderers.visualVariables.support.OpacityStop")],t)}(i.declared(o.JSONSupport))})},"esri/renderers/visualVariables/RotationVariable":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Error ../../core/accessorSupport/decorators ./VisualVariable".split(" "),function(e,t,r,n,o,i,a){return function(e){function t(t){return t=e.call(this,t)||this,t.axis=null,t.type="rotation",t.rotationType="geographic",t.valueExpressionTitle=null,t}r(t,e),a=t,Object.defineProperty(t.prototype,"cache",{get:function(){return{hasExpression:!!this.valueExpression,compiledFunc:null}},enumerable:!0,configurable:!0}),t.prototype.writeValueExpressionTitleWebScene=function(e,t,r,n){n&&n.messages&&n.messages.push(new o("property:unsupported",this.type+"VisualVariable.valueExpressionTitle is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:"visualVariables["+this.index+"].valueExpressionTitle",context:n}))},t.prototype.clone=function(){return new a({axis:this.axis,rotationType:this.rotationType,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,legendOptions:this.legendOptions&&this.legendOptions.clone()})};var a;return n([i.property({readOnly:!0,dependsOn:["valueExpression"]})],t.prototype,"cache",null),n([i.property({type:["heading","tilt","roll"],json:{origins:{"web-scene":{default:"heading",write:!0}}}})],t.prototype,"axis",void 0),n([i.property({type:["rotation"],json:{type:["rotationInfo"]}})],t.prototype,"type",void 0),n([i.property({type:["geographic","arithmetic"],json:{write:!0,origins:{"web-document":{write:!0,default:"geographic"}}}})],t.prototype,"rotationType",void 0),n([i.property({type:String,json:{write:!0}})],t.prototype,"valueExpressionTitle",void 0),n([i.writer("web-scene","valueExpressionTitle")],t.prototype,"writeValueExpressionTitleWebScene",null),t=a=n([i.subclass("esri.renderers.visualVariables.RotationVariable")],t)}(i.declared(a))})},"esri/renderers/visualVariables/SizeVariable":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/tsSupport/assignHelper ../../core/Error ../../core/jsonMap ../../core/Logger ../../core/screenUtils ../../core/accessorSupport/decorators ./VisualVariable ./support/SizeStop ./support/SizeVariableLegendOptions ./support/sizeVariableUtils".split(" "),function(e,t,r,n,o,i,a,s,l,u,c,p,d,f){function h(e){if(null!=e){if("string"==typeof e||"number"==typeof e)return l.toPt(e);if("size"===e.type)return f.isSizeVariable(e)?e:(e=o({},e),delete e.type,new w(e))}}function y(e,t,r){return"object"!=typeof e?e:(t=new w,t.read(e,r),t)}var m=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i,g=s.getLogger("esri.renderers.visualVariables.SizeVariable"),v=new a.default({width:"width",depth:"depth",height:"height",widthAndDepth:"width-and-depth",all:"all"}),b=new a.default({unknown:"unknown",inch:"inches",foot:"feet",yard:"yards",mile:"miles","nautical-mile":"nautical-miles",millimeter:"millimeters",centimeter:"centimeters",decimeter:"decimeters",meter:"meters",kilometer:"kilometers","decimal-degree":"decimal-degrees"}),w=function(e){function t(t){return t=e.call(this,t)||this,t.axis=null,t.legendOptions=null,t.normalizationField=null,t.scaleBy=null,t.target=null,t.type="size",t.useSymbolValue=null,t.valueExpression=null,t.valueRepresentation=null,t.valueUnit=null,t}r(t,e),o=t,Object.defineProperty(t.prototype,"cache",{get:function(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null,isScaleDriven:m.test(this.valueExpression)}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"expression",{set:function(e){g.warn("'expression' is deprecated since version 4.2. Use 'valueExpression' instead. The only supported expression is 'view.scale'."),"view.scale"===e?(this.valueExpression="$view.scale",this._set("expression",e)):this._set("expression",null)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"index",{set:function(e){f.isSizeVariable(this.maxSize)&&(this.maxSize.index="visualVariables["+e+"].maxSize"),f.isSizeVariable(this.minSize)&&(this.minSize.index="visualVariables["+e+"].minSize"),this._set("index",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inputValueType",{get:function(){return f.getInputValueType(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxDataValue",{set:function(e){e&&this.stops&&(g.warn("cannot set maxDataValue when stops is not null."),e=null),this._set("maxDataValue",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxSize",{set:function(e){e&&this.stops&&(g.warn("cannot set maxSize when stops is not null."),e=null),this._set("maxSize",e)},enumerable:!0,configurable:!0}),t.prototype.castMaxSize=function(e){return h(e)},t.prototype.readMaxSize=function(e,t,r){return y(e,t,r)},Object.defineProperty(t.prototype,"minDataValue",{set:function(e){e&&this.stops&&(g.warn("cannot set minDataValue when stops is not null."),e=null),this._set("minDataValue",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"minSize",{set:function(e){e&&this.stops&&(g.warn("cannot set minSize when stops is not null."),e=null),this._set("minSize",e)},enumerable:!0,configurable:!0}),t.prototype.castMinSize=function(e){return h(e)},t.prototype.readMinSize=function(e,t,r){return y(e,t,r)},Object.defineProperty(t.prototype,"arcadeRequired",{get:function(){return!!this.valueExpression||(this.minSize&&"object"==typeof this.minSize&&this.minSize.arcadeRequired||this.maxSize&&"object"==typeof this.maxSize&&this.maxSize.arcadeRequired)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"stops",{set:function(e){null==this.minDataValue&&null==this.maxDataValue&&null==this.minSize&&null==this.maxSize?e&&Array.isArray(e)&&(e=e.filter(function(e){return!!e}),e.sort(function(e,t){return e.value-t.value})):e&&(g.warn("cannot set stops when one of minDataValue, maxDataValue, minSize or maxSize is not null."),e=null),this._set("stops",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"transformationType",{get:function(){return f.getTransformationType(this,this.inputValueType)},enumerable:!0,configurable:!0}),t.prototype.readValueExpression=function(e,t){return e||t.expression&&"$view.scale"},t.prototype.writeValueExpressionWebScene=function(e,t,r,n){"$view.scale"===e?n&&n.messages&&(e=this.index,n.messages.push(new i("property:unsupported",this.type+"VisualVariable.valueExpression = '$view.scale' is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:("string"==typeof e?e:"visualVariables["+e+"]")+".valueExpression",context:n}))):t[r]=e},t.prototype.readValueUnit=function(e){return e?b.read(e):null},t.prototype.clone=function(){return new o({axis:this.axis,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,maxDataValue:this.maxDataValue,maxSize:f.isSizeVariable(this.maxSize)?this.maxSize.clone():this.maxSize,minDataValue:this.minDataValue,minSize:f.isSizeVariable(this.minSize)?this.minSize.clone():this.minSize,normalizationField:this.normalizationField,stops:this.stops&&this.stops.map(function(e){return e.clone()}),target:this.target,useSymbolValue:this.useSymbolValue,valueRepresentation:this.valueRepresentation,valueUnit:this.valueUnit,legendOptions:this.legendOptions&&this.legendOptions.clone()})},t.prototype.flipSizes=function(){if("clamped-linear"===this.transformationType){var e=this.minSize;return this.minSize=this.maxSize,this.maxSize=e,this}if("stops"===this.transformationType)for(var e=this.stops,t=e.map(function(e){return e.size}).reverse(),r=e.length,n=0;n<r;n++)e[n].size=t[n];return this},t.prototype.getAttributeHash=function(){return this.inherited(arguments)+"-"+this.target+"-"+this.normalizationField},t.prototype._interpolateData=function(){return this.stops&&this.stops.map(function(e){return e.value||0})};var o;return n([u.property({readOnly:!0,dependsOn:["valueExpression","stops"]})],t.prototype,"cache",null),n([u.property({type:v.apiValues,json:{type:v.jsonValues,origins:{"web-map":{read:!1}},read:v.read,write:v.write}})],t.prototype,"axis",void 0),n([u.property({type:String,value:null,json:{read:!1}})],t.prototype,"expression",null),n([u.property()],t.prototype,"index",null),n([u.property({type:String,readOnly:!0,dependsOn:["field","valueExpression"]})],t.prototype,"inputValueType",null),n([u.property({type:d,json:{write:!0}})],t.prototype,"legendOptions",void 0),n([u.property({type:Number,value:null,json:{write:!0}})],t.prototype,"maxDataValue",null),n([u.property({type:Number,value:null,json:{write:!0}})],t.prototype,"maxSize",null),n([u.cast("maxSize")],t.prototype,"castMaxSize",null),n([u.reader("maxSize")],t.prototype,"readMaxSize",null),n([u.property({type:Number,value:null,json:{write:!0}})],t.prototype,"minDataValue",null),n([u.property({type:Number,value:null,json:{write:!0}})],t.prototype,"minSize",null),n([u.cast("minSize")],t.prototype,"castMinSize",null),n([u.reader("minSize")],t.prototype,"readMinSize",null),n([u.property({type:String,json:{write:!0}})],t.prototype,"normalizationField",void 0),n([u.property({readOnly:!0,dependsOn:["valueExpression","minSize.arcadeRequired","maxSize.arcadeRequired"]})],t.prototype,"arcadeRequired",null),n([u.property({type:String})],t.prototype,"scaleBy",void 0),n([u.property({type:[p],value:null,json:{write:!0}})],t.prototype,"stops",null),n([u.property({type:["outline"],json:{write:!0}})],t.prototype,"target",void 0),n([u.property({type:String,readOnly:!0,dependsOn:"minDataValue maxDataValue minSize maxSize valueUnit inputValueType stops".split(" ")})],t.prototype,"transformationType",null),n([u.property({type:["size"],json:{type:["sizeInfo"]}})],t.prototype,"type",void 0),n([u.property({type:Boolean,json:{write:!0,origins:{"web-map":{read:!1}}}})],t.prototype,"useSymbolValue",void 0),n([u.property({type:String,json:{write:!0}})],t.prototype,"valueExpression",void 0),n([u.reader("valueExpression",["valueExpression","expression"])],t.prototype,"readValueExpression",null),n([u.writer("web-scene","valueExpression")],t.prototype,"writeValueExpressionWebScene",null),n([u.property({type:["radius","diameter","area","width","distance"],json:{write:!0}})],t.prototype,"valueRepresentation",void 0),n([u.property({type:b.apiValues,json:{write:b.write,origins:{"web-map":{read:!1},"web-scene":{write:!0}}}})],t.prototype,"valueUnit",void 0),n([u.reader("valueUnit")],t.prototype,"readValueUnit",null),t=o=n([u.subclass("esri.renderers.visualVariables.SizeVariable")],t)}(u.declared(c));return w})},"esri/renderers/visualVariables/support/SizeStop":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/JSONSupport ../../../core/screenUtils ../../../core/accessorSupport/decorators".split(" "),function(e,t,r,n,o,i,a){return function(e){function t(t){return t=e.call(this,t)||this,t.label=null,t.size=null,t.value=null,t}r(t,e),o=t,t.prototype.clone=function(){return new o({label:this.label,size:this.size,value:this.value})};var o;return n([a.property({type:String,json:{write:!0}})],t.prototype,"label",void 0),n([a.property({type:Number,cast:i.toPt,json:{write:!0}})],t.prototype,"size",void 0),n([a.property({type:Number,json:{write:!0}})],t.prototype,"value",void 0),t=o=n([a.subclass("esri.renderers.visualVariables.support.SizeStop")],t)}(a.declared(o.JSONSupport))})},"esri/renderers/visualVariables/support/SizeVariableLegendOptions":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/accessorSupport/decorators ./VisualVariableLegendOptions".split(" "),function(e,t,r,n,o,i){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.customValues=null,t}r(t,e),i=t,t.prototype.clone=function(){return new i({title:this.title,showLegend:this.showLegend,customValues:this.customValues&&this.customValues.slice(0)})};var i;return n([o.property({type:[Number],json:{write:!0}})],t.prototype,"customValues",void 0),t=i=n([o.subclass("esri.renderers.visualVariables.support.SizeVariableLegendOptions")],t)}(o.declared(i))})},"esri/renderers/visualVariables/support/sizeVariableUtils":function(){define(["require","exports"],function(e,t){function r(e){return e.valueExpression?"expression":e.field&&"string"==typeof e.field?"field":"unknown"}Object.defineProperty(t,"__esModule",{value:!0}),t.isSizeVariable=function(e){return e&&"esri.renderers.visualVariables.SizeVariable"===e.declaredClass},t.isValidNumber=function(e){return null!=e&&!isNaN(e)&&isFinite(e)},t.getInputValueType=r,t.getTransformationType=function(e,t){return"unknown"===(t||r(e))?"constant":e.stops?"stops":null!=e.minSize&&null!=e.maxSize&&null!=e.minDataValue&&null!=e.maxDataValue?"clamped-linear":"unknown"===(e.valueUnit||"unknown")?null!=e.minSize&&null!=e.minDataValue?e.minSize&&e.minDataValue?"proportional":"additive":"identity":"real-world-size"}})},"esri/renderers/visualVariables/VisualVariableFactory":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/jsonMap ../../core/Logger ../../core/Warning ../../core/accessorSupport/decorators ./ColorVariable ./OpacityVariable ./RotationVariable ./SizeVariable".split(" "),function(e,t,r,n,o,i,a,s,l,u,c,p,d){var f=a.getLogger("esri.renderers.visualVariables.VisualVariableFactory"),h={color:u,size:d,opacity:c,rotation:p},y=new i.default({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"}),m=/^\[([^\]]+)\]$/i;return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.colorVariables=null,t.opacityVariables=null,t.rotationVariables=null,t.sizeVariables=null,t}return r(t,e),Object.defineProperty(t.prototype,"visualVariables",{set:function(e){if(this._resetVariables(),(e=e&&e.filter(function(e){return!!e}))&&e.length){for(var t=0,r=e;t<r.length;t++){var n=r[t];switch(n.type){case"color":this.colorVariables.push(n);break;case"opacity":this.opacityVariables.push(n);break;case"rotation":this.rotationVariables.push(n);break;case"size":this.sizeVariables.push(n)}}for(this.sizeVariables.length&&this.sizeVariables.some(function(e){return!!e.target})&&e.sort(function(e,t){return e.target===t.target?0:e.target?1:-1}),t=0;t<e.length;t++)n=e[t],n.index=t}this._set("visualVariables",e)},enumerable:!0,configurable:!0}),t.prototype.readVariables=function(e,t,r){var n=t.rotationExpression;if(t=t.rotationType,(n=(n=n&&n.match(m))&&n[1])&&(e||(e=[]),e.push({type:"rotationInfo",rotationType:t,field:n})),e)return e.map(function(e){var t=y.read(e.type),n=h[t];return n||(f.warn("Unknown variable type: "+t),r&&r.messages&&r.messages.push(new s("visual-variable:unsupported","visualVariable of type '"+t+"' is not supported",{definition:e,context:r}))),t=new n,t.read(e,r),t})},t.prototype.writeVariables=function(e,t){for(var r=[],n=0;n<e.length;n++){var o=e[n].toJSON(t);o&&r.push(o)}return r},t.prototype._resetVariables=function(){this.colorVariables=[],this.opacityVariables=[],this.rotationVariables=[],this.sizeVariables=[]},n([l.property()],t.prototype,"visualVariables",null),t=n([l.subclass("esri.renderers.visualVariables.VisualVariableFactory")],t)}(l.declared(o))})},"esri/renderers/support/ClassBreakInfo":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../symbols ../../core/JSONSupport ../../core/accessorSupport/decorators ../../symbols/support/jsonUtils".split(" "),function(e,t,r,n,o,i,a,s){Object.defineProperty(t,"__esModule",{value:!0}),e=function(e){function t(t){return t=e.call(this,t)||this,t.description=null,t.label=null,t.minValue=null,t.maxValue=0,t.symbol=null,t}r(t,e),i=t,t.prototype.clone=function(){return new i({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,symbol:this.symbol?this.symbol.clone():null})},t.prototype.getMeshHash=function(){var e=JSON.stringify(this.symbol);return this.minValue+"."+this.maxValue+"."+e};var i;return n([a.property({type:String,json:{write:!0}})],t.prototype,"description",void 0),n([a.property({type:String,json:{write:!0}})],t.prototype,"label",void 0),n([a.property({type:Number,json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],t.prototype,"minValue",void 0),n([a.property({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],t.prototype,"maxValue",void 0),n([a.property({types:o.symbolTypesRenderer,json:{origins:{"web-scene":{types:o.symbolTypesRenderer3D,read:s.read,write:s.writeTarget}},read:s.read,write:s.writeTarget}})],t.prototype,"symbol",void 0),t=i=n([a.subclass("esri.renderers.support.ClassBreakInfo")],t)}(a.declared(i.JSONSupport)),t.ClassBreakInfo=e,t.default=e})},"esri/renderers/DictionaryRenderer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/assignHelper ../core/tsSupport/generatorHelper ../core/tsSupport/awaiterHelper ../Color ../request ../core/Error ../core/iteratorUtils ../core/lang ../core/Logger ../core/LRUCache ../core/maybe ../core/promiseUtils ../core/accessorSupport/decorators ../layers/support/fieldUtils ./Renderer ./mixins/VisualVariablesMixin ../support/arcadeOnDemand ../symbols/CIMSymbol".split(" "),function(e,t,r,n,o,i,a,s,l,u,c,p,d,f,h,y,m,g,v,b,w,S){var _=d.getLogger("esri.renderers.DictionaryRenderer");return function(e){function t(t){return t=e.call(this,t)||this,t._ongoingRequests=new Map,t._symbolCache=new f(100),t.config=null,t.description=null,t.fieldMap=null,t.label=null,t.scaleExpression=null,t.url=null,t.type="dictionary",t}r(t,e),d=t,t.prototype.clone=function(){return new d({config:p.clone(this.config),scaleExpression:p.clone(this.scaleExpression),description:p.clone(this.description),fieldMap:p.clone(this.fieldMap),label:p.clone(this.label),url:p.clone(this.url),visualVariables:p.clone(this.visualVariables)})},t.prototype.collectRequiredFields=function(e,t){return a(this,void 0,void 0,function(){var r,n;return i(this,function(o){switch(o.label){case 0:return[4,this.collectVVRequiredFields(e,t)];case 1:return o.sent(),this.scaleExpression?[4,g.collectArcadeFieldNames(e,t,this.scaleExpression)]:[3,3];case 2:o.sent(),o.label=3;case 3:r=t.map(function(e){return e.name});for(n in this.fieldMap)0>r.indexOf(this.fieldMap[n])||e.add(this.fieldMap[n]);return[2]}})})},Object.defineProperty(t.prototype,"arcadeRequired",{get:function(){return!0},enumerable:!0,configurable:!0}),t.prototype.fetchResources=function(e){return a(this,void 0,void 0,function(){var t,r,n,a,s,p,d,f,m,g,v,b,S,x,O,C,M;return i(this,function(i){switch(i.label){case 0:return this.url?(t=h.isSome(e)?e.abortOptions:null,r=l(this.url+"/resources/styles/dictionary-info.json",o({responseType:"json",query:{f:"json"}},t)),[4,y.all([r,w.loadArcade()])]):(_.error("no valid URL!"),[2,void 0]);case 1:if(!(n=i.sent()[0].data))throw new u("esri.renderers.DictionaryRenderer","Bad dictionary data!");if(a=n.expression,s=n.authoringInfo,this._refSymbolUrlTemplate=this.url+"/"+n.cimRefTemplateUrl,this._itemNames=c.createSetFromValues(n.itemsNames),this._symbolAttributes=s.symbol,p={},this.config)for(f in d=this.config)p[f]=d[f];for(m=0,g=s.configuration;m<g.length;m++)f=g[m],p.hasOwnProperty(f.name)||(p[f.name]=f.value);if(v=[],h.isSome(e)&&e.fields)for(b=function(t){var r=S.fieldMap[t],n=e.fields.filter(function(e){return e.name===r});0<n.length&&v.push(o({},n[0],{name:t}))},S=this,x=0,O=this._symbolAttributes;x<O.length;x++)f=O[x],b(f);return[4,w.createDictionaryExpression(a,h.isSome(e)?e.spatialReference:null,v,p)];case 2:return C=i.sent(),M={scale:0},[2,function(e,t){return e=C.repurposeFeature({geometry:null,attributes:e}),M.scale=h.isSome(t)?t.scale:void 0,C.evaluate({$feature:e,$view:M})}]}})})},t.prototype.getSymbol=function(){return null},t.prototype.getSymbolAsync=function(e,t){return a(this,void 0,void 0,function(){var r,n,o,a,l,u,c,p,d,f,h,y,m,g,v,b,w,S,_,x,O,C,M,T,P;return i(this,function(i){switch(i.label){case 0:return this._dictionaryPromise||(this._dictionaryPromise=this.fetchResources(t)),[4,this._dictionaryPromise];case 1:for(r=i.sent(),n={},o=0,a=this._symbolAttributes;o<a.length;o++)l=a[o],(u=this.fieldMap[l])&&null!==e.attributes[u]&&void 0!==e.attributes[u]?(c=""+e.attributes[u],n[l]=c):n[l]="";if(!(p=r(n,t))||"string"!=typeof p)return[2,null];for(d=p.split(";"),f=[],h=[],y=0,m=d;y<m.length;y++)if((g=m[y])&&0!==g.length)if(-1!==g.indexOf("po:"))v=g.substr(3).split("|"),3===v.length&&(b=v[0],w=v[1],S=v[2],"DashTemplate"===w?S=S.split(" ").map(function(e){return Number(e)}):"Color"===w?(_=new s(S).toRgba(),S=[_[0],_[1],_[2],255*_[3]]):S=Number(S),h.push({primitiveName:b,propertyName:w,value:S}));else if(-1!==g.indexOf("|"))for(x=0,O=g.split("|");x<O.length;x++)C=O[x],this._itemNames.has(C)&&f.push(C);else this._itemNames.has(g)&&f.push(g);return M=f.join(";")+h.map(function(e){return e.primitiveName+";"+e.propertyName+";"+e.value}),(T=this._symbolCache.get(M))?[2,T]:(P=this._cimPartsToCIMSymbol(f,h,t),this._symbolCache.put(M,P,1),[2,P])}})})},t.prototype.getSymbols=function(){return[]},t.prototype.getAttributeHash=function(){return this.visualVariables&&this.visualVariables.reduce(function(e,t){return e+t.getAttributeHash()},"")},t.prototype.getMeshHash=function(){return this.url+"-"+JSON.stringify(this.fieldMap)},t.prototype._getSymbolPart=function(e,t){return a(this,void 0,void 0,function(){var r,n,a;return i(this,function(i){switch(i.label){case 0:return this._ongoingRequests.has(e)?[2,this._ongoingRequests.get(e).then(function(e){return e.data})]:(r=this._refSymbolUrlTemplate.replace(/\{itemName\}/gi,e),n=l(r,o({responseType:"json",query:{f:"json"}},t)),this._ongoingRequests.set(e,n),[4,n]);case 1:return a=i.sent(),[2,a.data]}})})},t.prototype._combineSymbolParts=function(e,t){var r;if(!e||0===e.length)return null;if(1===e.length)return{type:"CIMSymbolReference",symbol:e[0],primitiveOverrides:t};var n=o({},e[0]);n.symbolLayers=[];for(var i=0;i<e.length;i++){var a=e[i];(r=n.symbolLayers).unshift.apply(r,a.symbolLayers)}return{type:"CIMSymbolReference",symbol:n,primitiveOverrides:t}},t.prototype._cimPartsToCIMSymbol=function(e,t,r){return a(this,void 0,void 0,function(){var n,o,a;return i(this,function(i){switch(i.label){case 0:for(n=Array(e.length),o=0;o<e.length;o++)n[o]=this._getSymbolPart(e[o],r);return[4,y.eachAlwaysValues(n)];case 1:return a=i.sent(),[2,new S({data:this._combineSymbolParts(a,t)})]}})})};var d;return n([m.property({type:Object,json:{write:!0}})],t.prototype,"config",void 0),n([m.property({type:String,json:{write:!0}})],t.prototype,"description",void 0),n([m.property({type:Object,json:{write:!0}})],t.prototype,"fieldMap",void 0),n([m.property({type:String,json:{write:!0}})],t.prototype,"label",void 0),n([m.property({type:String,json:{write:!0}})],t.prototype,"scaleExpression",void 0),n([m.property({type:String,json:{write:!0}})],t.prototype,"url",void 0),t=d=n([m.subclass("esri.renderers.DictionaryRenderer")],t)}(m.declared(b.VisualVariablesMixin(v)))})},"esri/core/LRUCache":function(){define(["require","exports","./MemCache"],function(e,t,r){return function(){function e(e,t){this._storage=new r.MemCacheStorage,this._storage.maxSize=e,t&&this._storage.registerRemoveFunc("",t)}return e.prototype.put=function(e,t,r){this._storage.put(e,t,r,1)},e.prototype.pop=function(e){return this._storage.pop(e)},e.prototype.get=function(e){return this._storage.get(e)},e.prototype.clear=function(){this._storage.clearAll()},e.prototype.destroy=function(){this._storage.clearAll()},Object.defineProperty(e.prototype,"maxSize",{get:function(){return this._storage.maxSize},set:function(e){this._storage.maxSize=e},enumerable:!0,configurable:!0}),e}()})},"esri/core/MemCache":function(){define(["require","exports","./iteratorUtils","./PooledArray","./string"],function(e,t,r,n,o){Object.defineProperty(t,"__esModule",{value:!0}),t.MIN_PRIORITY=-3,e=function(){function e(e,t,r){this._namespace=e,this._storage=t,this._removeFunc=!1,this._miss=this._hit=0,this._storage.register(this),this._namespace+=":",r&&(this._storage.registerRemoveFunc(this._namespace,r),this._removeFunc=!0)}return Object.defineProperty(e.prototype,"namespace",{get:function(){return this._namespace.slice(0,-1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hitRate",{get:function(){return this._hit/(this._hit+this._miss)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._storage.size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxSize",{get:function(){return this._storage.maxSize},enumerable:!0,configurable:!0}),e.prototype.resetHitRate=function(){this._hit=this._miss=0},e.prototype.destroy=function(){this._storage.clear(this._namespace),this._removeFunc&&this._storage.deregisterRemoveFunc(this._namespace),this._storage.deregister(this)},e.prototype.put=function(e,t,r,n){void 0===n&&(n=0),this._storage.put(this._namespace+e,t,r,n)},e.prototype.get=function(e){return e=this._storage.get(this._namespace+e),void 0===e?++this._miss:++this._hit,e},e.prototype.pop=function(e){return e=this._storage.pop(this._namespace+e),void 0===e?++this._miss:++this._hit,e},e.prototype.updateSize=function(e,t,r){this._storage.updateSize(this._namespace+e,t,r)},e.prototype.clear=function(){this._storage.clear(this._namespace)},e.prototype.clearAll=function(){this._storage.clearAll()},e.prototype.getStats=function(){return this._storage.getStats()},e.prototype.resetStats=function(){this._storage.resetStats()},e}(),t.MemCache=e,e=function(){function e(e){void 0===e&&(e=10485760),this._maxSize=e,this._db=new Map,this._miss=this._hit=this._size=0,this._removeFuncs=[],this._users=new n}return e.prototype.register=function(e){this._users.push(e)},e.prototype.deregister=function(e){this._users.removeUnordered(e)},e.prototype.registerRemoveFunc=function(e,t){this._removeFuncs.push([e,t])},e.prototype.deregisterRemoveFunc=function(e){this._removeFuncs=this._removeFuncs.filter(function(t){return t[0]!==e})},Object.defineProperty(e.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxSize",{get:function(){return this._maxSize},set:function(e){this._maxSize=Math.max(e,0),this._checkSizeLimit()},enumerable:!0,configurable:!0}),e.prototype.put=function(e,r,n,o){var i=this._db.get(e);i&&(this._size-=i.size,this._db.delete(e),i.entry!==r&&this._notifyRemoved(e,i.entry)),n>this._maxSize?this._notifyRemoved(e,r):void 0===r?console.warn("Refusing to cache undefined entry "):!n||0>n?console.warn("Refusing to cache entry with invalid size "+n):(o=1+Math.max(o,t.MIN_PRIORITY)-t.MIN_PRIORITY,this._db.set(e,{entry:r,size:n,lifetime:o,lives:o}),this._size+=n,this._checkSizeLimit())},e.prototype.updateSize=function(e,t,r){var n=this._db.get(e);n&&n.entry===t&&(this._size-=n.size,r>this._maxSize?this._notifyRemoved(e,t):(n.size=r,this._size+=r,this._checkSizeLimit()))},e.prototype.pop=function(e){var t=this._db.get(e);if(t)return this._size-=t.size,this._db.delete(e),++this._hit,t.entry;++this._miss},e.prototype.get=function(e){var t=this._db.get(e);if(void 0!==t)return this._db.delete(e),t.lives=t.lifetime,this._db.set(e,t),++this._hit,t.entry;++this._miss},e.prototype.getStats=function(){var e=this,r={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},n={},i=[];this._db.forEach(function(t,r){var a=t.lifetime;i[a]=(i[a]||0)+t.size,e._users.forEach(function(e){e=e.namespace,o.startsWith(r,e)&&(n[e]=(n[e]||0)+t.size)})});var a={};this._users.forEach(function(e){var t=e.namespace;!isNaN(e.hitRate)&&0<e.hitRate?(n[t]=n[t]||0,a[t]=Math.round(100*e.hitRate)+"%"):a[t]="0%"});var s=Object.keys(n);for(s.forEach(function(t){return n[t]=n[t]/e._size*100}),s.sort(function(e,t){return n[t]-n[e]}),s.forEach(function(e){return r[e]=Math.round(n[e])+"% / "+a[e]}),s=i.length-1;0<=s;--s){var l=i[s];l&&(r["Priority "+(s+t.MIN_PRIORITY-1)]=Math.round(l/this.size*100)+"%")}return r},e.prototype.resetStats=function(){this._hit=this._miss=0,this._users.forEach(function(e){return e.resetHitRate()})},e.prototype.clear=function(e){var t=this;this._db.forEach(function(r,n){o.startsWith(n,e)&&(t._size-=r.size,t._db.delete(n),t._notifyRemoved(n,r.entry))})},e.prototype.clearAll=function(){var e=this;this._db.forEach(function(t,r){e._notifyRemoved(r,t.entry)}),this._size=0,this._db.clear()},e.prototype._getHitRate=function(){return this._hit/(this._hit+this._miss)},e.prototype._notifyRemoved=function(e,t){this._removeFuncs.forEach(function(r){o.startsWith(e,r[0])&&r[1](t)})},e.prototype._checkSizeLimit=function(){var e=this;this._size<=this._maxSize||r.someMap(this._db,function(t,r){return e._db.delete(r),1>=t.lives?(e._size-=t.size,e._notifyRemoved(r,t.entry)):(--t.lives,e._db.set(r,t)),e._size<=.9*e.maxSize})},e}(),t.MemCacheStorage=e})},"esri/renderers/DotDensityRenderer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/assignHelper ../core/tsSupport/generatorHelper ../core/tsSupport/awaiterHelper ../Color ../core/lang ../core/accessorSupport/decorators ../layers/support/fieldUtils ./Renderer ./mixins/VisualVariablesMixin ./support/AttributeColorInfo ./support/DotDensityLegendOptions ../symbols/SimpleFillSymbol ../symbols/SimpleLineSymbol".split(" "),function(e,t,r,n,o,i,a,s,l,u,c,p,d,f,h,y,m){return function(e){function t(t){return t=e.call(this,t)||this,t.attributes=null,t.backgroundColor=new s([0,0,0,0]),t.blendDots=!0,t.dotBlendingEnabled=!0,t.dotShape="square",t.dotSize=1,t.legendOptions=null,t.outline=new m,t.dotValue=null,t.referenceDotValue=null,t.referenceScale=null,t.seed=1,t.type="dot-density",t}r(t,e),o=t,t.prototype.calculateDotValue=function(e){return null==this.referenceScale?this.dotValue:(e=e/this.referenceScale*this.dotValue,1>e?1:e)},t.prototype.getSymbol=function(){return new y({outline:this.outline})},t.prototype.getSymbolAsync=function(){return a(this,void 0,void 0,function(){return i(this,function(e){return[2,this.getSymbol()]})})},t.prototype.getSymbols=function(){return[this.getSymbol()]},t.prototype.getAttributeHash=function(){return this.attributes&&this.attributes.reduce(function(e,t){return e+t.getAttributeHash()},"")},t.prototype.getMeshHash=function(){return JSON.stringify(this.outline)},t.prototype.clone=function(){return new o({attributes:l.clone(this.attributes),backgroundColor:l.clone(this.backgroundColor),dotBlendingEnabled:l.clone(this.dotBlendingEnabled),dotShape:l.clone(this.dotShape),dotSize:l.clone(this.dotSize),dotValue:l.clone(this.dotValue),legendOptions:l.clone(this.legendOptions),outline:l.clone(this.outline),referenceScale:l.clone(this.referenceScale),visualVariables:l.clone(this.visualVariables),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})},t.prototype.getControllerHash=function(){return this.attributes.map(function(e){return e.field||e.valueExpression||""})+"-"+(this.outline&&JSON.stringify(this.outline.toJSON())||"")},t.prototype.collectRequiredFields=function(e,t){return a(this,void 0,void 0,function(){var r,n,o;return i(this,function(i){switch(i.label){case 0:return[4,this.collectVVRequiredFields(e,t)];case 1:i.sent(),r=0,n=this.attributes,i.label=2;case 2:return r<n.length?(o=n[r],o.valueExpression?[4,c.collectArcadeFieldNames(e,t,o.valueExpression)]:[3,4]):[3,6];case 3:i.sent(),i.label=4;case 4:o.field&&e.add(o.field),i.label=5;case 5:return r++,[3,2];case 6:return[2]}})})};var o;return n([u.property({type:[f],json:{write:!0}})],t.prototype,"attributes",void 0),n([u.property({type:s,json:{write:!0}})],t.prototype,"backgroundColor",void 0),n([u.property({type:Boolean}),u.aliasOf("dotBlendingEnabled")],t.prototype,"blendDots",void 0),n([u.property({type:Boolean,json:{write:!0}})],t.prototype,"dotBlendingEnabled",void 0),n([u.property({type:String,json:{write:!0}})],t.prototype,"dotShape",void 0),n([u.property({type:Number,json:{write:!0}})],t.prototype,"dotSize",void 0),n([u.property({type:h,json:{write:!0}})],t.prototype,"legendOptions",void 0),n([u.property({type:m,json:{default:null,write:!0}})],t.prototype,"outline",void 0),n([u.property({type:Number,json:{write:!0}})],t.prototype,"dotValue",void 0),n([u.property({type:Number}),u.aliasOf("dotValue")],t.prototype,"referenceDotValue",void 0),n([u.property({type:Number,json:{write:!0}})],t.prototype,"referenceScale",void 0),n([u.property({type:Number,json:{write:!0}})],t.prototype,"seed",void 0),n([u.enumeration.serializable()({dotDensity:"dot-density"})],t.prototype,"type",void 0),t=o=n([u.subclass("esri.renderers.DotDensityRenderer")],t)}(u.declared(d.VisualVariablesMixin(p)))})},"esri/renderers/support/AttributeColorInfo":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../Color ../../core/JSONSupport ../../core/Logger ../../core/accessorSupport/decorators ../../core/accessorSupport/ensureType".split(" "),function(e,t,r,n,o,i,a,s,l){var u=a.getLogger("esri.renderers.support.AttributeColorInfo");return function(e){function t(t){return t=e.call(this,t)||this,t.color=null,t.field=null,t.label=null,t.valueExpression=null,t.valueExpressionTitle=null,t}r(t,e),i=t,t.prototype.castField=function(e){return null==e?e:"function"==typeof e?(u.error(".field: field must be a string value"),null):l.ensureString(e)},t.prototype.getAttributeHash=function(){return this.field+"-"+this.valueExpression},t.prototype.clone=function(){return new i({color:this.color&&this.color.clone(),field:this.field,label:this.label,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})};var i;return n([s.property({type:o,json:{type:[Number],write:!0}})],t.prototype,"color",void 0),n([s.property({type:String,json:{write:!0}})],t.prototype,"field",void 0),n([s.cast("field")],t.prototype,"castField",null),n([s.property({type:String,json:{write:!0}})],t.prototype,"label",void 0),n([s.property({type:String,json:{write:!0}})],t.prototype,"valueExpression",void 0),n([s.property({type:String,json:{write:!0}})],t.prototype,"valueExpressionTitle",void 0),t=i=n([s.subclass("esri.renderers.support.AttributeColorInfo")],t)}(s.declared(i.JSONSupport))})},"esri/renderers/support/DotDensityLegendOptions":function(){define("require exports ../../core/tsSupport/decorateHelper ../../core/tsSupport/declareExtendsHelper ../../core/JSONSupport ../../core/accessorSupport/decorators".split(" "),function(e,t,r,n,o,i){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.unit=null,t}n(t,e),o=t,t.prototype.clone=function(){return new o({unit:this.unit})};var o;return r([i.property({type:String,json:{write:!0}})],t.prototype,"unit",void 0),t=o=r([i.subclass("esri.renderers.support.DotDensityLegendOptions")],t)}(i.declared(o.JSONSupport))})},"esri/renderers/HeatmapRenderer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/generatorHelper ../core/tsSupport/awaiterHelper ../Color ../core/lang ../core/accessorSupport/decorators ../layers/support/fieldUtils ./Renderer ./support/HeatmapColorStop".split(" "),function(e,t,r,n,o,i,a,s,l,u,c,p){return function(e){function t(t){return t=e.call(this,t)||this,t.blurRadius=10,t.colorStops=[new p.HeatmapColorStop({ratio:0,color:new a("rgba(255, 140, 0, 0)")}),new p.HeatmapColorStop({ratio:.75,color:new a("rgba(255, 140, 0, 1)")}),new p.HeatmapColorStop({ratio:.9,color:new a("rgba(255, 0,   0, 1)")})],t.field=null,t.fieldOffset=0,t.maxPixelIntensity=100,t.minPixelIntensity=0,t.type="heatmap",t}r(t,e),c=t,t.prototype.collectRequiredFields=function(e,t){return i(this,void 0,void 0,function(){var r;return o(this,function(n){return(r=this.field)&&"string"==typeof r&&u.collectField(e,t,r),[2]})})},t.prototype.getAttributeHash=function(){return null},t.prototype.getMeshHash=function(){return JSON.stringify(this.colorStops)+"."+this.blurRadius},t.prototype.clone=function(){return new c({blurRadius:this.blurRadius,colorStops:s.clone(this.colorStops),field:this.field,maxPixelIntensity:this.maxPixelIntensity,minPixelIntensity:this.minPixelIntensity})};var c;return n([l.property({type:Number,json:{write:!0}})],t.prototype,"blurRadius",void 0),n([l.property({type:[p.HeatmapColorStop],json:{write:!0}})],t.prototype,"colorStops",void 0),n([l.property({type:String,json:{write:!0}})],t.prototype,"field",void 0),n([l.property({type:Number,json:{write:{overridePolicy:function(e,t,r){return{enabled:null==r}}}}})],t.prototype,"fieldOffset",void 0),n([l.property({type:Number,json:{write:!0}})],t.prototype,"maxPixelIntensity",void 0),n([l.property({type:Number,json:{write:!0}})],t.prototype,"minPixelIntensity",void 0),n([l.enumeration.serializable()({heatmap:"heatmap"})],t.prototype,"type",void 0),t=c=n([l.subclass("esri.renderers.HeatmapRenderer")],t)}(l.declared(c))})},"esri/renderers/support/HeatmapColorStop":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../Color ../../core/JSONSupport ../../core/accessorSupport/decorators".split(" "),function(e,t,r,n,o,i,a){Object.defineProperty(t,"__esModule",{value:!0}),e=function(e){function t(t){return t=e.call(this,t)||this,t.color=null,t.ratio=null,t}r(t,e),i=t,t.prototype.clone=function(){return new i({color:this.color,ratio:this.ratio})};var i;return n([a.property({type:o,json:{write:!0}})],t.prototype,"color",void 0),n([a.property({type:Number,json:{write:!0}})],t.prototype,"ratio",void 0),t=i=n([a.subclass("esri.renderers.support.HeatmapColorStop")],t)}(a.declared(i.JSONSupport)),t.HeatmapColorStop=e,t.default=e})},"esri/renderers/SimpleRenderer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/generatorHelper ../core/tsSupport/awaiterHelper ../symbols ../core/lang ../core/promiseUtils ../core/accessorSupport/decorators ./Renderer ./mixins/VisualVariablesMixin ../symbols/support/jsonUtils".split(" "),function(e,t,r,n,o,i,a,s,l,u,c,p,d){return function(e){function t(t){return t=e.call(this,t)||this,t.description=null,t.label=null,t.symbol=null,t.type="simple",t}r(t,e),c=t,t.prototype.writeSymbolWebScene=function(e,t,r,n){d.writeTarget(e,t,r,n)},t.prototype.writeSymbol=function(e,t,r,n){d.writeTarget(e,t,r,n)},t.prototype.readSymbol=function(e,t,r){return d.read(e,t,r)},t.prototype.collectRequiredFields=function(e,t){return i(this,void 0,void 0,function(){return o(this,function(r){switch(r.label){case 0:return[4,l.all([this.collectSymbolFields(e,t),this.collectVVRequiredFields(e,t)])];case 1:return r.sent(),[2]}})})},t.prototype.collectSymbolFields=function(e,t){return i(this,void 0,void 0,function(){return o(this,function(r){switch(r.label){case 0:return[4,l.all(this.getSymbols().map(function(r){return r.collectRequiredFields(e,t)}))];case 1:return r.sent(),[2]}})})},t.prototype.getSymbol=function(e,t){return this.symbol},t.prototype.getSymbolAsync=function(e,t){return i(this,void 0,void 0,function(){return o(this,function(e){return[2,this.symbol]})})},t.prototype.getSymbols=function(){return this.symbol?[this.symbol]:[]},t.prototype.getAttributeHash=function(){return this.visualVariables&&this.visualVariables.reduce(function(e,t){return e+t.getAttributeHash()},"")},t.prototype.getMeshHash=function(){return this.getSymbols().reduce(function(e,t){return e+=JSON.stringify(t)},"")},Object.defineProperty(t.prototype,"arcadeRequired",{get:function(){return this.arcadeRequiredForVisualVariables},enumerable:!0,configurable:!0}),t.prototype.clone=function(){return new c({description:this.description,label:this.label,symbol:this.symbol&&this.symbol.clone(),visualVariables:s.clone(this.visualVariables),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})};var c;return n([u.property({type:String,json:{write:!0}})],t.prototype,"description",void 0),n([u.property({type:String,json:{write:!0}})],t.prototype,"label",void 0),n([u.property({types:a.symbolTypesRenderer})],t.prototype,"symbol",void 0),n([u.writer("web-scene","symbol",{symbol:{types:a.symbolTypesRenderer3D}})],t.prototype,"writeSymbolWebScene",null),n([u.writer("symbol")],t.prototype,"writeSymbol",null),n([u.reader("symbol")],t.prototype,"readSymbol",null),n([u.enumeration.serializable()({simple:"simple"})],t.prototype,"type",void 0),t=c=n([u.subclass("esri.renderers.SimpleRenderer")],t)}(u.declared(p.VisualVariablesMixin(c)))})},"esri/renderers/UniqueValueRenderer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/paramHelper ../core/tsSupport/generatorHelper ../core/tsSupport/awaiterHelper ../core/tsSupport/assignHelper ../symbols ../symbols ../core/arrayUtils ../core/Error ../core/lang ../core/Logger ../core/maybe ../core/promiseUtils ../core/urlUtils ../core/accessorSupport/decorators ../core/accessorSupport/diffUtils ../core/accessorSupport/ensureType ../layers/support/fieldUtils ../portal/Portal ./Renderer ./mixins/VisualVariablesMixin ./support/LegendOptions ./support/UniqueValueInfo ../support/arcadeOnDemand ../symbols/support/jsonUtils ../symbols/support/styleUtils".split(" "),function(e,t,r,n,o,i,a,s,l,u,c,p,d,f,h,y,m,g,v,b,w,S,_,x,O,C,M,T,P){var I=f.getLogger("esri.renderers.UniqueValueRenderer"),E=b.ensureType(C.default);return function(e){function t(t){return t=e.call(this,t)||this,t._valueInfoMap={},t._isDefaultSymbolDerived=!1,t.type="unique-value",t.backgroundFillSymbol=null,t.field=null,t.field2=null,t.field3=null,t.valueExpression=null,t.valueExpressionTitle=null,t.legendOptions=null,t.defaultLabel=null,t.fieldDelimiter=null,t.portal=null,t.styleOrigin=null,t.diff={uniqueValueInfos:function(e,t){if(e||t){if(!e||!t)return{type:"complete",oldValue:e,newValue:t};for(var r=!1,n={type:"collection",added:[],removed:[],changed:[],unchanged:[]},o=function(o){var i=c.find(e,function(e){return e.value===t[o].value});i?v.diff(i,t[o])?(n.changed.push({type:"complete",oldValue:i,newValue:t[o]}),r=!0):n.unchanged.push({oldValue:i,newValue:t[o]}):(n.added.push(t[o]),r=!0)},i=0;i<t.length;i++)o(i);for(o=function(o){c.find(t,function(t){return t.value===e[o].value})||(n.removed.push(e[o]),r=!0)},i=0;i<e.length;i++)o(i);return r?n:void 0}}},t._set("uniqueValueInfos",[]),t}r(t,e),o=t,Object.defineProperty(t.prototype,"_cache",{get:function(){return{compiledFunc:null}},enumerable:!0,configurable:!0}),t.prototype.writeBackgroundFillSymbolWebScene=function(e,t,r,n){T.writeTarget(e,t,r,n)},t.prototype.castField=function(e){return null==e||"function"==typeof e?e:b.ensureString(e)},t.prototype.writeField=function(e,t,r,n){"string"==typeof e?t[r]=e:n&&n.messages?n.messages.push(new p("property:unsupported","UniqueValueRenderer.field set to a function cannot be written to JSON")):I.error(".field: cannot write field to JSON since it's not a string value")},Object.defineProperty(t.prototype,"defaultSymbol",{set:function(e){this._isDefaultSymbolDerived=!1,this._set("defaultSymbol",e)},enumerable:!0,configurable:!0}),t.prototype.readDefaultSymbol=function(e,t,r){return T.read(e,t,r)},t.prototype.writeDefaultSymbolWebScene=function(e,t,r,n){this._isDefaultSymbolDerived||T.writeTarget(e,t,r,n)},t.prototype.writeDefaultSymbol=function(e,t,r,n){this._isDefaultSymbolDerived||T.writeTarget(e,t,r,n)},t.prototype.readPortal=function(e,t,r){return r.portal||S.getDefault()},t.prototype.readStyleOrigin=function(e,t,r){return t.styleName?Object.freeze({styleName:t.styleName}):t.styleUrl?(e=m.fromJSON(t.styleUrl,r),Object.freeze({styleUrl:e})):void 0},t.prototype.writeStyleOrigin=function(e,t,r,n){e.styleName?t.styleName=e.styleName:e.styleUrl&&(t.styleUrl=m.toJSON(e.styleUrl,n))},Object.defineProperty(t.prototype,"uniqueValueInfos",{set:function(e){this.styleOrigin?I.error("#uniqueValueInfos=","Cannot modify unique value infos of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueInfos",e),this._updateValueInfoMap())},enumerable:!0,configurable:!0}),t.prototype.addUniqueValueInfo=function(e,t){this.styleOrigin?I.error("#addUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style"):(e="object"==typeof e?E(e):new C.default({value:e,symbol:u.ensureType(t)}),this.uniqueValueInfos.push(e),this._valueInfoMap[e.value]=e)},t.prototype.removeUniqueValueInfo=function(e){if(this.styleOrigin)I.error("#removeUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");else for(var t=0;t<this.uniqueValueInfos.length;t++)if(this.uniqueValueInfos[t].value===e+""){delete this._valueInfoMap[e],this.uniqueValueInfos.splice(t,1);break}},t.prototype.getUniqueValueInfo=function(e,t){return a(this,void 0,void 0,function(){var r,n,o;return i(this,function(i){switch(i.label){case 0:return r=t,this.valueExpression&&(h.isNone(t)||h.isNone(t.arcade))?(n=[{},r],o={},[4,M.loadArcade()]):[3,2];case 1:r=s.apply(void 0,n.concat([(o.arcade=i.sent(),o)])),i.label=2;case 2:return[2,this._getUniqueValueInfo(e,r)]}})})},t.prototype.getSymbol=function(e,t){if(!this.valueExpression||!h.isNone(t)&&!h.isNone(t.arcade))return(e=this._getUniqueValueInfo(e,t))&&e.symbol||this.defaultSymbol;I.error("#getSymbol()","Please use getSymbolAsync if valueExpression is used")},t.prototype.getSymbolAsync=function(e,t){return a(this,void 0,void 0,function(){var r,n,o,a;return i(this,function(i){switch(i.label){case 0:return r=t,this.valueExpression&&(h.isNone(r)||h.isNone(r.arcade))?(n=[{},r],o={},[4,M.loadArcade()]):[3,2];case 1:r=s.apply(void 0,n.concat([(o.arcade=i.sent(),o)])),i.label=2;case 2:return a=this._getUniqueValueInfo(e,r),[2,a&&a.symbol||this.defaultSymbol]}})})},t.prototype.getSymbols=function(){for(var e=[],t=0,r=this.uniqueValueInfos;t<r.length;t++){var n=r[t];n.symbol&&e.push(n.symbol)}return this.defaultSymbol&&e.push(this.defaultSymbol),e},t.prototype.getAttributeHash=function(){return this.visualVariables&&this.visualVariables.reduce(function(e,t){return e+t.getAttributeHash()},"")},t.prototype.getMeshHash=function(){return JSON.stringify(this.backgroundFillSymbol)+"."+JSON.stringify(this.defaultSymbol)+"."+this.uniqueValueInfos.reduce(function(e,t){return e+t.getMeshHash()},"")+"."+this.field+"."+this.field2+"."+this.field3+"."+this.fieldDelimiter+"."+this.valueExpression},t.prototype.clone=function(){var e=new o({field:this.field,field2:this.field2,field3:this.field3,defaultLabel:this.defaultLabel,defaultSymbol:d.clone(this.defaultSymbol),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,fieldDelimiter:this.fieldDelimiter,visualVariables:d.clone(this.visualVariables),legendOptions:d.clone(this.legendOptions),authoringInfo:this.authoringInfo&&this.authoringInfo.clone(),backgroundFillSymbol:d.clone(this.backgroundFillSymbol)});this._isDefaultSymbolDerived&&(e._isDefaultSymbolDerived=!0),e._set("portal",this.portal);var t=d.clone(this.uniqueValueInfos);return this.styleOrigin&&(e._set("styleOrigin",Object.freeze(d.clone(this.styleOrigin))),Object.freeze(t)),e._set("uniqueValueInfos",t),e._updateValueInfoMap(),e},Object.defineProperty(t.prototype,"arcadeRequired",{get:function(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression},enumerable:!0,configurable:!0}),t.prototype.collectRequiredFields=function(e,t){return a(this,void 0,void 0,function(){var r;return i(this,function(n){switch(n.label){case 0:return r=[this.collectVVRequiredFields(e,t),this.collectSymbolFields(e,t)],[4,y.all(r)];case 1:return n.sent(),[2]}})})},t.prototype.collectSymbolFields=function(e,t){return a(this,void 0,void 0,function(){var r;return i(this,function(n){switch(n.label){case 0:return r=this.getSymbols().map(function(r){return r.collectRequiredFields(e,t)}).concat([w.collectArcadeFieldNames(e,t,this.valueExpression)]),w.collectField(e,t,this.field),w.collectField(e,t,this.field2),w.collectField(e,t,this.field3),[4,y.all(r)];case 1:return n.sent(),[2]}})})},t.prototype.populateFromStyle=function(){var e=this;return P.fetchStyle(this.styleOrigin,{portal:this.portal}).then(function(t){var r=[];return e._valueInfoMap={},t&&t.data&&Array.isArray(t.data.items)&&t.data.items.forEach(function(n){var o=new l.WebStyleSymbol({styleUrl:t.styleUrl,styleName:t.styleName,portal:e.portal,name:n.name});e.defaultSymbol||n.name!==t.data.defaultItem||(e.defaultSymbol=o,e._isDefaultSymbolDerived=!0),o=new C.default({value:n.name,symbol:o}),r.push(o),e._valueInfoMap[n.name]=o}),e._set("uniqueValueInfos",Object.freeze(r)),!e.defaultSymbol&&e.uniqueValueInfos.length&&(e.defaultSymbol=e.uniqueValueInfos[0].symbol,e._isDefaultSymbolDerived=!0),e})},t.prototype._updateValueInfoMap=function(){var e=this;this._valueInfoMap={},this.uniqueValueInfos.forEach(function(t){return e._valueInfoMap[t.value+""]=t})},t.prototype._getUniqueValueInfo=function(e,t){return this.valueExpression?this._getUnqiueValueInfoForExpression(e,t):this._getUnqiueValueInfoForFields(e)},t.prototype._getUnqiueValueInfoForExpression=function(e,t){var r=h.unwrapOr(t,{});t=r.viewingMode;var n=r.scale,o=r.spatialReference,i=this._cache.compiledFunc,r=h.expect(r.arcade).arcadeUtils;return i||(i=r.createSyntaxTree(this.valueExpression),i=r.createFunction(i),this._cache.compiledFunc=i),e=r.executeFunction(i,r.createExecContext(e,r.getViewInfo({viewingMode:t,scale:n,spatialReference:o}))),this._valueInfoMap[e+""]},t.prototype._getUnqiueValueInfoForFields=function(e){var t,r=this.field,n=e.attributes;if("function"!=typeof r&&this.field2){e=this.field2,t=this.field3;var o=[];r&&o.push(n[r]),e&&o.push(n[e]),t&&o.push(n[t]),t=o.join(this.fieldDelimiter||"")}else"function"==typeof r?t=r(e):r&&(t=n[r]);return this._valueInfoMap[t+""]},t.fromPortalStyle=function(e,t){var r=new o(t&&t.properties);return r._set("styleOrigin",Object.freeze({styleName:e})),r._set("portal",t&&t.portal||S.getDefault()),t=r.populateFromStyle(),t.catch(function(t){I.error("#fromPortalStyle('"+e+"'[, ...])","Failed to create unique value renderer from style name",t)}),t},t.fromStyleUrl=function(e,t){return t=new o(t&&t.properties),t._set("styleOrigin",Object.freeze({styleUrl:e})),t=t.populateFromStyle(),t.catch(function(t){I.error("#fromStyleUrl('"+e+"'[, ...])","Failed to create unique value renderer from style URL",t)}),t};var o;return n([g.property({readOnly:!0,dependsOn:["valueExpression"]})],t.prototype,"_cache",null),n([g.enumeration.serializable()({uniqueValue:"unique-value"})],t.prototype,"type",void 0),n([g.property({types:{base:l.BaseSymbol,key:"type",typeMap:{"simple-fill":u.symbolTypesRenderer.typeMap["simple-fill"],"picture-fill":u.symbolTypesRenderer.typeMap["picture-fill"],"polygon-3d":u.symbolTypesRenderer.typeMap["polygon-3d"]}},json:{read:T.read,write:T.writeTarget}})],t.prototype,"backgroundFillSymbol",void 0),n([g.writer("web-scene","backgroundFillSymbol",{backgroundFillSymbol:{type:l.PolygonSymbol3D}})],t.prototype,"writeBackgroundFillSymbolWebScene",null),n([g.property({json:{type:String,read:{source:"field1"},write:{target:"field1"}}})],t.prototype,"field",void 0),n([g.cast("field")],t.prototype,"castField",null),n([g.writer("field")],t.prototype,"writeField",null),n([g.property({type:String,json:{write:!0}})],t.prototype,"field2",void 0),n([g.property({type:String,json:{write:!0}})],t.prototype,"field3",void 0),n([g.property({type:String,json:{write:!0}})],t.prototype,"valueExpression",void 0),n([g.property({type:String,json:{write:!0}})],t.prototype,"valueExpressionTitle",void 0),n([g.property({type:O.default,json:{write:!0}})],t.prototype,"legendOptions",void 0),n([g.property({type:String,json:{write:!0}})],t.prototype,"defaultLabel",void 0),n([g.property({types:u.symbolTypesRenderer})],t.prototype,"defaultSymbol",null),n([g.reader("defaultSymbol")],t.prototype,"readDefaultSymbol",null),n([g.writer("web-scene","defaultSymbol",{defaultSymbol:{types:u.symbolTypesRenderer3D}})],t.prototype,"writeDefaultSymbolWebScene",null),n([g.writer("defaultSymbol")],t.prototype,"writeDefaultSymbol",null),n([g.property({type:String,json:{write:!0}})],t.prototype,"fieldDelimiter",void 0),n([g.property({type:S,readOnly:!0})],t.prototype,"portal",void 0),n([g.reader("portal",["styleName"])],t.prototype,"readPortal",null),n([g.property({readOnly:!0,json:{write:{enabled:!1,overridePolicy:function(){return{enabled:!0}}}}})],t.prototype,"styleOrigin",void 0),n([g.reader("styleOrigin",["styleName","styleUrl"])],t.prototype,"readStyleOrigin",null),n([g.writer("styleOrigin",{styleName:{type:String},styleUrl:{type:String}})],t.prototype,"writeStyleOrigin",null),n([g.property({type:[C.default],json:{write:{overridePolicy:function(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],t.prototype,"uniqueValueInfos",null),t=o=n([g.subclass("esri.renderers.UniqueValueRenderer")],t)}(g.declared(x.VisualVariablesMixin(_)))})},"esri/core/accessorSupport/diffUtils":function(){define("require exports ../Accessor ../Collection ../maybe ./utils".split(" "),function(e,t,r,n,o,i){function a(e){return e instanceof n?Object.keys(e.items):e instanceof r?i.getProperties(e).keys():e?Object.keys(e):[]}function s(e,t){return e instanceof n?e.items[t]:e[t]}function l(e,t){return!(!Array.isArray(e)||!Array.isArray(t))&&e.length!==t.length}function u(e){return e?e.declaredClass:null}function c(e,t){var n,i=e.diff;if(i&&"function"==typeof i)return i(e,t);var p=a(e),f=a(t);if(0!==p.length||0!==f.length){if(!p.length||!f.length||l(e,t))return{type:"complete",oldValue:e,newValue:t};var h=f.filter(function(e){return-1===p.indexOf(e)}),y=p.filter(function(e){return-1===f.indexOf(e)}),h=p.filter(function(r){return-1<f.indexOf(r)&&s(e,r)!==s(t,r)}).concat(h,y).sort();if((y=u(e))&&-1<d.indexOf(y)&&h.length)return{type:"complete",oldValue:e,newValue:t};for(var m,y=e instanceof r&&t instanceof r,g=0;g<h.length;g++){var v=h[g],b=s(e,v),w=s(t,v),S=void 0;!(y||"function"!=typeof b&&"function"!=typeof w)||b===w||null==b&&null==w||(S=i&&i[v]&&"function"==typeof i[v]?i[v](b,w):"object"==typeof b&&"object"==typeof w&&u(b)===u(w)?c(b,w):{type:"complete",oldValue:b,newValue:w},o.isSome(S)&&(o.isSome(m)?m.diff[v]=S:m={type:"partial",diff:(n={},n[v]=S,n)}))}return m}}function p(e){if(o.isNone(e))return!0;switch(e.type){case"complete":return!1;case"collection":for(var t=0,r=e.added;t<r.length;t++){var n=r[t];if(!p(n))return!1}for(t=0,r=e.removed;t<r.length;t++)if(n=r[t],!p(n))return!1;for(t=0,e=e.changed;t<e.length;t++)if(n=e[t],!p(n))return!1;return!0;case"partial":for(t in e.diff)if(n=e.diff[t],!p(n))return!1;return!0}}Object.defineProperty(t,"__esModule",{value:!0});var d=["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"];t.diff=function(e,t){if("function"!=typeof e&&"function"!=typeof t&&(e||t))return!e||!t||"object"==typeof e&&"object"==typeof t&&u(e)!==u(t)?{type:"complete",oldValue:e,newValue:t}:c(e,t)},t.isEmpty=p})},"esri/renderers/support/UniqueValueInfo":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../symbols ../../core/JSONSupport ../../core/accessorSupport/decorators ../../symbols/support/jsonUtils".split(" "),function(e,t,r,n,o,i,a,s){Object.defineProperty(t,"__esModule",{value:!0}),e=function(e){function t(t){return t=e.call(this,t)||this,t.description=null,t.label=null,t.symbol=null,t.value=null,t}r(t,e),i=t,t.prototype.clone=function(){return new i({value:this.value,description:this.description,label:this.label,symbol:this.symbol?this.symbol.clone():null})},t.prototype.getMeshHash=function(){var e=JSON.stringify(this.symbol&&this.symbol.toJSON());return this.value+"."+e};var i;return n([a.property({type:String,json:{write:!0}})],t.prototype,"description",void 0),n([a.property({type:String,json:{write:!0}})],t.prototype,"label",void 0),n([a.property({types:o.symbolTypesRenderer,json:{origins:{"web-scene":{types:o.symbolTypesRenderer3D,read:s.read,write:s.writeTarget}},read:s.read,write:s.writeTarget}})],t.prototype,"symbol",void 0),n([a.property({type:String,json:{write:!0}})],t.prototype,"value",void 0),t=i=n([a.subclass("esri.renderers.support.UniqueValueInfo")],t)}(a.declared(i.JSONSupport)),t.UniqueValueInfo=e,t.default=e})},"esri/symbols/support/styleUtils":function(){define("require exports ../../core/tsSupport/assignHelper ../../request ../../symbols ../../core/devEnvironmentUtils ../../core/Error ../../core/promiseUtils ../../core/urlUtils ../../portal/Portal ../../portal/PortalQueryParams ../../support/featureFlags ./jsonUtils ./StyleOrigin ./Thumbnail".split(" "),function(e,t,r,n,o,i,a,s,l,u,c,p,d,f,h){function y(e,t){return x(e,t).then(function(t){return{data:t.data,baseUrl:l.removeFile(e),styleUrl:e}})}function m(e,t,r){t=t.portal||u.getDefault();var n,o=t.url+" - "+(t.user&&t.user.username)+" - "+e;return O[o]||(O[o]=g(e,t,r).then(function(e){return n=e,e.fetchData()}).then(function(t){return{data:t,baseUrl:n.itemUrl,styleName:e}})),O[o]}function g(e,t,r){return t.load(r).then(function(){var n=new c({disableExtraQuery:!0,query:"owner:"+C+" AND type:"+M+' AND typekeywords:"'+e+'"'});return t.queryItems(n,r)}).then(function(t){t=t.results;var n=null,o=e.toLowerCase();if(t&&Array.isArray(t))for(var i=0;i<t.length;i++){var s=t[i];if(s.typeKeywords.some(function(e){return e.toLowerCase()===o})&&s.type===M&&s.owner===C){n=s;break}}if(!n)throw new a("symbolstyleutils:style-not-found","The style '"+e+"' could not be found",{styleName:e});return n.load(r)})}function v(e,t,r){return e.styleUrl?y(e.styleUrl,r):e.styleName?m(e.styleName,t,r):s.reject(new a("symbolstyleutils:style-url-and-name-missing","Either styleUrl or styleName is required to resolve a style"))}function b(e,t,r,n,u){for(var c=e.data,p={portal:r.portal,url:l.urlToObject(e.baseUrl),origin:"portal-item"},y=function(a){if(a.name!==t)return"continue";var s=l.fromJSON(S(a,n),p),c=a.thumbnail&&a.thumbnail.href,y=a.thumbnail&&a.thumbnail.imageData;i.isDevEnvironment()&&(s=i.adjustStaticAGOUrl(s),c=i.adjustStaticAGOUrl(c));var m={portal:r.portal,url:l.urlToObject(l.removeFile(s)),origin:"portal-item"};return{value:x(s,u).then(function(i){if(i="cimRef"===n?w(i.data):i.data,(i=d.fromJSON(i,m))&&o.isSymbol3D(i)){if(c){var a=l.fromJSON(c,p);i.thumbnail=new h.default({url:a})}else y&&(i.thumbnail=new h.default({url:"data:image/png;base64,"+y}));e.styleUrl?i.styleOrigin=new f({portal:r.portal,styleUrl:e.styleUrl,name:t}):e.styleName&&(i.styleOrigin=new f({portal:r.portal,styleName:e.styleName,name:t}))}return i})}},m=0,c=c.items;m<c.length;m++){var g=y(c[m]);if("object"==typeof g)return g.value}return s.reject(new a("symbolstyleutils:symbol-name-not-found","The symbol name '"+t+"' could not be found",{symbolName:t}))}function w(e){return null===e||"CIMSymbolReference"===e.type?e:{type:"CIMSymbolReference",symbol:e}}function S(e,t){if("cimRef"===t)return e.cimRef;if(e.formatInfos&&!p.enableWebStyleForceWOSR()){t=0;for(var r=e.formatInfos;t<r.length;t++){var n=r[t];if("gltf"===n.type)return n.href}}return e.webRef}function _(e,t,r){var n=T.replace(/\{SymbolName\}/gi,e.name);return x(n,r).then(function(e){return e=w(e.data),d.fromJSON(e,{portal:t.portal,url:l.urlToObject(l.removeFile(n)),origin:"portal-item"})})}function x(e,t){return t=r({responseType:"json",query:{f:"json"}},t),n(l.normalize(e),t)}Object.defineProperty(t,"__esModule",{value:!0});var O={};t.fetchStyle=v,t.resolveWebStyleSymbol=function(e,t,r,n){return e.name?e.styleName&&"Esri2DPointSymbolsStyle"===e.styleName?_(e,t,n):v(e,t,n).then(function(o){return b(o,e.name,t,r,n)}):s.reject(new a("symbolstyleutils:style-symbol-reference-name-missing","Missing name in style symbol reference"))},t.fetchSymbolFromStyle=b,t.styleNameFromItem=function(e){var t=0;for(e=e.typeKeywords;t<e.length;t++){var r=e[t];if(/^Esri.*Style$/.test(r)&&"Esri Style"!==r)return r}};var C="esri_en",M="Style",T="https://cdn.arcgis.com/sharing/rest/content/items/220936cc6ed342c9937abd8f180e7d1e/resources/styles/cim/{SymbolName}.json?f=json"})},"esri/core/devEnvironmentUtils":function(){define(["require","exports","./global"],function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.isDevEnvironment=function(e){return e=e||r.location.hostname,s.some(function(t){return null!=e.match(t)})},t.adjustStaticAGOUrl=function(e,t){return e?(t=t||r.location.hostname,null!=t.match(n)||null!=t.match(i)?e.replace("static.arcgis.com","staticdev.arcgis.com"):null!=t.match(o)||null!=t.match(a)?e.replace("static.arcgis.com","staticqa.arcgis.com"):e):e},t.isTelemetryDevEnvironment=function(e){return e=e||r.location.hostname,[/^zrh-.+?\.esri\.com$/].concat(s).some(function(t){return null!=e.match(t)})};var n=/^devext.arcgis.com$/,o=/^qaext.arcgis.com$/,i=/^[\w-]*\.mapsdevext.arcgis.com$/,a=/^[\w-]*\.mapsqa.arcgis.com$/,s=[/^([\w-]*\.)?[\w-]*\.zrh-dev-local.esri.com$/,n,o,/^jsapps.esri.com$/,i,a]})},"esri/support/featureFlags":function(){define(["require","exports","../core/has"],function(e,t,r){function n(e,t){return!!r("enable-feature:"+e+"/"+t)}Object.defineProperty(t,"__esModule",{value:!0}),t.hasEnableFeature=n,t.enableWebStyleForceWOSR=function(){return n("jschmid","force-wosr")},t.enableEditing3D=function(){return n("editing","3d")}})},"esri/renderers/support/jsonUtils":function(){define("require exports ../../core/compilerUtils ../../core/Error ../../core/object ../../core/Warning ../ClassBreaksRenderer ../DictionaryRenderer ../DotDensityRenderer ../HeatmapRenderer ../SimpleRenderer ../UniqueValueRenderer".split(" "),function(e,t,r,n,o,i,a,s,l,u,c,p){function d(e,t,r){return e?e&&(e.styleName||e.styleUrl)&&"uniqueValue"!==e.type?(r&&r.messages&&r.messages.push(new i("renderer:unsupported","Only UniqueValueRenderer can be referenced from a web style, but found '"+e.type+"'",{definition:e,context:r})),null):(t=e?y[e.type]||null:null)?(t=new t,t.read(e,r),t):(r&&r.messages&&e&&r.messages.push(new i("renderer:unsupported","Renderers of type '"+(e.type||"unknown")+"' are not supported",{definition:e,context:r})),null):null}function f(e,t){if(!t||"web-scene"!==t.origin)return!0;switch(e.type){case"simple":case"unique-value":case"class-breaks":return!0;case"heatmap":case"dictionary":case"dot-density":return!1;default:return r.neverReached(e),!1}}function h(e,t,r){return e?f(e,r)?e.write(t,r):(r.messages&&r.messages.push(new n("renderer:unsupported","Renderer of type '"+e.declaredClass+"' are not supported in scenes.",{renderer:e,context:r})),null):null}Object.defineProperty(t,"__esModule",{value:!0});var y={simple:c,uniqueValue:p,classBreaks:a,heatmap:u,dotDensity:l,dictionary:s};t.read=d,t.writeTarget=function(e,t,r,n){(e=h(e,{},n))&&o.setDeepValue(r,e,t)},t.write=h,t.fromJSON=function(e,t){return d(e,null,t)}})},"esri/core/MultiOriginJSONSupport":function(){define("require exports ./tsSupport/declareExtendsHelper ./tsSupport/decorateHelper ./Accessor ./accessorSupport/decorators ./accessorSupport/MultiOriginStore ./accessorSupport/PropertyOrigin ./accessorSupport/read ./accessorSupport/utils ./accessorSupport/write".split(" "),function(e,t,r,n,o,i,a,s,l,u,c){function p(e){return u.getProperties(e).store}Object.defineProperty(t,"__esModule",{value:!0}),t.MultiOriginJSONMixin=function(e){return function(e){function t(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var t=e.apply(this,t)||this,n=u.getProperties(t),r=n.metadatas,o=n.store,i=new a.default;return n.store=i,o.keys().forEach(function(e){i.set(e,o.get(e),0)}),Object.keys(r).forEach(function(e){n.internalGet(e)&&i.set(e,n.internalGet(e),0)}),t}return r(t,e),t.prototype.clear=function(e,t){return void 0===t&&(t="user"),p(this).delete(e,s.nameToId(t))},t.prototype.read=function(e,t){l.default(this,e,t)},t.prototype.write=function(e,t){return e=e||{},c.default(this,e,t),e},t.prototype.getAtOrigin=function(e,t){var r=p(this),n=s.nameToId(t);if("string"==typeof e)return r.get(e,n);var o={};return e.forEach(function(e){o[e]=r.get(e,n)}),o},t.prototype.originOf=function(e){var t=p(this);if("string"==typeof e)return s.idToName(t.originOf(e));e.forEach(function(e){s.idToName(t.originOf(e))})},t.prototype.revert=function(e,t){var r=p(this),n=s.nameToId(t),o=u.getProperties(this);("string"==typeof e?"*"===e?r.keys(n):[e]:e).forEach(function(e){o.propertyInvalidated(e),r.revert(e,n),o.propertyCommitted(e)})},t.prototype.removeOrigin=function(e){var t=p(this);e=s.nameToId(e);for(var r=0,n=t.keys(e);r<n.length;r++){var o=n[r];t.originOf(o)===e&&t.set(o,t.get(o,e),6)}},t.prototype.updateOrigin=function(e,t){var r=p(this);t=s.nameToId(t);var n=this.get(e);r.delete(e),r.set(e,n,t)},t=n([i.subclass("esri.core.MultiOriginJSONSupport")],t)}(i.declared(e))},e=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t=n([i.subclass("esri.core.MultiOriginJSONSupport")],t)}(i.declared(t.MultiOriginJSONMixin(o))),t.MultiOriginJSONSupport=e,t.isMultiOriginJSONMixin=function(e){return e&&"getAtOrigin"in e&&"originOf"in e}})},"esri/core/accessorSupport/MultiOriginStore":function(){define(["require","exports","../arrayUtils"],function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),e=function(){function e(){this._propertyOriginMap=new Map,this._originStores=Array(7),this._values=new Map}return e.prototype.get=function(e,t){return(t=void 0===t?this._values:this._originStores[t])?t.get(e):void 0},e.prototype.keys=function(e){return(e=null==e?this._values:this._originStores[e])?r.keysOfMap(e):[]},e.prototype.set=function(e,t,r){void 0===r&&(r=6);var n=this._originStores[r];return n||(n=new Map,this._originStores[r]=n),n.set(e,t),(!this._values.has(e)||this._propertyOriginMap.get(e)<=r)&&(n=this._values.get(e),this._values.set(e,t),this._propertyOriginMap.set(e,r),n!==t)},e.prototype.delete=function(e,t){void 0===t&&(t=6);var r=this._originStores[t];if(r){var n=r.get(e);if(r.delete(e),this._values.has(e)&&this._propertyOriginMap.get(e)===t)for(this._values.delete(e),--t;0<=t;t--)if((r=this._originStores[t])&&r.has(e)){this._values.set(e,r.get(e)),this._propertyOriginMap.set(e,t);break}return n}},e.prototype.has=function(e,t){return!!(t=void 0===t?this._values:this._originStores[t])&&t.has(e)},e.prototype.revert=function(e,t){for(;0<t&&!this.has(e,t);)--t;var r=this._originStores[t],r=r&&r.get(e),n=this._values.get(e);return this._values.set(e,r),this._propertyOriginMap.set(e,t),n!==r},e.prototype.originOf=function(e){return this._propertyOriginMap.get(e)||0},e.prototype.forEach=function(e){this._values.forEach(e)},e}(),t.default=e})},"esri/geometry/HeightModelInfo":function(){define("require exports ../core/tsSupport/assignHelper ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/arrayUtils ../core/jsonMap ../core/JSONSupport ../core/unitUtils ../core/Warning ../core/accessorSupport/decorators".split(" "),function(e,t,r,n,o,i,a,s,l,u,c){function p(e,t){return new u("height-unit:unsupported","Height unit of value '"+e+"' is not supported",t)}function d(e,t){return new u("height-model:unsupported","Height model of value '"+e+"' is not supported",t)}var f=a.strict()({orthometric:"gravity-related-height",gravity_related_height:"gravity-related-height",ellipsoidal:"ellipsoidal"}),h=f.jsonValues.slice();i.removeUnordered(h,"orthometric");var y=a.strict()({meter:"meters",foot:"feet","us-foot":"us-feet","clarke-foot":"clarke-feet","clarke-yard":"clarke-yards","clarke-link":"clarke-links","sears-yard":"sears-yards","sears-foot":"sears-feet","sears-chain":"sears-chains","benoit-1895-b-chain":"benoit-1895-b-chains","indian-yard":"indian-yards","indian-1937-yard":"indian-1937-yards","gold-coast-foot":"gold-coast-feet","sears-1922-truncated-chain":"sears-1922-truncated-chains","50-kilometers":"50-kilometers","150-kilometers":"150-kilometers"});return function(e){function t(t){return t=e.call(this,t)||this,t.heightModel="gravity-related-height",t.heightUnit="meters",t.vertCRS=null,t}n(t,e),i=t,t.prototype.writeHeightModel=function(e,t,r){return f.write(e,t,r)},t.prototype.readHeightModel=function(e,t,r){return(t=f.read(e))?t:(r&&r.messages&&r.messages.push(d(e,{context:r})),null)},t.prototype.readHeightUnit=function(e,t,r){return(t=y.read(e))?t:(r&&r.messages&&r.messages.push(p(e,{context:r})),null)},t.prototype.readHeightUnitService=function(e,t,r){return(t=l.unitFromRESTJSON(e)||y.read(e))?t:(r&&r.messages&&r.messages.push(p(e,{context:r})),null)},t.prototype.readVertCRS=function(e,t){return t.vertCRS||t.ellipsoid||t.geoid},t.prototype.clone=function(){return new i({heightModel:this.heightModel,heightUnit:this.heightUnit,vertCRS:this.vertCRS})},t.prototype.equals=function(e){return!!e&&(this===e||this.heightModel===e.heightModel&&this.heightUnit===e.heightUnit&&this.vertCRS===e.vertCRS)},t.deriveUnitFromSR=function(e,t){return t=l.getVerticalUnitStringForSR(t),new i({heightModel:e.heightModel,heightUnit:t,vertCRS:e.vertCRS})},t.prototype.write=function(e,t){return t=r({origin:"web-scene"},t),this.inherited(arguments,[e,t])},t.fromJSON=function(e){if(!e)return null;var t=new i;return t.read(e,{origin:"web-scene"}),t};var i;return o([c.property({type:f.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:h,default:"ellipsoidal"}}}})],t.prototype,"heightModel",void 0),o([c.writer("web-scene","heightModel")],t.prototype,"writeHeightModel",null),o([c.reader(["web-scene","service"],"heightModel")],t.prototype,"readHeightModel",null),o([c.property({type:y.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:y.jsonValues,write:y.write}}}})],t.prototype,"heightUnit",void 0),o([c.reader("web-scene","heightUnit")],t.prototype,"readHeightUnit",null),o([c.reader("service","heightUnit")],t.prototype,"readHeightUnitService",null),o([c.property({type:String,constructOnly:!0,json:{origins:{"web-scene":{write:!0}}}})],t.prototype,"vertCRS",void 0),o([c.reader("service","vertCRS",["vertCRS","ellipsoid","geoid"])],t.prototype,"readVertCRS",null),t=i=o([c.subclass("esri.geometry.HeightModelInfo")],t)}(c.declared(s.JSONSupport))})},"esri/layers/graphics/sources/MemorySource":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/tsSupport/assignHelper ../../../core/tsSupport/generatorHelper ../../../core/tsSupport/awaiterHelper ../../../geometry ../../../Graphic ../../../core/Collection ../../../core/Error ../../../core/has ../../../core/Loadable ../../../core/Logger ../../../core/maybe ../../../core/Promise ../../../core/promiseUtils ../../../core/requireUtils ../../../core/workers ../../../core/accessorSupport/decorators ../../../core/accessorSupport/ensureType ../../../tasks/support/FeatureSet module".split(" "),function(e,t,r,n,o,i,a,s,l,u,c,p,d,f,h,y,m,g,v,b,w,S,_){Object.defineProperty(t,"__esModule",{value:!0});var x=0,O=f.getLogger("esri.layers.graphics.sources.MemorySource");o=function(t){function o(e){return e=t.call(this,e)||this,e._idToClientGraphic=null,e.type="memory",e}return r(o,t),o.prototype.load=function(e){return e=h.isSome(e)?e.signal:null,this.addResolvingPromise(this._startWorker(e)),this.when()},Object.defineProperty(o.prototype,"workerGeometryType",{get:function(){var e=this.layer&&this.layer.geometryType;return e?this._geometryTypeRequiresClientGraphicMapping(e)?"polygon":e:null},enumerable:!0,configurable:!0}),o.prototype.applyEdits=function(e){var t=this;return this.load().then(function(){return t._applyEdits(e)})},o.prototype.openPorts=function(){var e=this;return this.load().then(function(){return e._connection.openPorts()})},o.prototype.queryFeatures=function(e,t){var r=this;return void 0===t&&(t={}),this.load(t).then(function(){return r._connection.invoke("queryFeatures",e?e.toJSON():null,t)}).then(function(e){if(e=S.fromJSON(e),!r._requiresClientGraphicMapping())return e;for(var t=r.layer.objectIdField,n=0,o=e.features;n<o.length;n++){var i=o[n],a=r._idToClientGraphic.get(i.attributes[t]);a&&(i.geometry=a.geometry)}return e.geometryType=r.layer.geometryType,e})},o.prototype.queryFeaturesJSON=function(e,t){var r=this;return void 0===t&&(t={}),this._requiresClientGraphicMapping()?m.reject(new c("query-features-json:unsupported","Cannot query in JSON format for client only geometry types (mesh and extent)")):this.load(t).then(function(){return r._connection.invoke("queryFeatures",e?e.toJSON():null,t)})},o.prototype.queryFeatureCount=function(e,t){var r=this;return void 0===t&&(t={}),this.load(t).then(function(){return r._connection.invoke("queryFeatureCount",e?e.toJSON():null,t)})},o.prototype.queryObjectIds=function(e,t){var r=this;return void 0===t&&(t={}),this.load(t).then(function(){return r._connection.invoke("queryObjectIds",e?e.toJSON():null,t)})},o.prototype.queryExtent=function(e,t){var r=this;return void 0===t&&(t={}),this.load(t).then(function(){return r._connection.invoke("queryExtent",e?e.toJSON():null,t)}).then(function(e){return{count:e.count,extent:s.Extent.fromJSON(e.extent)}})},o.prototype._applyEdits=function(e){var t=this;if(!this._connection)throw new c("feature-layer-source:edit-failure","Memory source not loaded");var r=this.layer.objectIdField,n=null,o=[],i=[];if(e.addFeatures&&(n=this._prepareAddFeatures(e.addFeatures)),e.deleteFeatures)for(var a=0,s=e.deleteFeatures;a<s.length;a++){var l=s[a];"objectId"in l&&null!=l.objectId?o.push(l.objectId):"attributes"in l&&null!=l.attributes[r]&&o.push(l.attributes[r])}if(e.updateFeatures)for(r=0,e=e.updateFeatures;r<e.length;r++)l=e[r],i.push(this._serializeFeature(l));return this._connection.invoke("applyEdits",{adds:n?n.features:[],updates:i,deletes:o}).then(function(e){var r=e.featureEditResults;if(t.fullExtent=e.fullExtent,n&&n.finish(r.uidToObjectId),t._idToClientGraphic){e=0;for(var o=r.deleteResults;e<o.length;e++){var i=o[e];i.success&&t._idToClientGraphic.delete(i.objectId)}}return t._createEditsResult(r)})},o.prototype._createEditsResult=function(e){return{addFeatureResults:e.addResults?e.addResults.map(this._createFeatureEditResult,this):[],updateFeatureResults:e.updateResults?e.updateResults.map(this._createFeatureEditResult,this):[],deleteFeatureResults:e.deleteResults?e.deleteResults.map(this._createFeatureEditResult,this):[],addAttachmentResults:[],updateAttachmentResults:[],deleteAttachmentResults:[]}},o.prototype._createFeatureEditResult=function(e){var t=!0===e.success?null:e.error||{code:void 0,description:void 0};return{objectId:e.objectId,globalId:e.globalId,error:t?new c("feature-layer-source:edit-failure",t.description,{code:t.code}):null}},o.prototype._prepareAddFeatures=function(e){for(var t=new Map,r=Array(e.length),n=null,o=0;o<e.length;o++){var i=e[o],a=this._serializeFeature(i);!n&&h.isSome(i.geometry)&&(n=i.geometry.type),r[o]=a,t.set(""+a.uid,i)}var s=this;return{features:r,inferredGeometryType:n,finish:function(e){var r,n=s.sourceJSON.objectIdField;for(r in e){var o=e[r],i=t.get(r);i&&(i.attributes||(i.attributes={}),-1===o?delete i.attributes[n]:i.attributes[n]=o,s._addIdToClientGraphic(i))}}}},o.prototype._addIdToClientGraphic=function(e){if(this._idToClientGraphic){var t=this.sourceJSON.objectIdField,t=e.attributes&&e.attributes[t];null!=t&&this._idToClientGraphic.set(t,e)}},o.prototype._requiresClientGraphicMapping=function(){return this._geometryTypeRequiresClientGraphicMapping(this.layer.geometryType||this.sourceJSON.geometryType)},o.prototype._geometryRequiresClientGraphicMapping=function(e){return this._geometryTypeRequiresClientGraphicMapping(e.type)},o.prototype._geometryTypeRequiresClientGraphicMapping=function(e){return"mesh"===e||"multipatch"===e||"extent"===e},o.prototype._serializeFeature=function(e){var t=e.attributes;e=this._geometryForSerialization(e);var r=(x++).toString();return e?{uid:r,geometry:e.toJSON(),attributes:t}:{uid:r,attributes:t}},o.prototype._geometryForSerialization=function(e){return e=e.geometry,h.isNone(e)?null:this._geometryRequiresClientGraphicMapping(e)?s.Polygon.fromExtent(e.extent):e},o.prototype._startWorker=function(t){return a(this,void 0,void 0,function(){var r,n,o,a,l,u,c,d,f,h,y,m,b,w,S,x;return i(this,function(i){switch(i.label){case 0:return[3,2];case 1:i.sent(),i.label=2;case 2:return r=this,[4,v.open(g.getAbsMid("./support/MemorySourceWorker",e,_),{strategy:p("esri-workers-for-memory-layers")?"dedicated":"local",signal:t})];case 3:return r._connection=i.sent(),n=this.layer,o=n.fields,a=n.spatialReference,l=n.objectIdField,u=n.hasM,c=n.hasZ,d=n.timeInfo,f="defaults"===this.layer.originOf("spatialReference"),h=this._prepareAddFeatures(this.items),this.on("before-changes",function(e){O.error("Source modifications will not propagate after layer has been loaded. Please use .applyEdits() instead"),e.preventDefault()}),y={features:h.features,fields:o&&o.map(function(e){return e.toJSON()}),geometryType:s.typeKebabDictionary.toJSON(this.workerGeometryType),hasM:u,hasZ:c,objectIdField:l,spatialReference:f?null:a&&a.toJSON(),timeInfo:d?d.toJSON():null},[4,this._connection.invoke("load",y,{signal:t})];case 4:for(m=i.sent(),b=0,w=m.warnings;b<w.length;b++)S=w[b],O.warn(S.message,{layer:this.layer,warning:S});return m.featureErrors.length&&O.warn("Encountered "+m.featureErrors.length+" validation errors while loading features",m.featureErrors),x=m.layerDefinition,this._geometryTypeRequiresClientGraphicMapping(h.inferredGeometryType)&&(x.geometryType=s.typeKebabDictionary.toJSON(h.inferredGeometryType)),this.sourceJSON=x,this._requiresClientGraphicMapping()&&(this._idToClientGraphic=new Map),h.finish(m.assignedObjectIds),[2]}})})},n([b.shared({Type:l,ensureType:w.ensureType(l)})],o.prototype,"itemType",void 0),n([b.property()],o.prototype,"type",void 0),n([b.property({constructOnly:!0})],o.prototype,"layer",void 0),n([b.property({readOnly:!0,dependsOn:["layer.geometryType"]})],o.prototype,"workerGeometryType",null),n([b.property()],o.prototype,"sourceJSON",void 0),o=n([b.subclass("esri.layers.graphics.sources.MemorySource")],o)}(b.declared(d.LoadableMixin(y.EsriPromiseMixin(u)))),t.MemorySource=o,t.default=o})},"esri/Graphic":function(){define("require exports ./core/tsSupport/assignHelper ./core/tsSupport/declareExtendsHelper ./core/tsSupport/decorateHelper ./geometry ./PopupTemplate ./symbols ./core/JSONSupport ./core/lang ./core/maybe ./core/accessorSupport/decorators ./geometry/support/jsonUtils ./symbols/support/jsonUtils".split(" "),function(e,t,r,n,o,i,a,s,l,u,c,p,d,f){e=function(e){function t(t,r,n,o){return t=e.call(this,t,r,n,o)||this,t.layer=null,t.popupTemplate=null,t.sourceLayer=null,Object.defineProperty(t,"uid",{value:l.generateUID()}),t}n(t,e),l=t,t.prototype.normalizeCtorArgs=function(e,t,r,n){return e&&!e.declaredClass?e:{geometry:e,symbol:t,attributes:r,popupTemplate:n}},Object.defineProperty(t.prototype,"attributes",{set:function(e){var t=this._get("attributes");t!==e&&(this._set("attributes",e),this._notifyLayer("attributes",t,e))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"geometry",{set:function(e){var t=this._get("geometry");t!==e&&(this._set("geometry",e),this._notifyLayer("geometry",t,e))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"symbol",{set:function(e){var t=this._get("symbol");t!==e&&(this._set("symbol",e),this._notifyLayer("symbol",t,e))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"visible",{set:function(e){var t=this._get("visible");t!==e&&(this._set("visible",e),this._notifyLayer("visible",t,e))},enumerable:!0,configurable:!0}),t.prototype.getEffectivePopupTemplate=function(e){return void 0===e&&(e=!1),this.popupTemplate?this.popupTemplate:this.sourceLayer?this.sourceLayer.popupTemplate?this.sourceLayer.popupTemplate:e&&c.isSome(this.sourceLayer.defaultPopupTemplate)?this.sourceLayer.defaultPopupTemplate:null:null},t.prototype.getAttribute=function(e){return this.attributes&&this.attributes[e]},t.prototype.setAttribute=function(e,t){var r;this.attributes?(r=this.getAttribute(e),this.attributes[e]=t,this._notifyLayer("attributes",r,t,e)):(this.attributes=(r={},r[e]=t,r),this._notifyLayer("attributes",void 0,t,e))},t.prototype.getObjectId=function(){return this.sourceLayer?"type"in this.sourceLayer&&"stream"===this.sourceLayer.type?this.getAttribute("__esri_stream_id__"):this.sourceLayer.objectIdField?this.getAttribute(this.sourceLayer.objectIdField):null:null},t.prototype.toJSON=function(){return{geometry:c.isSome(this.geometry)?this.geometry.toJSON():null,symbol:c.isSome(this.symbol)?this.symbol.toJSON():null,attributes:r({},this.attributes),popupTemplate:this.popupTemplate&&this.popupTemplate.toJSON()}},t.prototype.clone=function(){return new l(this.cloneProperties())},t.prototype.cloneProperties=function(){return{attributes:u.clone(this.attributes),geometry:u.clone(this.geometry),layer:this.layer,popupTemplate:this.popupTemplate&&this.popupTemplate.clone(),sourceLayer:this.sourceLayer,symbol:u.clone(this.symbol),visible:this.visible}},t.prototype._notifyLayer=function(e,t,r,n){this.layer&&this.layer.graphicChanged&&(t={graphic:this,property:e,oldValue:t,newValue:r},"attributes"===e&&(t.attributeName=n),this.layer.graphicChanged(t))};var l;return o([p.property({value:null})],t.prototype,"attributes",null),o([p.property({value:null,types:i.geometryTypes,json:{read:d.fromJSON}})],t.prototype,"geometry",null),o([p.property()],t.prototype,"layer",void 0),o([p.property({type:a})],t.prototype,"popupTemplate",void 0),o([p.property()],t.prototype,"sourceLayer",void 0),o([p.property({value:null,types:s.symbolTypes,json:{read:f.read}})],t.prototype,"symbol",null),o([p.property({type:Boolean,value:!0,set:function(e){}})],t.prototype,"visible",null),t=l=o([p.subclass("esri.Graphic")],t)}(p.declared(l.JSONSupport));var h=0;return function(e){e.generateUID=function(){return h++}}(e||(e={})),e})},"esri/core/requireUtils":function(){define(["require","exports","./deprecate","./Logger","./promiseUtils"],function(e,t,r,n,o){function i(e,t){return r.deprecatedFunction(a,"when",{moduleName:"requireUtils",replacement:"Use `promiseUtils.create()` instead.",version:"4.10",warnOnce:!0}),Array.isArray(t)?o.create(function(r){e(t,function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];r(e)})}):i(e,[t]).then(function(e){return e[0]})}Object.defineProperty(t,"__esModule",{value:!0});var a=n.getLogger("esri.core.requireUtils");t.when=i,t.getAbsMid=function(e,t,r){return t.toAbsMid?t.toAbsMid(e):r.id.replace(/\/[^\/]*$/gi,"/")+e}})},"esri/core/workers":function(){define(["require","exports","./workers/workers"],function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});for(var n in r)t.hasOwnProperty(n)||(t[n]=r[n])})},"esri/core/workers/workers":function(){define("require exports ../tsSupport/generatorHelper ../tsSupport/awaiterHelper ../Error ../has ../promiseUtils ./Connection ./RemoteClient ./WorkerOwner".split(" "),function(e,t,r,n,o,i,a,s,l,u){function c(){return n(this,void 0,void 0,function(){var e,t,n;return r(this,function(r){if(y)return[2,y];for(h=a.createAbortController(),e=[],t=function(t){var r=u.create(t).then(function(e){return f[t]=e});e.push(r)},n=0;n<p;n++)t(n);return y=a.all(e),[2,y]})})}Object.defineProperty(t,"__esModule",{value:!0}),t.Connection=s,t.RemoteClient=l;var p=i("esri-workers-debug")?1:i("host-browser")?navigator.hardwareConcurrency-1:0;p||(p=i("safari")&&i("mac")||i("trident")?7:2);var d=0,f=[];t.initialize=function(){c()},t.openWithPorts=function(e,r){return new t.Connection(e.map(function(e){return new t.RemoteClient(e,r,{})}))},t.open=function(s,l){return void 0===l&&(l={}),n(this,void 0,void 0,function(){var n,u,h,y,m,g,v;return r(this,function(r){switch(r.label){case 0:if("string"!=typeof s)throw new o("workers:undefined-module","modulePath is missing");return n=l.signal,u=l.strategy||"distributed",i("host-webworker")&&!i("esri-workers")&&(u="local"),"local"!==u?[3,2]:[4,a.create(function(t){return e([s],t)})];case 1:return h=r.sent(),a.throwIfAborted(n),y=l.client||h,m=t.RemoteClient.connect(h),[2,new t.Connection([new t.RemoteClient(m,y,l)])];case 2:return[4,c()];case 3:return r.sent(),(a.throwIfAborted(n),"dedicated"!==u)?[3,5]:(g=d++,d%=p,[4,f[g].open(s,l)]);case 4:return m=r.sent(),[2,new t.Connection([new t.RemoteClient(m,l.client,l)])];case 5:return[4,a.all(f.map(function(e){return e.open(s,l)}))];case 6:return v=r.sent(),[2,new t.Connection(v.map(function(e){return new t.RemoteClient(e,l.client,l)}))]}})})},t.terminate=function(){y&&(h.abort(),y=null);for(var e=0;e<f.length;e++)f[e]&&f[e].terminate();f.length=0};var h,y=null})},"esri/core/workers/Connection":function(){define(["require","exports","../Logger","../promiseUtils","../accessorSupport/utils"],function(e,t,r,n,o){var i=r.getLogger("esri.core.workers.Connection");return function(){function e(e){this._clientIdx=0,this._clients=e}return e.prototype.broadcast=function(e,t,r){for(var n=[],o=0,i=this._clients;o<i.length;o++)n.push(i[o].invoke(e,t,r));return n},e.prototype.close=function(){for(var e=0,t=this._clients;e<t.length;e++)t[e].close();this._clients=[]},e.prototype.getAvailableClient=function(){var e;return this._clients.some(function(t){return!t.isBusy()&&(e=t,!0)})||(this._clientIdx=(this._clientIdx+1)%this._clients.length,e=this._clients[this._clientIdx]),e},e.prototype.invoke=function(e,t,r){var o=null;return Array.isArray(r)?(i.warn("invoke()","The transferList parameter is deprecated, use the options object instead"),o={transferList:r}):o=r,this._clients&&this._clients.length?this.getAvailableClient().invoke(e,t,o):n.reject(Error("Connection closed"))},e.prototype.on=function(e,t){var r=this._clients.map(function(r){return r.on(e,t)});return o.handlesGroup(r)},e.prototype.openPorts=function(){return this._clients.map(function(e){return e.openPort()})},e}()})},"esri/core/workers/RemoteClient":function(){define("require exports ../Error ../events ../promiseUtils ./utils ../../views/support/Scheduler".split(" "),function(e,t,r,n,o,i,a){var s=i.MessageType.CLOSE,l=i.MessageType.ABORT,u=i.MessageType.INVOKE,c=i.MessageType.RESPONSE,p=i.MessageType.OPEN_PORT,d=i.MessageType.ON,f=function(){function e(e){this._timer=null,this._cancelledJobIds=new Set,this._invokeMessages=[],this._invoke=e,this._timer=null,this._process=this._process.bind(this)}return e.prototype.push=function(e){e.type===i.MessageType.ABORT?this._cancelledJobIds.add(e.jobId):(this._invokeMessages.push(e),null===this._timer&&(this._timer=setTimeout(this._process,0)))},e.prototype.clear=function(){this._invokeMessages.length=0,this._cancelledJobIds.clear(),this._timer=null},e.prototype._process=function(){this._timer=null;for(var e=0,t=this._invokeMessages;e<t.length;e++){var r=t[e];this._cancelledJobIds.has(r.jobId)||this._invoke(r)}this._cancelledJobIds.clear(),this._invokeMessages.length=0},e}();return function(){function e(e,t,r){var n=this;this._port=e,this._client=t,this._outJobs=new Map,this._inJobs=new Map,this._invokeQueue=new f(function(e){return n._onInvokeMessage(e)}),this._responseQueue=[],this._onMessage=this._onMessage.bind(this),this._channel=r.channel,r.scheduler&&(this._frameTask=r.scheduler.registerTask(a.Task.REMOTE_CLIENT,function(e){return n._update(e)},function(){return 0<n._responseQueue.length})),this._port.addEventListener("message",this._onMessage),this._port.start()}return e.connect=function(t){var r=new MessageChannel;return t="function"==typeof t?new t:"default"in t&&"function"==typeof t.default?new t.default:t,t.remoteClient=new e(r.port1,t,{channel:r}),r.port2},e.prototype.close=function(){this._post({type:s}),this._close()},e.prototype.isBusy=function(){return 0<this._outJobs.size},e.prototype.invoke=function(e,t,n){var a=this,s=n&&n.signal,c=n&&n.transferList;if(!this._port)return o.reject(new r("remote-client:port-closed","Can't invoke(), port is closed"));var p=i.newJobId(),d=function(){var e=a._outJobs.get(p);e&&(a._outJobs.delete(p),a._post({type:l,jobId:p}),e.reject(o.createAbortError()))};return o.create(function(r,n){o.onAbortOrThrow(s,function(){d(),n(o.createAbortError())}),a._outJobs.set(p,{resolve:r,reject:n}),a._post({type:u,jobId:p,methodName:e,abortable:!0},t,c)},d)},e.prototype.on=function(e,t){function r(e){t(e.data)}var n=new MessageChannel;return this._port.postMessage({type:i.MessageType.ON,eventType:e,port:n.port2},[n.port2]),n.port1.addEventListener("message",r),n.port1.start(),{remove:function(){n.port1.postMessage({type:i.MessageType.CLOSE}),n.port1.close(),n.port1.removeEventListener("message",r)}}},e.prototype.openPort=function(){var e=new MessageChannel;return this._post({type:p,port:e.port2}),e.port1},e.prototype._close=function(){this._channel&&(this._channel=null),this._port.removeEventListener("message",this._onMessage),this._port.close(),this._outJobs.forEach(function(e){return e.reject(o.createAbortError("Abort job: worker closing"))}),this._inJobs.clear(),this._outJobs.clear(),this._invokeQueue.clear(),this._port=this._client=null,this._frameTask&&this._frameTask.remove(),this._responseQueue=this._frameTask=null},e.prototype._onMessage=function(e){if(e=i.receiveMessage(e))switch(e.type){case c:this._onResponseMessage(e);break;case u:this._invokeQueue.push(e);break;case l:this._onAbortMessage(e);break;case s:this._onCloseMessage();break;case p:this._onOpenPortMessage(e);break;case d:this._onOnMessage(e)}},e.prototype._onAbortMessage=function(e){var t=this._inJobs,r=e.jobId,n=t.get(r);this._invokeQueue.push(e),n&&(n.controller&&n.controller.abort(),t.delete(r))},e.prototype._onCloseMessage=function(){var e=this._client;this._close(),e&&e.remoteClient===this&&"destroy"in e&&e.destroy(),e.remoteClient=null},e.prototype._onInvokeMessage=function(e){var t=this,r=e.methodName,n=e.jobId,a=e.data;e=e.abortable?o.createAbortController():null;var s,l=this._inJobs,u=this._client,p=u[r];try{if(!p&&r&&-1!==r.indexOf("."))for(var d=r.split("."),f=0;f<d.length-1;f++)u=u[d[f]],p=u[d[f+1]];if("function"!=typeof p)throw new TypeError(r+" is not a function");s=p.call(u,a,{client:this,signal:e?e.signal:null})}catch(e){return void this._post({type:c,jobId:n,error:i.toInvokeError(e)})}o.isPromiseLike(s)?(l.set(n,{controller:e,promise:s}),e&&"cancel"in s&&o.onAbort(e.signal,function(){return s.cancel()}),s.then(function(e){l.has(n)&&(l.delete(n),t._post({type:c,jobId:n},e))},function(e){l.has(n)&&(l.delete(n),o.isAbortError(e)||t._post({type:c,jobId:n,error:i.toInvokeError(e||{message:"Error encountered at method "+r})}))})):this._post({type:c,jobId:n},s)},e.prototype._onOpenPortMessage=function(t){new e(t.port,this._client,{})},e.prototype._onOnMessage=function(e){var t=e.port,r=this._client.on(e.eventType,function(e){delete e.target,t.postMessage(e)}),o=n.on(e.port,"message",function(e){i.receiveMessage(e).type===i.MessageType.CLOSE&&(o.remove(),r.remove(),t.close())})},e.prototype._onResponseMessage=function(e){this._frameTask?this._responseQueue.push(e):this._handleResponse(e)},e.prototype._update=function(e){for(;!e.done&&0<this._responseQueue.length;)this._handleResponse(this._responseQueue.shift()),e.madeProgress()},e.prototype._handleResponse=function(e){var t=e.jobId,n=e.error;e=e.data;var o=this._outJobs;if(o.has(t)){var i=o.get(t);o.delete(t),n?i.reject(r.fromJSON(JSON.parse(n))):i.resolve(e)}},e.prototype._post=function(e,t,r){return i.postMessage(this._port,e,t,r)},e}()})},"esri/core/workers/utils":function(){define(["require","exports","../has"],function(e,t,r){function n(e){return e&&"object"==typeof e&&("result"in e||"transferList"in e)}function o(e){return e&&e.length?r("esri-workers-arraybuffer-transfer")?e:(e=e.filter(function(e){return!(e instanceof ArrayBuffer||e&&e.constructor&&"ArrayBuffer"===e.constructor.name)}),e.length?e:null):null}Object.defineProperty(t,"__esModule",{value:!0});var i;!function(e){e[e.HANDSHAKE=0]="HANDSHAKE",e[e.CONFIGURE=1]="CONFIGURE",e[e.CONFIGURED=2]="CONFIGURED",e[e.OPEN=3]="OPEN",e[e.OPENED=4]="OPENED",e[e.RESPONSE=5]="RESPONSE",e[e.INVOKE=6]="INVOKE",e[e.ABORT=7]="ABORT",e[e.CLOSE=8]="CLOSE",e[e.OPEN_PORT=9]="OPEN_PORT",e[e.ON=10]="ON"}(i=t.MessageType||(t.MessageType={}));var a=0;t.newJobId=function(){return a++},t.isTranferableResult=n,t.toInvokeError=function(e){return e?e.toJSON?JSON.stringify(e):JSON.stringify({name:e.name,message:e.message,details:e.details,stack:e.stack}):null},t.postMessage=function(e,t,r,a){t.type===i.OPEN_PORT?e.postMessage(t,[t.port]):t.type!==i.INVOKE&&t.type!==i.RESPONSE?e.postMessage(t):(n(r)?(a=o(r.transferList),t.data=r.result):(a=o(a),t.data=r),a?e.postMessage(t,a):e.postMessage(t))},t.receiveMessage=function(e){return e&&(e=e.data)?"string"==typeof e?JSON.parse(e):e:null}})},"esri/views/support/Scheduler":function(){define("require exports @dojo/framework/shim/number ../../core/maybe ../../core/now ../../core/PooledArray ../../core/watchUtils ./debugFlags".split(" "),function(e,t,r,n,o,i,a,s){function l(e){return e in t.taskPriorities?t.taskPriorities[e]:"number"==typeof e?e:1}Object.defineProperty(t,"__esModule",{value:!0});var u;t.newScheduler=function(e){return new c.Scheduler(e)},function(e){e.REMOTE_CLIENT="remote client",e.STREAM_DATA_LOADER="stream data loader",e.TERRAIN_SURFACE="terrain surface",e.SURFACE_GEOMETRY_UPDATES="surface geometry updates",e.I3S_CONTROLLER="I3s controller",e.POINT_CLOUD_LAYER="point cloud",e.FEATURE_TILE_FETCHER="feature fetcher",e.DECONFLICTOR_IMMEDIATE="fast deconflictor",e.DECONFLICTOR_DELAYED="delayed deconflictor",e.GRAPHICS_CORE="Graphics3D",e.FILTER_VISIBILITY="Graphics3D filter visibility",e.FEATURE_QUERY_ENGINE="feature query",e.SCALE_VISIBILITY="Graphics3D scale visibility",e.FRUSTUM_VISIBILITY="Graphics3D frustum visibility",e.POINT_OF_INTEREST_FREQUENT="POI frequent",e.POINT_OF_INTEREST_INFREQUENT="POI infrequent",e.LABELER="labeler",e.FEATURE_TILE_TREE="feature tile tree",e.FEATURE_TILE_TREE_ACTIVE="fast feature tile tree",e.ELEVATION_ALIGNMENT="elevation alignment",e.TEXT_TEXTURE_ATLAS="text texture atlas",e.OVERLAY_MANAGER="overlay manager",e.INTERACTIVE_TOOL="interactive tool",e[e.TEST_PRIO=1]="TEST_PRIO"}(e=t.Task||(t.Task={})),t.taskPriorities=(u={},u[e.REMOTE_CLIENT]=1,u[e.STREAM_DATA_LOADER]=1,u[e.TERRAIN_SURFACE]=1,u[e.SURFACE_GEOMETRY_UPDATES]=1,u[e.I3S_CONTROLLER]=2,u[e.POINT_CLOUD_LAYER]=2,u[e.FEATURE_TILE_FETCHER]=2,u[e.DECONFLICTOR_IMMEDIATE]=2,u[e.DECONFLICTOR_DELAYED]=12,u[e.GRAPHICS_CORE]=3,u[e.FILTER_VISIBILITY]=4,u[e.FEATURE_QUERY_ENGINE]=4,u[e.SCALE_VISIBILITY]=6,u[e.FRUSTUM_VISIBILITY]=6,u[e.POINT_OF_INTEREST_FREQUENT]=6,u[e.POINT_OF_INTEREST_INFREQUENT]=30,u[e.LABELER]=8,u[e.FEATURE_TILE_TREE]=12,u[e.FEATURE_TILE_TREE_ACTIVE]=1,u[e.ELEVATION_ALIGNMENT]=12,u[e.TEXT_TEXTURE_ATLAS]=12,u[e.OVERLAY_MANAGER]=12,u[e.INTERACTIVE_TOOL]=16,u),t.getTaskPriority=l;var c;!function(e){var t=function(){function t(t){var r=this;this._now=t,this._budget=null,this._state=1,this._tasks=new i,this._runQueue=new i,this._load=0,this._idleStateCallbacks=new i,this._idleUpdatesStartFired=!1,this._maxReschedule=d,this._forceTask=!1,this._safetyBudget=0,this._debug=!1,this._debugHandle=a.init(s,"SCHEDULER_LOG_SLOW_TASKS",function(e){return r._debug=e}),this._budget=new e.Budget(t);var n=this;this._test={state:void 0,FRAME_SAFETY_BUDGET:1,idleBudget:100,get budget(){return n._budget.budget},usedBudget:0,startTime:0,updateTask:function(e){return r._updateTask(e)},getState:function(e){return r._getState(e)},getRuntime:function(e){return r._getRuntime(e)}}}return t.prototype.destroy=function(){this._debugHandle&&this._debugHandle.remove()},t.prototype.registerTask=function(e,t,n){var o=this,i=l(e),a=new r(e,t,n,i);return this._tasks.push(a),{remove:function(){return o._removeTask(a)},set task(e){a.setPriority(e)}}},t.prototype.registerIdleStateCallbacks=function(e,t){var r=this,n={idleBegin:e,idleEnd:t};this._idleStateCallbacks.push(n),2===this.state&&this._idleUpdatesStartFired&&n.idleBegin();var o=this;return{remove:function(){return r._removeIdleStateCallbacks(n)},set idleBegin(e){o._idleUpdatesStartFired&&(n.idleEnd(),2===o._state&&e()),n.idleBegin=e},set idleEnd(e){n.idleEnd=e}}},Object.defineProperty(t.prototype,"now",{get:function(){return this._now()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"load",{get:function(){return this._load},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return n.isNone(this._test.state)?this._state:this._test.state},set:function(e){this._state!==e&&(this._state=e,2!==this.state&&this._idleUpdatesStartFired&&(this._idleUpdatesStartFired=!1,this._idleStateCallbacks.forEach(function(e){return e.idleEnd()})))},enumerable:!0,configurable:!0}),t.prototype.updateBudget=function(e){var t=2===this.state,r=e.frameDuration;switch(this.state){case 2:r=100;break;case 1:r=Math.max(33,e.frameDuration);break;case 0:r=e.frameDuration}return this._safetyBudget=t?0:1,r-=e.elapsedFrameTime+this._safetyBudget,this._test.usedBudget=0,this._test.startTime=e.elapsedFrameTime,!t&&0>r&&!this._forceTask?(this._forceTask=!0,!1):(r=Math.max(r,5),this._budget.reset(r,t),this._maxReschedule=d,this._updateLoad(),this._schedule())},t.prototype.frame=function(){switch(this._forceTask=!1,this.state){case 2:this._idleUpdatesStartFired||(this._idleUpdatesStartFired=!0,this._idleStateCallbacks.forEach(function(e){return e.idleBegin()})),this._runIdle();break;case 1:this._runMoving();break;default:this._runAnimating()}this._test.usedBudget=this._budget.elapsed},t.prototype._removeIdleStateCallbacks=function(e){this._idleUpdatesStartFired&&e.idleEnd(),this._idleStateCallbacks.removeUnordered(e)},t.prototype._removeTask=function(e){this._tasks.removeUnordered(e),this._runQueue.removeUnordered(e)},t.prototype._updateTask=function(e){this._tasks.forEach(function(t){t.name===e&&t.setPriority(e)})},t.prototype._getState=function(e){if(this._runQueue.some(function(t){return t.name===e}))return p.SCHEDULED;var t=p.IDLE;return this._tasks.forEach(function(r){r.name===e&&r.needsUpdate()&&(1>=r.schedule?t=p.READY:t!==p.READY&&(t=p.WAITING))}),t},t.prototype._getRuntime=function(e){var t=0;return this._tasks.forEach(function(r){r.name===e&&(t+=r.runtime)}),t},t.prototype._runIdle=function(){this._run()},t.prototype._runMoving=function(){this._run()},t.prototype._runAnimating=function(){this._run()},t.prototype._updateLoad=function(){var e=0;this._tasks.forEach(function(t){return t.needsUpdate()?++e:e}),this._load=.9*this._load+e*(1-.9)},t.prototype._schedule=function(){var e=this;if(0>=this._maxReschedule)return!1;this._runQueue.filterInPlace(function(e){return!!e.needsUpdate()||(e.schedule=e.priority,!1)});for(var t=function(){var t=!1,n=0;if(r._tasks.forEach(function(r){if(r.needsUpdate())switch(t=!0,n=Math.max(n,r.priority),r.schedule){case 0:break;case 1:r.schedule=0,e._runQueue.push(r);break;default:--r.schedule}}),!t)return{value:!1};r._maxReschedule===d&&(r._maxReschedule=n),--r._maxReschedule},r=this;0===this._runQueue.length;){var n=t();if("object"==typeof n)return n.value}return!0},t.prototype._run=function(){do{for(;0<this._runQueue.length;){var e=this._runQueue.pop();this._budget.resetProgress();var t=this._budget.now();if(e.update(this._budget),e.schedule=e.priority,e.runtime+=this._budget.now()-t,this._debug&&this._budget.elapsed>2*this._budget.budget&&console.log("Task",e.name,"used",this._budget.elapsed,"of max",this._budget.budget,"ms"),0>=this._budget.remaining)return}}while(this._schedule())},Object.defineProperty(t.prototype,"test",{get:function(){return this._test},enumerable:!0,configurable:!0}),t}();e.Scheduler=t;var r=function(){function e(e,t,r,n){this.name=e,this.update=t,this.needsUpdate=r,this._priority=n,this.runtime=0,this.schedule=this._priority}return Object.defineProperty(e.prototype,"priority",{get:function(){return this._priority},enumerable:!0,configurable:!0}),e.prototype.setPriority=function(e){var t=l(e);this.name=e,this._priority=t,0!==this.schedule&&(this.schedule=t)},e}(),t=function(){function e(e){this.now=e,this._budget=this._begin=0,this._didWork=this._idle=!1,this._enabled=!0}return e.prototype.run=function(e){return!this.done&&(!0===e()&&(this._didWork=!0),!0)},Object.defineProperty(e.prototype,"done",{get:function(){return this._didWork&&this.elapsed>=this._budget&&this._enabled},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"budget",{get:function(){return this._budget},enumerable:!0,configurable:!0}),e.prototype.madeProgress=function(){this._didWork=!0},Object.defineProperty(e.prototype,"idleFrame",{get:function(){return this._idle},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"enabled",{get:function(){return this._enabled},set:function(e){this._enabled=e},enumerable:!0,configurable:!0}),e.prototype.reset=function(e,t){this._begin=this.now(),this._budget=e,this._idle=t,this._didWork=!1},Object.defineProperty(e.prototype,"remaining",{get:function(){return Math.max(this._budget-this.elapsed,0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"elapsed",{get:function(){return this.now()-this._begin},enumerable:!0,configurable:!0}),e.prototype.resetProgress=function(){this._didWork=!1},Object.defineProperty(e.prototype,"hasProgressed",{get:function(){return this._didWork},enumerable:!0,configurable:!0}),e}();e.Budget=t}(c||(c={}));var p;!function(e){e.SCHEDULED="s",e.READY="r",e.WAITING="w",e.IDLE="i"}(p=t.TaskState||(t.TaskState={})),t.noBudget=function(){var e=new c.Budget(o);return e.enabled=!1,e}();var d=r.MAX_SAFE_INTEGER})},"esri/core/watchUtils":function(){define("require exports ./events ./has ./lang ./promiseUtils".split(" "),function(e,t,r,n,o,i){function a(e,t,r,n,o){if(o=e.watch(t,function(t,o,i,a){r&&!r(t)||n.call(e,t,o,i,a)},o),Array.isArray(t))for(var i=0;i<t.length;i++){var a=e.get(t[i]);r&&r(a)&&n.call(e,a,a,t,e)}else a=e.get(t),r&&r(a)&&n.call(e,a,a,t,e);return o}function s(e,t,r,o,s){function l(){p&&(p.remove(),p=null)}var u="function"==typeof o?o:null,c="object"==typeof o?o:null;"boolean"==typeof o&&(s=o);var p,d=!1,f=i.createDeferred(l);return i.onAbort(c,function(){l(),f.reject(i.createAbortError())}),o=n("esri-native-promise")?{then:f.promise.then.bind(f.promise),catch:f.promise.catch.bind(f.promise),remove:l}:{cancel:f.cancel,then:f.promise.then.bind(f.promise),catch:f.promise.catch.bind(f.promise),remove:l},Object.freeze(o),p=a(e,t,r,function(t,r,n,o){d=!0,l(),u&&u.call(e,t,r,n,o),f.resolve({value:t,oldValue:r,propertyName:n,target:o})},s),d&&l(),o}function l(e){return!!e}function u(e){return!e}function c(e){return!0===e}function p(e){return!1===e}function d(e){return void 0!==e}function f(e){return void 0===e}function h(e,t,r,n){var o=Array.isArray(t)?t:-1<t.indexOf(",")?t.split(","):[t];for(t=e.watch(t,r,n),n=0;n<o.length;n++){var i=o[n].trim().replace(y,"$1"),a=e.get(i);r.call(e,a,a,i,e)}return t}Object.defineProperty(t,"__esModule",{value:!0}),t.whenValidOnce=s;var y=/\?(\.|$)/g;t.init=h,t.watch=function(e,t,r,n){return e.watch(t,r,n)},t.once=function(e,t,r,n){return s(e,t,null,r,n)},t.when=function(e,t,r,n){return a(e,t,l,r,n)},t.whenOnce=function(e,t,r,n){return s(e,t,l,r,n)},t.whenNot=function(e,t,r,n){return a(e,t,u,r,n)},t.whenNotOnce=function(e,t,r,n){return s(e,t,u,r,n)},t.whenTrue=function(e,t,r,n){return a(e,t,c,r,n)},t.whenTrueOnce=function(e,t,r,n){return s(e,t,c,r,n)},t.whenFalse=function(e,t,r,n){return a(e,t,p,r,n)},t.whenFalseOnce=function(e,t,r,n){return s(e,t,p,r,n)},t.whenDefined=function(e,t,r,n){return a(e,t,d,r,n)},t.whenDefinedOnce=function(e,t,r,n){return s(e,t,d,r,n)},t.whenUndefined=function(e,t,r,n){return a(e,t,f,r,n)},t.whenUndefinedOnce=function(e,t,r,n){return s(e,t,f,r,n)},t.whenEqual=function(e,t,r,n,i){return a(e,t,function(e){return o.equals(r,e)},n,i)},t.whenEqualOnce=function(e,t,r,n,i){return s(e,t,function(e){return o.equals(r,e)},n,i)},t.pausable=function(e,t,r,n){var o=!1,i=e.watch(t,function(t,n,i,a){o||r.call(e,t,n,i,a)},n);return{remove:function(){i.remove()},pause:function(){o=!0},resume:function(){o=!1}}},t.on=function(e,t,n,o,i,a,s){function l(t){var r=u[t];r&&(a&&a(r.target,t,e,n),r.handle.remove(),delete u[t])}var u={},c=h(e,t,function(t,a,s){l(s),r.isEventTarget(t)&&(u[s]={handle:r.on(t,n,o),target:t},i&&i(t,s,e,n))},s);return{remove:function(){c.remove();for(var e in u)l(e)}}}})},"esri/views/support/debugFlags":function(){define("require exports ../../core/tsSupport/decorateHelper ../../core/tsSupport/declareExtendsHelper ../../core/Accessor ../../core/accessorSupport/decorators".split(" "),function(e,t,r,n,o,i){return new(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.SCHEDULER_LOG_SLOW_TASKS=!1,t}return n(t,e),r([i.property()],t.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0),t=r([i.subclass("esri.views.support.DebugFlags")],t)}(i.declared(o)))})},"esri/core/workers/WorkerOwner":function(){define("require exports ../tsSupport/generatorHelper ../tsSupport/awaiterHelper ../../kernel ../Error ../Logger ../promiseUtils ./utils ./workerFactory".split(" "),function(e,t,r,n,o,i,a,s,l,u){function c(e,t){e.delete(t)}var p=a.getLogger("esri.core.workers"),d=l.MessageType.ABORT,f=l.MessageType.INVOKE,h=l.MessageType.OPEN,y=l.MessageType.OPENED,m=l.MessageType.RESPONSE;return function(){function e(e,t){this._outJobs=new Map,this._inJobs=new Map,this.worker=e,this.id=t,e.addEventListener("message",this._onMessage.bind(this)),e.addEventListener("error",function(e){e.preventDefault(),p.error(e)})}return e.create=function(t){return n(this,void 0,void 0,function(){var n;return r(this,function(r){switch(r.label){case 0:return[4,u.createWorker()];case 1:return n=r.sent(),[2,new e(n,t)]}})})},e.prototype.terminate=function(){this.worker.terminate()},e.prototype.open=function(e,t){return void 0===t&&(t={}),n(this,void 0,void 0,function(){var n,o,i=this;return r(this,function(r){return n=t.signal,o=l.newJobId(),[2,s.create(function(t,r){t={resolve:t,reject:r},s.onAbortOrThrow(n,function(){c(i._outJobs,o),i._post({type:d,jobId:o})}),i._outJobs.set(o,t),i._post({type:h,jobId:o,modulePath:e})})]})})},e.prototype._onMessage=function(e){if(e=l.receiveMessage(e))switch(e.type){case y:this._onOpenedMessage(e);break;case m:this._onResponseMessage(e);break;case d:this._onAbortMessage(e);break;case f:this._onInvokeMessage(e)}},e.prototype._onAbortMessage=function(e){var t=this._inJobs;e=e.jobId;var r=t.get(e);r&&(r.controller&&r.controller.abort(),c(t,e))},e.prototype._onInvokeMessage=function(e){var t=this,r=e.methodName,n=e.jobId,i=e.data;e=e.abortable?s.createAbortController():null;var a,u=this._inJobs,p=o.workerMessages[r];try{if("function"!=typeof p)throw new TypeError(r+" is not a function");a=p.call(null,i,{signal:e?e.signal:null})}catch(e){return void this._post({type:m,jobId:n,error:l.toInvokeError(e)})}s.isPromiseLike(a)?(u.set(n,{controller:e,promise:a}),e&&"cancel"in a&&s.onAbort(e.signal,function(){return a.cancel()}),a.then(function(e){u.has(n)&&(c(u,n),t._post({type:m,jobId:n},e))},function(e){u.has(n)&&(c(u,n),e||(e={message:"Error encountered at method"+r}),s.isAbortError(e)||t._post({type:m,jobId:n,error:l.toInvokeError(e||{message:"Error encountered at method "+r})}))})):this._post({type:m,jobId:n},a)},e.prototype._onOpenedMessage=function(e){var t=e.jobId;e=e.data;var r=this._outJobs.get(t);r&&(c(this._outJobs,t),r.resolve(e))},e.prototype._onResponseMessage=function(e){var t=e.jobId,r=e.error;e=e.data;var n=this._outJobs.get(t);n&&(c(this._outJobs,t),r?n.reject(i.fromJSON(JSON.parse(r))):n.resolve(e))},e.prototype._post=function(e,t,r){return l.postMessage(this.worker,e,t,r)},e}()})},"esri/core/workers/workerFactory":function(){define("require exports ../tsSupport/assignHelper ../tsSupport/generatorHelper ../tsSupport/awaiterHelper dojo/_base/kernel ../../config ../has ../Logger ../promiseUtils ./loaderConfig ./utils ./WorkerFallback".split(" "),function(e,t,r,n,o,i,a,s,l,u,c,p,d){function f(e){return o(this,void 0,void 0,function(){return n(this,function(t){return[2,u.create(function(t){function n(l){if(l=p.receiveMessage(l))switch(l.type){case v:l=e;var u,d=a.workers.loaderUrl||c.DEFAULT_LOADER_URL;null!=a.default?(u=r({},a),delete u.default,u=JSON.parse(JSON.stringify(u))):u=JSON.parse(JSON.stringify(a));var f=a.workers.loaderConfig,f=c.default({baseUrl:f.baseUrl,locale:i.locale,has:r({"config-deferredInstrumentation":0,"csp-restrictions":s("csp-restrictions"),"dojo-test-sniff":0,"esri-native-promise":s("esri-native-promise"),"esri-secure-context":s("esri-secure-context"),"esri-workers-arraybuffer-transfer":s("esri-workers-arraybuffer-transfer"),"events-keypress-typed":0,"host-webworker":1,"esri-webgl-texture-float":s("esri-webgl-texture-float"),"esri-shared-array-buffer":s("esri-shared-array-buffer"),"esri-atomics":s("esri-atomics"),"esri-2d-debug":0,"esri-webgl-max-texture-size":s("esri-webgl-max-texture-size")},f.has),map:r({},f.map),paths:r({},f.paths),packages:f.packages||[]});l.postMessage({type:g,configure:{esriConfig:u,loaderUrl:d,loaderConfig:f}});break;case m:e.removeEventListener("message",n),e.removeEventListener("error",o),t(e)}}function o(t){t.preventDefault(),e.removeEventListener("message",n),e.removeEventListener("error",o),h.warn("Failed to create Worker. Fallback to execute module in main thread",t),e=new d,e.addEventListener("message",n),e.addEventListener("error",o)}e.addEventListener("message",n),e.addEventListener("error",o)})]})})}Object.defineProperty(t,"__esModule",{value:!0});var h=l.getLogger("esri.core.workers");s.add("esri-workers-arraybuffer-transfer",!s("safari")||12<=s("safari"));var y,m=p.MessageType.CONFIGURED,g=p.MessageType.CONFIGURE,v=p.MessageType.HANDSHAKE;try{y=URL.createObjectURL(new Blob(['var globalId=0;var outgoing=new Map;var configured=false;var HANDSHAKE=0;var CONFIGURE=1;var CONFIGURED=2;var OPEN=3;var OPENED=4;var RESPONSE=5;var INVOKE=6;var ABORT=7;function mapDelete(map,key){map["delete"](key)}function createAbortError(){var error=new Error("AbortError");error.dojoType="cancel";return error}function receiveMessage(event){if(!event||!event.data){return null}if(typeof event.data==="string"){return JSON.parse(event.data)}return event.data}function invokeStaticMessage(methodName,data,options){var signal=options&&options.signal;var Deferred=require("dojo/Deferred");var jobId=globalId++;var abort=function(){var outJob=outgoing.get(jobId);if(!outJob){return}mapDelete(outgoing,jobId);self.postMessage({type:ABORT,jobId:jobId});outJob.reject(createAbortError())};var deferred=new Deferred(abort);if(signal){if(signal.aborted){return deferred.reject(createAbortError())}signal.addEventListener("abort",function(){abort();deferred.reject(createAbortError())})}outgoing.set(jobId,deferred);self.postMessage({type:INVOKE,jobId:jobId,methodName:methodName,abortable:true,data:data});return deferred.promise}function messageHandler(event){var message=receiveMessage(event);if(!message){return}var jobId=message.jobId;switch(message.type){case CONFIGURE:var configuration=message.configure;if(configured){return}self.dojoConfig=configuration.loaderConfig;self.importScripts(configuration.loaderUrl);if(typeof require.config==="function"){require.config(configuration.loaderConfig)}require(["esri/config"],function(esriConfig){for(var name in configuration.esriConfig){if(Object.prototype.hasOwnProperty.call(configuration.esriConfig,name)){esriConfig[name]=configuration.esriConfig[name]}}self.postMessage({type:CONFIGURED})});break;case OPEN:var modulePath=message.modulePath;require(["esri/core/workers/RemoteClient",modulePath],function(RemoteClient,Module){var port=RemoteClient.connect(Module);self.postMessage({type:OPENED,jobId:jobId,data:port},[port])});break;case RESPONSE:if(outgoing.has(jobId)){var deferred=outgoing.get(jobId);mapDelete(outgoing,jobId);if(message.error){deferred.reject(JSON.parse(message.error))}else{deferred.resolve(message.data)}}break}}self.addEventListener("message",messageHandler);self.postMessage({type:HANDSHAKE});'],{type:"text/javascript"}))}catch(e){}t.createWorker=function(){return o(this,void 0,void 0,function(){var e;return n(this,function(t){if(!s("esri-workers"))return[2,f(new d)];if(y)try{e=new Worker(y)}catch(t){h.warn("Failed to create Worker. Fallback to execute module in main thread",event),e=new d}else h.warn("Failed to create Worker. Fallback to execute module in main thread",event),e=new d;return[2,f(e)]})})}})},"esri/core/workers/loaderConfig":function(){define(["require","exports","../tsSupport/assignHelper","../has","../urlUtils"],function(e,t,r,n,o){Object.defineProperty(t,"__esModule",{value:!0}),n=n("esri-built")?"dojo/dojo-lite.js":"dojo/dojo.js",t.DEFAULT_LOADER_URL=o.makeAbsolute(o.removeQueryParameters(e.toUrl(n))),t.DEFAULT_CONFIG={baseUrl:function(){var t=o.removeQueryParameters(e.toUrl("dojo/x.js"));return o.makeAbsolute(t.slice(0,t.length-5))}(),packages:[{name:"esri"},{name:"dojo"},{name:"dojox"},{name:"dstore"},{name:"moment",main:"moment"},{name:"@dojo"},{name:"cldrjs",main:"dist/cldr"},{name:"globalize",main:"dist/globalize"},{name:"maquette-css-transitions",main:"dist/maquette-css-transitions.umd"},{name:"maquette-jsx",main:"dist/maquette-jsx.umd"},{name:"tslib",main:"tslib"}],map:{globalize:{cldr:"cldrjs/dist/cldr","cldr/event":"cldrjs/dist/cldr/event","cldr/supplemental":"cldrjs/dist/cldr/supplemental","cldr/unresolved":"cldrjs/dist/cldr/unresolved"}}},t.default=function(n){var i={async:n.async,isDebug:n.isDebug,locale:n.locale,baseUrl:n.baseUrl,has:r({},n.has),map:r({},n.map),packages:n.packages&&n.packages.concat()||[],paths:r({},n.paths)};n.hasOwnProperty("async")||(i.async=!0),n.hasOwnProperty("isDebug")||(i.isDebug=!1),n.baseUrl||(i.baseUrl=t.DEFAULT_CONFIG.baseUrl),t.DEFAULT_CONFIG.packages.forEach(function(t){e:{for(var n=i.packages,a=0;a<n.length;a++)if(n[a].name===t.name)break e;t=r({},t),a=o.removeQueryParameters(e.toUrl(t.name+"/x.js")),a=a.slice(0,a.length-5),t.location=o.makeAbsolute(a),n.push(t)}}),n=i.map=i.map||{};for(var a=0,s=Object.keys(t.DEFAULT_CONFIG.map);a<s.length;a++){var l=s[a];n[l]||(n[l]=t.DEFAULT_CONFIG.map[l])}return i}})},"esri/core/workers/WorkerFallback":function(){define("require exports ../tsSupport/generatorHelper ../tsSupport/awaiterHelper ../global ../has ../promiseUtils ./utils @dojo/framework/shim/Promise".split(" "),function(e,t,r,n,o,i,a,s){var l=function(){return function(){var e=this,t=document.createDocumentFragment();["addEventListener","dispatchEvent","removeEventListener"].forEach(function(r){e[r]=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t[r].apply(t,e)}})}}(),u=o.MutationObserver||o.WebKitMutationObserver,c=function(){var e;if(o.process&&o.process.nextTick)e=function(e){o.process.nextTick(e)};else if(o.Promise)e=function(e){o.Promise.resolve().then(e)};else if(u){var t=[],r=document.createElement("div");new u(function(){for(;0<t.length;)t.shift()()}).observe(r,{attributes:!0}),e=function(e){t.push(e),r.setAttribute("queueStatus","1")}}return e}(),p=function(){var e=o.MessageEvent;try{new e("message",{data:null})}catch(e){return function(e,t){void 0===t&&(t={});var r=t.data,n=t.bubbles,n=void 0!==n&&n;t=t.cancelable,t=void 0!==t&&t;var o=document.createEvent("Event");return o.initEvent(e,n,t),o.data=r,o}}return function(t,r){return new e(t,r)}}();return function(){function t(){this._dispatcher=new l,this._isInitialized=!1,this._workerPostMessage({type:s.MessageType.HANDSHAKE})}return t.prototype.terminate=function(){},Object.defineProperty(t.prototype,"onmessage",{get:function(){return this._onmessageHandler},set:function(e){this._onmessageHandler&&this.removeEventListener("message",this._onmessageHandler),(this._onmessageHandler=e)&&this.addEventListener("message",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onerror",{get:function(){return this._onerrorHandler},set:function(e){this._onerrorHandler&&this.removeEventListener("error",this._onerrorHandler),(this._onerrorHandler=e)&&this.addEventListener("error",e)},enumerable:!0,configurable:!0}),t.prototype.postMessage=function(e){var t=this;c(function(){t._workerMessageHandler(p("message",{data:e}))})},t.prototype.dispatchEvent=function(e){return this._dispatcher.dispatchEvent(e)},t.prototype.addEventListener=function(e,t,r){this._dispatcher.addEventListener(e,t,r)},t.prototype.removeEventListener=function(e,t,r){this._dispatcher.removeEventListener(e,t,r)},t.prototype._workerPostMessage=function(e){var t=this;c(function(){t.dispatchEvent(p("message",{data:e}))})},t.prototype._workerMessageHandler=function(t){return n(this,void 0,void 0,function(){var n,o,i,l,u,c,p,d,f=this;return r(this,function(r){switch(r.label){case 0:if(!(n=s.receiveMessage(t)))return[2];switch(o=n.type){case s.MessageType.CONFIGURE:return[3,1];case s.MessageType.OPEN:return[3,2]}return[3,27];case 1:return this._isInitialized||this._workerPostMessage({type:s.MessageType.CONFIGURED}),[3,27];case 2:return i=n.modulePath,l=n.jobId,[3,25];case 3:switch(c=r.sent(),p=i){case"esri/tasks/operations/PBFWorker":return[3,4];case"esri/views/2d/engine/vectorTiles/WorkerTileHandler":return[3,6];case"esri/views/2d/layers/features/Pipeline":return[3,8];case"esri/views/3d/layers/PointCloudWorker":return[3,10];case"esri/views/3d/layers/SceneLayerWorker":return[3,12];case"esri/layers/graphics/sources/support/CSVSourceWorker":return[3,14];case"esri/layers/support/LercWorker":return[3,16];case"esri/views/3d/webgl-engine/lib/edgeRendering/EdgeProcessingWorker":return[3,18];case"esri/geometry/support/meshUtils/ElevationSamplerWorker":return[3,20]}return[3,22];case 4:return[4,new Promise(function(t,r){e(["esri/tasks/operations/PBFWorker"],t,r)})];case 5:return u=r.sent(),[3,24];case 6:return[4,new Promise(function(t,r){e(["esri/views/2d/engine/vectorTiles/WorkerTileHandler"],t,r)})];case 7:return u=r.sent(),[3,24];case 8:return[4,new Promise(function(t,r){e(["esri/views/2d/layers/features/Pipeline"],t,r)})];case 9:return u=r.sent(),[3,24];case 10:return[4,new Promise(function(t,r){e(["esri/views/3d/layers/PointCloudWorker"],t,r)})];case 11:return u=r.sent(),[3,24];case 12:return[4,new Promise(function(t,r){e(["esri/views/3d/layers/SceneLayerWorker"],t,r)})];case 13:return u=r.sent(),[3,24];case 14:return[4,new Promise(function(t,r){e(["esri/layers/graphics/sources/support/CSVSourceWorker"],t,r)})];case 15:return u=r.sent(),[3,24];case 16:return[4,new Promise(function(t,r){e(["esri/layers/support/LercWorker"],t,r)})];case 17:return u=r.sent(),[3,24];case 18:return[4,new Promise(function(t,r){e(["esri/views/3d/webgl-engine/lib/edgeRendering/EdgeProcessingWorker"],t,r)})];case 19:return u=r.sent(),[3,24];case 20:return[4,new Promise(function(t,r){e(["esri/geometry/support/meshUtils/ElevationSamplerWorker"],t,r)})];case 21:return u=r.sent(),[3,24];case 22:return[4,a.create(function(t){return e([i],t)})];case 23:u=r.sent(),r.label=24;case 24:return d=c.connect(u),this._workerPostMessage({type:s.MessageType.OPENED,jobId:l,data:d}),[3,26];case 25:e(["esri/core/workers/RemoteClient",i],function(e,t){e=e.connect(t),f._workerPostMessage({type:s.MessageType.OPENED,jobId:l,data:e})}),r.label=26;case 26:return[3,27];case 27:return[2]}})})},t}()})},"esri/tasks/support/FeatureSet":function(){define("require exports ../../core/tsSupport/decorateHelper ../../core/tsSupport/declareExtendsHelper ../../geometry ../../Graphic ../../core/jsonMap ../../core/JSONSupport ../../core/maybe ../../core/accessorSupport/decorators ../../geometry/SpatialReference ../../geometry/support/jsonUtils ../../layers/support/Field".split(" "),function(e,t,r,n,o,i,a,s,l,u,c,p,d){var f=new a.default({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent"});return e=function(e){function t(t){return t=e.call(this,t)||this,t.displayFieldName=null,t.exceededTransferLimit=!1,t.features=[],t.fields=null,t.geometryType=null,t.hasM=!1,t.hasZ=!1,t.queryGeometry=null,t.spatialReference=null,t}return n(t,e),t.prototype.readFeatures=function(e,t){t=c.fromJSON(t.spatialReference);for(var r=[],n=0;n<e.length;n++){var o=e[n],a=i.fromJSON(o),o=o.geometry&&o.geometry.spatialReference;l.isSome(a.geometry)&&!o&&(a.geometry.spatialReference=t),r.push(a)}return r},t.prototype.writeGeometryType=function(e,t,r,n){if(e)f.write(e,t,r,n);else if(e=this.features)for(var o=0;o<e.length;o++){var i=e[o];if(i&&l.isSome(i.geometry)){f.write(i.geometry.type,t,r,n);break}}},t.prototype.writeSpatialReference=function(e,t){if(e)t.spatialReference=e.toJSON();else if(e=this.features)for(var r=0;r<e.length;r++){var n=e[r];n&&l.isSome(n.geometry)&&n.geometry.spatialReference&&(t.spatialReference=n.geometry.spatialReference.toJSON())}},t.prototype.toJSON=function(e){var t=this.write(null);if(t.features&&Array.isArray(e)&&0<e.length)for(var r=0;r<t.features.length;r++){var n=t.features[r];if(n.geometry){var o=e&&e[r];n.geometry=o&&o.toJSON()||n.geometry}}return t},t.prototype.quantize=function(e){for(var t=e.scale,r=t[0],n=t[1],t=e.translate,o=t[0],i=t[1],t=this.features,a=this._getQuantizationFunction(this.geometryType,function(e){return Math.round((e-o)/r)},function(e){return Math.round((i-e)/n)}),s=0,u=t.length;s<u;s++)a(l.expect(t[s].geometry))||(t.splice(s,1),s--,u--);return this.transform=e,this},t.prototype.unquantize=function(){var e=this.features,t=this.transform;if(!t)return this;for(var r=t.translate,n=r[0],o=r[1],t=t.scale,i=t[0],a=t[1],t=this._getHydrationFunction(this.geometryType,function(e){return e*i+n},function(e){return o-e*a}),r=0;r<e.length;r++){var s=e[r].geometry;l.isSome(s)&&t(s)}return this},t.prototype._quantizePoints=function(e,t,r){for(var n,o,i=[],a=0,s=e.length;a<s;a++){var l=e[a];if(0<a){var u=t(l[0]),l=r(l[1]);u===n&&l===o||(i.push([u-n,l-o]),n=u,o=l)}else n=t(l[0]),o=r(l[1]),i.push([n,o])}return 0<i.length?i:null},t.prototype._getQuantizationFunction=function(e,t,r){var n=this;return"point"===e?function(e){return e.x=t(e.x),e.y=r(e.y),e}:"polyline"===e||"polygon"===e?function(e){for(var o=p.isPolygon(e)?e.rings:e.paths,i=[],a=0,s=o.length;a<s;a++){var l=n._quantizePoints(o[a],t,r);l&&i.push(l)}return 0<i.length?(p.isPolygon(e)?e.rings=i:e.paths=i,e):null}:"multipoint"===e?function(e){var o;return o=n._quantizePoints(e.points,t,r),0<o.length?(e.points=o,e):null}:"extent"===e?function(e){return e}:null},t.prototype._getHydrationFunction=function(e,t,r){return"point"===e?function(e){e.x=t(e.x),e.y=r(e.y)}:"polyline"===e||"polygon"===e?function(e){e=p.isPolygon(e)?e.rings:e.paths;for(var n,o,i=0,a=e.length;i<a;i++)for(var s=e[i],l=0,u=s.length;l<u;l++){var c=s[l];0<l?(n+=c[0],o+=c[1]):(n=c[0],o=c[1]),c[0]=t(n),c[1]=r(o)}}:"extent"===e?function(e){e.xmin=t(e.xmin),e.ymin=r(e.ymin),e.xmax=t(e.xmax),e.ymax=r(e.ymax)}:"multipoint"===e?function(e){e=e.points;for(var n,o,i=0,a=e.length;i<a;i++){var s=e[i];0<i?(n+=s[0],o+=s[1]):(n=s[0],o=s[1]),s[0]=t(n),s[1]=r(o)}}:void 0},r([u.property({type:String,json:{write:!0}})],t.prototype,"displayFieldName",void 0),r([u.property({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],t.prototype,"exceededTransferLimit",void 0),r([u.property({type:[i],json:{write:!0}})],t.prototype,"features",void 0),r([u.reader("features")],t.prototype,"readFeatures",null),r([u.property({type:[d],json:{write:!0}})],t.prototype,"fields",void 0),r([u.property({type:"point multipoint polyline polygon extent mesh".split(" "),json:{read:{reader:f.read}}})],t.prototype,"geometryType",void 0),r([u.writer("geometryType")],t.prototype,"writeGeometryType",null),r([u.property({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],t.prototype,"hasM",void 0),r([u.property({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],t.prototype,"hasZ",void 0),r([u.property({types:o.geometryTypes,json:{read:p.fromJSON,write:!0}})],t.prototype,"queryGeometry",void 0),r([u.property({type:c,json:{write:!0}})],t.prototype,"spatialReference",void 0),r([u.writer("spatialReference")],t.prototype,"writeSpatialReference",null),r([u.property({json:{write:!0}})],t.prototype,"transform",void 0),t=r([u.subclass("esri.tasks.support.FeatureSet")],t)}(u.declared(s.JSONSupport)),e.prototype.toJSON.isDefaultToJSON=!0,e||(e={}),e})},"esri/layers/support/Field":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators ../../core/accessorSupport/ensureType ./domains ./fieldType".split(" "),function(e,t,r,n,o,i,a,s,l,u){var c=new o.default({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});return function(e){function t(t){return t=e.call(this,t)||this,t.alias=null,t.defaultValue=void 0,t.description=null,t.domain=null,t.editable=!0,t.length=-1,t.name=null,t.nullable=!0,t.type=null,t.valueType=null,t}r(t,e),o=t,t.prototype.readDescription=function(e,t){e=t.description;var r;try{r=JSON.parse(e)}catch(e){}return r?r.value:null},t.prototype.readValueType=function(e,t){e=t.description;var r;try{r=JSON.parse(e)}catch(e){}return r?c.fromJSON(r.fieldValueType):null},t.prototype.clone=function(){return new o({alias:this.alias,defaultValue:this.defaultValue,description:this.description,domain:this.domain&&this.domain.clone()||null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType})};var o;return n([a.property({type:String,json:{write:!0}})],t.prototype,"alias",void 0),n([a.property({type:[String,Number],json:{write:{allowNull:!0}}})],t.prototype,"defaultValue",void 0),n([a.property()],t.prototype,"description",void 0),n([a.reader("description")],t.prototype,"readDescription",null),n([a.property({types:l.types,json:{read:{reader:l.fromJSON},write:!0}})],t.prototype,"domain",void 0),n([a.property({type:Boolean,json:{write:!0}})],t.prototype,"editable",void 0),n([a.property({type:s.Integer,json:{write:!0}})],t.prototype,"length",void 0),n([a.property({type:String,json:{write:!0}})],t.prototype,"name",void 0),n([a.property({type:Boolean,json:{write:!0}})],t.prototype,"nullable",void 0),n([a.enumeration.serializable()(u.kebabDict)],t.prototype,"type",void 0),n([a.property()],t.prototype,"valueType",void 0),n([a.reader("valueType",["description"])],t.prototype,"readValueType",null),t=o=n([a.subclass("esri.layers.support.Field")],t)}(a.declared(i.JSONSupport))})},"esri/layers/support/fieldType":function(){define(["require","exports","../../core/jsonMap"],function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.kebabDict=new r.default({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml"})})},"esri/layers/mixins/ArcGISService":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Logger ../../core/accessorSupport/decorators ../support/arcgisLayerUrl".split(" "),function(e,t,r,n,o,i,a){Object.defineProperty(t,"__esModule",{value:!0});var s=o.getLogger("esri.layers.mixins.ArcGISService");t.ArcGISService=function(e){return function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),Object.defineProperty(t.prototype,"title",{get:function(){if(this._get("title")&&"defaults"!==this.originOf("title"))return this._get("title");if(this.url){var e=a.parse(this.url);if(e&&e.title)return e.title}return this._get("title")||""},set:function(e){this._set("title",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"url",{set:function(e){this._set("url",a.sanitizeUrl(e,s))},enumerable:!0,configurable:!0}),n([i.property({dependsOn:["url"]})],t.prototype,"title",null),n([i.property({type:String})],t.prototype,"url",null),t=n([i.subclass("esri.layers.mixins.ArcGISService")],t)}(i.declared(e))}})},"esri/layers/support/arcgisLayerUrl":function(){define(["require","exports","../../core/urlUtils"],function(e,t,r){function n(e){e=r.urlToObject(e);var t=e.path.match(i)||e.path.match(a);if(!t)return null;e=t[1];var n=t[2],s=t[3],t=t[4],l=n.indexOf("/");return{title:o(-1!==l?n.slice(l+1):n),serverType:s,sublayer:null!=t&&""!==t?parseInt(t,10):null,url:{path:e}}}function o(e){return e=e.replace(/\s*[\/_]+\s*/g," "),e[0].toUpperCase()+e.slice(1)}Object.defineProperty(t,"__esModule",{value:!0}),t.serverTypes="MapServer ImageServer FeatureServer SceneServer StreamServer VectorTileServer".split(" ");var i=new RegExp("^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/("+t.serverTypes.join("|")+"))(?:\\/(?:layers\\/)?(\\d+))?","i"),a=new RegExp("^((?:https?:)?\\/\\/\\S+?\\/([^\\/\\n]+)\\/("+t.serverTypes.join("|")+"))(?:\\/(?:layers\\/)?(\\d+))?","i");t.isArcGISUrl=function(e){return!!i.test(e)},t.parse=n,t.cleanTitle=o,t.titleFromUrlAndName=function(e,t){var r=[];if(e&&(e=n(e))&&e.title&&r.push(e.title),t&&(t=o(t),r.push(t)),2===r.length){if(-1!==r[0].toLowerCase().indexOf(r[1].toLowerCase()))return r[0];if(-1!==r[1].toLowerCase().indexOf(r[0].toLowerCase()))return r[1]}return r.join(" - ")},t.isHostedAgolService=function(e){if(!e)return!1;e=e.toLowerCase();var t=-1!==e.indexOf(".arcgis.com/");return e=-1!==e.indexOf("//services")||-1!==e.indexOf("//tiles")||-1!==e.indexOf("//features"),t&&e},t.isHostedSecuredProxyService=function(e,t){return t&&e&&-1!==e.toLowerCase().indexOf(t.toLowerCase())},t.sanitizeUrl=function(e,t){return e?r.removeTrailingSlash(r.removeQueryParameters(e,t)):e},t.sanitizeUrlWithLayerId=function(e,t,o){if(!t)return{url:t};t=r.removeQueryParameters(t,o),o=r.urlToObject(t),o=n(o.path);var i;return o&&null!=o.sublayer&&(null==e.layerId&&(i=o.sublayer),t=o.url.path),{url:r.removeTrailingSlash(t),layerId:i}},t.writeUrlWithLayerId=function(e,t,n,o,i){r.write(t,o,"url",i),o.url&&null!=e.layerId&&(o.url=r.join(o.url,n,e.layerId.toString()))},t.isWmsServer=function(e){if(!e)return!1;var t=e.toLowerCase();e=-1!==t.indexOf("/services/");var r=-1!==t.indexOf("/mapserver/wmsserver"),n=-1!==t.indexOf("/imageserver/wmsserver"),t=-1!==t.indexOf("/wmsserver");return e&&(r||n||t)},t.isServerOrServicesAGOLUrl=function(e){return!!e&&("server.arcgisonline.com"===(e=new r.Url(r.makeAbsolute(e)).authority.toLowerCase())||"services.arcgisonline.com"===e)}})},"esri/layers/mixins/TemporalLayer":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../TimeExtent ../../TimeInterval ../../core/accessorSupport/decorators ../../layers/support/TimeInfo ../support/fieldUtils ../support/timeUtils".split(" "),function(e,t,r,n,o,i,a,s,l,u){Object.defineProperty(t,"__esModule",{value:!0}),t.TemporalLayer=function(e){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.timeExtent=null,t.timeOffset=null,t.useViewTime=!0,t}return r(t,e),t.prototype.readOffset=function(e,t){return(t=t.timeInfo.exportOptions)?(e=t.timeOffset,t=u.timeUnitKebabDictionary.fromJSON(t.timeOffsetUnits),e&&t?new i({value:e,unit:t}):null):null},Object.defineProperty(t.prototype,"timeInfo",{set:function(e){l.fixTimeInfoFields(e,this.fields),this._set("timeInfo",e)},enumerable:!0,configurable:!0}),n([a.property({type:o,json:{write:!1}})],t.prototype,"timeExtent",void 0),n([a.property({type:i})],t.prototype,"timeOffset",void 0),n([a.reader("service","timeOffset",["timeInfo.exportOptions"])],t.prototype,"readOffset",null),n([a.property({value:null,type:s,json:{write:!0,origins:{"web-document":{read:!1,write:!1}}}})],t.prototype,"timeInfo",null),n([a.property({type:Boolean,json:{write:!1}})],t.prototype,"useViewTime",void 0),t=n([a.subclass("esri.layers.mixins.TemporalLayer")],t)}(a.declared(e))}})},"esri/TimeExtent":function(){define("require exports ./core/tsSupport/declareExtendsHelper ./core/tsSupport/decorateHelper ./core/JSONSupport ./core/accessorSupport/decorators ./layers/support/timeUtils".split(" "),function(e,t,r,n,o,i,a){return function(e){function t(t){return t=e.call(this,t)||this,t.end=null,t.start=null,t}r(t,e),o=t,t.prototype.readEnd=function(e,t){return null!=t.end?new Date(t.end):null},t.prototype.writeEnd=function(e,t,r){t.end=e?e.getTime():null},t.prototype.readStart=function(e,t){return null!=t.start?new Date(t.start):null},t.prototype.writeStart=function(e,t,r){t.start=e?e.getTime():null},t.prototype.clone=function(){return new o({end:this.end,start:this.start})},t.prototype.intersection=function(e){if(!e)return null;var t=this.start?this.start.getTime():-1/0,r=this.end?this.end.getTime():1/0,n=e.start?e.start.getTime():-1/0;e=e.end?e.end.getTime():1/0;var i,a;return n>=t&&n<=r?i=n:t>=n&&t<=e&&(i=t),r>=n&&r<=e?a=r:e>=t&&e<=r&&(a=e),isNaN(i)||isNaN(a)?null:(t=new o,t.start=-1/0===i?null:new Date(i),t.end=1/0===a?null:new Date(a),t)},t.prototype.offset=function(e,t){var r=new o,n=this.start,i=this.end;return n&&(r.start=a.offsetDate(n,e,t)),i&&(r.end=a.offsetDate(i,e,t)),r},t.prototype.equals=function(e){if(!e)return!1;var t=this.start?this.start.getTime():null,r=this.end?this.end.getTime():null,n=e.start?e.start.getTime():null;return e=e.end?e.end.getTime():null,t===n&&r===e};var o;return n([i.property({type:Date,json:{write:{allowNull:!0}}})],t.prototype,"end",void 0),n([i.reader("end")],t.prototype,"readEnd",null),n([i.writer("end")],t.prototype,"writeEnd",null),n([i.property({type:Date,json:{write:{allowNull:!0}}})],t.prototype,"start",void 0),n([i.reader("start")],t.prototype,"readStart",null),n([i.writer("start")],t.prototype,"writeStart",null),t=o=n([i.subclass("esri.TimeExtent")],t)}(i.declared(o.JSONSupport))})},"esri/layers/support/timeUtils":function(){define(["require","exports","../../TimeExtent","../../core/compilerUtils","../../core/jsonMap"],function(e,t,r,n,o){Object.defineProperty(t,"__esModule",{value:!0}),t.Milliseconds=function(e){return e};var i={milliseconds:{getter:"getUTCMilliseconds",setter:"setUTCMilliseconds",multiplier:1},seconds:{getter:"getUTCSeconds",setter:"setUTCSeconds",multiplier:1},minutes:{getter:"getUTCMinutes",setter:"setUTCMinutes",multiplier:1},hours:{getter:"getUTCHours",setter:"setUTCHours",multiplier:1},days:{getter:"getUTCDate",setter:"setUTCDate",multiplier:1},weeks:{getter:"getUTCDate",setter:"setUTCDate",multiplier:7},months:{getter:"getUTCMonth",setter:"setUTCMonth",multiplier:1},years:{getter:"getUTCFullYear",setter:"setUTCFullYear",multiplier:1},decades:{getter:"getUTCFullYear",setter:"setUTCFullYear",multiplier:10},centuries:{getter:"getUTCFullYear",setter:"setUTCFullYear",multiplier:100}};t.timeUnitKebabDictionary=o.strict()({esriTimeUnitsMilliseconds:"milliseconds",esriTimeUnitsSeconds:"seconds",esriTimeUnitsMinutes:"minutes",esriTimeUnitsHours:"hours",esriTimeUnitsDays:"days",esriTimeUnitsWeeks:"weeks",esriTimeUnitsMonths:"months",esriTimeUnitsYears:"years",esriTimeUnitsDecades:"decades",esriTimeUnitsCenturies:"centuries",esriTimeUnitsUnknown:null}),t.offsetDate=function(e,t,r){if(e=new Date(e.getTime()),t&&r){r=i[r];var n=r.multiplier;e[r.setter](e[r.getter]()+t*n)}return e},t.combinedViewLayerTimeExtentProperty={type:r,dependsOn:"view.timeExtent layer.timeExtent layer.timeInfo layer.timeOffset layer.timeOffset.value layer.timeOffset.unit layer.useViewTime".split(" "),readOnly:!0,get:function(){if(!this.layer||!this.layer.timeInfo)return null;var e=this.view?this.view.timeExtent:null,e=this.layer.useViewTime?e:this.layer.timeExtent;if(!e)return null;var t=this.layer.timeOffset,e=t?e.offset(-t.value,t.unit):e,t=this._get("timeExtent");return e.equals(t)?t:e}},t.millisecondsPerTimeUnit={milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5,days:864e5,weeks:6048e5,months:26784e5,years:31536e6,decades:31536e7,centuries:31536e8},t.truncateDate=function(e,t){switch(t){case"milliseconds":return new Date(e.getTime());case"seconds":return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds());case"minutes":return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes());case"hours":return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours());case"days":return new Date(e.getFullYear(),e.getMonth(),e.getDate());case"weeks":return new Date(e.getFullYear(),e.getMonth(),e.getDate()-e.getDay());case"months":return new Date(e.getFullYear(),e.getMonth(),1);case"years":return new Date(e.getFullYear(),0,1);case"decades":return new Date(e.getFullYear()-e.getFullYear()%10,0,1);case"centuries":return new Date(e.getFullYear()-e.getFullYear()%100,0,1);default:return n.neverReached(t),null}}})},"esri/TimeInterval":function(){define("require exports ./core/tsSupport/declareExtendsHelper ./core/tsSupport/decorateHelper ./core/JSONSupport ./core/accessorSupport/decorators ./layers/support/timeUtils".split(" "),function(e,t,r,n,o,i,a){return function(e){function t(t){return t=e.call(this,t)||this,t.value=0,t.unit="milliseconds",t}r(t,e),o=t,t.prototype.toMilliseconds=function(){return this.value*a.millisecondsPerTimeUnit[this.unit]},t.prototype.clone=function(){return new o({value:this.value,unit:this.unit})};var o;return n([i.property({type:Number,json:{write:!0},nonNullable:!0})],t.prototype,"value",void 0),n([i.property({type:a.timeUnitKebabDictionary.apiValues,json:{type:a.timeUnitKebabDictionary.jsonValues,read:a.timeUnitKebabDictionary.read,write:a.timeUnitKebabDictionary.write},nonNullable:!0})],t.prototype,"unit",void 0),t=o=n([i.subclass("esri.TimeInterval")],t)}(i.declared(o.JSONSupport))})},"esri/layers/support/TimeInfo":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../TimeExtent ../../TimeInterval ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators ./TimeReference ./timeUtils".split(" "),function(e,t,r,n,o,i,a,s,l,u,c){return function(e){function t(t){return t=e.call(this,t)||this,t.cumulative=!1,t.endField=null,t.fullTimeExtent=null,t.hasLiveData=!1,t.interval=null,t.startField=null,t.timeReference=null,t.trackIdField=null,t.useTime=!0,t}r(t,e),a=t,t.prototype.readFullTimeExtent=function(e,t){return t.timeExtent&&Array.isArray(t.timeExtent)&&2===t.timeExtent.length?new o({start:t.timeExtent[0],end:t.timeExtent[1]}):null},t.prototype.writeFullTimeExtent=function(e,t){t.timeExtent=e&&e.start&&e.end?[e.start.getTime(),e.end.getTime()]:null},t.prototype.readInterval=function(e,t){return t.timeInterval&&t.timeIntervalUnits?new i({value:t.timeInterval,unit:c.timeUnitKebabDictionary.fromJSON(t.timeIntervalUnits)}):t.defaultTimeInterval&&t.defaultTimeIntervalUnits?new i({value:t.defaultTimeInterval,unit:c.timeUnitKebabDictionary.fromJSON(t.defaultTimeIntervalUnits)}):null},t.prototype.writeInterval=function(e,t){e?(e=e.toJSON(),t.timeInterval=e.value,t.timeIntervalUnits=e.unit):(t.timeInterval=null,t.timeIntervalUnits=null)},t.prototype.clone=function(){var e=this.fullTimeExtent,t=this.trackIdField,r=this.useTime;return new a({cumulative:this.cumulative,endField:this.endField,hasLiveData:this.hasLiveData,interval:this.interval,startField:this.startField,timeReference:s.clone(this.timeReference),fullTimeExtent:s.clone(e),trackIdField:t,useTime:r})};var a;return n([l.property({type:Boolean,json:{read:{source:"exportOptions.timeDataCumulative"},write:{target:"exportOptions.timeDataCumulative"}}})],t.prototype,"cumulative",void 0),n([l.property({type:String,json:{read:{source:"endTimeField"},write:{target:"endTimeField",allowNull:!0}}})],t.prototype,"endField",void 0),n([l.property({type:o,json:{write:{enabled:!0,allowNull:!0}}})],t.prototype,"fullTimeExtent",void 0),n([l.reader("fullTimeExtent",["timeExtent"])],t.prototype,"readFullTimeExtent",null),n([l.writer("fullTimeExtent")],t.prototype,"writeFullTimeExtent",null),n([l.property({type:Boolean,json:{write:!0}})],t.prototype,"hasLiveData",void 0),n([l.property({type:i,json:{write:{enabled:!0,allowNull:!0}}})],t.prototype,"interval",void 0),n([l.reader("interval",["timeInterval","timeIntervalUnits","defaultTimeInterval","defaultTimeIntervalUnits"])],t.prototype,"readInterval",null),n([l.writer("interval")],t.prototype,"writeInterval",null),n([l.property({type:String,json:{read:{source:"startTimeField"},write:{target:"startTimeField",allowNull:!0}}})],t.prototype,"startField",void 0),n([l.property({type:u,json:{write:{enabled:!0,allowNull:!0}}})],t.prototype,"timeReference",void 0),n([l.property({type:String,json:{write:{enabled:!0,allowNull:!0}}})],t.prototype,"trackIdField",void 0),n([l.property({type:Boolean,json:{read:{source:"exportOptions.useTime"},write:{target:"exportOptions.useTime"}}})],t.prototype,"useTime",void 0),t=a=n([l.subclass("esri.layers.support.TimeInfo")],t)}(l.declared(a.JSONSupport))})},"esri/layers/support/TimeReference":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators".split(" "),function(e,t,r,n,o,i){return function(e){function t(t){return t=e.call(this,t)||this,t.respectsDaylightSaving=!1,t.timezone=null,t}r(t,e),o=t,t.prototype.readRespectsDaylightSaving=function(e,t){return void 0!==t.respectsDaylightSaving?t.respectsDaylightSaving:void 0!==t.respectDaylightSaving&&t.respectDaylightSaving},t.prototype.clone=function(){return new o({respectsDaylightSaving:this.respectsDaylightSaving,timezone:this.timezone})};var o;return n([i.property({type:Boolean,json:{write:!0}})],t.prototype,"respectsDaylightSaving",void 0),n([i.reader("respectsDaylightSaving",["respectsDaylightSaving","respectDaylightSaving"])],t.prototype,"readRespectsDaylightSaving",null),n([i.property({type:String,json:{read:{source:"timeZone"},write:{target:"timeZone"}}})],t.prototype,"timezone",void 0),t=o=n([i.subclass("esri.layers.support.TimeReference")],t)}(i.declared(o.JSONSupport))})},"esri/layers/support/FeatureIndex":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators".split(" "),function(e,t,r,n,o,i){Object.defineProperty(t,"__esModule",{value:!0}),e=function(e){function t(t){return e.call(this,t)||this}r(t,e),o=t,t.prototype.clone=function(){return new o({name:this.name,fields:this.fields,isAscending:this.isAscending,isUnique:this.isUnique,description:this.description})};var o;return n([i.property({constructOnly:!0})],t.prototype,"name",void 0),n([i.property({constructOnly:!0})],t.prototype,"fields",void 0),n([i.property({constructOnly:!0})],t.prototype,"isAscending",void 0),n([i.property({constructOnly:!0})],t.prototype,"isUnique",void 0),n([i.property({constructOnly:!0})],t.prototype,"description",void 0),t=o=n([i.subclass("esri.layers.support.FeatureIndex")],t)}(i.declared(o.JSONSupport)),t.FeatureIndex=e,t.default=e})},"esri/layers/support/FeatureReduction":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators".split(" "),function(e,t,r,n,o,i){Object.defineProperty(t,"__esModule",{value:!0}),e=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=null,t}return r(t,e),n([i.property({type:["selection","cluster"],readOnly:!0,json:{read:!1,write:!0}})],t.prototype,"type",void 0),t=n([i.subclass("esri.layers.support.FeatureReduction")],t)}(i.declared(o.JSONSupport)),t.FeatureReduction=e,t.default=e})},"esri/layers/support/FeatureReductionCluster":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../PopupTemplate ../../core/JSONSupport ../../core/screenUtils ../../core/accessorSupport/decorators".split(" "),function(e,t,r,n,o,i,a,s){Object.defineProperty(t,"__esModule",{value:!0}),e=function(e){function t(t){return t=e.call(this,t)||this,t.type="cluster",t.clusterRadius=a.toPt("80px"),t.popupTemplate=null,t}return r(t,e),n([s.property({type:["cluster"],readOnly:!0,json:{write:!0}})],t.prototype,"type",void 0),n([s.property({type:Number,cast:function(e){return"auto"===e?e:a.toPt(e)},json:{write:!0}})],t.prototype,"clusterRadius",void 0),n([s.property({type:o,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],t.prototype,"popupTemplate",void 0),t=n([s.subclass("esri.layers.support.FeatureReductionCluster")],t)}(s.declared(i.JSONSupport)),t.FeatureReductionCluster=e,t.default=e})},"esri/layers/support/FeatureReductionSelection":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ./FeatureReduction".split(" "),function(e,t,r,n,o,i){Object.defineProperty(t,"__esModule",{value:!0}),e=function(e){function t(t){return t=e.call(this,t)||this,t.type="selection",t}return r(t,e),n([o.property({type:["selection"]})],t.prototype,"type",void 0),t=n([o.subclass("esri.layers.support.FeatureReductionSelection")],t)}(o.declared(i.default)),t.FeatureReductionSelection=e,t.default=e})},"esri/layers/support/featureReductionUtils":function(){define("require exports ../../core/Error ../../core/object ./FeatureReduction ./FeatureReductionCluster ./FeatureReductionSelection".split(" "),function(e,t,r,n,o,i,a){function s(e,t,n){return e?"selection"!==e.type?(n.messages&&n.messages.push(new r("featureReduction:unsupported","FeatureReduction of type '"+e.declaredClass+"' are not supported in scenes.",{featureReduction:e,context:n})),null):e.write(t,n):null}Object.defineProperty(t,"__esModule",{value:!0}),t.webSceneFeatureReductionTypes={key:"type",base:o.default,typeMap:{selection:a.default}},t.read=function(e,t,r){if(t=t.layerDefinition||t,e=t.featureReduction)switch(e.type){case"selection":return a.default.fromJSON(e);case"cluster":return i.default.fromJSON(e)}return null},t.writeTarget=function(e,t,r,o){(e=s(e,{},o))&&n.setDeepValue(r,e,t)},t.write=s})},"esri/layers/support/FeatureTemplate":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/jsonMap ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators".split(" "),function(e,t,r,n,o,i,a,s){var l=new o.default({esriFeatureEditToolAutoCompletePolygon:"auto-complete-polygon",esriFeatureEditToolCircle:"circle",esriFeatureEditToolEllipse:"ellipse",esriFeatureEditToolFreehand:"freehand",esriFeatureEditToolLine:"line",esriFeatureEditToolNone:"none",esriFeatureEditToolPoint:"point",esriFeatureEditToolPolygon:"polygon",esriFeatureEditToolRectangle:"rectangle",esriFeatureEditToolArrow:"arrow",esriFeatureEditToolTriangle:"triangle",esriFeatureEditToolLeftArrow:"left-arrow",esriFeatureEditToolRightArrow:"right-arrow",esriFeatureEditToolUpArrow:"up-arrow",esriFeatureEditToolDownArrow:"down-arrow"});return function(e){function t(t){return t=e.call(this,t)||this,t.name=null,t.description=null,t.drawingTool=null,t.prototype=null,t.thumbnail=null,t}return r(t,e),t.prototype.writeDrawingTool=function(e,t){t.drawingTool=l.toJSON(e)},t.prototype.writePrototype=function(e,t){t.prototype=a.fixJson(a.clone(e),!0)},t.prototype.writeThumbnail=function(e,t){t.thumbnail=a.fixJson(a.clone(e))},n([s.property({json:{write:!0}})],t.prototype,"name",void 0),n([s.property({json:{write:!0}})],t.prototype,"description",void 0),n([s.property({json:{read:l.read,write:l.write}})],t.prototype,"drawingTool",void 0),n([s.writer("drawingTool")],t.prototype,"writeDrawingTool",null),n([s.property({json:{write:!0}})],t.prototype,"prototype",void 0),n([s.writer("prototype")],t.prototype,"writePrototype",null),n([s.property({json:{write:!0}})],t.prototype,"thumbnail",void 0),n([s.writer("thumbnail")],t.prototype,"writeThumbnail",null),t=n([s.subclass("esri.layers.support.FeatureTemplate")],t)}(s.declared(i.JSONSupport))})},"esri/layers/support/FeatureType":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators ./domains ./FeatureTemplate".split(" "),function(e,t,r,n,o,i,a,s,l){return function(e){function t(t){return t=e.call(this,t)||this,t.id=null,t.name=null,t.domains=null,t.templates=null,t}return r(t,e),t.prototype.readDomains=function(e){var t,r={};for(t in e)if(e.hasOwnProperty(t)){var n=e[t];switch(n.type){case"range":r[t]=s.RangeDomain.fromJSON(n);break;case"codedValue":r[t]=s.CodedValueDomain.fromJSON(n);break;case"inherited":r[t]=s.InheritedDomain.fromJSON(n)}}return r},t.prototype.writeDomains=function(e,t){var r,n={};for(r in e)e.hasOwnProperty(r)&&(n[r]=e[r]&&e[r].toJSON());i.fixJson(n),t.domains=n},t.prototype.readTemplates=function(e){return e&&e.map(function(e){return new l(e)})},t.prototype.writeTemplates=function(e,t){t.templates=e&&e.map(function(e){return e.toJSON()})},n([a.property({json:{write:!0}})],t.prototype,"id",void 0),n([a.property({json:{write:!0}})],t.prototype,"name",void 0),n([a.property({json:{write:!0}})],t.prototype,"domains",void 0),n([a.reader("domains")],t.prototype,"readDomains",null),n([a.writer("domains")],t.prototype,"writeDomains",null),n([a.property({json:{write:!0}})],t.prototype,"templates",void 0),n([a.reader("templates")],t.prototype,"readTemplates",null),n([a.writer("templates")],t.prototype,"writeTemplates",null),t=n([a.subclass("esri.layers.support.FeatureType")],t)}(a.declared(o.JSONSupport))})},"esri/layers/support/fieldProperties":function(){define("require exports @dojo/framework/shim/array ../../core/Logger ./Field ./fieldUtils".split(" "),function(e,t,r,n,o,i){Object.defineProperty(t,"__esModule",{value:!0});var a=n.getLogger("esri.layers.support.fieldProperties");t.defineFieldProperties=function(){return{fields:{type:[o],value:null},outFields:{type:[String],dependsOn:["fields"],json:{read:!1},set:function(e){this._userOutFields=e,this.notifyChange("outFields")},get:function(){var e=this._userOutFields;if(!e||!e.length)return null;if(r.includes(e,"*"))return["*"];if(!this.fields)return e;for(var t=0;t<e.length;t++){var n=e[t];i.hasField(this.fields,n)||a.error("field-attributes-layer:invalid-field","Invalid field "+n+" found in outFields",{layer:this,outFields:e})}return i.fixFields(this.fields,e)}}}}})},"esri/layers/support/FieldsIndex":function(){define(["require","exports","../../core/tsSupport/extendsHelper"],function(e,t,r){return function(){function e(e){if(this.fields=e,this._fieldsMap=new Map,this._dateFieldsSet=new Set,this.dateFields=[],e){for(var t=[],r=0;r<e.length;r++){var n=e[r],o=n&&n.name;if(o){var i=o.toLowerCase().trim();this._fieldsMap.set(o,n),this._fieldsMap.set(i,n),t.push(i),"date"!==n.type&&"esriFieldTypeDate"!==n.type||(this.dateFields.push(n),this._dateFieldsSet.add(n))}}t.sort(),this.uid=t.join(",")}}return e.prototype.destroy=function(){this._fieldsMap.clear()},e.prototype.has=function(e){return null!=this.get(e)},e.prototype.get=function(e){return null!=e?this._fieldsMap.get(e)||this._fieldsMap.get(e.toLowerCase().trim()):void 0},e.prototype.isDateField=function(e){return this._dateFieldsSet.has(this.get(e))},e.prototype.normalizeFieldName=function(e){if(e=this.get(e))return e.name},e}()})},"esri/layers/support/LabelClass":function(){define("require exports ../../core/tsSupport/decorateHelper ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/generatorHelper ../../core/tsSupport/awaiterHelper ../../symbols ../../core/jsonMap ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators ./LabelExpressionInfo ./labelUtils ./types ../../symbols/support/defaults ../../symbols/support/jsonUtils".split(" "),function(e,t,r,n,o,i,a,s,l,u,c,p,d,f,h,y){function m(e){return!e||"service"!==e.origin&&(!e.layer||!f.isOfType(e.layer,"map-image"))}function g(e){return e?(e=w.exec(e))&&(e[1]||e[3])||null:null}var v=new s.default({esriServerPointLabelPlacementAboveCenter:"above-center",esriServerPointLabelPlacementAboveLeft:"above-left",esriServerPointLabelPlacementAboveRight:"above-right",esriServerPointLabelPlacementBelowCenter:"below-center",esriServerPointLabelPlacementBelowLeft:"below-left",esriServerPointLabelPlacementBelowRight:"below-right",esriServerPointLabelPlacementCenterCenter:"center-center",esriServerPointLabelPlacementCenterLeft:"center-left",esriServerPointLabelPlacementCenterRight:"center-right",esriServerLinePlacementAboveAfter:"above-after",esriServerLinePlacementAboveAlong:"above-along",esriServerLinePlacementAboveBefore:"above-before",esriServerLinePlacementAboveStart:"above-start",esriServerLinePlacementAboveEnd:"above-end",esriServerLinePlacementBelowAfter:"below-after",esriServerLinePlacementBelowAlong:"below-along",esriServerLinePlacementBelowBefore:"below-before",esriServerLinePlacementBelowStart:"below-start",esriServerLinePlacementBelowEnd:"below-end",esriServerLinePlacementCenterAfter:"center-after",esriServerLinePlacementCenterAlong:"center-along",esriServerLinePlacementCenterBefore:"center-before",esriServerLinePlacementCenterStart:"center-start",esriServerLinePlacementCenterEnd:"center-end",esriServerPolygonPlacementAlwaysHorizontal:"always-horizontal"},{ignoreUnknown:!0}),b=/^\s*\{([^}]+)\}\s*$/i,w=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])([\w\s]+)(\2)\]))\s*$/i;return function(e){function t(t){return t=e.call(this,t)||this,t.name=null,t.labelExpression=null,t.labelExpressionInfo=null,t.labelPlacement=null,t.maxScale=0,t.minScale=0,t.symbol=h.defaultTextSymbol2D,t.useCodedValues=void 0,t.where=null,t}n(t,e),o=t,t.evaluateWhere=function(e,t){var r=function(e,t,r){switch(t){case"=":return e==r;case"<>":return e!=r;case">":return e>r;case">=":return e>=r;case"<":return e<r;case"<=":return e<=r}return!1};try{if(null==e)return!0;var n=e.split(" ");if(3===n.length)return r(t[n[0]],n[1],n[2]);if(7===n.length){var o=r(t[n[0]],n[1],n[2]),i=n[3],a=r(t[n[4]],n[5],n[6]);switch(i){case"AND":return o&&a;case"OR":return o||a}}return!1}catch(t){console.log("Error.: can't parse = "+e)}},t.prototype.readLabelExpression=function(e,t){if(!(t=t.labelExpressionInfo)||!t.value&&!t.expression)return e},t.prototype.writeLabelExpression=function(e,t,r,n){this.labelExpressionInfo&&m(n)&&(null!=this.labelExpressionInfo.value?e=this.labelExpressionInfo.value.replace(/\{/g,"[").replace(/\}/g,"]"):null!=this.labelExpressionInfo.expression&&(n=g(this.labelExpressionInfo.expression))&&(e="["+n+"]")),null!=e&&(t[r]=e)},t.prototype.writeLabelExpressionInfo=function(e,t,r,n){if(null==e&&null!=this.labelExpression&&m(n))e=new p({expression:this.getLabelExpressionArcade()});else if(!e)return;e=e.toJSON(n),e.expression&&(t[r]=e)},t.prototype.writeMaxScale=function(e,t){(e||this.minScale)&&(t.maxScale=e)},t.prototype.writeMinScale=function(e,t){(e||this.maxScale)&&(t.minScale=e)},t.prototype.getLabelExpression=function(){var e={expression:"",type:"none"};return this.labelExpressionInfo?this.labelExpressionInfo.value?(e.expression=this.labelExpressionInfo.value,e.type="conventional"):this.labelExpressionInfo.expression&&(e.expression=this.labelExpressionInfo.expression,e.type="arcade"):null!=this.labelExpression&&(e.expression=this.labelExpression.replace(/\[/g,"{").replace(/\]/g,"}"),e.type="conventional"),e},t.prototype.getLabelExpressionArcade=function(){var e=this.getLabelExpression();if(!e)return null;switch(e.type){case"conventional":return d.convertTemplatedStringToArcade(e.expression);case"arcade":return e.expression}return null},t.prototype.getLabelExpressionSingleField=function(){var e=this.getLabelExpression();if(!e)return null;switch(e.type){case"conventional":return(e=e.expression.match(b))&&e[1].trim()||null;case"arcade":return g(e.expression)}return null},t.prototype.clone=function(){return new o({labelExpression:this.labelExpression,labelExpressionInfo:u.clone(this.labelExpressionInfo),labelPlacement:this.labelPlacement,maxScale:this.maxScale,minScale:this.minScale,name:this.name,symbol:u.clone(this.symbol),where:this.where,useCodedValues:this.useCodedValues})};var o;return r([c.property({type:String,json:{write:!0}})],t.prototype,"name",void 0),r([c.property({type:String,json:{write:{allowNull:!0}}})],t.prototype,"labelExpression",void 0),r([c.reader("labelExpression")],t.prototype,"readLabelExpression",null),r([c.writer("labelExpression")],t.prototype,"writeLabelExpression",null),r([c.property({type:p,json:{write:{overridePolicy:function(e,t,r){return m(r)?{allowNull:!0}:{enabled:!1}}}}})],t.prototype,"labelExpressionInfo",void 0),r([c.writer("labelExpressionInfo")],t.prototype,"writeLabelExpressionInfo",null),r([c.property({type:v.apiValues,json:{type:v.jsonValues,read:v.read,write:v.write}})],t.prototype,"labelPlacement",void 0),r([c.property({type:Number})],t.prototype,"maxScale",void 0),r([c.writer("maxScale")],t.prototype,"writeMaxScale",null),r([c.property({type:Number})],t.prototype,"minScale",void 0),r([c.writer("minScale")],t.prototype,"writeMinScale",null),r([c.property({types:a.symbolTypesLabel,json:{origins:{"web-scene":{types:a.symbolTypesLabel3D,read:y.read,write:y.writeTarget,default:null}},read:y.read,write:y.writeTarget,default:null}})],t.prototype,"symbol",void 0),r([c.property({type:Boolean,json:{write:!0}})],t.prototype,"useCodedValues",void 0),r([c.property({type:String,json:{write:!0}})],t.prototype,"where",void 0),t=o=r([c.subclass("esri.layers.support.LabelClass")],t)}(c.declared(l.JSONSupport))})},"esri/layers/support/LabelExpressionInfo":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators ./labelUtils".split(" "),function(e,t,r,n,o,i,a){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.value=null,t.expression=null,t}r(t,e),o=t,t.prototype.readExpression=function(e,t){return t.value?a.convertTemplatedStringToArcade(t.value):e},t.prototype.writeExpression=function(e,t,r){null!=this.value&&(e=a.convertTemplatedStringToArcade(this.value)),t[r]=e},t.prototype.clone=function(){return new o({value:this.value,expression:this.expression})};var o;return n([i.property({json:{read:!1,write:!1}})],t.prototype,"value",void 0),n([i.property({type:String,json:{write:{allowNull:!0}}})],t.prototype,"expression",void 0),n([i.reader("expression",["expression","value"])],t.prototype,"readExpression",null),n([i.writer("expression")],t.prototype,"writeExpression",null),t=o=n([i.subclass("esri.layers.support.LabelExpressionInfo")],t)}(i.declared(o.JSONSupport))})},"esri/layers/support/labelUtils":function(){define(["require","exports","../../core/string"],function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=/__begin__/gi,o=/__end__/gi,i=/^__begin__/i,a=/__end__$/i;t.convertTemplatedStringToArcade=function(e){return e?(e=r.replace(e,function(e){return'__begin__$feature["'+e+'"]__end__'}),e=i.test(e)?e.replace(i,""):'"'+e,e=a.test(e)?e.replace(a,""):e+'"',e=e.replace(n,'" + ').replace(o,' + "')):e='""',e}})},"esri/symbols/support/defaults":function(){define("require exports ../../core/compilerUtils ../../core/maybe ../SimpleFillSymbol ../SimpleLineSymbol ../SimpleMarkerSymbol ../TextSymbol ./defaultsJSON".split(" "),function(e,t,r,n,o,i,a,s,l){Object.defineProperty(t,"__esModule",{value:!0}),t.defaultPointSymbol2D=a.fromJSON(l.defaultPointSymbolJSON),t.defaultPolylineSymbol2D=i.fromJSON(l.defaultPolylineSymbolJSON),t.defaultPolygonSymbol2D=o.fromJSON(l.defaultPolygonSymbolJSON),t.defaultTextSymbol2D=s.fromJSON(l.defaultTextSymbolJSON),t.getDefaultSymbol2D=function(e){if(n.isNone(e))return null;switch(e.type){case"mesh":break;case"point":case"multipoint":return t.defaultPointSymbol2D;case"polyline":return t.defaultPolylineSymbol2D;case"polygon":case"extent":return t.defaultPolygonSymbol2D;default:r.neverReached(e)}return null},t.errorPointSymbol2D=a.fromJSON(l.errorPointSymbolJSON),t.errorPolylineSymbol2D=i.fromJSON(l.errorPolylineSymbolJSON),t.errorPolygonSymbol2D=o.fromJSON(l.errorPolygonSymbolJSON)})},"esri/symbols/support/defaultsJSON":function(){define(["require","exports"],function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.defaultColor=[252,146,31,255],t.defaultOutlineColor=[153,153,153,255],t.defaultPointSymbolJSON={type:"esriSMS",style:"esriSMSCircle",size:6,color:t.defaultColor,outline:{width:.75,color:[153,153,153,255]}},t.defaultPolylineSymbolJSON={type:"esriSLS",style:"esriSLSSolid",width:.75,color:t.defaultColor},t.defaultPolygonSymbolJSON={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{width:.75,color:[255,255,255,191]}},t.defaultTextSymbolJSON={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},t.errorPointSymbolJSON={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},t.errorPolylineSymbolJSON={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},t.errorPolygonSymbolJSON={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null}})},"esri/layers/support/labelingInfo":function(){define(["require","exports","./LabelClass"],function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=/\[([^\[\]]+)\]/gi;t.reader=function(e,t,o){var i=this;return e?e.map(function(e){var a=new r;if(a.read(e,o),a.labelExpression){var s=t.fields||t.layerDefinition&&t.layerDefinition.fields||i.fields;a.labelExpression=a.labelExpression.replace(n,function(e,t){e:if(s){e=t.toLowerCase();for(var r=0;r<s.length;r++){var n=s[r].name;if(n.toLowerCase()===e){t=n;break e}}}return"["+t+"]"})}return a}):null}})},"esri/layers/support/layerSourceUtils":function(){define(["require","exports","../../core/jsonMap","../../core/lang"],function(e,t,r,n){function o(e){return null!=e&&e.hasOwnProperty("mapLayerId")}function i(e){return null!=e&&e.hasOwnProperty("dataSource")}function a(e){if(!e)return e;if(o(e)&&(e.type=t.MAPLAYER),i(e)&&(e.type=t.DATALAYER,!e.dataSource.type)){var r=e.dataSource;r.workspaceId?r.type=r.gdbVersion?"table":r.query||r.oidFields?"query-table":"raster":r.leftTableKey&&r.rightTableKey&&r.leftTableSource&&r.rightTableSource&&(r.type="join-table",r.leftTableSource=a(r.leftTableSource),r.rightTableSource=a(r.rightTableSource))}return e}function s(e){var r={};if(e.type===t.MAPLAYER)r.mapLayerId=e.mapLayerId,e.gdbVersion&&(r.gdbVersion=e.gdbVersion);else if(e.type===t.DATALAYER){e.fields&&(r.fields=e.fields);var o;o=e.dataSource;var i;switch(o.type){case"table":i={dataSourceName:o.dataSourceName,workspaceId:o.workspaceId,gdbVersion:o.gdbVersion};break;case"query-table":i={geometryType:u.toJSON(o.geometryType),workspaceId:o.workspaceId,query:o.query,oidFields:o.oidFields,spatialReference:o.spatialReference};break;case"join-table":i={leftTableSource:s(o.leftTableSource),rightTableSource:s(o.rightTableSource),leftTableKey:o.leftTableKey,rightTableKey:o.rightTableKey,joinType:d.toJSON(o.joinType)};break;case"raster":i={workspaceId:o.workspaceId,dataSourceName:o.dataSourceName}}i.type=p.toJSON(o.type),o=n.fixJson(i),r.dataSource=o}return r.type=c.toJSON(e.type),n.fixJson(r)}function l(e){var r={};if(c.fromJSON(e.type)===t.MAPLAYER)r.mapLayerId=e.mapLayerId,e.gdbVersion&&(r.gdbVersion=e.gdbVersion);else if(c.fromJSON(e.type)===t.DATALAYER){e.fields&&(r.fields=e.fields);var o;o=e.dataSource;var i;switch(o.type){case"table":i={dataSourceName:o.dataSourceName,workspaceId:o.workspaceId,gdbVersion:o.gdbVersion};break;case"queryTable":i={geometryType:u.fromJSON(o.geometryType),workspaceId:o.workspaceId,query:o.query,oidFields:o.oidFields,spatialReference:o.spatialReference};break;case"joinTable":i={leftTableSource:l(o.leftTableSource),rightTableSource:l(o.rightTableSource),leftTableKey:o.leftTableKey,rightTableKey:o.rightTableKey,joinType:d.fromJSON(o.joinType)};break;case"raster":i={workspaceId:o.workspaceId,dataSourceName:o.dataSourceName}}i.type=p.fromJSON(o.type),o=n.fixJson(i),r.dataSource=o}return r.type=c.fromJSON(e.type),n.fixJson(r)}Object.defineProperty(t,"__esModule",{value:!0}),t.MAPLAYER="map-layer",t.DATALAYER="data-layer";var u=new r.default({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"}),c=new r.default({mapLayer:t.MAPLAYER,dataLayer:t.DATALAYER}),p=new r.default({joinTable:"join-table",queryTable:"query-table"}),d=new r.default({esriLeftOuterJoin:"left-outer-join",esriLeftInnerJoin:"left-inner-join"});t.isMapLayerSource=o,t.isDataLayerSource=i,t.castSource=a,t.sourceToJSON=s,t.sourceFromJSON=l})},"esri/layers/support/Relationship":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators".split(" "),function(e,t,r,n,o,i,a){var s=new o.default({esriRelCardinalityOneToOne:"one-to-one",esriRelCardinalityOneToMany:"one-to-many",esriRelCardinalityManyToMany:"many-to-many"});return function(e){function t(t){return t=e.call(this,t)||this,t.cardinality=null,t.id=null,t.keyField=null,t.name=null,t.relatedTableId=null,t}return r(t,e),n([a.property({json:{read:s.read,write:s.write}})],t.prototype,"cardinality",void 0),n([a.property({json:{read:!0,write:!0}})],t.prototype,"id",void 0),n([a.property({json:{read:!0,write:!0}})],t.prototype,"keyField",void 0),n([a.property({json:{read:!0,write:!0}})],t.prototype,"name",void 0),n([a.property({json:{read:!0,write:!0}})],t.prototype,"relatedTableId",void 0),t=n([a.subclass("esri.layers.support.Relationship")],t)}(a.declared(i.JSONSupport))})},"esri/support/popupUtils":function(){define("require exports ../core/tsSupport/assignHelper dojo/i18n!../widgets/Popup/nls/Popup ../PopupTemplate ../popup/content ../popup/FieldInfo ../popup/support/FieldInfoFormat".split(" "),function(e,t,r,n,o,i,a,s){function l(e,t){var r=e;if(t.ignoreFieldTypes&&(e=e.filter(function(e){return-1===t.ignoreFieldTypes.indexOf(e.type)})),0===e.length)return null;var n=t.maximumFields&&e.length>t.maximumFields;return n&&(e=e.slice(0,t.maximumFields)),e===r&&(e=e.slice()),e.sort(u),{fields:e,limitExceeded:n}}function u(e,t){return"oid"===e.type?-1:"oid"===t.type?1:f(e)?-1:f(t)?1:(e.alias||e.name).toLocaleLowerCase().localeCompare((t.alias||t.name).toLocaleLowerCase())}function c(e){var t=e.visibleFieldNames,r=e.editFieldsInfo;return e.fields.map(function(e){var n,o=e.name;if(n=e.editable&&-1===h.indexOf(e.type)){if((n=e.name)&&r){var i=r.creationDateField,s=r.creatorField,l=r.editDateField,u=r.editorField;n=-1!==[i&&i.toLowerCase(),s&&s.toLowerCase(),l&&l.toLowerCase(),u&&u.toLowerCase()].indexOf(n.toLowerCase())}else n=!1;n=!n}return new a({fieldName:o,isEditable:n,label:e.alias,format:p(e),visible:!t||t.has(e.name)})})}function p(e){switch(e.type){case"small-integer":case"integer":case"single":return new s({digitSeparator:!0,places:0});case"double":return new s({digitSeparator:!0,places:2});case"date":return new s({dateFormat:"long-month-day-year"});default:return null}}function d(e,t){for(var r=0;r<e.length;r++){var n=e[r];if(n&&n.valueType&&n.valueType===t)return n.name}return null}function f(e){if("name"===(e.name&&e.name.toLowerCase())||"name"===(e.alias&&e.alias.toLowerCase()))return!0}Object.defineProperty(t,"__esModule",{value:!0});var h=["oid","global-id","guid"];t.createPopupTemplate=function(e,t){var a=e.displayField,s=e.fields,u=e.title,p=e.visibleFieldNames;if(e=e.editFieldsInfo,!s)return null;if(t=r({},y,t),!(s=l(s,t)))return null;if(t=s.fields,!a){if(t&&t.length){if(!(a=d(t,"name-or-title")||d(t,"unique-identifier")||d(t,"type-or-category")))e:{for(a=0;a<t.length;a++){var f=t[a];if(f&&f.name){var h=f.name.toLowerCase();if(-1<h.indexOf("name")||-1<h.indexOf("title")){a=f.name;break e}}}a=null}t=a}else t=null;a=t}return u=(t=a)?u+": {"+t.trim()+"}":u,a=s.limitExceeded,t=[new i.FieldsContent,new i.AttachmentsContent],a&&t.push(new i.TextContent({text:"<small>"+n.tooManyFields+"</small>"})),p=c({fields:s.fields,visibleFieldNames:p,editFieldsInfo:e}),new o({title:u,content:t,fieldInfos:p})};var y={ignoreFieldTypes:["geometry","blob","raster","guid","xml"],maximumFields:75}})},"esri/tasks/support/AttachmentQuery":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators ../../core/accessorSupport/ensureType".split(" "),function(e,t,r,n,o,i,a,s){return e=function(e){function t(t){return t=e.call(this,t)||this,t.attachmentTypes=null,t.attachmentsWhere=null,t.keywords=null,t.globalIds=null,t.name=null,t.num=null,t.objectIds=null,t.returnMetadata=!1,t.size=null,t.start=null,t.where=null,t}r(t,e),o=t,t.prototype.writeStart=function(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10},t.prototype.clone=function(){return new o(i.clone({attachmentTypes:this.attachmentTypes,attachmentsWhere:this.attachmentsWhere,keywords:this.keywords,where:this.where,globalIds:this.globalIds,name:this.name,num:this.num,objectIds:this.objectIds,returnMetadata:this.returnMetadata,size:this.size,start:this.start}))};var o;return n([a.property({type:[String],json:{write:!0}})],t.prototype,"attachmentTypes",void 0),n([a.property({type:String,json:{read:{source:"attachmentsDefinitionExpression"},write:{target:"attachmentsDefinitionExpression"}}})],t.prototype,"attachmentsWhere",void 0),n([a.property({type:[String],json:{write:!0}})],t.prototype,"keywords",void 0),n([a.property({type:[Number],json:{write:!0}})],t.prototype,"globalIds",void 0),n([a.property({json:{write:!0}})],t.prototype,"name",void 0),n([a.property({type:Number,json:{read:{source:"resultRecordCount"}}})],t.prototype,"num",void 0),n([a.property({type:[Number],json:{write:!0}})],t.prototype,"objectIds",void 0),n([a.property({type:Boolean,json:{default:!1,write:!0}})],t.prototype,"returnMetadata",void 0),n([a.property({type:[Number],json:{write:!0}})],t.prototype,"size",void 0),n([a.property({type:Number,json:{read:{source:"resultOffset"}}})],t.prototype,"start",void 0),n([a.writer("start"),a.writer("num")],t.prototype,"writeStart",null),n([a.property({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],t.prototype,"where",void 0),t=o=n([a.subclass("esri.tasks.support.AttachmentQuery")],t)}(a.declared(o.JSONSupport)),e.from=s.default(e),e})},"esri/tasks/support/Query":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../geometry ../../geometry ../../symbols ../../TimeExtent ../../core/jsonMap ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators ../../core/accessorSupport/ensureType ../../geometry/support/jsonUtils ../../symbols/support/jsonUtils ./QuantizationParameters ./StatisticDefinition".split(" "),function(e,t,r,n,o,i,a,s,l,u,c,p,d,f,h,y,m){var g=new l.default({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),v=new l.default({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});return function(e){function t(t){return t=e.call(this,t)||this,t.cacheHint=!1,t.datumTransformation=null,t.distance=void 0,t.gdbVersion=null,t.geometry=null,t.geometryPrecision=void 0,t.groupByFieldsForStatistics=null,t.having=null,t.historicMoment=null,t.maxAllowableOffset=void 0,t.maxRecordCountFactor=1,t.multipatchOption=null,t.num=void 0,t.objectIds=null,t.orderByFields=null,t.outFields=null,t.outSpatialReference=null,t.outStatistics=null,t.parameterValues=null,t.pixelSize=null,t.quantizationParameters=null,t.rangeValues=null,t.relationParameter=null,t.resultType=null,t.returnCentroid=!1,t.returnDistinctValues=!1,t.returnExceededLimitFeatures=!0,t.returnGeometry=!1,t.returnQueryGeometry=!1,t.returnM=void 0,t.returnZ=void 0,t.source=null,t.spatialRelationship="intersects",t.start=void 0,t.sqlFormat=null,t.text=null,t.timeExtent=null,t.units=null,t.where=null,t}r(t,e),l=t,t.from=function(e){return d.ensureClass(l,e)},t.prototype.castDatumTransformation=function(e){return"number"==typeof e||"object"==typeof e?e:null},t.prototype.writeHistoricMoment=function(e,t){t.historicMoment=e&&e.getTime()},t.prototype.writeParameterValues=function(e,t){if(e){var r,n={};for(r in e){var o=e[r];Array.isArray(o)?n[r]=o.map(function(e){return e instanceof Date?e.getTime():e}):n[r]=o instanceof Date?o.getTime():o}t.parameterValues=n}},t.prototype.writeStart=function(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10,t.where="1=1"},t.prototype.writeWhere=function(e,t){t.where=e||"1=1"},t.prototype.clone=function(){return new l(c.clone({cacheHint:this.cacheHint,datumTransformation:this.datumTransformation,distance:this.distance,gdbVersion:this.gdbVersion,geometry:this.geometry,geometryPrecision:this.geometryPrecision,groupByFieldsForStatistics:this.groupByFieldsForStatistics,having:this.having,historicMoment:this.historicMoment?new Date(this.historicMoment.getTime()):null,maxAllowableOffset:this.maxAllowableOffset,maxRecordCountFactor:this.maxRecordCountFactor,multipatchOption:this.multipatchOption,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,outStatistics:this.outStatistics,parameterValues:this.parameterValues,pixelSize:this.pixelSize,quantizationParameters:this.quantizationParameters,rangeValues:this.rangeValues,relationParameter:this.relationParameter,resultType:this.resultType,returnDistinctValues:this.returnDistinctValues,returnGeometry:this.returnGeometry,returnCentroid:this.returnCentroid,returnExceededLimitFeatures:this.returnExceededLimitFeatures,returnQueryGeometry:this.returnQueryGeometry,returnM:this.returnM,returnZ:this.returnZ,source:this.source,spatialRelationship:this.spatialRelationship,start:this.start,sqlFormat:this.sqlFormat,text:this.text,timeExtent:this.timeExtent,units:this.units,where:this.where}))};var l;return t.MAX_MAX_RECORD_COUNT_FACTOR=5,n([p.property({type:Boolean,json:{write:!0,default:!1}})],t.prototype,"cacheHint",void 0),n([p.property({json:{write:!0}})],t.prototype,"datumTransformation",void 0),n([p.cast("datumTransformation")],t.prototype,"castDatumTransformation",null),n([p.property({type:Number,json:{write:{overridePolicy:function(e){return{enabled:0<e}}}}})],t.prototype,"distance",void 0),n([p.property({type:String,json:{write:!0}})],t.prototype,"gdbVersion",void 0),n([p.property({types:i.geometryTypes,json:{read:f.fromJSON,write:!0}})],t.prototype,"geometry",void 0),n([p.property({type:Number,json:{write:!0}})],t.prototype,"geometryPrecision",void 0),n([p.property({type:[String],json:{write:!0}})],t.prototype,"groupByFieldsForStatistics",void 0),n([p.property({type:String,json:{write:!0}})],t.prototype,"having",void 0),n([p.property({type:Date})],t.prototype,"historicMoment",void 0),n([p.writer("historicMoment")],t.prototype,"writeHistoricMoment",null),n([p.property({type:Number,json:{write:!0}})],t.prototype,"maxAllowableOffset",void 0),n([p.property({type:Number,cast:function(e){return 1>e?1:e>l.MAX_MAX_RECORD_COUNT_FACTOR?l.MAX_MAX_RECORD_COUNT_FACTOR:e},json:{write:{overridePolicy:function(e){return{enabled:1<e}}}}})],t.prototype,"maxRecordCountFactor",void 0),n([p.property({type:String,json:{write:!0}})],t.prototype,"multipatchOption",void 0),n([p.property({type:Number,json:{read:{source:"resultRecordCount"}}})],t.prototype,"num",void 0),n([p.property({type:[Number],json:{write:!0}})],t.prototype,"objectIds",void 0),n([p.property({type:[String],json:{write:!0}})],t.prototype,"orderByFields",void 0),n([p.property({type:[String],json:{write:!0}})],t.prototype,"outFields",void 0),n([p.property({type:o.SpatialReference,json:{read:{source:"outSR"},write:{target:"outSR"}}})],t.prototype,"outSpatialReference",void 0),n([p.property({type:[m],json:{write:!0}})],t.prototype,"outStatistics",void 0),n([p.property({json:{write:!0}})],t.prototype,"parameterValues",void 0),n([p.writer("parameterValues")],t.prototype,"writeParameterValues",null),n([p.property({types:a.symbolTypes,json:{read:h.read,write:!0}})],t.prototype,"pixelSize",void 0),n([p.property({type:y.default,json:{write:!0}})],t.prototype,"quantizationParameters",void 0),n([p.property({type:[Object],json:{write:!0}})],t.prototype,"rangeValues",void 0),n([p.property({type:String,json:{read:{source:"relationParam"},write:{target:"relationParam",overridePolicy:function(){return{enabled:"relation"===this.spatialRelationship}}}}})],t.prototype,"relationParameter",void 0),n([p.property({type:String,json:{write:!0}})],t.prototype,"resultType",void 0),n([p.property({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],t.prototype,"returnCentroid",void 0),n([p.property({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],t.prototype,"returnDistinctValues",void 0),n([p.property({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:!e}}}}})],t.prototype,"returnExceededLimitFeatures",void 0),n([p.property({type:Boolean,json:{write:!0}})],t.prototype,"returnGeometry",void 0),n([p.property({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],t.prototype,"returnQueryGeometry",void 0),n([p.property({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],t.prototype,"returnM",void 0),n([p.property({type:Boolean,json:{write:{overridePolicy:function(e){return{enabled:e}}}}})],t.prototype,"returnZ",void 0),n([p.property({json:{write:!0}})],t.prototype,"source",void 0),n([p.property({type:String,json:{read:{source:"spatialRel",reader:g.read},write:{target:"spatialRel",writer:g.write}}})],t.prototype,"spatialRelationship",void 0),n([p.property({type:Number,json:{read:{source:"resultOffset"}}})],t.prototype,"start",void 0),n([p.writer("start"),p.writer("num")],t.prototype,"writeStart",null),n([p.property({type:String,json:{write:!0}})],t.prototype,"sqlFormat",void 0),n([p.property({type:String,json:{write:!0}})],t.prototype,"text",void 0),n([p.property({type:s,json:{write:!0}})],t.prototype,"timeExtent",void 0),n([p.property({type:String,json:{read:v.read,write:{writer:v.write,overridePolicy:function(e){return{enabled:e&&0<this.distance}}}}})],t.prototype,"units",void 0),n([p.property({type:String,json:{write:{overridePolicy:function(e){return{enabled:null!=e||0<this.start}}}}})],t.prototype,"where",void 0),n([p.writer("where")],t.prototype,"writeWhere",null),t=l=n([p.subclass("esri.tasks.support.Query")],t)}(p.declared(u.JSONSupport))})},"esri/tasks/support/QuantizationParameters":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../geometry ../../core/jsonMap ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators".split(" "),function(e,t,r,n,o,i,a,s,l){Object.defineProperty(t,"__esModule",{value:!0});var u=new i.default({upperLeft:"upper-left",lowerLeft:"lower-left"});e=function(e){function t(t){return t=e.call(this,t)||this,t.extent=null,t.mode="view",t.originPosition="upper-left",t.tolerance=1,t}r(t,e),i=t,t.prototype.clone=function(){return new i(s.clone({extent:this.extent,mode:this.mode,originPosition:this.originPosition,tolerance:this.tolerance}))};var i;return n([l.property({type:o.Extent,json:{write:!0}})],t.prototype,"extent",void 0),n([l.property({type:["view","edit"],json:{write:!0}})],t.prototype,"mode",void 0),n([l.property({type:String,json:{read:u.read,write:u.write}})],t.prototype,"originPosition",void 0),n([l.property({type:Number,json:{write:!0}})],t.prototype,"tolerance",void 0),t=i=n([l.subclass("esri.tasks.support.QuantizationParameters")],t)}(l.declared(a.JSONSupport)),t.default=e})},"esri/tasks/support/StatisticDefinition":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators".split(" "),function(e,t,r,n,o,i){return function(e){function t(t){return t=e.call(this,t)||this,t.maxPointCount=void 0,t.maxRecordCount=void 0,t.maxVertexCount=void 0,t.onStatisticField=null,t.outStatisticFieldName=null,t.statisticType=null,t}r(t,e),o=t,t.prototype.clone=function(){return new o({maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,statisticType:this.statisticType})};var o;return n([i.property({type:Number,json:{write:!0}})],t.prototype,"maxPointCount",void 0),n([i.property({type:Number,json:{write:!0}})],t.prototype,"maxRecordCount",void 0),n([i.property({type:Number,json:{write:!0}})],t.prototype,"maxVertexCount",void 0),n([i.property({type:String,json:{write:!0}})],t.prototype,"onStatisticField",void 0),n([i.property({type:String,json:{write:!0}})],t.prototype,"outStatisticFieldName",void 0),n([i.property({type:String,json:{write:!0}})],t.prototype,"statisticType",void 0),t=o=n([i.subclass("esri.tasks.support.StatisticDefinition")],t)}(i.declared(o.JSONSupport))})},"esri/tasks/support/RelationshipQuery":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../geometry ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators ../../core/accessorSupport/ensureType".split(" "),function(e,t,r,n,o,i,a,s,l){return e=function(e){function t(t){return t=e.call(this,t)||this,t.gdbVersion=null,t.geometryPrecision=void 0,t.historicMoment=null,t.maxAllowableOffset=void 0,t.objectIds=null,t.outFields=null,t.outSpatialReference=null,t.relationshipId=void 0,t.returnGeometry=!1,t.source=null,t.where=null,t}r(t,e),i=t,t.prototype._writeHistoricMoment=function(e,t){t.historicMoment=e&&e.getTime()},t.prototype.clone=function(){return new i(a.clone({gdbVersion:this.gdbVersion,geometryPrecision:this.geometryPrecision,historicMoment:this.historicMoment&&this.historicMoment.getTime(),maxAllowableOffset:this.maxAllowableOffset,objectIds:this.objectIds,outFields:this.outFields,outSpatialReference:this.outSpatialReference,relationshipId:this.relationshipId,returnGeometry:this.returnGeometry,source:this.source,where:this.where}))};var i;return n([s.property({type:String,json:{write:!0}})],t.prototype,"gdbVersion",void 0),n([s.property({type:Number,json:{write:!0}})],t.prototype,"geometryPrecision",void 0),n([s.property({type:Date})],t.prototype,"historicMoment",void 0),n([s.writer("historicMoment")],t.prototype,"_writeHistoricMoment",null),n([s.property({type:Number,json:{write:!0}})],t.prototype,"maxAllowableOffset",void 0),n([s.property({type:[Number],json:{write:!0}})],t.prototype,"objectIds",void 0),n([s.property({type:[String],json:{write:!0}})],t.prototype,"outFields",void 0),n([s.property({type:o.SpatialReference,json:{read:{source:"outSR"},write:{target:"outSR"}}})],t.prototype,"outSpatialReference",void 0),n([s.property({json:{write:!0}})],t.prototype,"relationshipId",void 0),n([s.property({json:{write:!0}})],t.prototype,"returnGeometry",void 0),n([s.property({json:{write:!0}})],t.prototype,"source",void 0),n([s.property({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],t.prototype,"where",void 0),t=i=n([s.subclass("esri.tasks.support.RelationshipQuery")],t)}(s.declared(i.JSONSupport)),e.from=l.default(e),e})},"esri/layers/graphics/sources/FeatureLayerSource":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/tsSupport/assignHelper ../../../core/tsSupport/generatorHelper ../../../core/tsSupport/awaiterHelper ../../../request ../../../core/Error ../../../core/Loadable ../../../core/maybe ../../../core/promiseUtils ../../../core/urlUtils ../../../core/accessorSupport/decorators ../../../tasks/QueryTask ../../../tasks/operations/queryAttachments".split(" "),function(e,t,r,n,o,i,a,s,l,u,c,p,d,f,h,y){function m(e){return a(this,void 0,void 0,function(){var t;return i(this,function(r){return"string"==typeof e?(t=d.dataComponents(e),[2,t||{data:e}]):[2,p.create(function(t,r){var n=new FileReader;n.readAsDataURL(e),n.onload=function(){return t(d.dataComponents(n.result))},n.onerror=function(e){return r(e)}})]})})}Object.defineProperty(t,"__esModule",{value:!0}),e=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="feature-layer",t}return r(t,e),t.prototype.load=function(e){return e=c.isSome(e)?e.signal:null,this.addResolvingPromise(this._fetchService(e)),this.when()},Object.defineProperty(t.prototype,"queryTask",{get:function(){var e=this.layer,t=e.parsedUrl,r=e.gdbVersion;return new h({url:null!=e.dynamicDataSource?t.path+"?"+d.objectToQuery(t.query):t.path,gdbVersion:r})},enumerable:!0,configurable:!0}),t.prototype.addAttachment=function(e,t){var r=this;return this.load().then(function(){var n=e.attributes[r.layer.objectIdField],i=r.layer.parsedUrl.path+"/"+n+"/addAttachment",a=o({f:"json"},r.layer.parsedUrl.query),a=r._getFormDataForAttachment(t,a);return s(i,{body:a}).then(function(e){return r._createFeatureEditResult(e.data.addAttachmentResult)}).catch(function(e){throw r._createAttachmentErrorResult(n,e)})})},t.prototype.updateAttachment=function(e,t,r){var n=this;return this.load().then(function(){var i=e.attributes[n.layer.objectIdField],a=n.layer.parsedUrl.path+"/"+i+"/updateAttachment",l=o({f:"json"},n.layer.parsedUrl.query,{attachmentId:t}),l=n._getFormDataForAttachment(r,l);return s(a,{body:l}).then(function(e){return n._createFeatureEditResult(e.data.updateAttachmentResult)}).catch(function(e){throw n._createAttachmentErrorResult(i,e)})})},t.prototype.applyEdits=function(e,t){return a(this,void 0,void 0,function(){var r,n,o,a,l,u,c,p,d,f,h,y,m,g,v,b,w;return i(this,function(i){switch(i.label){case 0:return[4,this.load()];case 1:i.sent(),r=e.addFeatures.map(this._serializeFeature,this),n=e.updateFeatures.map(this._serializeFeature,this),o=this._getFeatureIds(e.deleteFeatures),a=[],l=[],u=0,c=e.addAttachments,i.label=2;case 2:return u<c.length?(p=c[u],f=(d=a).push,[4,this._serializeAttachment(p)]):[3,5];case 3:f.apply(d,[i.sent()]),i.label=4;case 4:return u++,[3,2];case 5:h=0,y=e.updateAttachments,i.label=6;case 6:return h<y.length?(p=y[h],g=(m=l).push,[4,this._serializeAttachment(p)]):[3,9];case 7:g.apply(m,[i.sent()]),i.label=8;case 8:return h++,[3,6];case 9:return v={adds:a,updates:l,deletes:e.deleteAttachments.slice()},b={f:"json",adds:r.length?JSON.stringify(r):null,updates:n.length?JSON.stringify(n):null,deletes:o.length?o.join(","):null,gdbVersion:t&&t.gdbVersion,rollbackOnFailure:t&&t.rollbackOnFailureEnabled,useGlobalIds:t&&t.globalIdUsed,attachments:JSON.stringify(v)},[4,s(this.layer.parsedUrl.path+"/applyEdits",{query:b,method:"post",responseType:"json"})];case 10:return w=i.sent(),[2,this._createEditsResult(w)]}})})},t.prototype.deleteAttachments=function(e,t){var r=this;return this.load().then(function(){var n=e.attributes[r.layer.objectIdField];return s(r.layer.parsedUrl.path+"/"+n+"/deleteAttachments",{query:o({f:"json"},r.layer.parsedUrl.query,{attachmentIds:t.join(",")}),method:"post",responseType:"json"}).then(function(e){return e.data.deleteAttachmentResults.map(r._createFeatureEditResult)}).catch(function(e){throw r._createAttachmentErrorResult(n,e)})})},t.prototype.queryAttachments=function(e,t){var r=this;void 0===t&&(t={});var n=this.layer.parsedUrl,i=n.path;return this.load().then(function(){var a=o({},t,{query:o({},n.query,{f:"json"}),responseType:"json"});if(!r.layer.get("capabilities.operations.supportsQueryAttachments")){for(var l=e.objectIds,u=[],c=0;c<l.length;c++)u.push(s(i+"/"+l[c]+"/attachments",a));return p.all(u).then(function(e){return l.map(function(t,r){return{parentObjectId:t,attachmentInfos:e[r].data.attachmentInfos}})}).then(function(e){return y.processAttachmentQueryResult(e,i)})}return r.queryTask.executeAttachmentQuery(e,a)})},t.prototype.queryFeatures=function(e,t){var r=this;return this.load().then(function(){return r.queryTask.execute(e,t)})},t.prototype.queryFeaturesJSON=function(e,t){var r=this;return this.load().then(function(){return r.queryTask.executeJSON(e,t)})},t.prototype.queryObjectIds=function(e,t){var r=this;return this.load().then(function(){return r.queryTask.executeForIds(e,t)})},t.prototype.queryFeatureCount=function(e,t){var r=this;return this.load().then(function(){return r.queryTask.executeForCount(e,t)})},t.prototype.queryExtent=function(e,t){var r=this;return this.load().then(function(){return r.queryTask.executeForExtent(e,t)})},t.prototype.queryRelatedFeatures=function(e,t){var r=this;return this.load().then(function(){return r.queryTask.executeRelationshipQuery(e,t)})},t.prototype._fetchService=function(e){return a(this,void 0,void 0,function(){var t,r;return i(this,function(n){switch(n.label){case 0:return(t=this.layer.sourceJSON)?(this.sourceJSON=t,[2]):[4,s(this.layer.parsedUrl.path,{query:o({f:"json"},this.layer.parsedUrl.query),responseType:"json",signal:e})];case 1:return this.sourceJSON=r=n.sent().data,[2]}})})},t.prototype._serializeFeature=function(e){var t=e.geometry;return e=e.attributes,c.isNone(t)?{attributes:e}:"mesh"===t.type||"extent"===t.type?null:{geometry:t.toJSON(),attributes:e}},t.prototype._serializeAttachment=function(e){return a(this,void 0,void 0,function(){var t,r,n,o,a,s,l,u,c;return i(this,function(i){switch(i.label){case 0:return t=e.feature,(r=e.attachment,n=r.globalId,o=r.name,a=r.contentType,s=r.data,l=r.uploadId,u={globalId:n,parentGlobalId:null,contentType:null,name:null,uploadId:null,data:null},t&&(u.parentGlobalId="attributes"in t?t.attributes&&t.attributes[this.layer.globalIdField]:t.globalId),l)?(u.uploadId=l,[3,3]):[3,1];case 1:return s?[4,m(s)]:[3,3];case 2:c=i.sent(),u.contentType=c.mediaType,u.data=c.data,s instanceof File&&(u.name=s.name),i.label=3;case 3:return o&&(u.name=o),a&&(u.contentType=a),[2,u]}})})},t.prototype._getFeatureIds=function(e){var t=e[0];return t?"objectId"in t?this._getIdsFromFeatureIdentifier(e):this._getIdsFromFeatures(e):[]},t.prototype._getIdsFromFeatures=function(e){var t=this.layer.objectIdField;return e.map(function(e){return e.attributes&&e.attributes[t]})},t.prototype._getIdsFromFeatureIdentifier=function(e){return e.map(function(e){return e.objectId})},t.prototype._createEditsResult=function(e){var t=e.data;return e=e.data&&e.data.attachments,{addFeatureResults:t.addResults?t.addResults.map(this._createFeatureEditResult,this):[],updateFeatureResults:t.updateResults?t.updateResults.map(this._createFeatureEditResult,this):[],deleteFeatureResults:t.deleteResults?t.deleteResults.map(this._createFeatureEditResult,this):[],addAttachmentResults:e&&e.addResults?e.addResults.map(this._createFeatureEditResult,this):[],updateAttachmentResults:e&&e.updateResults?e.updateResults.map(this._createFeatureEditResult,this):[],deleteAttachmentResults:e&&e.deleteResults?e.deleteResults.map(this._createFeatureEditResult,this):[]}},t.prototype._createFeatureEditResult=function(e){var t=!0===e.success?null:e.error||{code:void 0,description:void 0};return{objectId:e.objectId,globalId:e.globalId,error:t?new l("feature-layer-source:edit-failure",t.description,{code:t.code}):null}},t.prototype._createAttachmentErrorResult=function(e,t){return{objectId:e,globalId:null,error:new l("feature-layer-source:attachment-failure",t.details.messages&&t.details.messages[0]||t.message,{code:t.details.httpStatus||t.details.messageCode})}},t.prototype._getFormDataForAttachment=function(e,t){if(e=e instanceof FormData?e:e&&e.elements?new FormData(e):null)for(var r in t){var n=t[r];null!=n&&(e.set?e.set(r,n):e.append(r,n))}return e},n([f.property()],t.prototype,"type",void 0),n([f.property({constructOnly:!0})],t.prototype,"layer",void 0),n([f.property({readOnly:!0,dependsOn:["layer.parsedUrl","layer.gdbVersion","layer.dynamicDataSource"]})],t.prototype,"queryTask",null),t=n([f.subclass("esri.layers.graphics.sources.FeatureLayerSource")],t)}(f.declared(u)),t.default=e})},"esri/tasks/QueryTask":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/paramHelper ../core/tsSupport/assignHelper ../geometry ../core/accessorSupport/decorators ./Task ./operations/query ./operations/queryAttachments ./operations/queryRelatedRecords ./support/AttachmentQuery ./support/FeatureSet ./support/Query ./support/RelationshipQuery".split(" "),function(e,t,r,n,o,i,a,s,l,u,c,p,d,f,h,y){return function(e){function t(t){return t=e.call(this,t)||this,t.gdbVersion=null,t.source=null,t}return r(t,e),t.prototype.execute=function(e,t){return this.executeJSON(e,t).then(function(e){return f.fromJSON(e)})},t.prototype.executeJSON=function(e,t){return u.executeQuery(this.parsedUrl,this._normalizeQuery(e),i({},this.requestOptions,t)).then(function(e){return e.data})},t.prototype.executeForCount=function(e,t){return u.executeQueryForCount(this.parsedUrl,this._normalizeQuery(e),i({},this.requestOptions,t)).then(function(e){return e.data.count})},t.prototype.executeForExtent=function(e,t){return u.executeQueryForExtent(this.parsedUrl,this._normalizeQuery(e),i({},this.requestOptions,t)).then(function(e){return{count:e.data.count,extent:a.Extent.fromJSON(e.data.extent)}})},t.prototype.executeForIds=function(e,t){return u.executeQueryForIds(this.parsedUrl,this._normalizeQuery(e),i({},this.requestOptions,t)).then(function(e){return e.data.objectIds})},t.prototype.executeRelationshipQuery=function(e,t){return e=y.from(e),(this.gdbVersion||this.source)&&(e=e.clone().set({gdbVersion:this.gdbVersion||e.gdbVersion,source:this.source||e.source})),p.executeRelationshipQuery(this.parsedUrl,e,i({},this.requestOptions,t)).then(function(e){var t=e.data,r={};return Object.keys(t).forEach(function(e){return r[e]=f.fromJSON(t[e])}),r})},t.prototype.executeAttachmentQuery=function(e,t){var r=this;return c.executeAttachmentQuery(this.parsedUrl,d.from(e),i({},this.requestOptions,t)).then(function(e){return c.processAttachmentQueryResult(e.data.attachmentGroups,r.parsedUrl.path)})},t.prototype._normalizeQuery=function(e){var t=h.from(e);return this.gdbVersion||this.source?(t===e?t.clone():t).set({gdbVersion:this.gdbVersion||e.gdbVersion,source:this.source||e.source}):t},n([s.property()],t.prototype,"gdbVersion",void 0),n([s.property()],t.prototype,"source",void 0),t=n([s.subclass("esri.tasks.QueryTask")],t)}(s.declared(l))})},"esri/tasks/Task":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/paramHelper ../core/tsSupport/assignHelper ../core/Accessor ../core/urlUtils ../core/accessorSupport/decorators".split(" "),function(e,t,r,n,o,i,a,s,l){return function(e){function t(t){return t=e.call(this,t)||this,t.requestOptions=null,t.url=null,t}return r(t,e),t.prototype.normalizeCtorArgs=function(e,t){return"string"!=typeof e?e:i({url:e},t)},Object.defineProperty(t.prototype,"parsedUrl",{get:function(){return this._parseUrl(this.url)},enumerable:!0,configurable:!0}),t.prototype._parseUrl=function(e){return e?s.urlToObject(e):null},t.prototype._encode=function(e,t,r){var n,o={};for(n in e)if("declaredClass"!==n){var i=e[n];if(null!=i&&"function"!=typeof i)if(Array.isArray(i)){o[n]=[];for(var a=0;a<i.length;a++)o[n][a]=this._encode(i[a])}else"object"==typeof i?(i.toJSON&&(i=i.toJSON(r&&r[n])),o[n]=t?i:JSON.stringify(i)):o[n]=i}return o},n([l.property({readOnly:!0,dependsOn:["url"]})],t.prototype,"parsedUrl",null),n([l.property()],t.prototype,"requestOptions",void 0),n([l.property({type:String})],t.prototype,"url",void 0),t=n([l.subclass("esri.tasks.Task")],t)}(l.declared(a))})},"esri/tasks/operations/query":function(){define("require exports ../../core/tsSupport/assignHelper ../../request ../../core/maybe ../../core/urlUtils ../../geometry/support/jsonUtils ../../geometry/support/normalizeUtils ./pbfQueryUtils ./PBFWorker ./urlUtils @dojo/framework/shim/Promise".split(" "),function(e,t,r,n,o,i,a,s,l,u,c){function p(e,t){var r=e.geometry;return e=e.toJSON(),r&&(e.geometry=JSON.stringify(r),e.geometryType=a.getJsonType(r),e.inSR=r.spatialReference.wkid||JSON.stringify(r.spatialReference)),e.groupByFieldsForStatistics&&(e.groupByFieldsForStatistics=e.groupByFieldsForStatistics.join(",")),e.objectIds&&(e.objectIds=e.objectIds.join(",")),e.orderByFields&&(e.orderByFields=e.orderByFields.join(",")),!e.outFields||t&&(t.returnCountOnly||t.returnExtentOnly||t.returnIdsOnly)?delete e.outFields:-1!==e.outFields.indexOf("*")?e.outFields="*":e.outFields=e.outFields.join(","),e.outSR?e.outSR=e.outSR.wkid||JSON.stringify(e.outSR):r&&(e.returnGeometry||e.returnCentroid)&&(e.outSR=e.inSR),e.returnGeometry&&delete e.returnGeometry,e.outStatistics&&(e.outStatistics=JSON.stringify(e.outStatistics)),e.pixelSize&&(e.pixelSize=JSON.stringify(e.pixelSize)),e.quantizationParameters&&(e.quantizationParameters=JSON.stringify(e.quantizationParameters)),e.source&&(e.layer=JSON.stringify({source:e.source}),delete e.source),e.timeExtent&&(r=e.timeExtent,t=r.start,r=r.end,null==t&&null==r||(e.time=t===r?t:(null==t?"null":t)+","+(null==r?"null":r)),delete e.timeExtent),e}function d(e,t,a,l,u){void 0===l&&(l={});var d="string"==typeof e?i.urlToObject(e):e;return e=t.geometry?[t.geometry]:[],l.responseType="pbf"===a?"array-buffer":"json",s.normalizeCentralMeridian(e,null,l).then(function(e){return e=e&&e[0],o.isSome(e)&&(t=t.clone(),t.geometry=e),e=c.mapParameters(r({},d.query,{f:a},u,p(t,u))),n(d.path+"/query",r({},l,{query:e}))})}Object.defineProperty(t,"__esModule",{value:!0}),t.queryToQueryStringParameters=p,t.executeQuery=function(e,t,r){return d(e,t,"json",r)},t.executeQueryPBF=function(e,t,r,n){var o;r.useWorker?(null==f&&(f=new u.PBFWorker),o=f):o=null;var i=o;return d(e,t,"pbf",n).then(function(e){var t=function(t){return e.data=t,e};return r.useWorker?i.parseFeatureQuery(e.data,r).then(function(e){return t(e)}):t(l.parsePBFFeatureQuery(e.data,r))})},t.executeQueryForIds=function(e,t,r){return d(e,t,"json",r,{returnIdsOnly:!0})},t.executeQueryForCount=function(e,t,r){return d(e,t,"json",r,{returnIdsOnly:!0,returnCountOnly:!0})},t.executeQueryForExtent=function(e,t,r){return d(e,t,"json",r,{returnExtentOnly:!0,returnCountOnly:!0}).then(function(e){var t=e.data;if(t.hasOwnProperty("extent"))return e;if(t.features)throw Error("Layer does not support extent calculation.");if(t.hasOwnProperty("count"))throw Error("Layer does not support extent calculation.");return e})};var f})},"esri/geometry/support/normalizeUtils":function(){define("require exports ../../core/tsSupport/generatorHelper ../../core/tsSupport/awaiterHelper ../../config ../../core/Error ../../core/Logger ../../core/maybe ../../core/promiseUtils ../Polygon ../Polyline ../SpatialReference ./spatialReferenceUtils ./webMercatorUtils ../../tasks/geometry/cut ../../tasks/geometry/simplify".split(" "),function(e,t,r,n,o,i,a,s,l,u,c,p,d,f,h,y){function m(e){return"polygon"===e.type?e.rings:e.paths}function g(e,t){return Math.ceil((e-t)/(2*t))}function v(e,t){for(var r=0,n=m(e);r<n.length;r++)for(var o=0,i=n[r];o<i.length;o++)i[o][0]+=t;return e}function b(e){for(var t=[],r=0,n=0,o=0;o<e.length;o++){for(var i=e[o],a=null,s=0;s<i.length;s++)a=i[s],t.push(a),0===s?n=r=a[0]:(r=Math.min(r,a[0]),n=Math.max(n,a[0]));a&&t.push([(r+n)/2,0])}return t}function w(e,t){if(!(e instanceof c||e instanceof u))throw C.error("straightLineDensify: the input geometry is neither polyline nor polygon"),new i("straightLineDensify: the input geometry is neither polyline nor polygon");for(var r=[],n=0,o=m(e);n<o.length;n++){var a=o[n],s=[];r.push(s),s.push([a[0][0],a[0][1]]);for(var l=0;l<a.length-1;l++){var p=a[l][0],d=a[l][1],f=a[l+1][0],h=a[l+1][1],y=Math.sqrt((f-p)*(f-p)+(h-d)*(h-d)),g=(h-d)/y,v=(f-p)/y,b=y/t;if(1<b){for(var w=1;w<=b-1;w++){var S=w*t;s.push([v*S+p,g*S+d])}y=(y+Math.floor(b-1)*t)/2,s.push([v*y+p,g*y+d])}s.push([f,h])}}return"polygon"===e.type?new u({rings:r,spatialReference:e.spatialReference}):new c({paths:r,spatialReference:e.spatialReference})}function S(e,t,r){return t&&(e=w(e,1e6),e=f.webMercatorToGeographic(e,!0)),r&&(e=v(e,r)),e}function _(e,t,r){if(Array.isArray(e)){var n=e[0];if(n>t){var o=g(n,t);e[0]=n+-2*o*t}else n<r&&(o=g(n,r),e[0]=n+-2*o*r)}else n=e.x,n>t?(o=g(n,t),e=e.clone().offset(-2*o*t,0)):n<r&&(o=g(n,r),e=e.clone().offset(-2*o*r,0));return e}function x(e,t){for(var r=-1,n=function(n){var o=t.cutIndexes[n],i=t.geometries[n],a=m(i);n=function(e){var t=a[e];t.some(function(r){if(180>r[0])return!0;for(var n=r=0;n<t.length;n++){var o=t[n][0];r=o>r?o:r}for(r=Number(r.toFixed(9)),r=-360*g(r,180),n=0;n<t.length;n++)o=i.getPoint(e,n),i.setPoint(e,n,o.clone().offset(r,0));return!0})};for(var s=0;s<a.length;s++)n(s);if(o===r){if("polygon"===e[0].type)for(n=0,s=m(i);n<s.length;n++)e[o]=e[o].addRing(s[n]);else if("polyline"===e[0].type)for(n=0,s=m(i);n<s.length;n++)e[o]=e[o].addPath(s[n])}else r=o,e[o]=i},o=0;o<t.cutIndexes.length;o++)n(o);return e}function O(e,t,i){return n(this,void 0,void 0,function(){var n,a,p,m,b,w,C,T,P,I,E,j,k,A,L,F,N,R,D,U,q,H,V,z,B,G,W,J,Q,K,Z,Y,$,X,ee,te,re;return r(this,function(r){switch(r.label){case 0:if(!Array.isArray(e))return[2,O([e],t)];for(n=t?t.url:o.geometryServiceUrl,I=0,E=[],j=[],k=0,A=e;k<A.length;k++)L=A[k],s.isNone(L)?j.push(L):(a||(a=L.spatialReference,p=d.getInfo(a),C=(m=a.isWebMercator)?102100:4326,b=M[C].maxX,w=M[C].minX,T=M[C].plus180Line,P=M[C].minus180Line),p?"mesh"===L.type?j.push(L):"point"===L.type?j.push(_(L.clone(),b,w)):"multipoint"===L.type?(F=L.clone(),F.points=F.points.map(function(e){return _(e,b,w)}),j.push(F)):"extent"===L.type?(N=L.clone(),R=N._normalize(!1,!1,p),j.push(R.rings?new u(R):R)):L.extent?(N=L.extent,D=g(N.xmin,w),U=2*D*b,q=0===U?L.clone():v(L.clone(),U),N.offset(U,0),N.intersects(T)&&N.xmax!==b?(I=N.xmax>I?N.xmax:I,q=S(q,m),E.push(q),j.push("cut")):N.intersects(P)&&N.xmin!==w?(I=2*N.xmax*b>I?2*N.xmax*b:I,q=S(q,m,360),E.push(q),j.push("cut")):j.push(q)):j.push(L.clone()):j.push(L));for(H=g(I,b),V=-90,z=H,B=new c;0<H;)G=360*H-180,B.addPath([[G,V],[G,-1*V]]),V*=-1,H--;return 0<E.length&&0<z?[4,h.cut(n,E,B,i)]:[3,3];case 1:for(W=r.sent(),J=x(E,W),Q=[],K=[],Z=0;Z<j.length;Z++)Y=j[Z],"cut"!==Y?K.push(Y):($=J.shift(),X=e[Z],s.isSome(X)&&"polygon"===X.type&&X.rings&&1<X.rings.length&&$.rings.length>=X.rings.length?(Q.push($),K.push("simplify")):K.push(m?f.geographicToWebMercator($):$));return Q.length?[4,y.simplify(n,Q,i)]:[2,K];case 2:for(ee=r.sent(),te=[],Z=0;Z<K.length;Z++)Y=K[Z],"simplify"!==Y?te.push(Y):te.push(m?f.geographicToWebMercator(ee.shift()):ee.shift());return[2,te];case 3:for(re=[],Z=0;Z<j.length;Z++)Y=j[Z],"cut"!==Y?re.push(Y):($=E.shift(),re.push(!0===m?f.geographicToWebMercator($):$));return[2,l.resolve(re)]}})})}Object.defineProperty(t,"__esModule",{value:!0});var C=a.getLogger("esri.geometry.support.normalizeUtils"),M={102100:{maxX:20037508.342788905,minX:-20037508.342788905,plus180Line:new c({paths:[[[20037508.342788905,-20037508.342788905],[20037508.342788905,20037508.342788905]]],spatialReference:p.WebMercator}),minus180Line:new c({paths:[[[-20037508.342788905,-20037508.342788905],[-20037508.342788905,20037508.342788905]]],spatialReference:p.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new c({paths:[[[180,-180],[180,180]]],spatialReference:p.WGS84}),minus180Line:new c({paths:[[[-180,-180],[-180,180]]],spatialReference:p.WGS84})}};t.straightLineDensify=w,t.normalizeCentralMeridian=O,t.getDenormalizedExtent=function(e){var t;if(!e)return null;var r=e.extent;if(!r)return null;var n=e.spatialReference&&d.getInfo(e.spatialReference);if(!n)return r;var n=n.valid,o=n[0],n=n[1],i=r.width,a=r.xmin;if(t=r.xmax,t=[t,a],a=t[0],t=t[1],"extent"===e.type||0===i||i<=n||i>2*n||a<o||t>n)return r;var s;switch(e.type){case"polygon":if(!(1<e.rings.length))return r;s=b(e.rings);break;case"polyline":if(!(1<e.paths.length))return r;s=b(e.paths);break;case"multipoint":s=e.points}for(e=r.clone(),o=0;o<s.length;o++){var l=s[o][0];0>l?(l+=n,t=Math.max(l,t)):(l-=n,a=Math.min(l,a))}return e.xmin=a,e.xmax=t,e.width<i?(e.xmin-=n,e.xmax-=n,e):r},t.normalizeMapX=function(e,t){if(t=d.getInfo(t)){var r=t.valid;t=r[0];var r=r[1],n=r-t;if(e<t)for(;e<t;)e+=n;if(e>r)for(;e>r;)e-=n}return e}})},"esri/tasks/geometry/cut":function(){define("require exports ../../core/tsSupport/assignHelper ../../core/tsSupport/awaiterHelper ../../core/tsSupport/generatorHelper ../../geometry ../../request ../../core/urlUtils ../../geometry/support/jsonUtils".split(" "),function(e,t,r,n,o,i,a,s,l){Object.defineProperty(t,"__esModule",{value:!0}),t.cut=function(e,t,u,c){return n(this,void 0,void 0,function(){var n,p,d,f,h,y,m,g;return o(this,function(o){switch(o.label){case 0:return n="string"==typeof e?s.urlToObject(e):e,p=t[0].spatialReference,d=r({},c,{query:r({},n.query,{f:"json",sr:JSON.stringify(p),target:JSON.stringify({geometryType:l.getJsonType(t[0]),geometries:t}),cutter:JSON.stringify(u)})}),[4,a(n.path+"/cut",d)];case 1:return f=o.sent(),h=f.data,y=h.cutIndexes,m=h.geometries,g=void 0===m?[]:m,[2,{cutIndexes:y,geometries:g.map(function(e){return i.fromJSON(e).set(p)})}]}})})}})},"esri/tasks/geometry/simplify":function(){define("require exports ../../core/tsSupport/assignHelper ../../core/tsSupport/awaiterHelper ../../core/tsSupport/generatorHelper ../../request ../../core/urlUtils ../../geometry/support/jsonUtils".split(" "),function(e,t,r,n,o,i,a,s){function l(e){return{geometryType:s.getJsonType(e[0]),geometries:e.map(function(e){return e.toJSON()})}}function u(e,t,r){var n=s.getGeometryType(t);return e.map(function(e){return e=n.fromJSON(e),e.spatialReference=r,e})}Object.defineProperty(t,"__esModule",{value:!0}),t.simplify=function(e,t,c){return n(this,void 0,void 0,function(){var n,p,d,f,h;return o(this,function(o){switch(o.label){case 0:return n="string"==typeof e?a.urlToObject(e):e,p=t[0].spatialReference,d=s.getJsonType(t[0]),f=r({},c,{query:r({},n.query,{f:"json",sr:p.wkid?p.wkid:JSON.stringify(p),geometries:JSON.stringify(l(t))})}),[4,i(n.path+"/simplify",f)];case 1:return h=o.sent(),[2,u(h.data,d,p)]}})})}})},"esri/tasks/operations/pbfQueryUtils":function(){define(["require","exports","./pbfFeatureServiceParser"],function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.parsePBFFeatureQuery=function(e,t){if((e=r.parseFeatureQuery(e,t).queryResult.featureResult)&&e.features&&e.features.length&&e.objectIdFieldName){t=e.objectIdFieldName;for(var n=0,o=e.features;n<o.length;n++){var i=o[n];i.attributes&&(i.objectId=i.attributes[t])}}return e}})},"esri/tasks/operations/pbfFeatureServiceParser":function(){define("require exports ../../core/Error ../../core/Logger ../../core/pbf ./pbfDehydratedFeatureSet ./pbfOptimizedFeatureSet".split(" "),function(e,t,r,n,o,i,a){function s(e,t,r){for(r=t.createPointGeometry(r);e.next();)switch(e.tag()){case 3:for(var n=e.getUInt32(),n=e.pos()+n,o=0;e.pos()<n;)t.addCoordinatePoint(r,e.getSInt64(),0,o++);break;default:e.skip()}return r}function l(e,t,r){var n=t.createGeometry(r);for(r=2+(r.hasZ?1:0)+(r.hasM?1:0);e.next();)switch(e.tag()){case 2:for(var o=e.getUInt32(),o=e.pos()+o,i=0;e.pos()<o;)t.addLength(n,e.getUInt32(),i++);break;case 3:for(var o=e.getUInt32(),o=e.pos()+o,a=i=0;e.pos()<o;)t.addCoordinate(n,e.getSInt64(),a,i),++i===r&&(a++,i=0);break;default:e.skip()}return n}function u(e){for(;e.next();)switch(e.tag()){case 1:return e.getString();case 2:return e.getFloat();case 3:return e.getDouble();case 4:return e.getSInt32();case 5:return e.getUInt32();case 6:return e.getInt64();case 7:return e.getUInt64();case 8:return e.getSInt64();case 9:return e.getBool();default:return e.skip(),null}return null}function c(e){for(var t={type:0>=w.length?null:w[0]};e.next();)switch(e.tag()){case 1:t.name=e.getString();break;case 2:var r=e.getEnum();t.type=r>=w.length?null:w[r];break;case 3:t.alias=e.getString();break;case 4:r=e.getEnum(),r=r>=S.length?null:S[r],t.sqlType=r;break;default:e.skip()}return t}function p(e,t,r,n){for(var o=t.createFeature(r),i=0;e.next();)switch(e.tag()){case 1:var a=n[i++].name;o.attributes[a]=e.processMessage(u);break;case 2:o.geometry=e.processMessageWithArgs(l,t,r);break;case 4:o.centroid=e.processMessageWithArgs(s,t,r);break;default:e.skip()}return o}function d(e){for(var t=[1,1,1,1];e.next();)switch(e.tag()){case 1:t[0]=e.getDouble();break;case 2:t[1]=e.getDouble();break;case 4:t[2]=e.getDouble();break;case 3:t[3]=e.getDouble();break;default:e.skip()}return t}function f(e){for(var t=[0,0,0,0];e.next();)switch(e.tag()){case 1:t[0]=e.getDouble();break;case 2:t[1]=e.getDouble();break;case 4:t[2]=e.getDouble();break;case 3:t[3]=e.getDouble();break;default:e.skip()}return t}function h(e){for(var t={originPosition:0>=_.length?null:_[0]};e.next();)switch(e.tag()){case 1:var r=e.getEnum();t.originPosition=r>=_.length?null:_[r];break;case 2:t.scale=e.processMessage(d);break;case 3:t.translate=e.processMessage(f);break;default:e.skip()}return t}function y(e){for(var t={};e.next();)switch(e.tag()){case 1:t.shapeAreaFieldName=e.getString();break;case 2:t.shapeLengthFieldName=e.getString();break;case 3:t.units=e.getString();break;default:e.skip()}return t}function m(e,t){for(t=t.createSpatialReference();e.next();)switch(e.tag()){case 1:t.wkid=e.getUInt32();break;case 5:t.wkt=e.getString();break;default:e.skip()}return t}function g(e,t){var r=t.createFeatureResult();r.geometryType=0>=t.geometryTypes.length?null:t.geometryTypes[0];for(var n=!1;e.next();)switch(e.tag()){case 1:r.objectIdFieldName=e.getString();break;case 3:r.globalIdFieldName=e.getString();break;case 4:r.geohashFieldName=e.getString();break;case 5:r.geometryProperties=e.processMessage(y);break;case 7:var o=e.getEnum();r.geometryType=o>=t.geometryTypes.length?null:t.geometryTypes[o];break;case 8:r.spatialReference=e.processMessageWithArgs(m,t);break;case 10:r.hasZ=e.getBool();break;case 11:r.hasM=e.getBool();break;case 12:r.transform=e.processMessage(h);break;case 9:o=e.getBool(),r.exceededTransferLimit=o;break;case 13:t.addField(r,e.processMessage(c));break;case 15:n||(t.prepareFeatures(r),n=!0),t.addFeature(r,e.processMessageWithArgs(p,t,r,r.fields));break;default:e.skip()}return t.finishFeatureResult(r),r}function v(e,t){for(var r={};e.next();)switch(e.tag()){case 1:r.featureResult=e.processMessageWithArgs(g,t);break;default:e.skip()}return r}Object.defineProperty(t,"__esModule",{value:!0});var b=n.getLogger("esri.tasks.operations.pbfFeatureServiceParser"),w="esriFieldTypeSmallInteger esriFieldTypeInteger esriFieldTypeSingle esriFieldTypeDouble esriFieldTypeString esriFieldTypeDate esriFieldTypeOID esriFieldTypeGeometry esriFieldTypeBlob esriFieldTypeRaster esriFieldTypeGUID esriFieldTypeGlobalID esriFieldTypeXML".split(" "),S="sqlTypeBigInt sqlTypeBinary sqlTypeBit sqlTypeChar sqlTypeDate sqlTypeDecimal sqlTypeDouble sqlTypeFloat sqlTypeGeometry sqlTypeGUID sqlTypeInteger sqlTypeLongNVarchar sqlTypeLongVarbinary sqlTypeLongVarchar sqlTypeNChar sqlTypeNVarchar sqlTypeOther sqlTypeReal sqlTypeSmallInt sqlTypeSqlXml sqlTypeTime sqlTypeTimestamp sqlTypeTimestamp2 sqlTypeTinyInt sqlTypeVarbinary sqlTypeVarchar".split(" "),_=["upperLeft","lowerLeft"];t.parseFeatureQuery=function(e,t){t=t&&"dehydrated"===t.type?new i.Context(t):new a.Context;try{var n=new o(new Uint8Array(e),new DataView(e));for(e={};n.next();)switch(n.tag()){case 2:e.queryResult=n.processMessageWithArgs(v,t);break;default:n.skip()}return e}catch(e){return n=new r("query:parsing-pbf","Error while parsing FeatureSet PBF payload",{error:e}),b.error(n),{queryResult:{featureResult:t.createFeatureResult()}}}}})},"esri/core/pbf":function(){define(["require","exports","./has","./ObjectPool"],function(e,t,r,n){var o=r("esri-text-decoder")?new TextDecoder("utf-8"):null,i=r("safari")||r("ios")?6:r("ff")?12:32;return function(){function e(e,t,r,n){void 0===r&&(r=0),void 0===n&&(n=e?e.byteLength:0),this._tag=0,this._dataType=99,this.init(e,t,r,n)}return e.prototype.init=function(e,t,r,n){this._data=e,this._dataView=t,this._pos=r,this._end=n},e.prototype.clone=function(){return new e(this._data,this._dataView,this._pos,this._end)},e.prototype.pos=function(){return this._pos},e.prototype.next=function(e){for(;;){if(this._pos===this._end)return!1;var t=this._decodeVarint();if(this._tag=t>>3,this._dataType=7&t,!e||e===this._tag)break;this.skip()}return!0},e.prototype.empty=function(){return this._pos>=this._end},e.prototype.tag=function(){return this._tag},e.prototype.getInt32=function(){return this._decodeVarint()},e.prototype.getInt64=function(){return this._decodeVarint()},e.prototype.getUInt32=function(){var e=4294967295,e=(127&this._data[this._pos])>>>0;return 128>this._data[this._pos++]?e:(e=(e|(127&this._data[this._pos])<<7)>>>0,128>this._data[this._pos++]?e:(e=(e|(127&this._data[this._pos])<<14)>>>0,128>this._data[this._pos++]?e:(e=(e|(127&this._data[this._pos])<<21)>>>0,128>this._data[this._pos++]?e:(e=(e|(15&this._data[this._pos])<<28)>>>0,128>this._data[this._pos++]?e:void 0))))},e.prototype.getUInt64=function(){return this._decodeVarint()},e.prototype.getSInt32=function(){var e=this.getUInt32();return e>>>1^-(1&e)|0},e.prototype.getSInt64=function(){return this._decodeSVarint()},e.prototype.getBool=function(){var e=0!==this._data[this._pos];return this._skip(1),e},e.prototype.getEnum=function(){return this._decodeVarint()},e.prototype.getFixed64=function(){var e=this._dataView,t=this._pos,e=e.getUint32(t,!0)+4294967296*e.getUint32(t+4,!0);return this._skip(8),e},e.prototype.getSFixed64=function(){var e=this._dataView,t=this._pos,e=e.getUint32(t,!0)+4294967296*e.getInt32(t+4,!0);return this._skip(8),e},e.prototype.getDouble=function(){var e=this._dataView.getFloat64(this._pos,!0);return this._skip(8),e},e.prototype.getFixed32=function(){var e=this._dataView.getUint32(this._pos,!0);return this._skip(4),e},e.prototype.getSFixed32=function(){var e=this._dataView.getInt32(this._pos,!0);return this._skip(4),e},e.prototype.getFloat=function(){var e=this._dataView.getFloat32(this._pos,!0);return this._skip(4),e},e.prototype.getString=function(){var e=this._getLength(),t=this._pos,t=this._toString(this._data,t,t+e);return this._skip(e),t},e.prototype.getBytes=function(){var e=this._getLength(),t=this._pos,t=this._toBytes(this._data,t,t+e);return this._skip(e),t},e.prototype.processMessageWithArgs=function(e,t,r,n){var o=this.getMessage();return e=e(o,t,r,n),o.release(),e},e.prototype.processMessage=function(e){var t=this.getMessage();return e=e(t),t.release(),e},e.prototype.getMessage=function(){var t=this._getLength(),r=e.pool.acquire();return r.init(this._data,this._dataView,this._pos,this._pos+t),this._skip(t),r},e.prototype.release=function(){e.pool.release(this)},e.prototype.skip=function(){switch(this._dataType){case 0:this._decodeVarint();break;case 1:this._skip(8);break;case 2:this._skip(this._getLength());break;case 5:this._skip(4);break;default:throw Error("Invalid data type!")}},e.prototype._skip=function(e){if(this._pos+e>this._end)throw Error("Attempt to skip past the end of buffer!");this._pos+=e},e.prototype._decodeVarint=function(){var e,t=this._data,r=this._pos,n=0;if(10<=this._end-r){if(e=t[r++],n|=127&e,0!=(128&e)&&(e=t[r++],n|=(127&e)<<7,0!=(128&e)&&(e=t[r++],n|=(127&e)<<14,0!=(128&e)&&(e=t[r++],n|=(127&e)<<21,0!=(128&e)&&(e=t[r++],n+=268435456*(127&e),0!=(128&e)&&(e=t[r++],n+=34359738368*(127&e),0!=(128&e)&&(e=t[r++],n+=4398046511104*(127&e),0!=(128&e)&&(e=t[r++],n+=562949953421312*(127&e),0!=(128&e)&&(e=t[r++],n+=72057594037927940*(127&e),0!=(128&e)&&(e=t[r++],n+=0x8000000000000000*(127&e),0!=(128&e)))))))))))throw Error("Varint too long!")}else{for(var o=1;r!==this._end&&0!=(128&(e=t[r]));)++r,n+=(127&e)*o,o*=128;if(r===this._end)throw Error("Varint overrun!");++r,n+=e*o}return this._pos=r,n},e.prototype._decodeSVarint=function(){var e=this._decodeVarint();return e%2?-(e+1)/2:e/2},e.prototype._getLength=function(){if(2!==this._dataType)throw Error("Not a delimited data type!");return this._decodeVarint()},e.prototype._toString=function(e,t,r){if((r=Math.min(this._end,r))-t>i&&o)return e=e.subarray(t,r),o.decode(e);for(var n="",a="";t<r;++t){var s=e[t];128&s?a+="%"+s.toString(16):(n+=decodeURIComponent(a)+String.fromCharCode(s),a="")}return a.length&&(n+=decodeURIComponent(a)),n},e.prototype._toBytes=function(e,t,r){return r=Math.min(this._end,r),new Uint8Array(e.buffer,t,r-t)},e.pool=new n(e,!1,function(e){e._data=null,e._dataView=null}),e}()})},"esri/tasks/operations/pbfDehydratedFeatureSet":function(){define("require exports ../../Graphic ../../core/compilerUtils ../../geometry/SpatialReference ../../layers/graphics/dehydratedFeatures ../../layers/support/Field".split(" "),function(e,t,r,n,o,i,a){function s(e,t){return t}function l(e,t,r,n){switch(r){case 0:return d(e,t+n,0);case 1:return("lowerLeft"===e.originPosition?d:f)(e,t+n,1)}}function u(e,t,r,n){switch(r){case 0:return d(e,t+n,0);case 1:return("lowerLeft"===e.originPosition?d:f)(e,t+n,1);case 2:return d(e,t,2)}}function c(e,t,r,n){switch(r){case 0:return d(e,t+n,0);case 1:return("lowerLeft"===e.originPosition?d:f)(e,t+n,1);case 2:return d(e,t,3)}}function p(e,t,r,n){switch(r){case 0:return d(e,t+n,0);case 1:return("lowerLeft"===e.originPosition?d:f)(e,t+n,1);case 2:return d(e,t,2);case 3:return d(e,t,3)}}function d(e,t,r){return e.translate[r]+t*e.scale[r]}function f(e,t,r){return e.translate[r]-t*e.scale[r]}Object.defineProperty(t,"__esModule",{value:!0}),e=function(){function e(e){this.options=e,this.geometryTypes=["point","multipoint","polyline","polygon"],this.previousCoordinate=[0,0],this.transform=null,this.applyTransform=s,this.lengths=[],this.vertexDimension=this.toAddInCurrentPath=this.currentLengthIndex=0,this.coordinateBuffer=null,this.coordinateBufferPtr=0,this.AttributesConstructor=function(){}}return e.prototype.createFeatureResult=function(){return new i.DehydratedFeatureSetClass},e.prototype.finishFeatureResult=function(e){this.options.applyTransform&&(e.transform=null),this.AttributesConstructor=function(){},this.coordinateBuffer=null,this.lengths.length=0},e.prototype.createSpatialReference=function(){return new o},e.prototype.addField=function(e,t){e.fields.push(a.fromJSON(t));var r=e.fields.map(function(e){return e.name});this.AttributesConstructor=function(){for(var e=0;e<r.length;e++)this[r[e]]=null}},e.prototype.addFeature=function(e,t){var r=this.options.maxStringAttributeLength?this.options.maxStringAttributeLength:0;if(0<r)for(var n in t.attributes){var o=t.attributes[n];"string"==typeof o&&o.length>r&&(t.attributes[n]="")}e.features.push(t)},e.prototype.prepareFeatures=function(e){var t=this;switch(this.options.applyTransform&&e.transform&&(this.transform=e.transform,this.applyTransform=this.deriveApplyTransform(e)),this.vertexDimension=2,e.hasZ&&this.vertexDimension++,e.hasM&&this.vertexDimension++,e.geometryType){case"point":this.addCoordinate=function(e,r,n,o){return t.addCoordinatePoint(e,r,o)},this.createGeometry=function(e){return t.createPointGeometry(e)};break;case"polygon":this.addCoordinate=function(e,r,n,o){return t.addCoordinatePolygon(e,r,o)},this.createGeometry=function(e){return t.createPolygonGeometry(e)};break;case"polyline":this.addCoordinate=function(e,r,n,o){return t.addCoordinatePolyline(e,r,o)},this.createGeometry=function(e){return t.createPolylineGeometry(e)};break;case"multipoint":this.addCoordinate=function(e,r,n,o){return t.addCoordinateMultipoint(e,r,o)},this.createGeometry=function(e){return t.createMultipointGeometry(e)};break;default:n.neverReached(e.geometryType)}},e.prototype.createFeature=function(){return this.currentLengthIndex=this.lengths.length=0,this.previousCoordinate[0]=0,this.previousCoordinate[1]=0,this.coordinateBuffer=null,this.coordinateBufferPtr=0,new i.DehydratedFeatureClass(r.generateUID(),null,new this.AttributesConstructor)},e.prototype.addLength=function(e,t,r){0===this.lengths.length&&(this.toAddInCurrentPath=t),this.lengths.push(t)},e.prototype.createPointGeometry=function(e){return e={type:"point",x:0,y:0,spatialReference:e.spatialReference,hasZ:!!e.hasZ,hasM:!!e.hasM},e.hasZ&&(e.z=0),e.hasM&&(e.m=0),e},e.prototype.addCoordinatePoint=function(e,t,r){switch(t=this.applyTransform(this.transform,t,r,0),r){case 0:e.x=t;break;case 1:e.y=t;break;case 2:e.hasZ?e.z=t:e.m=t;break;case 3:e.m=t}},e.prototype.transformPathLikeValue=function(e,t){var r=0;return 1>=t&&(r=this.previousCoordinate[t],this.previousCoordinate[t]+=e),this.applyTransform(this.transform,e,t,r)},e.prototype.addCoordinatePolyline=function(e,t,r){this.dehydratedAddPointsCoordinate(e.paths,t,r)},e.prototype.addCoordinatePolygon=function(e,t,r){this.dehydratedAddPointsCoordinate(e.rings,t,r)},e.prototype.addCoordinateMultipoint=function(e,t,r){0===r&&e.points.push([]),t=this.transformPathLikeValue(t,r),e.points[e.points.length-1].push(t)},e.prototype.createPolygonGeometry=function(e){return{type:"polygon",rings:[[]],spatialReference:e.spatialReference,hasZ:!!e.hasZ,hasM:!!e.hasM}},e.prototype.createPolylineGeometry=function(e){return{type:"polyline",paths:[[]],spatialReference:e.spatialReference,hasZ:!!e.hasZ,hasM:!!e.hasM}},e.prototype.createMultipointGeometry=function(e){return{type:"multipoint",points:[],spatialReference:e.spatialReference,hasZ:!!e.hasZ,hasM:!!e.hasM}},e.prototype.dehydratedAddPointsCoordinate=function(e,t,r){if(null===this.coordinateBuffer){var n=this.lengths.reduce(function(e,t){return e+t},0);this.coordinateBuffer=new Float64Array(n*this.vertexDimension)}0===r&&0==this.toAddInCurrentPath--&&(e.push([]),this.toAddInCurrentPath=this.lengths[++this.currentLengthIndex]-1,this.previousCoordinate[0]=0,this.previousCoordinate[1]=0),t=this.transformPathLikeValue(t,r),e=e[e.length-1],0===r&&e.push(new Float64Array(this.coordinateBuffer.buffer,this.coordinateBufferPtr*Float64Array.BYTES_PER_ELEMENT,this.vertexDimension)),this.coordinateBuffer[this.coordinateBufferPtr++]=t},e.prototype.deriveApplyTransform=function(e){var t=e.hasZ;return e=e.hasM,t&&e?p:t?u:e?c:l},e}(),t.Context=e})},"esri/layers/graphics/dehydratedFeatures":function(){define("require exports ../../geometry ../../Graphic ../../core/compilerUtils ../../core/has ../../core/lang ../../core/maybe ../../core/typedArrayUtil ../../geometry/SpatialReference ../../geometry/support/aaBoundingBox ../../geometry/support/aaBoundingRect ../../geometry/support/jsonUtils ../../geometry/support/quantizationUtils ../support/Field ./dehydratedFeatureComparison".split(" "),function(e,t,r,n,o,i,a,s,l,u,c,p,d,f,h,y){function m(e,t,r){if(!e)return null;switch(t){case"point":return e={x:e.x,y:e.y,z:e.z,m:e.m,hasZ:null!=e.z,hasM:null!=e.m,type:"point",spatialReference:r};case"polyline":return e={paths:e.paths,hasZ:!!e.hasZ,hasM:!!e.hasM,type:"polyline",spatialReference:r};case"polygon":return e={rings:e.rings,hasZ:!!e.hasZ,hasM:!!e.hasM,type:"polygon",spatialReference:r};case"multipoint":return e={points:e.points,hasZ:!!e.hasZ,hasM:!!e.hasM,type:"multipoint",spatialReference:r}}}function g(e,t,r,n){return{x:e,y:t,z:r,hasZ:null!=r,hasM:!1,spatialReference:n,type:"point"}}function v(e){return"declaredClass"in e}function b(e){return"declaredClass"in e}function w(e){return"declaredClass"in e}function S(e){return s.isNone(e)?null:v(e)?e:d.fromJSON(O(e))}function _(e){if(!e)return 0;var t,r=32;for(t in e)if(e.hasOwnProperty(t)){var n=e[t];switch(typeof n){case"string":r+=j(n);break;default:case"number":r+=16}}return r}function x(e){if(s.isNone(e))return 0;var t=32;switch(e.type){case"point":t+=42;break;case"polyline":case"polygon":var r=0,n=2+(e.hasZ?1:0)+(e.hasM?1:0);e="polyline"===e.type?e.paths:e.rings;for(var i=0;i<e.length;i++)r+=e[i].length;t=t+(8*r*n+64)+128*r+34,t+=32*(e.length+1);break;case"multipoint":r=e.points.length,t+=8*r*(2+(e.hasZ?1:0)+(e.hasM?1:0))+64,t+=128*r,t+=34,t+=32;break;case"extent":t+=98,e.hasM&&(t+=32),e.hasZ&&(t+=32);break;case"mesh":t+=l.estimateSize(e.vertexAttributes.position),t+=l.estimateSize(e.vertexAttributes.normal),t+=l.estimateSize(e.vertexAttributes.uv),t+=l.estimateSize(e.vertexAttributes.tangent);break;default:o.neverReached(e)}return t}function O(e){var t=e.spatialReference.toJSON();switch(e.type){case"point":return{x:e.x,y:e.y,z:e.z,m:e.m,spatialReference:t};case"polygon":var r=e.hasZ,n=e.hasM;return{rings:C(e.rings),hasZ:r,hasM:n,spatialReference:t};case"polyline":var i=e.paths,r=e.hasZ,n=e.hasM;return{paths:C(i),hasZ:r,hasM:n,spatialReference:t};case"extent":var i=e.xmin,a=e.xmax,s=e.ymin,l=e.ymax,u=e.zmin,c=e.zmax,p=e.mmin,d=e.mmax,r=e.hasZ,n=e.hasM;return{xmin:i,xmax:a,ymin:s,ymax:l,zmin:u,zmax:c,mmin:p,mmax:d,hasZ:r,hasM:n,spatialReference:t};case"multipoint":return i=e.points,r=e.hasZ,n=e.hasM,{points:P(i)?M(i):i,hasZ:r,hasM:n,spatialReference:t};default:o.neverReached(e)}}function C(e){return T(e)?e.map(function(e){return M(e)}):e}function M(e){return e.map(function(e){return l.toArray(e)})}function T(e){for(var t=0;t<e.length;t++){var r=e[t];if(0!==r.length)return P(r)}return!1}function P(e){return e.length&&(l.isFloat32Array(e[0])||l.isFloat64Array(e[0]))}function I(e,t){switch(c.empty(t),"mesh"===e.type&&(e=e.extent),e.type){case"point":t[0]=t[3]=e.x,t[1]=t[4]=e.y,e.hasZ&&(t[2]=t[5]=e.z);break;case"polyline":for(var r=0;r<e.paths.length;r++)c.expandWithNestedArray(t,e.paths[r],e.hasZ);break;case"polygon":for(r=0;r<e.rings.length;r++)c.expandWithNestedArray(t,e.rings[r],e.hasZ);break;case"multipoint":c.expandWithNestedArray(t,e.points,e.hasZ);break;case"extent":t[0]=e.xmin,t[1]=e.ymin,t[3]=e.xmax,t[4]=e.ymax,null!=e.zmin&&(t[2]=e.zmin),null!=e.zmax&&(t[5]=e.zmax);break;default:o.neverReached(e)}}function E(e,t){switch(p.empty(t),"mesh"===e.type&&(e=e.extent),e.type){case"point":t[0]=t[2]=e.x,t[1]=t[3]=e.y;break;case"polyline":for(var r=0;r<e.paths.length;r++)p.expandWithNestedArray(t,e.paths[r]);break;case"polygon":for(r=0;r<e.rings.length;r++)p.expandWithNestedArray(t,e.rings[r]);break;case"multipoint":p.expandWithNestedArray(t,e.points);break;case"extent":t[0]=e.xmin,t[1]=e.ymin,t[2]=e.xmax,t[3]=e.ymax;break;default:o.neverReached(e)}}Object.defineProperty(t,"__esModule",{value:!0}),t.equals=y.equals,e=function(){return function(e,t,r){this.uid=e,this.geometry=t,this.attributes=r,this.visible=!0,this.centroid=this.objectId=null}}(),t.DehydratedFeatureClass=e,t.hasGeometry=function(e){return s.isSome(e.geometry)},t.isFeatureGeometry=function(e){return r.isFeatureGeometryType(e.type)},e=function(){return function(){this.exceededTransferLimit=!1,this.features=[],this.fields=[],this.hasZ=this.hasM=!1,this.transform=this.spatialReference=this.geohashFieldName=this.geometryProperties=this.globalIdFieldName=this.objectIdFieldName=this.geometryType=null}}(),t.DehydratedFeatureSetClass=e,t.isPoint=function(e){return"point"===e.type},t.fromFeatureSetJSON=function(e){var t=r.featureGeometryTypeKebabDictionary.fromJSON(e.geometryType),i=u.fromJSON(e.spatialReference),a=e.transform,s=e.features.map(function(r){var s=e.objectIdFieldName;if(r={uid:n.generateUID(),objectId:s&&r.attributes?r.attributes[s]:null,attributes:r.attributes,geometry:m(r.geometry,t,i),visible:!0},(s=r.geometry)&&a)switch(s.type){case"point":r.geometry=f.hydratePoint(a,s,s,s.hasZ,s.hasM);break;case"multipoint":r.geometry=f.hydrateMultipoint(a,s,s,s.hasZ,s.hasM);break;case"polygon":r.geometry=f.hydratePolygon(a,s,s,s.hasZ,s.hasM);break;case"polyline":r.geometry=f.hydratePolyline(a,s,s,s.hasZ,s.hasM);break;default:o.neverReached(s)}return r});return{geometryType:t,features:s,spatialReference:i,fields:e.fields?e.fields.map(function(e){return h.fromJSON(e)}):null,objectIdFieldName:e.objectIdFieldName,globalIdFieldName:e.globalIdFieldName,geohashFieldName:e.geohashFieldName,geometryProperties:e.geometryProperties,hasZ:e.hasZ,hasM:e.hasM,exceededTransferLimit:e.exceededTransferLimit,transform:null}},t.fromJSONGeometry=m,t.makeDehydratedPoint=g,t.isHydratedGeometry=v,t.isHydratedPoint=b,t.isHydratedGraphic=w,t.hydrateGraphic=function(e,t){return!e||w(e)?e:(t=new n({layer:t,sourceLayer:t}),t.visible=e.visible,t.symbol=a.clone(e.symbol),t.attributes=a.clone(e.attributes),t.geometry=S(e.geometry),t)},t.hydrateGeometry=S,t.clonePoint=function(e,t){if(!e)return null;if(b(e)){if(null==t)return e.clone();if(b(t))return t.copy(e)}return null!=t?(t.x=e.x,t.y=e.y,t.spatialReference=e.spatialReference,e.hasZ?(t.z=e.z,t.hasZ=e.hasZ):(t.z=null,t.hasZ=!1),e.hasM?(t.m=e.m,t.hasM=!0):(t.m=null,t.hasM=!1)):(t=g(e.x,e.y,e.z,e.spatialReference),e.hasM&&(t.m=e.m,t.hasM=!0)),t};var j=i("esri-text-decoder")?function(e){return 32+e.length}:function(e){return 32*e.length};t.estimateAttributesObjectSize=_,t.estimateGeometryObjectSize=x,t.estimateSize=function(e){var t;return t=32+_(e.attributes),t=t+3+(8+x(e.geometry))},t.numVertices=function(e){if(s.isNone(e))return 0;switch(e.type){case"point":return 1;case"polyline":var t=0,r=0;for(e=e.paths;r<e.length;r++)t+=e[r].length;return t;case"polygon":for(r=t=0,e=e.rings;r<e.length;r++)t+=e[r].length;return t;case"multipoint":return e.points.length;case"extent":return 2;case"mesh":return(t=e.vertexAttributes&&e.vertexAttributes.position)?t.length/3:0;default:o.neverReached(e)}},t.hasVertices=function(e){if(!e)return!1;switch(e.type){case"extent":case"point":return!0;case"polyline":var t=0;for(e=e.paths;t<e.length;t++)if(0<e[t].length)return!0;return!1;case"polygon":for(t=0,e=e.rings;t<e.length;t++)if(0<e[t].length)return!0;return!1;case"multipoint":return 0<e.points.length;case"mesh":return e.vertexAttributes&&e.vertexAttributes.position&&0<e.vertexAttributes.position.length;default:o.neverReached(e)}},t.computeAABB=I,t.expandAABB=function(e,t){I(e,k),c.expand(t,k)},t.computeAABR=E,t.expandAABR=function(e,t){E(e,A),p.expand(t,A)},t.getObjectId=function(e,t){return null!=e.objectId?e.objectId:e.attributes&&t?e.attributes[t]:null};var k=c.create(),A=p.create()})},"esri/geometry/support/aaBoundingBox":function(){define(["require","exports","../Extent","./aaBoundingRect"],function(e,t,r,n){function o(e){return void 0===e&&(e=t.ZERO),[e[0],e[1],e[2],e[3],e[4],e[5]]}function i(e,t,r,n,i,a,s){return void 0===s&&(s=o()),s[0]=e,s[1]=t,s[2]=r,s[3]=n,s[4]=i,s[5]=a,s}function a(e){return e[0]>=e[3]?0:e[3]-e[0]}function s(e){return e[1]>=e[4]?0:e[4]-e[1]}function l(e){return e[2]>=e[5]?0:e[5]-e[2]}function u(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function c(e){return 6===e.length}Object.defineProperty(t,"__esModule",{value:!0}),t.create=o,t.fromValues=i,t.fromExtent=function(e,t){return void 0===t&&(t=o()),t[0]=e.xmin,t[1]=e.ymin,t[2]=e.zmin,t[3]=e.xmax,t[4]=e.ymax,t[5]=e.zmax,t},t.toExtent=function(e,t){return new r(isFinite(e[2])||isFinite(e[5])?{xmin:e[0],xmax:e[3],ymin:e[1],ymax:e[4],zmin:e[2],zmax:e[5],spatialReference:t}:{xmin:e[0],xmax:e[3],ymin:e[1],ymax:e[4],spatialReference:t})},t.fromMinMax=function(e,t,r){return void 0===r&&(r=o()),r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=t[0],r[4]=t[1],r[5]=t[2],r},t.expandPointInPlace=function(e,t){t[0]<e[0]&&(e[0]=t[0]),t[0]>e[3]&&(e[3]=t[0]),t[1]<e[1]&&(e[1]=t[1]),t[1]>e[4]&&(e[4]=t[1]),t[2]<e[2]&&(e[2]=t[2]),t[2]>e[5]&&(e[5]=t[2])},t.expand=function(e,t,r){return void 0===r&&(r=e),c(t)?(r[0]=Math.min(e[0],t[0]),r[1]=Math.min(e[1],t[1]),r[2]=Math.min(e[2],t[2]),r[3]=Math.max(e[3],t[3]),r[4]=Math.max(e[4],t[4]),r[5]=Math.max(e[5],t[5])):n.is(t)?(r[0]=Math.min(e[0],t[0]),r[1]=Math.min(e[1],t[1]),r[3]=Math.max(e[3],t[2]),r[4]=Math.max(e[4],t[3])):2===t.length?(r[0]=Math.min(e[0],t[0]),r[1]=Math.min(e[1],t[1]),r[3]=Math.max(e[3],t[0]),r[4]=Math.max(e[4],t[1])):3===t.length&&(r[0]=Math.min(e[0],t[0]),r[1]=Math.min(e[1],t[1]),r[2]=Math.min(e[2],t[2]),r[3]=Math.max(e[3],t[0]),r[4]=Math.max(e[4],t[1]),r[5]=Math.max(e[5],t[2])),r},t.expandWithBuffer=function(e,t,r,n,o){void 0===o&&(o=e);var i=e[0],a=e[1],s=e[2],l=e[3],u=e[4];e=e[5];for(var c=0;c<n;c++)i=Math.min(i,t[r+3*c]),a=Math.min(a,t[r+3*c+1]),s=Math.min(s,t[r+3*c+2]),l=Math.max(l,t[r+3*c]),u=Math.max(u,t[r+3*c+1]),e=Math.max(e,t[r+3*c+2]);return o[0]=i,o[1]=a,o[2]=s,o[3]=l,o[4]=u,o[5]=e,o},t.expandWithOffset=function(e,t,r,n,o){return void 0===o&&(o=e),o[0]=Math.min(e[0],e[0]+t),o[3]=Math.max(e[3],e[3]+t),o[1]=Math.min(e[1],e[1]+r),o[4]=Math.max(e[4],e[4]+r),o[2]=Math.min(e[2],e[2]+n),o[5]=Math.max(e[5],e[5]+n),o},t.expandWithNestedArray=function(e,t,r,n){void 0===n&&(n=e);var o=t.length,i=e[0],a=e[1],s=e[2],l=e[3],u=e[4];if(e=e[5],r)for(r=0;r<o;r++){var c=t[r],i=Math.min(i,c[0]),a=Math.min(a,c[1]),s=Math.min(s,c[2]),l=Math.max(l,c[0]),u=Math.max(u,c[1]);e=Math.max(e,c[2])}else for(r=0;r<o;r++)c=t[r],i=Math.min(i,c[0]),a=Math.min(a,c[1]),l=Math.max(l,c[0]),u=Math.max(u,c[1]);return n[0]=i,n[1]=a,n[2]=s,n[3]=l,n[4]=u,n[5]=e,n},t.allFinite=function(e){for(var t=0;6>t;t++)if(!isFinite(e[t]))return!1;return!0},t.width=a,t.depth=s,t.height=l,t.diameter=function(e){var t=a(e),r=l(e);return e=s(e),Math.sqrt(t*t+r*r+e*e)},t.center=function(e,t){return void 0===t&&(t=[0,0,0]),t[0]=e[0]+a(e)/2,t[1]=e[1]+s(e)/2,t[2]=e[2]+l(e)/2,t},t.size=function(e,t){return void 0===t&&(t=[0,0,0]),t[0]=a(e),t[1]=s(e),t[2]=l(e),t},t.maximumDimension=function(e){return Math.max(a(e),l(e),s(e))},t.containsPoint=function(e,t){return t[0]>=e[0]&&t[1]>=e[1]&&t[2]>=e[2]&&t[0]<=e[3]&&t[1]<=e[4]&&t[2]<=e[5]},t.containsPointWithMargin=function(e,t,r){return t[0]>=e[0]-r&&t[1]>=e[1]-r&&t[2]>=e[2]-r&&t[0]<=e[3]+r&&t[1]<=e[4]+r&&t[2]<=e[5]+r},t.contains=function(e,t){return t[0]>=e[0]&&t[1]>=e[1]&&t[2]>=e[2]&&t[3]<=e[3]&&t[4]<=e[4]&&t[5]<=e[5]},t.intersects=function(e,t){return Math.max(t[0],e[0])<=Math.min(t[3],e[3])&&Math.max(t[1],e[1])<=Math.min(t[4],e[4])&&Math.max(t[2],e[2])<=Math.min(t[5],e[5])},t.offset=function(e,t,r,n,o){return void 0===o&&(o=e),o[0]=e[0]+t,o[1]=e[1]+r,o[2]=e[2]+n,o[3]=e[3]+t,o[4]=e[4]+r,o[5]=e[5]+n,o},t.setMin=function(e,t,r){return void 0===r&&(r=e),r[0]=t[0],r[1]=t[1],r[2]=t[2],r!==e&&(r[3]=e[3],r[4]=e[4],r[5]=e[5]),r},t.setMax=function(e,t,r){return void 0===r&&(r=e),r[3]=t[0],r[4]=t[1],r[5]=t[2],r!==e&&(r[0]=e[0],r[1]=e[1],r[2]=e[2]),e},t.set=u,t.empty=function(e){return e?u(e,t.NEGATIVE_INFINITY):o(t.NEGATIVE_INFINITY)},t.toRect=function(e,t){return t||(t=n.create()),t[0]=e[0],t[1]=e[1],t[2]=e[3],t[3]=e[4],t},t.fromRect=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=Number.NEGATIVE_INFINITY,e[3]=t[2],e[4]=t[3],e[5]=Number.POSITIVE_INFINITY,e},t.is=c,t.isPoint=function(e){return 0===a(e)&&0===s(e)&&0===l(e)},t.equals=function(e,t,r){if(null==e||null==t)return e===t;if(!c(e)||!c(t))return!1;if(r){for(var n=0;n<e.length;n++)if(!r(e[n],t[n]))return!1}else for(n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0},t.wrap=function(e,t,r,n,o,a){return i(e,t,r,n,o,a,p)},t.POSITIVE_INFINITY=[-1/0,-1/0,-1/0,1/0,1/0,1/0],t.NEGATIVE_INFINITY=[1/0,1/0,1/0,-1/0,-1/0,-1/0],t.ZERO=[0,0,0,0,0,0];var p=o()})},"esri/geometry/support/aaBoundingRect":function(){define(["require","exports","../../core/compilerUtils","../Extent"],function(e,t,r,n){function o(e){return void 0===e&&(e=t.ZERO),[e[0],e[1],e[2],e[3]]}function i(e){return e[0]>=e[2]?0:e[2]-e[0]}function a(e){return e[1]>=e[3]?0:e[3]-e[1]}function s(e,t,r){return t>=e[0]&&r>=e[1]&&t<=e[2]&&r<=e[3]}function l(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function u(e){return 4===e.length}function c(e,t,r){return e<t?t:e>r?r:e}Object.defineProperty(t,"__esModule",{value:!0}),t.create=o,t.clone=function(e){return[e[0],e[1],e[2],e[3]]},t.fromValues=function(e,t,r,n,i){return void 0===i&&(i=o()),i[0]=e,i[1]=t,i[2]=r,i[3]=n,i},t.fromExtent=function(e,t){return void 0===t&&(t=o()),t[0]=e.xmin,t[1]=e.ymin,t[2]=e.xmax,t[3]=e.ymax,t},t.toExtent=function(e,t){return new n({xmin:e[0],ymin:e[1],xmax:e[2],ymax:e[3],spatialReference:t})},t.expandPointInPlace=function(e,t){t[0]<e[0]&&(e[0]=t[0]),t[0]>e[2]&&(e[2]=t[0]),t[1]<e[1]&&(e[1]=t[1]),t[1]>e[3]&&(e[3]=t[1])},t.expand=function(e,t,n){if(void 0===n&&(n=e),"length"in t)u(t)?(n[0]=Math.min(e[0],t[0]),n[1]=Math.min(e[1],t[1]),n[2]=Math.max(e[2],t[2]),n[3]=Math.max(e[3],t[3])):2!==t.length&&3!==t.length||(n[0]=Math.min(e[0],t[0]),n[1]=Math.min(e[1],t[1]),n[2]=Math.max(e[2],t[0]),n[3]=Math.max(e[3],t[1]));else switch(t.type){case"extent":n[0]=Math.min(e[0],t.xmin),n[1]=Math.min(e[1],t.ymin),n[2]=Math.max(e[2],t.xmax),n[3]=Math.max(e[3],t.ymax);break;case"point":n[0]=Math.min(e[0],t.x),n[1]=Math.min(e[1],t.y),n[2]=Math.max(e[2],t.x),n[3]=Math.max(e[3],t.y);break;default:r.neverReached(t)}return n},t.expandWithNestedArray=function(e,t,r){void 0===r&&(r=e);var n=t.length,o=e[0],i=e[1],a=e[2];e=e[3];for(var s=0;s<n;s++){var l=t[s],o=Math.min(o,l[0]),i=Math.min(i,l[1]),a=Math.max(a,l[0]);e=Math.max(e,l[1])}return r[0]=o,r[1]=i,r[2]=a,r[3]=e,r},t.allFinite=function(e){for(var t=0;4>t;t++)if(!isFinite(e[t]))return!1;return!0},t.width=i,t.height=a,t.diameter=function(e){var t=i(e);return e=a(e),Math.sqrt(t*t+e*e)},t.area=function(e){return i(e)*a(e)},t.center=function(e,t){return void 0===t&&(t=[0,0]),t[0]=e[0]+i(e)/2,t[1]=e[1]+a(e)/2,t},t.containsPoint=function(e,t){return s(e,t[0],t[1])},t.containsPointObject=function(e,t){return s(e,t.x,t.y)},t.containsPointWithMargin=function(e,t,r){return t[0]>=e[0]-r&&t[1]>=e[1]-r&&t[0]<=e[2]+r&&t[1]<=e[3]+r},t.intersects=function(e,t){return Math.max(t[0],e[0])<=Math.min(t[2],e[2])&&Math.max(t[1],e[1])<=Math.min(t[3],e[3])},t.contains=function(e,t){return t[0]>=e[0]&&t[2]<=e[2]&&t[1]>=e[1]&&t[3]<=e[3]},t.intersection=function(e,t,r){void 0===r&&(r=e);var n=t[0],o=t[1],i=t[2];return t=t[3],r[0]=c(e[0],n,i),r[1]=c(e[1],o,t),r[2]=c(e[2],n,i),r[3]=c(e[3],o,t),r},t.distance=function(e,t){var r=(e[1]+e[3])/2,n=Math.max(Math.abs(t[0]-(e[0]+e[2])/2)-i(e)/2,0);return e=Math.max(Math.abs(t[1]-r)-a(e)/2,0),Math.sqrt(n*n+e*e)},t.size=function(e,t){t[0]=e[2]-e[0],t[1]=e[3]-e[1]},t.offset=function(e,t,r,n){return void 0===n&&(n=e),n[0]=e[0]+t,n[1]=e[1]+r,n[2]=e[2]+t,n[3]=e[3]+r,n},t.pad=function(e,t,r){return void 0===r&&(r=e),r[0]=e[0]-t,r[1]=e[1]-t,r[2]=e[2]+t,r[3]=e[3]+t,r},t.setMin=function(e,t,r){return void 0===r&&(r=e),r[0]=t[0],r[1]=t[1],r!==e&&(r[2]=e[2],r[3]=e[3]),r},t.setMax=function(e,t,r){return void 0===r&&(r=e),r[2]=t[0],r[3]=t[1],r!==e&&(r[0]=e[0],r[1]=e[1]),e},t.set=l,t.empty=function(e){return e?l(e,t.NEGATIVE_INFINITY):o(t.NEGATIVE_INFINITY)},t.is=u,t.isPoint=function(e){return!(0!==i(e)&&isFinite(e[0])||0!==a(e)&&isFinite(e[1]))},t.equals=function(e,t,r){if(null==e||null==t)return e===t;if(!u(e)||!u(t))return!1;if(r){for(var n=0;n<e.length;n++)if(!r(e[n],t[n]))return!1}else for(n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0},t.POSITIVE_INFINITY=[-1/0,-1/0,1/0,1/0],t.NEGATIVE_INFINITY=[1/0,1/0,-1/0,-1/0],t.ZERO=[0,0,0,0],t.UNIT=[0,0,1,1]})},"esri/geometry/support/quantizationUtils":function(){define(["require","exports","./jsonUtils"],function(e,t,r){function n(e,t){return Math.round((t-e.translate[0])/e.scale[0])}function o(e,t){return Math.round((e.translate[1]-t)/e.scale[1])}function i(e,t,r){for(var i,a,s,l,u=[],c=0;c<r.length;c++){var p=r[c];0<c?(s=n(e,p[0]),l=o(e,p[1]),(s!==i||l!==a)&&(u.push(t(p,s-i,l-a)),i=s,a=l)):(i=n(e,p[0]),a=o(e,p[1]),u.push(t(p,i,a)))}return 0<u.length?u:null}function a(e,t,r,n){return i(e,r?n?C:O:n?O:x,t)}function s(e,t,r,n){var o=[];for(r=r?n?C:O:n?O:x,n=0;n<t.length;n++){var a=i(e,r,t[n]);a&&3<=a.length&&o.push(a)}return o.length?o:null}function l(e,t,r,n){var o=[];for(r=r?n?C:O:n?O:x,n=0;n<t.length;n++){var a=i(e,r,t[n]);a&&2<=a.length&&o.push(a)}return o.length?o:null}function u(e,t){return t*e.scale[0]+e.translate[0]}function c(e,t){return e.translate[1]-t*e.scale[1]}function p(e,t,r){var n=Array(r.length);if(!r.length)return n;var o=e.scale,i=o[0],o=o[1],a=u(e,r[0][0]);e=c(e,r[0][1]),n[0]=t(r[0],a,e);for(var s=1;s<r.length;s++){var l=r[s],a=a+l[0]*i;e-=l[1]*o,n[s]=t(l,a,e)}return n}function d(e,t,r){for(var n=Array(r.length),o=0;o<r.length;o++)n[o]=p(e,t,r[o]);return n}function f(e,t,r,n){return p(e,r?n?C:O:n?O:x,t)}function h(e,t,r,n){return d(e,r?n?C:O:n?O:x,t)}function y(e,t,r,n){return d(e,r?n?C:O:n?O:x,t)}function m(e,t,r){var n=r[0],o=n[0],n=n[1],i=Math.min(o,t[0]),a=Math.min(n,t[1]),s=Math.max(o,t[2]);t=Math.max(n,t[3]);for(var l=1;l<r.length;l++){var u=r[l],c=u[0],u=u[1],o=o+c,n=n+u;0>c&&(i=Math.min(i,o)),0<c&&(s=Math.max(s,o)),0>u?a=Math.min(a,n):0<u&&(t=Math.max(t,n))}return e[0]=i,e[1]=a,e[2]=s,e[3]=t,e}function g(e,t){if(!t.length)return null;e[0]=e[1]=Number.POSITIVE_INFINITY,e[2]=e[3]=Number.NEGATIVE_INFINITY;for(var r=0;r<t.length;r++)m(e,e,t[r]);return e}function v(e,t,r,i,a){return t.xmin=n(e,r.xmin),t.ymin=o(e,r.ymin),t.xmax=n(e,r.xmax),t.ymax=o(e,r.ymax),t!==r&&(i&&(t.zmin=r.zmin,t.zmax=r.zmax),a&&(t.mmin=r.mmin,t.mmax=r.mmax)),t}function b(e,t,r,n,o){return t.points=a(e,r.points,n,o),t}function w(e,t,r,i,a){return t.x=n(e,r.x),t.y=o(e,r.y),t!==r&&(i&&(t.z=r.z),a&&(t.m=r.m)),t}function S(e,t,r,n,o){return(e=s(e,r.rings,n,o))?(t.rings=e,t):null}function _(e,t,r,n,o){return(e=l(e,r.paths,n,o))?(t.paths=e,t):null}Object.defineProperty(t,"__esModule",{value:!0});var x=function(e,t,r){return[t,r]},O=function(e,t,r){return[t,r,e[2]]},C=function(e,t,r){return[t,r,e[2],e[3]]};t.toQuantizationTransform=function(e){return e?{originPosition:"upper-left"===e.originPosition?"upperLeft":"lower-left"===e.originPosition?"lowerLeft":e.originPosition,scale:[e.tolerance,e.tolerance],translate:[e.extent.xmin,e.extent.ymax]}:null},t.equals=function(e,t){if(e===t||null==e&&null==t)return!0;if(null==e||null==t)return!1;var r,n,o,i;return e&&"upperLeft"===e.originPosition?(r=e.translate[0],n=e.translate[1],e=e.scale[0]):(r=e.extent.xmin,n=e.extent.ymax,e=e.tolerance),t&&"upperLeft"===t.originPosition?(o=t.translate[0],i=t.translate[1],t=t.scale[0]):(o=t.extent.xmin,i=t.extent.ymax,t=t.tolerance),r===o&&n===i&&e===t},t.quantizeX=n,t.quantizeY=o,t.quantizeBounds=function(e,t,r){return t[0]=n(e,r[0]),t[3]=o(e,r[1]),t[2]=n(e,r[2]),t[1]=o(e,r[3]),t},t.quantizePoints=a,t.quantizeRings=s,t.quantizePaths=l,t.hydrateX=u,t.hydrateY=c,t.hydrateCoordsArray=p,t.hydrateCoordsArrayArray=d,t.hydrateBounds=function(e,t,r){return r?(t[0]=u(e,r[0]),t[1]=c(e,r[3]),t[2]=u(e,r[2]),t[3]=c(e,r[1]),t):[u(e,t[0]),c(e,t[3]),u(e,t[2]),c(e,t[1])]},t.hydratePoints=f,t.hydratePaths=h,t.hydrateRings=y,t.getQuantizedBoundsCoordsArray=m,t.getQuantizedBoundsCoordsArrayArray=g,t.getQuantizedBoundsPoints=function(e){var t=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];return m(t,t,e)},t.getQuantizedBoundsPaths=function(e){return g([0,0,0,0],e)},t.getQuantizedBoundsRings=function(e){return g([0,0,0,0],e)},t.quantizeExtent=v,t.quantizeMultipoint=b,t.quantizePoint=w,t.quantizePolygon=S,t.quantizePolyline=_,t.quantizeGeometry=function(e,t){return e&&t?r.isPoint(t)?w(e,{},t,!1,!1):r.isPolyline(t)?_(e,{},t,!1,!1):r.isPolygon(t)?S(e,{},t,!1,!1):r.isMultipoint(t)?b(e,{},t,!1,!1):r.isExtent(t)?v(e,{},t,!1,!1):null:null},t.hydrateExtent=function(e,t,r,n,o){return t.xmin=u(e,r.xmin),t.ymin=c(e,r.ymin),t.xmax=u(e,r.xmax),t.ymax=c(e,r.ymax),t!==r&&(n&&(t.zmin=r.zmin,t.zmax=r.zmax),o&&(t.mmin=r.mmin,t.mmax=r.mmax)),t},t.hydrateMultipoint=function(e,t,r,n,o){return t.points=f(e,r.points,n,o),t},t.hydratePoint=function(e,t,r,n,o){return t.x=u(e,r.x),t.y=c(e,r.y),t!==r&&(n&&(t.z=r.z),o&&(t.m=r.m)),t},t.hydratePolygon=function(e,t,r,n,o){return t.rings=y(e,r.rings,n,o),t},t.hydratePolyline=function(e,t,r,n,o){return t.paths=h(e,r.paths,n,o),t}})},"esri/layers/graphics/dehydratedFeatureComparison":function(){define(["require","exports","../../core/compilerUtils","../../core/maybe"],function(e,t,r,n){function o(e,t){if(e===t)return!0;if(null==e||null==t||e.length!==t.length)return!1;for(var r=0;r<e.length;r++){var n=e[r],o=t[r];if(n.length!==o.length)return!1;for(var i=0;i<n.length;i++)if(n[i]!==o[i])return!1}return!0}function i(e,t){if(e===t)return!0;if(null==e||null==t||e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(!o(e[r],t[r]))return!1;return!0}function a(e,t){return e===t||e&&t&&e.equals(t)}function s(e,t){if(e===t)return!0;if(n.isNone(e)||n.isNone(t)||e.type!==t.type)return!1;switch(e.type){case"point":return e=!!a(e.spatialReference,t.spatialReference)&&(e.x===t.x&&e.y===t.y&&e.z===t.z&&e.m===t.m);case"extent":return e=e.hasZ===t.hasZ&&e.hasM===t.hasM&&(!!a(e.spatialReference,t.spatialReference)&&(e.xmin===t.xmin&&e.ymin===t.ymin&&e.zmin===t.zmin&&e.xmax===t.xmax&&e.ymax===t.ymax&&e.zmax===t.zmax));case"polyline":return e=e.hasZ===t.hasZ&&e.hasM===t.hasM&&(!!a(e.spatialReference,t.spatialReference)&&i(e.paths,t.paths));case"polygon":return e=e.hasZ===t.hasZ&&e.hasM===t.hasM&&(!!a(e.spatialReference,t.spatialReference)&&i(e.rings,t.rings));case"multipoint":return e=e.hasZ===t.hasZ&&e.hasM===t.hasM&&(!!a(e.spatialReference,t.spatialReference)&&o(e.points,t.points));case"mesh":return!1;default:r.neverReached(e)}}function l(e,t){if(e===t)return!0;if(!e||!t)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var o=r[n];if(e[o]!==t[o])return!1}return!0}Object.defineProperty(t,"__esModule",{value:!0}),t.equals=function(e,t){return e===t||!(null==e||null==t||e.objectId!==t.objectId||!s(e.geometry,t.geometry)||!l(e.attributes,t.attributes))}})},"esri/tasks/operations/pbfOptimizedFeatureSet":function(){define(["require","exports","../../layers/graphics/OptimizedFeature","../../layers/graphics/OptimizedFeatureSet","../../layers/graphics/OptimizedGeometry"],function(e,t,r,n,o){Object.defineProperty(t,"__esModule",{value:!0}),e=function(){function e(){this.geometryTypes=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"]}return e.prototype.createFeatureResult=function(){return new n.default},e.prototype.prepareFeatures=function(){},e.prototype.finishFeatureResult=function(){},e.prototype.addFeature=function(e,t){e.features.push(t)},e.prototype.createFeature=function(){return new r.default},e.prototype.createSpatialReference=function(){return{wkid:0}},e.prototype.createGeometry=function(){return new o.default},e.prototype.addField=function(e,t){e.fields.push(t)},e.prototype.addCoordinate=function(e,t){e.coords.push(t)},e.prototype.addCoordinatePoint=function(e,t){e.coords.push(t)},e.prototype.addLength=function(e,t){e.lengths.push(t)},e.prototype.createPointGeometry=function(){return new o.default},e}(),t.Context=e})},"esri/layers/graphics/OptimizedFeature":function(){define(["require","exports","../../core/tsSupport/extendsHelper"],function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),e=function(){return function(e,t,r,n){void 0===e&&(e=null),void 0===t&&(t={}),this.localId=0,this.geohashIndexed=!1,this.geohashY=this.geohashX=0,this.geometry=e,t&&(this.attributes=t),r&&(this.centroid=r),null!=n&&(this.objectId=n)}}(),t.default=e})},"esri/layers/graphics/OptimizedFeatureSet":function(){define(["require","exports"],function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),e=function(){return function(){this.spatialReference=this.geometryType=this.geometryProperties=this.geohashFieldName=this.globalIdFieldName=this.objectIdFieldName=null,this.hasM=this.hasZ=!1,this.features=[],this.fields=[],this.transform=null,this.exceededTransferLimit=!1}}(),t.default=e})},"esri/layers/graphics/OptimizedGeometry":function(){define(["require","exports"],function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),e=function(){return function(e,t){void 0===e&&(e=[]),void 0===t&&(t=[]),this.lengths=e,this.coords=t}}(),t.default=e})},"esri/tasks/operations/PBFWorker":function(){define("require exports ../../core/tsSupport/extendsHelper ../../Graphic ../../core/promiseUtils ../../core/requireUtils ../../core/workers ../../geometry/SpatialReference ../../layers/support/Field ./pbfQueryUtils module".split(" "),function(e,t,r,n,o,i,a,s,l,u,c){Object.defineProperty(t,"__esModule",{value:!0});var p=function(){function e(){}return e.prototype._parseFeatureQuery=function(e){var t=u.parsePBFFeatureQuery(e.buffer,e.options);if(e.options&&"dehydrated"===e.options.type&&(t.spatialReference=t.spatialReference.toJSON(),t.fields))for(e=0;e<t.fields.length;e++)t.fields[e]=t.fields[e].toJSON();return o.resolve(t)},e}(),d=function(t){function p(){var r=t.call(this)||this;return r._thread=void 0,a.open(i.getAbsMid("./PBFWorker",e,c),{strategy:"dedicated"}).then(function(e){void 0===r._thread?r._thread=e:e.close()}),r}return r(p,t),p.prototype.destroy=function(){this._thread&&this._thread.close(),this._thread=null},p.prototype.parseFeatureQuery=function(e,t){return e&&0!==e.byteLength?this._thread?this._thread.invoke("_parseFeatureQuery",{buffer:e,options:t},{transferList:[e]}).then(function(e){if(t&&"dehydrated"===t.type){if(e.spatialReference=s.fromJSON(e.spatialReference),e.fields)for(var r=0;r<e.fields.length;r++)e.fields[r]=l.fromJSON(e.fields[r]);for(var r=e.spatialReference,o=0,i=e.features;o<i.length;o++){var a=i[o];a.uid=n.generateUID(),a.geometry&&(a.geometry.spatialReference=r)}}return e}):o.resolve(u.parsePBFFeatureQuery(e,t)):o.resolve(null)},p}(p);t.PBFWorker=d,t.default=function(){return new p}})},"esri/tasks/operations/urlUtils":function(){define(["require","exports"],function(e,t){function r(e){var t,n={};for(t in e)if("declaredClass"!==t){var o=e[t];if(null!=o&&"function"!=typeof o)if(Array.isArray(o)){n[t]=[];for(var i=0;i<o.length;i++)n[t][i]=r(o[i])}else"object"==typeof o?o.toJSON&&(n[t]=JSON.stringify(o)):n[t]=o}return n}Object.defineProperty(t,"__esModule",{value:!0}),t.mapParameters=r})},"esri/tasks/operations/queryAttachments":function(){define("require exports ../../core/tsSupport/assignHelper ../../request ../../core/urlUtils ../../layers/support/AttachmentInfo ./urlUtils".split(" "),function(e,t,r,n,o,i,a){function s(e){return e=e.toJSON(),e.attachmentTypes&&(e.attachmentTypes=e.attachmentTypes.join(",")),e.keywords&&(e.keywords=e.keywords.join(",")),e.globalIds&&(e.globalIds=e.globalIds.join(",")),e.objectIds&&(e.objectIds=e.objectIds.join(",")),e.size&&(e.size=e.size.join(",")),e}Object.defineProperty(t,"__esModule",{value:!0}),t.processAttachmentQueryResult=function(e,t){for(var r={},n=0;n<e.length;n++)for(var a=e[n],s=a.parentObjectId,l=a.parentGlobalId,u=0,a=a.attachmentInfos;u<a.length;u++){var c=a[u],p=o.addProxy(o.addTokenParameter(t+"/"+s+"/attachments/"+c.id)),c=i.fromJSON(c);c.set({url:p,parentObjectId:s,parentGlobalId:l}),r[s]?r[s].push(c):r[s]=[c]}return r},t.executeAttachmentQuery=function(e,t,o){return t={query:a.mapParameters(r({},e.query,{f:"json"},s(t)))},o&&(t=r({},o,t)),n(e.path+"/queryAttachments",t)}})},"esri/tasks/operations/queryRelatedRecords":function(){define(["require","exports","../../core/tsSupport/assignHelper","../../request","./urlUtils"],function(e,t,r,n,o){function i(e){return e=e.toJSON(),e.objectIds&&(e.objectIds=e.objectIds.join(",")),e.outFields&&(e.outFields=e.outFields.join(",")),e.outSpatialReference&&(e.outSR=e.outSR.wkid||JSON.stringify(e.outSR.toJSON()),delete e.outSpatialReference),e.source&&(e.layer=JSON.stringify({source:e.source}),delete e.source),e}Object.defineProperty(t,"__esModule",{value:!0}),t.toQueryStringParameters=i,t.executeRelationshipQuery=function(e,t,a){return t={query:o.mapParameters(r({},e.query,{f:"json"},i(t)))},a&&(t=r({},a,t)),n(e.path+"/queryRelatedRecords",t).then(function(e){for(var t=e.data,r=t.geometryType,n=t.spatialReference,o={},i=0,t=t.relatedRecordGroups;i<t.length;i++){var a=t[i],s={fields:void 0,objectIdFieldName:void 0,geometryType:r,spatialReference:n,features:a.relatedRecords};if(null!=a.objectId)o[a.objectId]=s;else for(var l in a)a.hasOwnProperty(l)&&"relatedRecords"!==l&&(o[a[l]]=s)}return e.data=o,e})}})},"esri/views/View":function(){define("require exports ../core/tsSupport/decorateHelper ../core/tsSupport/declareExtendsHelper ../core/tsSupport/assignHelper ../Map ../TimeExtent ../core/Accessor ../core/Collection ../core/CollectionFlattener ../core/Error ../core/Evented ../core/HandleOwner ../core/Loadable ../core/Logger ../core/maybe ../core/Promise ../core/promiseUtils ../core/scheduling ../core/watchUtils ../core/accessorSupport/decorators ../geometry/Extent ../geometry/HeightModelInfo ../geometry/SpatialReference ../geometry/support/spatialReferenceUtils ../support/GraphicsCollection ./BasemapView ./LayerViewManager ./RefreshManager ./ToolViewManager ./input/Input ./input/ViewEvents ./navigation/Navigation ./support/DefaultsFromMap".split(" "),function(e,t,r,n,o,i,a,s,l,u,c,p,d,f,h,y,m,g,v,b,w,S,_,x,O,C,M,T,P,I,E,j,k,A){var L=h.getLogger("esri.views.View");return function(e){function t(t){var r=e.call(this,t)||this;return r._userSpatialReference=null,r._cursor=null,r.allLayerViews=new u({root:r,rootCollectionNames:["basemapView.baseLayerViews","groundView?.layerViews","layerViews","basemapView.referenceLayerViews"],getChildrenFunction:function(e){return e.layerViews}}),r.animation=null,r.basemapView=null,r.defaultsFromMap=new A({view:r}),r.fatalError=null,r.extent=null,r.graphics=new C.default,r.interacting=!1,r.layerViews=new l,r.padding={left:0,top:0,right:0,bottom:0},r.ready=!1,r.spatialReferenceWarningDelay=1e3,r.timeExtent=null,r.type=null,r.scale=null,r.updating=!1,r.initialExtentRequired=!0,r.renderContext=null,r.input=new E,r.navigation=new k,r.layerViewManager=null,r.refreshManager=null,r.isHeightModelInfoRequired=!1,r.width=null,r.height=null,r.resizing=!1,r.suspended=!1,r.viewEvents=new j.ViewEvents(r),r._isValid=!1,r._readyCycleForced=!1,r.handles.add(r.watch("preconditionsReady",function(e){e?(r._currentSpatialReference=r.spatialReference,o.views.add(r)):(r._currentSpatialReference=null,o.views.remove(r)),r.notifyChange("spatialReference"),!e&&r.ready?(r.layerViewManager.clear(),r.toolViewManager.detach(),r._teardown()):e&&!r.ready&&(r._startup(),r.toolViewManager.attach())},!0)),r}n(t,e),o=t,t.prototype.initialize=function(){var e=this;this.addResolvingPromise(this.validate().then(function(){return e._isValid=!0,b.whenOnce(e,"ready")})),this.basemapView=new M.BasemapView({view:this}),this.layerViewManager=new T.default({view:this,layerViewImporter:{importLayerView:function(t){return e.importLayerView(t)},hasLayerViewModule:function(t){return e.hasLayerViewModule(t)}}}),this.refreshManager=new P({view:this}),this.toolViewManager=new I({view:this}),this._resetInitialViewPropertiesFromContent();var t;b.init(this.defaultsFromMap,"isSpatialReferenceDone",function(r){var n=!!(e.map&&0<e.map.allLayers.length);if(r&&!e.spatialReference&&n||!t){if(r&&!e.spatialReference&&n&&!t){var o=t=g.after(e.spatialReferenceWarningDelay);t.then(function(){o===t&&L.warn("#spatialReference","no spatial reference could be derived from the currently added map layers")}).catch(function(){})}}else t=null},!0)},t.prototype.destroy=function(){this.destroyed||(this.viewEvents.destroy(),this.allLayerViews.destroy(),this.navigation&&(this.navigation.destroy(),this._set("navigation",null)),this.map=null,this.graphics.destroy(),this.graphics=null,this.handles.remove("defaultsFromMap"),this.defaultsFromMap.destroy(),this._set("defaultsFromMap",null),this.toolViewManager.destroy(),this.toolViewManager=null,this.refreshManager.destroy(),this.refreshManager=null,this.layerViewManager.destroy(),this.layerViewManager=null,this.basemapView.destroy(),this.basemapView=null,this.invalidate(),this._emitter.clear(),this.handles.removeAll())},t.prototype._startup=function(){this._set("ready",!0)},t.prototype._teardown=function(){this._set("ready",!1)},t.prototype.whenReady=function(){return g.resolve()},t.prototype.toMap=function(e){return L.error("#toMap()","Not implemented on this instance of View"),null},Object.defineProperty(t.prototype,"heightModelInfo",{get:function(){return this.getDefaultHeightModelInfo()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"preconditionsReady",{get:function(){return!!(!this.fatalError&&this._isValid&&!this._readyCycleForced&&this.map&&(!f.isLoadable(this.map)||this.map.loaded)&&0!==this.width&&0!==this.height&&this.spatialReference&&this.isSpatialReferenceSupported(this.spatialReference)&&(this._currentSpatialReference||!this.initialExtentRequired||this.initialExtent||this.defaultsFromMap&&this.defaultsFromMap.isSpatialReferenceDone)&&this.defaultsFromMap&&this.defaultsFromMap.isTileInfoDone)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"map",{set:function(e){e!==this._get("map")&&(f.isLoadable(e)&&e.load(),this.initialized&&(this.forceReadyCycle(),this._resetInitialViewPropertiesFromContent()),this._set("map",e))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"spatialReference",{get:function(){var e=this._userSpatialReference||this._currentSpatialReference||this.getDefaultSpatialReference()||null;return e&&this.isHeightModelInfoRequired&&this.defaultsFromMap&&(e=e.clone(),e.vcsWkid=this.defaultsFromMap.vcsWkid,e.latestVcsWkid=this.defaultsFromMap.latestVcsWkid),e},set:function(e){this._userSpatialReference=e,this._set("spatialReference",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"stationary",{get:function(){return!this.animation&&!this.interacting&&!this.resizing},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"initialExtent",{get:function(){return this.defaultsFromMap&&this.defaultsFromMap.extent},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{get:function(){var e=this.toolViewManager?this.toolViewManager.cursor:null;return y.isSome(e)?e:this._cursor||"default"},set:function(e){this._cursor=e,this.notifyChange("cursor")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return[this.width,this.height]},enumerable:!0,configurable:!0}),t.prototype.whenLayerView=function(e){return this.layerViewManager.whenLayerView(e)},t.prototype.getDefaultSpatialReference=function(){return this.get("defaultsFromMap.spatialReference")},t.prototype.getDefaultHeightModelInfo=function(){return this.get("map.supportsHeightModelInfo")&&this.get("map.heightModelInfo")||this.get("defaultsFromMap.heightModelInfo")||null},t.prototype.importLayerView=function(e){throw new c("importLayerView() not implemented")},t.prototype.hasLayerViewModule=function(e){return!1},t.prototype.validate=function(){return g.resolve()},t.prototype.invalidate=function(){this._isValid=!1},t.prototype.isSpatialReferenceSupported=function(e,t,r){return!0},t.prototype.isTileInfoRequired=function(){return!1},t.prototype.when=function(e,t){return this.isResolved()&&!this.ready&&L.warn("#when()",'Calling view.when() while the view is no longer ready but was already resolved once will resolve immediately. Use watchUtils.whenOnce(view, "ready").then(...) instead.'),this.inherited(arguments,[e,t])},t.prototype.forceReadyCycle=function(){var e=this;this.ready&&(this._readyCycleForced=!0,b.whenFalseOnce(this,"preconditionsReady",function(){return e._readyCycleForced=!1}))},t.prototype.createTool=function(e,t,r){return this.toolViewManager.createTool(e,t,r)},t.prototype.tryFatalErrorRecovery=function(){this.fatalError=null},t.prototype._resetInitialViewPropertiesFromContent=function(){var e=this;if(this.defaultsFromMap){var t=function(){return e.defaultsFromMap&&e.defaultsFromMap.start()};this.defaultsFromMap.reset(),this._currentSpatialReference=null,this.notifyChange("spatialReference"),this.handles.remove("defaultsFromMap"),this.handles.add([b.watch(this,"spatialReference",function(e,r){O.equals(e,r)||t()}),b.watch(this,"initialExtentRequired",t),v.schedule(t)],"defaultsFromMap")}};var o;return t.views=new l,r([w.aliasOf("toolViewManager.activeTool")],t.prototype,"activeTool",void 0),r([w.property({readOnly:!0})],t.prototype,"allLayerViews",void 0),r([w.property()],t.prototype,"animation",void 0),r([w.property()],t.prototype,"basemapView",void 0),r([w.property()],t.prototype,"defaultsFromMap",void 0),r([w.property()],t.prototype,"fatalError",void 0),r([w.property({type:S})],t.prototype,"extent",void 0),r([w.property(C.graphicsCollectionProperty)],t.prototype,"graphics",void 0),r([w.property({readOnly:!0,type:_,dependsOn:["map.heightModelInfo?","defaultsFromMap.heightModelInfo"]})],t.prototype,"heightModelInfo",null),r([w.property()],t.prototype,"interacting",void 0),r([w.property({readOnly:!0,dependsOn:"fatalError _isValid _readyCycleForced map map.loaded? width height spatialReference _currentSpatialReference initialExtentRequired initialExtent defaultsFromMap.isSpatialReferenceDone defaultsFromMap.isTileInfoDone".split(" ")})],t.prototype,"preconditionsReady",null),r([w.property({type:l,readOnly:!0})],t.prototype,"layerViews",void 0),r([w.property({value:null,type:i})],t.prototype,"map",null),r([w.property()],t.prototype,"padding",void 0),r([w.property({readOnly:!0})],t.prototype,"ready",void 0),r([w.property({type:x,dependsOn:["defaultsFromMap.spatialReference","defaultsFromMap.vcsWkid","defaultsFromMap.latestVcsWkid"]})],t.prototype,"spatialReference",null),r([w.property()],t.prototype,"spatialReferenceWarningDelay",void 0),r([w.property({dependsOn:["animation","interacting","resizing"]})],t.prototype,"stationary",null),r([w.property({type:a})],t.prototype,"timeExtent",void 0),r([w.aliasOf("toolViewManager.tools")],t.prototype,"tools",void 0),r([w.property()],t.prototype,"toolViewManager",void 0),r([w.property({readOnly:!0})],t.prototype,"type",void 0),r([w.property({type:Number})],t.prototype,"scale",void 0),r([w.property({readOnly:!0})],t.prototype,"updating",void 0),r([w.property({readOnly:!0})],t.prototype,"initialExtentRequired",void 0),r([w.property({readOnly:!0,type:S,dependsOn:["defaultsFromMap.extent"]})],t.prototype,"initialExtent",null),r([w.property({dependsOn:["toolViewManager.cursor"]})],t.prototype,"cursor",null),r([w.property()],t.prototype,"renderContext",void 0),r([w.property({readOnly:!0})],t.prototype,"input",void 0),r([w.property({type:k,nonNullable:!0})],t.prototype,"navigation",void 0),r([w.property()],t.prototype,"layerViewManager",void 0),r([w.property()],t.prototype,"width",void 0),r([w.property()],t.prototype,"height",void 0),r([w.property({readOnly:!0})],t.prototype,"resizing",void 0),r([w.property({value:null,dependsOn:["width","height"],readOnly:!0})],t.prototype,"size",null),r([w.property({readOnly:!0})],t.prototype,"suspended",void 0),r([w.property({readOnly:!0})],t.prototype,"viewEvents",void 0),r([w.property()],t.prototype,"_isValid",void 0),r([w.property()],t.prototype,"_readyCycleForced",void 0),r([w.property()],t.prototype,"_currentSpatialReference",void 0),t=o=r([w.subclass("esri.views.View")],t)}(w.declared(d.HandleOwnerMixin(p.EventedMixin(m.EsriPromiseMixin(s)))))})},"esri/core/HandleOwner":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ./Accessor ./Handles ./accessorSupport/decorators ../views/support/WatchUpdatingTracking".split(" "),function(e,t,r,n,o,i,a,s){Object.defineProperty(t,"__esModule",{value:!0}),t.HandleOwnerMixin=function(e){return function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.destroy=function(){this.destroyed||(this.handles.destroy(),this.updatingHandles.destroy())},Object.defineProperty(t.prototype,"handles",{get:function(){return this._get("handles")||new i},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"updatingHandles",{get:function(){return this._get("updatingHandles")||new s.WatchUpdatingTracking},enumerable:!0,configurable:!0}),n([a.property({readOnly:!0})],t.prototype,"handles",null),n([a.property({readOnly:!0})],t.prototype,"updatingHandles",null),t=n([a.subclass("esri.core.HandleOwner")],t)}(a.declared(e))},e=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t=n([a.subclass("esri.core.HandleOwner")],t)}(a.declared(t.HandleOwnerMixin(o))),t.HandleOwner=e})},"esri/views/support/WatchUpdatingTracking":function(){define("require exports ../../core/tsSupport/decorateHelper ../../core/tsSupport/declareExtendsHelper ../../core/Accessor ../../core/Handles ../../core/scheduling ../../core/watchUtils ../../core/accessorSupport/decorators ../../core/accessorSupport/wire".split(" "),function(e,t,r,n,o,i,a,s,l,u){Object.defineProperty(t,"__esModule",{value:!0}),e=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.updating=!1,t.handleId=0,t.handles=new i,t.scheduleHandleId=0,t.pendingPromises=new Set,t}return n(t,e),t.prototype.destroy=function(){this.removeAll(),this.handles.destroy()},t.prototype.add=function(e,t,r,n){var o=this;void 0===n&&(n=0);var i=0!=(1&n),a=++this.handleId;return i||this.installSyncUpdatingWatch(e,t,a),e=0!=(2&n)?s.init(e,t,r,i):e.watch(t,r,i),this.handles.add(e,a),{remove:function(){o.handles.remove(a)}}},t.prototype.addOnCollectionPropertyChange=function(e,t,r,n){var o=this;void 0===n&&(n=0),n=0!=(2&n);var i=++this.handleId;return this.handles.add([s.on(e,t,"after-changes",this.createSyncUpdatingCallback()),s.on(e,t,"change",r,n?function(e){r({added:e.items,removed:[],moved:[],target:e})}:null)],i),{remove:function(){o.handles.remove(i)}}},t.prototype.addOnCollectionChange=function(e,t,r){var n=this;void 0===r&&(r=0),r=0!=(2&r);var o=++this.handleId;return this.handles.add([e.on("after-changes",this.createSyncUpdatingCallback()),e.on("change",t)],o),r&&t({added:e.items,removed:[],moved:[],target:e}),{remove:function(){n.handles.remove(o)}}},t.prototype.addPromise=function(e){var t=this;if(!e)return e;var r=++this.handleId;this.handles.add({remove:function(){t.pendingPromises.delete(e)&&(0!==t.pendingPromises.size||t.handles.has(c)||t._set("updating",!1))}},r),this.pendingPromises.add(e),this._set("updating",!0);var n=function(){return t.handles.remove(r)};return e.then(n,n),e},t.prototype.removeAll=function(){this.pendingPromises.clear(),this.handles.removeAll(),this._set("updating",!1)},t.prototype.installSyncUpdatingWatch=function(e,t,r){return e=u.default(e,t,this.createSyncUpdatingCallback()),this.handles.add(e,r),e},t.prototype.createSyncUpdatingCallback=function(){var e=this;return function(){e.handles.remove(c),++e.scheduleHandleId;var t=e.scheduleHandleId;e._get("updating")||e._set("updating",!0),e.handles.add(a.schedule(function(){t===e.scheduleHandleId&&(e._set("updating",0<e.pendingPromises.size),e.handles.remove(c))}),c)}},r([l.property({readOnly:!0})],t.prototype,"updating",void 0),t=r([l.subclass("esri.views.support.WatchUpdatingTracking")],t)}(l.declared(o)),t.WatchUpdatingTracking=e;var c=-42})},"esri/support/GraphicsCollection":function(){define("require exports ../core/tsSupport/decorateHelper ../core/tsSupport/declareExtendsHelper ../Graphic ../core/Collection ../core/collectionUtils ../core/accessorSupport/decorators ../core/accessorSupport/ensureType".split(" "),function(e,t,r,n,o,i,a,s,l){Object.defineProperty(t,"__esModule",{value:!0});var u=function(e){function t(t){var r=e.call(this,t)||this;return r.on("before-add",function(e){e.item||e.preventDefault()}),r.on("after-add",function(e){return r._own(e.item)}),r.on("after-remove",function(e){e.item.layer=null}),r}n(t,e),o=t,t.prototype.destroy=function(){this._unownAll()},Object.defineProperty(t.prototype,"owner",{get:function(){return this._get("owner")},set:function(e){e!==this._get("owner")&&(this._unownAll(),this._set("owner",e),this._ownAll())},enumerable:!0,configurable:!0}),t.prototype._createNewInstance=function(e){return new o(e)},t.prototype._ownAll=function(){var e=this;this.items.forEach(function(t){return e._own(t)})},t.prototype._own=function(e){e.layer&&"group"!==e.layer.type&&"remove"in e.layer&&e.layer!==this.owner&&e.layer.remove(e),e.layer=this.owner},t.prototype._unownAll=function(){var e=this;this.items.forEach(function(t){return e._unown(t)})},t.prototype._unown=function(e){e.layer===this.owner&&(e.layer=null)};var o;return r([s.property()],t.prototype,"owner",null),t=o=r([s.subclass("esri.support.GraphicsCollection")],t)}(s.declared(i.ofType(o)));t.GraphicsCollection=u,t.castGraphicsCollection=function(e){return(e=l.default(u,e))&&(e.owner=this),e},t.graphicsCollectionProperty={type:u,cast:a.castForReferenceSetter,set:function(e){e=a.referenceSetter(e,this._get("graphics"),u),e.owner=this,this._set("graphics",e)}},t.default=u})},"esri/views/BasemapView":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Accessor ../core/Collection ../core/watchUtils ../core/accessorSupport/decorators".split(" "),function(e,t,r,n,o,i,a,s){Object.defineProperty(t,"__esModule",{value:!0}),e=function(e){function t(t){return t=e.call(this,t)||this,t.view=null,t.baseLayerViews=new i,t.referenceLayerViews=new i,t._loadingHandle=a.init(t,"view.map.basemap",function(e){e&&e.load()}),t}return r(t,e),t.prototype.destroy=function(){this._set("view",null),this._loadingHandle&&(this._loadingHandle.remove(),this._loadingHandle=null)},Object.defineProperty(t.prototype,"suspended",{get:function(){return!this.view||this.view.suspended},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"updating",{get:function(){return(!this.view||!this.view.suspended)&&!(!(this.view&&this.view.map&&this.view.map.basemap)||this.view.map.basemap.loaded)},enumerable:!0,configurable:!0}),n([s.property({constructOnly:!0})],t.prototype,"view",void 0),n([s.property({readOnly:!0})],t.prototype,"baseLayerViews",void 0),n([s.property({readOnly:!0})],t.prototype,"referenceLayerViews",void 0),n([s.property({readOnly:!0,dependsOn:["view.suspended"]})],t.prototype,"suspended",null),n([s.property({type:Boolean,readOnly:!0,dependsOn:["view.suspended","view.map.basemap.loaded"]})],t.prototype,"updating",null),t=n([s.subclass("esri.views.BasemapView")],t)}(s.declared(o)),t.BasemapView=e})},"esri/views/LayerViewManager":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/generatorHelper ../core/tsSupport/awaiterHelper ../core/Error ../core/HandleOwner ../core/Logger ../core/promiseUtils ../core/scheduling ../core/watchUtils ../core/accessorSupport/decorators ./support/WatchUpdatingTracking".split(" "),function(e,t,r,n,o,i,a,s,l,u,c,p,d,f){Object.defineProperty(t,"__esModule",{value:!0});var h=l.getLogger("esri.views.LayerViewManager"),y=new Map;y.set("view.map.basemap.baseLayers","view.basemapView.baseLayerViews"),y.set("view.map.ground.layers","view.groundView.layerViews"),y.set("view.map.layers","view.layerViews"),y.set("view.map.basemap.referenceLayers","view.basemapView.referenceLayerViews");var m=function(){function e(e,t,r){var n=this;this.layer=e,this.view=t,this.layerViewImporter=r,this._controller=u.createAbortController(),this._deferred=u.createDeferred(),this.done=this._started=!1,u.onAbort(this._controller.signal,function(){var t=new a("cancelled:layerview-create","layerview creation cancelled",{layer:e});n._deferred.reject(t)})}return Object.defineProperty(e.prototype,"promise",{get:function(){return this._deferred.promise},enumerable:!0,configurable:!0}),e.prototype.destroy=function(){this._controller.abort();var e=this.layerView;if(e){var t=this.layer,r=this.view;e.destroy(),t.emit("layerview-destroy",{view:r,layerView:e}),r.emit("layerview-destroy",{layer:t,layerView:e}),this.done=!0,this.layerViewImporter=this.view=this.layerView=this.layer=null,e.layer=null,e.parent=null,e.view=null}},e.prototype.start=function(){return i(this,void 0,void 0,function(){var e,t,r,n,i,s,l,c;return o(this,function(o){switch(o.label){case 0:if(this._started)return[2];this._started=!0,e=this,t=e._controller.signal,r=e.layer,n=e.view,this._map=n.map,o.label=1;case 1:return o.trys.push([1,10,,11]),[4,r.load({signal:t})];case 2:return o.sent(),"prefetchResources"in r?[4,r.prefetchResources({signal:t})]:[3,4];case 3:o.sent(),o.label=4;case 4:return i=void 0,r.createLayerView?[4,r.createLayerView(n,{signal:t})]:[3,6];case 5:return i=o.sent(),[3,8];case 6:if(!this.layerViewImporter.hasLayerViewModule(r))throw new a("layer:view-not-supported","No layerview implementation was found");return[4,this.layerViewImporter.importLayerView(r)];case 7:s=o.sent(),u.throwIfAborted(t),i="default"in s?new s.default({layer:r,view:n}):new s({layer:r,view:n}),o.label=8;case 8:return u.throwIfAborted(t),[4,i.when()];case 9:return o.sent(),!(l=this._map&&this._map.allLayers.includes(r))||t.aborted?(i.destroy(),i.layer=i.parent=i.view=null,this.done=!0,l?[2]:[2,this._deferred.reject(new a("view:no-layerview-for-layer","The layer has been removed from the map",{layer:r}))]):(this.layerView=i,r.emit("layerview-create",{view:n,layerView:i}),n.emit("layerview-create",{layer:r,layerView:i}),this.done=!0,this._deferred.resolve(i),[3,11]);case 10:return c=o.sent(),r.emit("layerview-create-error",{view:n,error:c}),n.emit("layerview-create-error",{layer:r,error:c}),this.done=!0,this._deferred.reject(new a("layerview:create-error","layerview creation failed",{layer:r,error:c})),[3,11];case 11:return[2]}})})},e}();e=function(e){function t(t){var r=e.call(this,t)||this;return r._layerLayerViewInfoMap=new Map,r._watchUpdatingTracking=new f.WatchUpdatingTracking,r.view=null,r._preloadLayerViewModules=function(){var e=r.view,t=r.get("view.map.allLayers");e&&t&&t.forEach(function(e){r.layerViewImporter.hasLayerViewModule(e)&&r.layerViewImporter.importLayerView(e)})},r._reschedule=function(){r.handles.remove("reschedule"),r.handles.add(c.schedule(r._doWork),"reschedule"),r.notifyChange("updating")},r._doWork=function(){var e=r.get("view.map");if(r._map!==e&&(r.clear(),r._map=e),r.handles.has("reschedule")){r.handles.remove("reschedule"),r.handles.remove("collection-change");var t=e&&e.allLayers;if(t){t.forEach(r._createLayerView,r),r._refreshCollections();var n=[];for(r._layerLayerViewInfoMap.forEach(function(e,r){t.includes(r)||n.push(e)}),e=0;e<n.length;e++){var o=n[e];r._layerLayerViewInfoMap.delete(o.layer),o.destroy()}r.handles.add(r._watchUpdatingTracking.addOnCollectionChange(t,r._reschedule),"collection-change"),r.notifyChange("updating")}}},r.handles.add([p.on(r,"view.map.allLayers","change",r._preloadLayerViewModules,r._preloadLayerViewModules),r.watch(["view.map.basemap","view.map.ground","view.map.layers","view.ready"],r._reschedule,!0)]),r}return r(t,e),t.prototype.initialize=function(){this._preloadLayerViewModules()},t.prototype.destroy=function(){this.clear(),this._watchUpdatingTracking.destroy(),this._map=this.view=null},Object.defineProperty(t.prototype,"updating",{get:function(){if(this.handles.has("reschedule")||this._watchUpdatingTracking.updating)return!0;var e=!0;return this._layerLayerViewInfoMap.forEach(function(t){return e=e&&t.done}),!e},enumerable:!0,configurable:!0}),t.prototype.clear=function(){this.destroyed||(this._layerLayerViewInfoMap.forEach(function(e){return e.destroy()}),this._layerLayerViewInfoMap.clear(),this._refreshCollections())},t.prototype.whenLayerView=function(e){return this._reschedule(),this._doWork(),this._layerLayerViewInfoMap.has(e)?this._layerLayerViewInfoMap.get(e).promise:u.reject(new a("view:no-layerview-for-layer","No layerview has been found for the layer",{layer:e}))},t.prototype._refreshCollections=function(){var e=this;y.forEach(function(t,r){e._populateLayerViewsOwners(e.get(r),e.get(t),e.view)})},t.prototype._populateLayerViewsOwners=function(e,t,r){var n=this;if(e&&t){var o=0;e.forEach(function(e){var i=n._layerLayerViewInfoMap.get(e);i&&i.layerView&&(i=i.layerView,i.layer=e,i.parent=r,t.getItemAt(o)!==i&&t.splice(o,0,i),e.layers&&n._populateLayerViewsOwners(e.layers,i.layerViews,i),o+=1)}),o<t.length&&t.splice(o,t.length)}else t&&t.removeAll()},t.prototype._createLayerView=function(e){var t=this;if(this._layerLayerViewInfoMap.has(e))this.view.ready&&this._layerLayerViewInfoMap.get(e).start();else{e.load(),this.layerViewImporter.hasLayerViewModule(e)&&this.layerViewImporter.importLayerView(e);var r=new m(e,this.view,this.layerViewImporter);r.promise.then(function(){t._refreshCollections(),t.notifyChange("updating")},function(r){r&&(u.isAbortError(r)||"cancelled:layerview-create"===r.name)||h.error("Failed to create view for layer '"+e.title+", id:"+e.id+"' of type '"+e.type+"'.",{error:r}),t._refreshCollections(),t.notifyChange("updating")}),this._layerLayerViewInfoMap.set(e,r),this.view.ready&&r.start()}this.notifyChange("updating")},n([d.property({readOnly:!0})],t.prototype,"_watchUpdatingTracking",void 0),n([d.property()],t.prototype,"layerViewImporter",void 0),n([d.property({readOnly:!0,dependsOn:["_watchUpdatingTracking.updating"]})],t.prototype,"updating",null),n([d.property()],t.prototype,"view",void 0),t=n([d.subclass("esri.views.LayerViewManager")],t)}(d.declared(s.HandleOwner)),t.default=e})},"esri/views/RefreshManager":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Accessor ../core/Handles ../core/accessorSupport/decorators ./layers/RefreshableLayerView".split(" "),function(e,t,r,n,o,i,a,s){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._handles=new i,t._currentTick=0,t}return r(t,e),t.prototype.initialize=function(){var e=this;this._handles.add([this.view.allLayerViews.on("after-changes",function(){e.notifyChange("tickInterval"),e._handles.remove("layerViewsUpdating"),e._handles.add(e._getLayerViewHandles(),"layerViewsUpdating")}),this.watch("tickInterval",function(){return e._restartTicking()}),this.watch("view.ready",function(){return e._restartTicking()})]),this._restartTicking()},t.prototype.destroy=function(){this._handles&&(this._handles.destroy(),this._handles=null,this._intervalID&&clearInterval(this._intervalID),this._currentTick=0)},Object.defineProperty(t.prototype,"tickInterval",{get:function(){var e=this.view.allLayerViews.filter(function(e){return s.isRefreshableLayerView(e)});return this._getCommonInterval(e)},enumerable:!0,configurable:!0}),t.prototype._restartTicking=function(){var e=this;this._currentTick=0,this._intervalID&&clearInterval(this._intervalID),this.get("view.ready")&&this.tickInterval&&(this._intervalID=setInterval(function(){var t=Date.now();e._currentTick+=e.tickInterval,e.view.allLayerViews.forEach(function(r){if(s.isRefreshableLayerView(r)){var n=Math.round(6e4*r.refreshInterval),o=0==e._currentTick%n,i=6e3>t-r.refreshTimestamp;n&&o&&!i&&r.refresh(t)}})},this.tickInterval))},t.prototype._getLayerViewHandles=function(){var e=this,t=[],r=function(){return e.notifyChange("tickInterval")};return this.view.allLayerViews.forEach(function(e){s.isRefreshableLayerView(e)&&e.layer&&t.push(e.watch("refreshInterval",r),e.layer.on("refresh",function(){e.refresh(Date.now())}))}),t},t.prototype._getCommonInterval=function(e){var t=function(e,r){return isNaN(e)||isNaN(r)?0:0>=r?e:t(r,e%r)};return e.toArray().reduce(function(e,r){return t(Math.round(6e4*r.refreshInterval),e)},0)},n([a.property()],t.prototype,"view",void 0),n([a.property({readOnly:!0})],t.prototype,"tickInterval",null),t=n([a.subclass("esri.views.RefreshManager")],t)}(a.declared(o))})},"esri/views/layers/RefreshableLayerView":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/tsSupport/generatorHelper ../../core/tsSupport/awaiterHelper ../../core/promiseUtils ../../core/accessorSupport/decorators".split(" "),function(e,t,r,n,o,i,a,s){Object.defineProperty(t,"__esModule",{value:!0}),t.RefreshableLayerView=function(e){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.refreshTimestamp=null,t.refreshDebounced=a.debounce(function(e,r){return i(t,void 0,void 0,function(){var t;return o(this,function(n){switch(n.label){case 0:return"number"==typeof e?t=e:(t=Date.now(),r=e),this._set("refreshTimestamp",t),this.doRefresh?[4,this.doRefresh(r)]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}})})},2e3),t}return r(t,e),t.prototype.refresh=function(e){void 0===e&&(e=Date.now()),this._set("refreshTimestamp",e),this.doRefresh&&this.doRefresh()},n([s.property()],t.prototype,"layer",void 0),n([s.aliasOf("layer.refreshInterval")],t.prototype,"refreshInterval",void 0),n([s.property({readOnly:!0})],t.prototype,"refreshTimestamp",void 0),t=n([s.subclass("esri.layers.mixins.RefreshableLayerView")],t)}(s.declared(e))},t.isRefreshableLayerView=function(e){return"refresh"in e}})},"esri/views/ToolViewManager":function(){define("require exports ../core/tsSupport/decorateHelper ../core/tsSupport/declareExtendsHelper ../core/tsSupport/generatorHelper ../core/tsSupport/awaiterHelper ../core/tsSupport/assignHelper ../core/Accessor ../core/Collection ../core/Handles ../core/Logger ../core/maybe ../core/promiseUtils ../core/watchUtils ../core/accessorSupport/decorators ./input/InputManager ./input/ViewEvents ./interactive/interactiveToolUtils ./interactive/ToolViewManagerManipulatorState".split(" "),function(e,t,r,n,o,i,a,s,l,u,c,p,d,f,h,y,m,g,v){var b=c.getLogger("esri.views.ToolViewManager");return function(e){function t(t){var r=e.call(this,t)||this;return r._handles=new u,r._creatingTool=null,r._manipulatorState=new v.default,r.tools=g.newToolCollection(),r.cursor=null,r._forEachTool=function(e){if(!p.isSome(r._creatingTool)||!e(r._creatingTool))for(var t=0,n=r.tools.items;t<n.length&&!e(n[t]);t++);},r}return n(t,e),t.prototype.initialize=function(){var e=this;this._handles.add([this.view.on(m.eventTypes,function(t){e._handleInputEvent(t)},y.ViewEventPriorities.TOOL),this.tools.on("before-add",function(t){var r=t.item;null==r||e.tools.includes(r)?t.preventDefault():null==r.created||r.created||(b.error("tools","Tool can not be added to view before it has been created"),t.preventDefault())}),this.tools.on("before-remove",function(t){e._manipulatorState.clearPointers(t.item,e._forEachTool)}),this.tools.on("change",function(){e._refreshToolWatchers()})])},t.prototype.destroy=function(){this._forEachTool(function(e){return e.destroy()}),this._handles.destroy(),this._handles=null},Object.defineProperty(t.prototype,"activeTool",{set:function(e){var t=this;p.isSome(e)&&!this.view.ready?b.error("#activeTool=","cannot set active tool while view is not ready"):(g.swap(this,e,function(r){t._set("activeTool",r),t._removeIncompleteTools(e),t._forEachTool(function(e){var r=p.isNone(t.activeTool)||e===t.activeTool;e.setEditableFlag&&e.setEditableFlag(1,r),r=g.areToolManipulatorsEditable(e),!p.isNone(t.activeTool)&&r||t._manipulatorState.clearPointers(e,t._forEachTool,!r)}),t._updateCursor()}),this._creatingTool!==e&&this._rejectCreatingTool())},enumerable:!0,configurable:!0}),t.prototype.createTool=function(e,t,r){return i(this,void 0,void 0,function(){var n,i,l,u=this;return o(this,function(o){switch(o.label){case 0:return[4,this.view.whenReady()];case 1:return o.sent(),n=g.evaluateToolConstructorArguments(t),i=new e(a({},n,{view:this.view})),l=d.onAbort(r,function(){return u.activeTool=null}),this._rejectCreatingTool("Tool creation was interrupted by another tool being created"),this._creatingTool=i,i.attach(),this._refreshToolWatchers(),g.setActive(i,!0),[4,i.when()];case 2:return o.sent(),p.isSome(l)&&l.remove(),this._creatingTool=null,this.tools.add(i),i instanceof s&&null!=i.completed&&f.whenOnce(i,"completed").then(function(){g.setActive(i,!1)}),[2,i]}})})},t.prototype.attach=function(){var e=this;this._forEachTool(function(e){return e.attach()}),"3d"===this.view.type?this._handles.add([this.view.state.watch("camera",function(){e.forEachManipulator(function(e){null!=e.onViewChange&&e.onViewChange()})}),this.view.elevationProvider.on("elevation-change",function(t){e.forEachManipulator(function(e){null!=e.onElevationChange&&e.onElevationChange(t)})})],"manipulators"):this._handles.add(this.view.watch("extent",function(){e.forEachManipulator(function(e){null!=e.onViewChange&&e.onViewChange()})}))},t.prototype.detach=function(){this.activeTool=null,this._forEachTool(function(e){e.detach(),e.destroy()}),this.tools.removeAll(),this._handles.remove("manipulators")},t.prototype.forEachManipulator=function(e){this._forEachTool(function(t){t.manipulators&&t.manipulators.forEach(function(r){return e(r.manipulator,t)})})},t.prototype._handleInputEvent=function(e){var t=this;p.isSome(this.activeTool)?this.activeTool.handleInputEvent&&this.activeTool.handleInputEvent(e):this._forEachTool(function(t){!1!==t.visible&&t.handleInputEvent&&t.handleInputEvent(e)}),"key-down"===e.type&&"Escape"===e.key&&this.activeTool&&(e.stopPropagation(),this.activeTool=null),this._manipulatorState.handleInputEvent(e,{forEachTool:this._forEachTool,activeTool:this.activeTool,setActiveTool:function(e){t.activeTool=e},creatingTool:this._creatingTool,view:this.view}),this._manipulatorState.handleHoverEvent(e,this._forEachTool),this._updateCursor()},t.prototype._refreshToolWatchers=function(){var e=this;this._handles.remove("tools"),this._updateCursor(),this._forEachTool(function(t){if(t instanceof s){var r=f.watch(t,["cursor","visible","editable"],function(){g.areToolManipulatorsEditable(t)||e._manipulatorState.clearPointers(t,e._forEachTool),e._updateCursor()});e._handles.add(r,"tools")}t.manipulators&&e._handles.add(t.manipulators.on("change",function(r){r.removed.forEach(function(r){e._manipulatorState.clearPointers(t,e._forEachTool,!0,r.id)}),e._updateCursor()}),"tools")})},t.prototype._updateCursor=function(){var e=null;this._forEachTool(function(t){return null!=t.cursor&&!1!==t.visible&&(e=t.cursor,!0)}),e||(e=this._manipulatorState.cursor),this._get("cursor")!==e&&this._set("cursor",e)},t.prototype._rejectCreatingTool=function(e){var t=this._creatingTool;p.isNone(t)||(this._manipulatorState.clearPointers(t,this._forEachTool),t.rejectCreation&&t.rejectCreation(d.createAbortError(e)),t.destroy(),this._creatingTool=null,this._refreshToolWatchers())},t.prototype._removeIncompleteTools=function(e){var t=this;this.tools.filter(function(t){return(p.isNone(e)||t!==e)&&null!=t.completed&&!t.completed}).forEach(function(e){t.tools.remove(e)})},r([h.property({constructOnly:!0,nonNullable:!0})],t.prototype,"view",void 0),r([h.property({value:null})],t.prototype,"activeTool",null),r([h.property({readOnly:!0,type:l})],t.prototype,"tools",void 0),r([h.property({readOnly:!0})],t.prototype,"cursor",void 0),t=r([h.subclass("esri.views.ToolViewManager")],t)}(h.declared(s))})},"esri/views/input/InputManager":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/Logger ../../core/now ../../core/accessorSupport/decorators ./keys ./handlers/LatestPointerType".split(" "),function(e,t,r,n,o,i,a,s,l,u){Object.defineProperty(t,"__esModule",{value:!0});var c=i.getLogger("esri.views.input.InputManager");e=function(e){function o(t){return t=e.call(this,t)||this,t._pointerCaptures=new Map,t._nameToGroup={},t._handlers=[],t._currentPropagation=null,t._sourceEvents=new Set,t._keyModifiers=new Set,t._activeKeyModifiers=new Set,t._stoppedPropagationEventIds=new Set,t.primaryKey=l.primaryKey,t.latestPointerType="mouse",t.test={timestamp:void 0},t}return r(o,e),o.prototype.initialize=function(){this.eventSource.onEventReceived=this._onEventReceived.bind(this),this._installRecognizers()},o.prototype.destroy=function(){for(var e=0,t=Object.keys(this._nameToGroup);e<t.length;e++)this.uninstallHandlers(t[e]);this.eventSource=null},Object.defineProperty(o.prototype,"hasPendingInputs",{get:function(){return this._handlers.some(function(e){return e.handler.hasPendingInputs})},enumerable:!0,configurable:!0}),o.prototype.installHandlers=function(e,r,n){var o=this;if(void 0===n&&(n=t.ViewEventPriorities.INTERNAL),this._nameToGroup[e])c.error("There is already an InputHandler group registered under the name `"+e+"`");else if(0===r.length)c.error("Can't register a group of zero handlers");else{var i={name:e,handlers:r.map(function(e){return{handler:e,active:!0,removed:!1,priorityIndex:0,groupPriority:n,eventCallback:null,uninstallCallback:null}})};this._nameToGroup[e]=i,e=function(e){var t=i.handlers[e];a._handlers.push(t),t.handler.onInstall({updateDependencies:function(){o.updateDependencies()},emit:function(e,r,n,i,a){o._emitInputEvent(t.priorityIndex,e,r,n,a,i)},setPointerCapture:function(e,r){o._setPointerCapture(i,t,e,r)},setEventCallback:function(e){t.eventCallback=e},setUninstallCallback:function(e){t.uninstallCallback=e},refreshHasPendingInputs:function(){o.notifyChange("hasPendingInputs")}})};var a=this;for(r=i.handlers.length-1;0<=r;r--)e(r);this.updateDependencies()}},o.prototype.uninstallHandlers=function(e){var t=this._nameToGroup[e];t?(t.handlers.forEach(function(e){e.removed=!0,e.uninstallCallback()}),delete this._nameToGroup[e],this._currentPropagation?this._currentPropagation.needsHandlerGarbageCollect=!0:this._garbageCollectRemovedHandlers()):c.error("There is no InputHandler group registered under the name `"+e+"`")},o.prototype.hasHandlers=function(e){return void 0!==this._nameToGroup[e]},o.prototype.updateDependencies=function(){var e=new Set,t=new Set;this._handlersPriority=[];for(var r=this._handlers.length-1;0<=r;r--){var n=this._handlers[r];n.priorityIndex=r,this._handlersPriority.push(n)}for(this._handlersPriority=this._sortHandlersPriority(this._handlersPriority),r=this._handlersPriority.length-1;0<=r;r--){n=this._handlersPriority[r],n.priorityIndex=r;var o=n.handler.hasSideEffects;if(!o)for(var i=0,a=n.handler.outgoingEventTypes;i<a.length;i++)if(e.has(a[i])){o=!0;break}if(o)for(i=0,a=n.handler.incomingEventMatches;i<a.length;i++){var s=a[i];e.add(s.eventType);for(var u=0,s=s.keyModifiers;u<s.length;u++){var c=s[u];l.isSystemModifier(c)||t.add(c)}}n.active=o}this._sourceEvents=e,this._keyModifiers=t,0<this._pointerCaptures.size&&this._sourceEvents.add("pointer-capture-lost"),0<this._keyModifiers.size&&(this._sourceEvents.add("key-down"),this._sourceEvents.add("key-up")),this.eventSource&&(this.eventSource.activeEvents=this._sourceEvents)},o.prototype._setLatestPointerType=function(e){this._set("latestPointerType",e)},o.prototype._onEventReceived=function(e,t){"pointer-capture-lost"===e&&this._pointerCaptures.delete(t.native.pointerId),this._updateKeyModifiers(e,t),this._emitInputEventFromSource(e,t,null!=this.test.timestamp?this.test.timestamp:t.native?t.native.timestamp:void 0,t.native?t.native.cancelable:void 0)},o.prototype._updateKeyModifiers=function(e,t){var r=this;if(t){var n=!1,o=function(){if(!n){var e=new Set;r._activeKeyModifiers.forEach(function(t){e.add(t)}),r._activeKeyModifiers=e,n=!0}},i=function(e,t){t&&!r._activeKeyModifiers.has(e)?(o(),r._activeKeyModifiers.add(e)):!t&&r._activeKeyModifiers.has(e)&&(o(),r._activeKeyModifiers.delete(e))};if("key-down"===e||"key-up"===e){var a=t.key;this._keyModifiers.has(a)&&i(a,"key-down"===e)}e=t.native,i("Alt",!(!e||!e.altKey)),i("Ctrl",!(!e||!e.ctrlKey)),i("Shift",!(!e||!e.shiftKey)),i("Meta",!(!e||!e.metaKey)),i("Primary",this._activeKeyModifiers.has(this.primaryKey))}},o.prototype._installRecognizers=function(){var e=this;this._latestPointerTypeHandler=new u.LatestPointerType(function(t){return e._setLatestPointerType(t)}),0<this.recognizers.length&&this.installHandlers("default",this.recognizers,t.ViewEventPriorities.INTERNAL),this.installHandlers("input-manager-logic",[this._latestPointerTypeHandler],t.ViewEventPriorities.INTERNAL)},o.prototype._setPointerCapture=function(e,t,r,n){e=e.name+"-"+t.priorityIndex,t=this._pointerCaptures.get(r.pointerId)||new Set,this._pointerCaptures.set(r.pointerId,t),n?(t.add(e),1===t.size&&this.eventSource&&this.eventSource.setPointerCapture(r,!0)):t.has(e)&&(t.delete(e),0===t.size&&(this._pointerCaptures.delete(r.pointerId),this.eventSource&&this.eventSource.setPointerCapture(r,!1)))},o.prototype._garbageCollectRemovedHandlers=function(){this._handlers=this._handlers.filter(function(e){return!e.removed}),this.updateDependencies()},o.prototype._emitInputEventFromSource=function(e,t,r,n){this._emitInputEvent(0,e,t,r,n)},o.prototype._emitInputEvent=function(e,t,r,n,o,i){n=void 0!==n?n:this._currentPropagation?this._currentPropagation.timestamp:a(),t=new p(t,r,n,i||this._activeKeyModifiers,void 0!==o&&o),this._currentPropagation?this._currentPropagation.addedEvents.push(t):this._doNewPropagation(e,t)},o.prototype._doNewPropagation=function(e,t){for(e=this._currentPropagation={events:[t],addedEvents:[],currentHandler:this._handlersPriority[e],needsHandlerGarbageCollect:!1,timestamp:t.timestamp};e.currentHandler;){if(e.currentHandler.removed)e.needsHandlerGarbageCollect=!0;else{t=e.events;var r=[];e.addedEvents=[];for(var n=0;n<t.length;n++){var o=t[n],i=o.data&&o.data.eventId;null!=i&&this._stoppedPropagationEventIds.has(i)||(e.currentHandler.active&&e.currentHandler.eventCallback(o),o.shouldStopPropagation()?null!=i&&this._stoppedPropagationEventIds.add(i):r.push(o))}e.events=r.concat(e.addedEvents)}e.currentHandler=this._handlersPriority[e.currentHandler.priorityIndex+1]}e.needsHandlerGarbageCollect&&this._garbageCollectRemovedHandlers(),this.hasPendingInputs||this._stoppedPropagationEventIds.clear(),this._currentPropagation=null},o.prototype._compareHandlerPriority=function(e,t){if(e.handler.hasSideEffects!==t.handler.hasSideEffects)return e.handler.hasSideEffects?1:-1;if(e.groupPriority!==t.groupPriority)return e.groupPriority>t.groupPriority?-1:1;for(var r=0,n=e.handler.incomingEventMatches;r<n.length;r++)for(var o=n[r],i=function(e){if(o.eventType!==e.eventType)return"continue";var t=o.keyModifiers.filter(function(t){return-1!==e.keyModifiers.indexOf(t)});return t.length===o.keyModifiers.length!=(t.length===e.keyModifiers.length)?{value:o.keyModifiers.length>e.keyModifiers.length?-1:1}:void 0},a=0,s=t.handler.incomingEventMatches;a<s.length;a++){var l=i(s[a]);if("object"==typeof l)return l.value}return e.priorityIndex>t.priorityIndex?-1:1},o.prototype._sortHandlersPriority=function(e){for(var t=[],r=0;r<e.length;r++){for(var n=e[r],o=0;o<t.length&&0<=this._compareHandlerPriority(n,t[o]);)o++;t.splice(o,0,n)}return t},Object.defineProperty(o.prototype,"debug",{get:function(){var e=this,t=function(t){var r=e._setPointerCapture;e._setPointerCapture=function(){},t(),e._setPointerCapture=r};return{injectEvent:function(r,n){t(function(){e._onEventReceived(r,n)})},disablePointerCapture:t}},enumerable:!0,configurable:!0}),n([s.property({readOnly:!0})],o.prototype,"hasPendingInputs",null),n([s.property({})],o.prototype,"eventSource",void 0),n([s.property({})],o.prototype,"recognizers",void 0),n([s.property({readOnly:!0})],o.prototype,"latestPointerType",void 0),o=n([s.subclass("esri.views.input.InputManager")],o)}(s.declared(o)),t.InputManager=e;var p=function(){function e(e,t,r,n,o){this.type=e,this.data=t,this.timestamp=r,this.modifiers=n,this.cancelable=o,this._stopPropagation=!1}return e.prototype.stopPropagation=function(){this._stopPropagation=!0},e.prototype.shouldStopPropagation=function(){return this._stopPropagation},e.prototype.preventDefault=function(){this.data.native.preventDefault()},e}();t.ViewEventPriorities={DEFAULT:0,TOOL:-1,WIDGET:-2,INTERNAL:-3}})},"esri/views/input/keys":function(){define(["require","exports","../../core/events","../../core/has"],function(e,t,r,n){Object.defineProperty(t,"__esModule",{value:!0}),t.primaryKey=n("mac")?"Meta":"Ctrl";var o={8:"Backspace",9:"Tab",13:"Enter",27:"Escape",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete"};for(e=48;58>e;e++)o[e]=String.fromCharCode(e);for(e=1;25>e;e++)o[111+e]="F"+e;for(e=65;91>e;e++)o[e]=[String.fromCharCode(e+32),String.fromCharCode(e)];t.eventKey=function(e){if(void 0!==e.key)return r.eventKey(e);var t=o[e.keyCode];return Array.isArray(t)?e.shiftKey?t[1]:t[0]:t},t.isSystemModifier=function(e){switch(e){case"Ctrl":case"Alt":case"Shift":case"Meta":case"Primary":return!0}return!1}})},"esri/views/input/handlers/LatestPointerType":function(){define(["require","exports","../../../core/tsSupport/extendsHelper","../InputHandler"],function(e,t,r,n){Object.defineProperty(t,"__esModule",{value:!0}),e=function(e){function t(t){var r=e.call(this,!0)||this;return r._onChange=t,r._value="mouse",r.registerIncoming("pointer-down",function(e){r._setValue("touch"===e.data.native.pointerType?"touch":"mouse")}),r._moveHandler=r.registerIncoming("pointer-move",function(e){r._setValue("touch"===e.data.native.pointerType?"touch":"mouse")}),r._moveHandler.pause(),r}return r(t,e),t.prototype._setValue=function(e){e!==this._value&&("touch"===e?this._moveHandler.resume():this._moveHandler.pause(),this._value=e,this._onChange(e))},t}(n.InputHandler),t.LatestPointerType=e})},"esri/views/input/InputHandler":function(){define(["require","exports","../../core/Logger","./EventMatch"],function(e,t,r,n){Object.defineProperty(t,"__esModule",{value:!0});var o=r.getLogger("esri.views.input.InputHandler");e=function(){function e(e){this._manager=null,this._incoming={},this._outgoing={},this._outgoingEventTypes=this._incomingEventTypes=this._incomingEventMatches=null,this._hasSideEffects=e}return Object.defineProperty(e.prototype,"incomingEventMatches",{get:function(){if(!this._incomingEventMatches){this._incomingEventMatches=[];for(var e in this._incoming)for(var t=0,r=this._incoming[e];t<r.length;t++)this._incomingEventMatches.push(r[t].match)}return this._incomingEventMatches},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"incomingEventTypes",{get:function(){return this._incomingEventTypes||(this._incomingEventTypes=this.incomingEventMatches.map(function(e){return e.eventType})),this._incomingEventTypes},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"outgoingEventTypes",{get:function(){return this._outgoingEventTypes||(this._outgoingEventTypes=Object.keys(this._outgoing)),this._outgoingEventTypes},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasSideEffects",{get:function(){return this._hasSideEffects},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasPendingInputs",{get:function(){return!1},enumerable:!0,configurable:!0}),e.prototype.onInstall=function(e){var t=this;this._manager?o.error("This InputHandler has already been registered with an InputManager"):(e.setEventCallback(function(e){return t._handleEvent(e)}),e.setUninstallCallback(function(){return t._onUninstall()}),this._manager=e)},e.prototype.onUninstall=function(){},e.prototype.registerIncoming=function(e,t,r){var o=this;"function"==typeof t?(r=t,t=[]):t=t||[],e="string"==typeof e?new n.EventMatch(e,t):e;var a=function(){o._incomingEventTypes=null,o._incomingEventMatches=null};return t=function(e){var t=o._incoming[e.match.eventType];t&&(e=t.indexOf(e),t.splice(e,1),a(),o._manager&&o._manager.updateDependencies())},r=new i(e,r,{onPause:t,onRemove:t,onResume:function(e){var t=o._incoming[e.match.eventType];t&&-1===t.indexOf(e)&&(t.push(e),a(),o._manager&&o._manager.updateDependencies())}}),t=this._incoming[e.eventType],t||(t=[],this._incoming[e.eventType]=t),t.push(r),a(),this._manager&&this._manager.updateDependencies(),r},e.prototype.registerOutgoing=function(e){var t=this;if(this._outgoing[e])throw Error("There is already a callback registered for this outgoing InputEvent: "+e);var r=new a(e,{onEmit:function(e,r,n,o){t._manager.emit(e.eventType,r,n,o)},onRemove:function(e){delete t._outgoing[e.eventType],t._manager.updateDependencies()}});return this._outgoing[e]=r,this._outgoingEventTypes=null,this._manager&&this._manager.updateDependencies(),r},e.prototype.startCapturingPointer=function(e){this._manager.setPointerCapture(e,!0)},e.prototype.stopCapturingPointer=function(e){this._manager.setPointerCapture(e,!1)},e.prototype.refreshHasPendingInputs=function(){this._manager.refreshHasPendingInputs()},e.prototype._onUninstall=function(){this._manager?(this.onUninstall(),this._manager=null):o.error("This InputHandler is not registered with an InputManager")},e.prototype._handleEvent=function(e){var t=this._incoming[e.type];if(t)for(var r=0;r<t.length;r++){var n=t[r];if(n.match.matches(e)&&(n.callback(e),e.shouldStopPropagation()))break}},e}(),t.InputHandler=e;var i=function(){function e(e,t,r){this.match=e,this._callback=t,this._handler=r}return e.prototype.pause=function(){this._handler.onPause(this)},e.prototype.resume=function(){this._handler.onResume(this)},e.prototype.remove=function(){this._handler.onRemove(this)},Object.defineProperty(e.prototype,"callback",{get:function(){return this._callback},enumerable:!0,configurable:!0}),e}(),a=function(){function e(e,t){this.eventType=e,this._removed=!1,this._handler=t}return e.prototype.emit=function(e,t,r){this._removed||this._handler.onEmit(this,e,t,r)},e.prototype.remove=function(){this._removed=!0,this._handler.onRemove(this)},e}()})},"esri/views/input/EventMatch":function(){define(["require","exports"],function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),e=function(){function e(e,t){void 0===t&&(t=[]),this.eventType=e,this.keyModifiers=t}return e.prototype.matches=function(e){if(e.type!==this.eventType)return!1;if(0===this.keyModifiers.length)return!0;e=e.modifiers;for(var t=0,r=this.keyModifiers;t<r.length;t++)if(!e.has(r[t]))return!1;return!0},e}(),t.EventMatch=e})},"esri/views/input/ViewEvents":function(){define("require exports ../../core/tsSupport/extendsHelper ../../core/compilerUtils ../../core/mathUtils ../../core/screenUtils ./InputHandler ./InputManager".split(" "),function(e,t,r,n,o,i,a,s){function l(e){return!!c[e]}function u(e){for(var t=0;t<e.length;t++)if(!l(e[t]))return!1;return!0}Object.defineProperty(t,"__esModule",{value:!0}),t.eventTypes="click double-click immediate-click hold drag key-down key-up pointer-down pointer-move pointer-up pointer-drag mouse-wheel pointer-enter pointer-leave gamepad focus blur".split(" ");var c={};t.eventTypes.forEach(function(e){c[e]=!0}),e=function(){function e(e){this.handlers=new Map,this.counter=0,this.handlerCounts=new Map,this.view=e,this.inputManager=null}return e.prototype.connect=function(e){var t=this;e&&this.disconnect(),this.inputManager=e,this.handlers.forEach(function(e,r){return t.inputManager.installHandlers(r,[e.handler],e.priority)})},e.prototype.disconnect=function(){var e=this;this.inputManager&&this.handlers.forEach(function(t,r){return e.inputManager.uninstallHandlers(r)}),this.inputManager=null},e.prototype.destroy=function(){this.disconnect(),this.handlers.clear(),this.view=null},e.prototype.on=function(e,t,r,n){var o=this,i=Array.isArray(e)?e:e.split(",");if(!u(i))return i.some(l)&&console.error("Error: registering input events and other events on the view at the same time is not supported."),null;var a;Array.isArray(t)?e=t:(a=t,e=[]),"function"==typeof r?a=r:n=r,n=null!=n?n:s.ViewEventPriorities.DEFAULT;var c=this.createUniqueGroupName();for(r=new p(this.view,i,e,a),this.handlers.set(c,{handler:r,priority:n}),a=0;a<i.length;a++)e=i[a],t=this.handlerCounts.get(e)||0,this.handlerCounts.set(e,t+1);return this.inputManager&&this.inputManager.installHandlers(c,[r],n),{remove:function(){return o.removeHandler(c,i)}}},e.prototype.hasHandler=function(e){return!!this.handlerCounts.get(e)},e.prototype.removeHandler=function(e,t){if(this.handlers.has(e)){this.handlers.delete(e);for(var r=0;r<t.length;r++){var n=t[r],o=this.handlerCounts.get(n);void 0===o?console.error("Trying to remove handler for event that has no handlers registered: ",n):1===o?this.handlerCounts.delete(n):this.handlerCounts.set(n,o-1)}}this.inputManager&&this.inputManager.uninstallHandlers(e)},e.prototype.createUniqueGroupName=function(){return this.counter+=1,"viewEvents_"+this.counter},e}(),t.ViewEvents=e;var p=function(e){function t(t,r,o,i){var a=e.call(this,!0)||this;for(a.view=t,t=0;t<r.length;t++){var s=r[t];switch(s){case"click":a.registerIncoming("click",o,function(e){return i(a.wrapClick(e))});break;case"double-click":a.registerIncoming("double-click",o,function(e){return i(a.wrapDoubleClick(e))});break;case"immediate-click":a.registerIncoming("immediate-click",o,function(e){return i(a.wrapImmediateClick(e))});break;case"hold":a.registerIncoming("hold",o,function(e){return i(a.wrapHold(e))});break;case"drag":a.registerIncoming("drag",o,function(e){(e=a.wrapDrag(e))&&i(e)});break;case"key-down":a.registerIncoming("key-down",o,function(e){return i(a.wrapKeyDown(e))});break;case"key-up":a.registerIncoming("key-up",o,function(e){return i(a.wrapKeyUp(e))});break;case"pointer-down":a.registerIncoming("pointer-down",o,function(e){return i(a.wrapPointer(e,"pointer-down"))});break;case"pointer-move":a.registerIncoming("pointer-move",o,function(e){return i(a.wrapPointer(e,"pointer-move"))});break;case"pointer-up":a.registerIncoming("pointer-up",o,function(e){return i(a.wrapPointer(e,"pointer-up"))});break;case"pointer-drag":a.registerIncoming("pointer-drag",o,function(e){return i(a.wrapPointerDrag(e))});break;case"mouse-wheel":a.registerIncoming("mouse-wheel",o,function(e){return i(a.wrapMouseWheel(e))});break;case"pointer-enter":a.registerIncoming("pointer-enter",o,function(e){return i(a.wrapPointer(e,"pointer-enter"))});break;case"pointer-leave":a.registerIncoming("pointer-leave",o,function(e){return i(a.wrapPointer(e,"pointer-leave"))});break;case"gamepad":a.registerIncoming("gamepad",o,function(e){i(a.wrapGamepad(e))});break;case"focus":a.registerIncoming("focus",o,function(e){i(a.wrapFocus(e))});break;case"blur":a.registerIncoming("blur",o,function(e){i(a.wrapBlur(e))});break;default:n.neverReached(s)}}return a}return r(t,e),t.prototype.wrapFocus=function(e){return{type:"focus",timestamp:e.timestamp,native:e.data.native,cancelable:e.cancelable,stopPropagation:function(){return e.stopPropagation()},preventDefault:function(){return e.preventDefault()}}},t.prototype.wrapBlur=function(e){return{type:"blur",timestamp:e.timestamp,native:e.data.native,cancelable:e.cancelable,stopPropagation:function(){return e.stopPropagation()},preventDefault:function(){return e.preventDefault()}}},t.prototype.wrapClick=function(e){var t=e.data,r=t.pointerType,n=t.button,o=t.buttons,a=t.x,s=t.y,l=t.native,t=t.eventId,u=e.cancelable,c=e.timestamp,p=i.createScreenPoint(a,s);return{type:"click",pointerType:r,button:n,buttons:o,x:a,y:s,native:l,timestamp:c,screenPoint:p,mapPoint:this.view.toMap(p),eventId:t,cancelable:u,stopPropagation:function(){return e.stopPropagation()},preventDefault:function(){return e.preventDefault()}}},t.prototype.wrapDoubleClick=function(e){var t=e.data,r=t.x,n=t.y,o=t.eventId,a=e.cancelable;return{type:"double-click",pointerType:t.pointerType,button:t.button,buttons:t.buttons,x:r,y:n,native:t.native,timestamp:e.timestamp,mapPoint:this.view.toMap(i.createScreenPoint(r,n)),eventId:o,cancelable:a,stopPropagation:function(){return e.stopPropagation()},preventDefault:function(){return e.preventDefault()}}},t.prototype.wrapImmediateClick=function(e){var t=e.data,r=t.x,n=t.y,o=t.native,a=t.eventId,s=e.cancelable;return{type:"immediate-click",pointerId:o.pointerId,pointerType:t.pointerType,button:t.button,buttons:t.buttons,x:r,y:n,native:o,timestamp:e.timestamp,mapPoint:this.view.toMap(i.createScreenPoint(r,n)),eventId:a,cancelable:s,stopPropagation:function(){return e.stopPropagation()},preventDefault:function(){return e.preventDefault()}}},t.prototype.wrapHold=function(e){var t=e.data,r=t.x,n=t.y,o=e.cancelable;return{type:"hold",pointerType:t.pointerType,button:t.button,buttons:t.buttons,x:r,y:n,native:t.native,timestamp:e.timestamp,mapPoint:this.view.toMap(i.createScreenPoint(r,n)),cancelable:o,stopPropagation:function(){return e.stopPropagation()},preventDefault:function(){return e.preventDefault()}}},t.prototype.wrapDrag=function(e){var t=e.data,r=t.center,n=r.x,r=r.y,i=t.action,a=t.pointerType,s=t.button;if("start"===i&&(this.latestDragStart=t),this.latestDragStart){var l=t.pointer.native,u=t.buttons,c=e.cancelable,p=e.timestamp,d={x:this.latestDragStart.center.x,y:this.latestDragStart.center.y};return"end"===i&&(this.latestDragStart=void 0),{type:"drag",action:i,x:n,y:r,origin:d,pointerType:a,button:s,buttons:u,radius:t.radius,angle:o.rad2deg(t.angle),native:l,timestamp:p,cancelable:c,stopPropagation:function(){return e.stopPropagation()},preventDefault:function(){return e.preventDefault()}}}},t.prototype.wrapKeyDown=function(e){var t=e.data;return{type:"key-down",key:t.key,repeat:t.repeat,native:t.native,timestamp:e.timestamp,cancelable:e.cancelable,stopPropagation:function(){return e.stopPropagation()},preventDefault:function(){return e.preventDefault()}}},t.prototype.wrapKeyUp=function(e){var t=e.data;return{type:"key-up",key:t.key,native:t.native,timestamp:e.timestamp,cancelable:e.cancelable,stopPropagation:function(){return e.stopPropagation()},preventDefault:function(){return e.preventDefault()}}},t.prototype.wrapPointer=function(e,t){var r=e.data,n=r.native;return{type:t,x:r.x,y:r.y,pointerId:n.pointerId,pointerType:n.pointerType,button:r.button,buttons:r.buttons,native:n,timestamp:e.timestamp,eventId:r.eventId,cancelable:e.cancelable,stopPropagation:function(){return e.stopPropagation()},preventDefault:function(){return e.preventDefault()}}},t.prototype.wrapPointerDrag=function(e){var t=e.data.currentEvent;return{type:"pointer-drag",x:t.x,y:t.y,pointerId:e.data.startEvent.native.pointerId,pointerType:e.data.startEvent.native.pointerType,button:e.data.startEvent.button,buttons:t.buttons,action:e.data.action,origin:{x:e.data.startEvent.x,y:e.data.startEvent.y},native:t.native,timestamp:e.timestamp,eventId:t.eventId,cancelable:e.cancelable,stopPropagation:function(){return e.stopPropagation()},preventDefault:function(){return e.preventDefault()}}},t.prototype.wrapMouseWheel=function(e){var t=e.data;return{type:"mouse-wheel",x:t.x,y:t.y,deltaY:t.deltaY,native:t.native,timestamp:e.timestamp,cancelable:e.cancelable,stopPropagation:function(){return e.stopPropagation()},preventDefault:function(){return e.preventDefault()}}},t.prototype.wrapGamepad=function(e){var t=e.data,r=t.state;return{type:"gamepad",device:t.device,timestamp:e.timestamp,action:t.action,buttons:r.buttons,axes:r.axes,cancelable:e.cancelable,stopPropagation:function(){return e.stopPropagation()},preventDefault:function(){return e.preventDefault()}}},t}(a.InputHandler)})},"esri/views/interactive/interactiveToolUtils":function(){define("require exports ../../core/tsSupport/assignHelper ../../core/Collection ../../core/maybe ../DOMContainer".split(" "),function(e,t,r,n,o,i){function a(e,t){var r=e.view;r&&(t&&r.ready&&r.activeTool!==e?(r.activeTool=e,i.isDOMContainer(r)&&r.focus()):t||r.activeTool!==e||(r.activeTool=null))}Object.defineProperty(t,"__esModule",{value:!0}),t.setActive=a,t.swap=function(e,t,r){e=e.activeTool,t!==e&&(o.isSome(e)&&e.deactivate&&e.deactivate(),r(t),o.isSome(t)&&t.activate&&t.activate())},t.newToolCollection=function(){var e=new n;return e.on("after-add",function(e){e=e.item,e.view&&e.view.ready&&e.attach()}),e.on("after-remove",function(e){e=e.item,a(e,!1),e.destroyed||e.detach()}),e},t.areToolManipulatorsEditable=function(e){return!1!==e.visible&&!1!==e.editable&&(null==e.hasEditableFlag||e.hasEditableFlag(1))},t.evaluateToolConstructorArguments=function(e){return o.isNone(e)?{}:"function"==typeof e?e():e}})},"esri/views/DOMContainer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/domUtils ../core/scheduling ../core/watchUtils ../core/accessorSupport/decorators ./overlay/ViewOverlay ../widgets/Popup".split(" "),function(e,t,r,n,o,i,a,s,l,u){function c(e){e&&(o.empty(e),e.parentNode&&e.parentNode.removeChild(e))}Object.defineProperty(t,"__esModule",{value:!0});var p=[0,0];t.DOMContainer=function(e){return function(e){function t(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=e.apply(this,t)||this;return n._freqInfo={freq:16,time:750},n._overlayRenderTaskHandle=null,n.height=0,n.position=null,n.resizing=!1,n.root=null,n.surface=null,n.suspended=!0,n.ui=null,n.userContent=null,n.width=0,n.widthBreakpoint=null,n.handles.add([n.watch("cursor",function(e){var t=n.surface;t&&t.setAttribute("data-cursor",e)}),n.watch("interacting",function(e){var t=n.surface;t&&t.setAttribute("data-interacting",e.toString())})]),n}return r(t,e),t.prototype.initialize=function(){var e=this;this.handles.add(this.watch("ui",function(t,r){return e._handleUIChange(t,r)})),this._wireUI(this.ui),this.handles.add([this.on("focus",function(){return e.notifyChange("focused")}),this.on("blur",function(){return e.notifyChange("focused")})])},t.prototype.destroy=function(){this.destroyed||(this.ui&&(this.ui.destroy(),this.ui=null),this.popup&&!this.popup.destroyed&&this.popup.destroy(),this.container=null)},Object.defineProperty(t.prototype,"container",{set:function(e){var t=this,r=this._get("container");if(r!==e)if(this.handles.remove("dom-size"),this._stopMeasuring(),r&&(r.classList.remove("esri-view"),this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null),this.overlay.destroy(),this._set("overlay",null),c(this.root),this._set("root",null),o.reparent(this.userContent,r),c(this.userContent),this._set("userContent",null)),e){e.classList.add("esri-view"),r=document.createElement("div"),r.className="esri-view-user-storage",o.reparent(e,r),e.appendChild(r),this._set("userContent",r),r=document.createElement("div"),r.className="esri-view-root",e.insertBefore(r,e.firstChild),this._set("root",r);var n=document.createElement("div");n.className="esri-view-surface",n.setAttribute("role","application"),n.tabIndex=0,r.appendChild(n),this._set("surface",n);var s=new l;r.appendChild(s.surface),this._set("overlay",s),s.watch("needsRender",function(e){e&&!t._overlayRenderTaskHandle?t._overlayRenderTaskHandle=i.addFrameTask({render:function(){t.overlay.render()}}):t._overlayRenderTaskHandle&&(t._overlayRenderTaskHandle.remove(),t._overlayRenderTaskHandle=null)}),this.forceDOMReadyCycle(),this.handles.add(a.init(this,"size",function(e){var t=e[1];e[0]>=document.body.clientWidth||t>=document.body.clientHeight?n.classList.add("esri-view-surface--inset-outline"):n.classList.remove("esri-view-surface--inset-outline")}),"dom-size"),this._set("container",e),this._startMeasuring()}else this._set("width",0),this._set("height",0),this._set("position",null),this._set("suspended",!0),this._set("surface",null),this._set("container",null)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"focused",{get:function(){var e=document.activeElement===this.surface;return document.hasFocus()&&e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"popup",{get:function(){return this._get("popup")||new u({view:this})},set:function(e){var t=this._get("popup");t&&t!==e&&t.destroy(),this._set("popup",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return[this.width,this.height]},enumerable:!0,configurable:!0}),t.prototype.blur=function(){this.surface&&this.surface.blur()},t.prototype.focus=function(){this.surface&&this.surface.focus()},t.prototype.pageToContainer=function(e,t,r){var n=this.position;return e-=n[0],t-=n[1],r?(r[0]=e,r[1]=t):r=[e,t],r},t.prototype.containerToPage=function(e,t,r){var n=this.position;return e+=n[0],t+=n[1],r?(r[0]=e,r[1]=t):r=[e,t],r},t.prototype._handleUIChange=function(e,t){t&&(this.handles.remove("ui"),t.destroy()),e&&this._wireUI(e),this._set("ui",e)},t.prototype._wireUI=function(e){this.handles.remove("ui"),e&&(e.view=this,this.handles.add([a.init(this,"root",function(t){if(t){var r=document.createElement("div");t.appendChild(r),t=r}else t=null;e.container=t}),a.init(this,"popup",function(t,r){r&&e.remove(r,"popup"),t&&(t.view=e.view,e.add(t,{key:"popup",position:"manual"}))})],"ui"))},t.prototype._stopMeasuring=function(){this.handles.remove("measuring"),this._get("resizing")&&this._set("resizing",!1)},t.prototype._startMeasuring=function(){var e=this,t=this._freqInfo;t.freq=16,t.time=750,this.handles.add([function(){var e=function(){t.freq=16,t.time=750};return window.addEventListener("resize",e),{remove:function(){window.removeEventListener("resize",e)}}}(),i.addFrameTask({prepare:function(t){var r=e._measure(),n=e._freqInfo;n.time+=t.deltaTime,r&&(n.freq=16,e._get("resizing")||e._set("resizing",!0)),n.time<n.freq||(n.time=0,e._position()||r?n.freq=16:n.freq=Math.min(750,2*n.freq),!r&&512<=n.freq&&e._get("resizing")&&e._set("resizing",!1))}})],"measuring"),this._measure(),this._position()},t.prototype._measure=function(){var e=this.container,t=e?e.clientWidth:0,r=e?e.clientHeight:0;if(0===t||0===r||"hidden"===window.getComputedStyle(e).visibility)return this.suspended||this._set("suspended",!0),!1;var e=this.width,n=this.height;return t===e&&r===n?(this.suspended&&this._set("suspended",!1),!1):(this._set("width",t),this._set("height",r),this.suspended&&this._set("suspended",!1),this.emit("resize",{oldWidth:e,oldHeight:n,width:t,height:r}),!0)},t.prototype._position=function(){var e=this.container,t=this.position,r=(e.ownerDocument||window.document).defaultView,e=e.getBoundingClientRect();return p[0]=e.left+r.pageXOffset,p[1]=e.top+r.pageYOffset,(!t||p[0]!==t[0]||p[1]!==t[1])&&(this._set("position",[p[0],p[1]]),!0)},t.prototype.forceDOMReadyCycle=function(){},n([s.property({value:null,cast:function(e){return o.byId(e)}})],t.prototype,"container",null),n([s.property({readOnly:!0,dependsOn:["surface"]})],t.prototype,"focused",null),n([s.property({readOnly:!0})],t.prototype,"height",void 0),n([s.property({type:u})],t.prototype,"popup",null),n([s.property({type:l})],t.prototype,"overlay",void 0),n([s.property({readOnly:!0})],t.prototype,"position",void 0),n([s.property({readOnly:!0})],t.prototype,"resizing",void 0),n([s.property({readOnly:!0})],t.prototype,"root",void 0),n([s.property({value:null,dependsOn:["width","height"],readOnly:!0})],t.prototype,"size",null),n([s.property({readOnly:!0})],t.prototype,"surface",void 0),n([s.property({readOnly:!0})],t.prototype,"suspended",void 0),n([s.property()],t.prototype,"ui",void 0),n([s.property({readOnly:!0})],t.prototype,"userContent",void 0),n([s.property({readOnly:!0})],t.prototype,"width",void 0),n([s.property()],t.prototype,"widthBreakpoint",void 0),t=n([s.subclass("esri.views.DOMContainer")],t)}(s.declared(e))},t.isDOMContainer=function(e){return e&&"focus"in e}})},"esri/core/domUtils":function(){define(["require","exports","../widgets/support/widget"],function(e,t,r){function n(e){return r.isWidgetBase(e)?e.domNode:e}Object.defineProperty(t,"__esModule",{value:!0}),t.show=function(e){(e=n(e))&&(e.style.display="block")},t.getNode=n,t.hide=function(e){(e=n(e))&&(e.style.display="none")},t.toggle=function(e){(e=n(e))&&(e.style.display="none"===e.style.display?"block":"none")},t.byId=function(e){return"string"==typeof e?document.getElementById(e):e},t.empty=function(e){for(;e.hasChildNodes();)e.removeChild(e.firstChild)},t.insertAfter=function(e,t){var r=t.parentNode;r&&(r.lastChild===t?r.appendChild(e):r.insertBefore(e,t.nextSibling))},t.insertBefore=function(e,t){var r=t.parentNode;r&&r.insertBefore(e,t)},t.reparent=function(e,t){for(;e.hasChildNodes();)t.appendChild(e.firstChild)},t.remove=function(e){e.parentNode&&e.parentNode.removeChild(e)},t.closest=function(){if(Element.prototype.closest)return function(e,t){return e.closest(t)};var e=Element.prototype.matches||Element.prototype.msMatchesSelector;return function(t,r){do{if(e.call(t,r))return t;t=t.parentElement}while(null!==t&&1===t.nodeType);return null}}()})},"esri/widgets/support/widget":function(){define("require exports ./decorators ./jsxFactory ./widgetUtils ./shim/SVGElement".split(" "),function(e,t,r,n,o){function i(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),i(r),i(n),i(o),t.isWidget=function(e){return e&&"function"==typeof e.render},t.isWidgetBase=function(e){return e&&"function"==typeof e.postMixInProperties&&"function"==typeof e.buildRendering&&"function"==typeof e.postCreate&&"function"==typeof e.startup}})},"esri/widgets/support/decorators":function(){define(["require","exports","./decorators/accessibleHandler","./decorators/renderable","./decorators/vmEvent"],function(e,t,r,n,o){function i(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),i(r),i(n),i(o)})},"esri/widgets/support/decorators/accessibleHandler":function(){define(["require","exports"],function(e,t){function r(e){return function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];n=t.type,t instanceof KeyboardEvent||"keyup"===n||"keydown"===n||"keypress"===n?"Enter"!==t.key&&" "!==t.key||(t.preventDefault(),t.stopPropagation(),t.target.click()):e.call.apply(e,[this,t].concat(r))}}Object.defineProperty(t,"__esModule",{value:!0}),t.accessibleHandler=function(){return function(e,t){return{value:r(e[t])}}}})},"esri/widgets/support/decorators/renderable":function(){define(["require","exports","./propUtils"],function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.renderable=function(e){var t="string"==typeof e?r.splitProps(e):e;return function(e,n){e._renderableProps||(e._renderableProps=[]),e=e._renderableProps,t?e.push.apply(e,r.normalizePropNames(t,n)):e.push(n)}}})},"esri/widgets/support/decorators/propUtils":function(){define(["require","exports"],function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.splitProps=function(e){return e.split(",").map(function(e){return e.trim()})},t.normalizePropNames=function(e,t){return e.map(function(e){return e=0===e.indexOf(t)?e:t+"."+e})}})},"esri/widgets/support/decorators/vmEvent":function(){define(["require","exports","./propUtils"],function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.vmEvent=function(e){return function(t){t._delegatedEventNames||(t._delegatedEventNames=[]);var n=Array.isArray(e)?e:r.splitProps(e);t._delegatedEventNames=t._delegatedEventNames.concat(n)}}})},"esri/widgets/support/jsxFactory":function(){define(["require","exports","maquette-jsx"],function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.tsx=r.jsx})},"maquette-jsx/dist/maquette-jsx.umd":function(){!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):(e=e||self,t(e.maquetteCssTransitions={}))}(this,function(e){var t=function(e,r){for(var n=0,o=e.length;n<o;n++){var i=e[n];Array.isArray(i)?t(i,r):null!==i&&void 0!==i&&!1!==i&&(i.hasOwnProperty("vnodeSelector")||(i={vnodeSelector:"",properties:void 0,children:void 0,text:i.toString(),domNode:null}),r.push(i))}},r=function(e,r){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];return 1===n.length&&"string"==typeof n[0]?{vnodeSelector:e,properties:r||void 0,children:void 0,text:n[0],domNode:null}:(o=[],t(n,o),{vnodeSelector:e,properties:r||void 0,children:o,text:void 0,domNode:null})};e.enableGlobalJsx=function(){window.jsx=r},e.jsx=r,Object.defineProperty(e,"__esModule",{value:!0})})},"esri/widgets/support/widgetUtils":function(){define("require exports ../../core/ArrayPool ../../core/has ../../core/Logger ../../libs/sanitizer/Sanitizer maquette-css-transitions".split(" "),function(e,t,r,n,o,i,a){Object.defineProperty(t,"__esModule",{value:!0}),o.getLogger("esri.widgets.support.widgetUtils"),t.join=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.join(" ")},t.classes=function(e){for(var t=r.acquire(),n=0;n<arguments.length;n++){var o=arguments[n],i=typeof o;if("string"===i)t.push(o);else if(Array.isArray(o))t.push.apply(t,o);else if("object"===i)for(var a in o)o[a]&&t.push(a)}return n=t.join(" "),r.release(t),n},t.isRTL=function(){return"rtl"===document.dir},t.storeNode=function(e){this[e.getAttribute("data-node-ref")]=e},t.cssTransition=function(e,t){return("enter"===e?a.createEnterCssTransition:a.createExitCssTransition)(t)},t.sanitizer=new i})},"esri/libs/sanitizer/Sanitizer":function(){!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Sanitizer=t():e.Sanitizer=t()}(this,function(){return function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var r={};return t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:n})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,r){if(1&r&&(e=t(e)),8&r||4&r&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(t.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var o in e)t.d(n,o,function(t){return e[t]}.bind(null,o));return n},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=8)}([function(e,t,r){function n(e,t){return new s(t).process(e)}var o,i=r(3),a=r(6),s=r(11);for(o in(t=e.exports=n).filterXSS=n,t.FilterXSS=s,i)t[o]=i[o];for(o in a)t[o]=a[o];"undefined"!=typeof self&&"undefined"!=typeof DedicatedWorkerGlobalScope&&self instanceof DedicatedWorkerGlobalScope&&(self.filterXSS=e.exports)},function(e,t,r){var n,o=r(4),i=r(9);for(n in(t=e.exports=function(e,t){return new i(t).process(e)}).FilterCSS=i,o)t[n]=o[n]},function(e,t){e.exports={indexOf:function(e,t){var r,n;if(Array.prototype.indexOf)return e.indexOf(t);for(r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1},forEach:function(e,t,r){var n,o;if(Array.prototype.forEach)return e.forEach(t,r);for(n=0,o=e.length;n<o;n++)t.call(r,e[n],n,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(e){return(e=/\s|\n|\t/.exec(e))?e.index:-1}}},function(e,t,r){function n(e){return e.replace(h,"&lt;").replace(y,"&gt;")}function o(e){return e.replace(m,"&quot;")}function i(e){return e.replace(g,'"')}function a(e){return e.replace(v,function(e,t){return"x"===t[0]||"X"===t[0]?String.fromCharCode(parseInt(t.substr(1),16)):String.fromCharCode(parseInt(t,10))})}function s(e){return e.replace(b,":").replace(w," ")}function l(e){for(var t="",r=0,n=e.length;r<n;r++)t+=32>e.charCodeAt(r)?" ":e.charAt(r);return d.trim(t)}function u(e){return e=l(e=s(e=a(e=i(e))))}function c(e){return e=n(e=o(e))}e=r(1).FilterCSS;var p=r(1).getDefaultWhiteList,d=r(2),f=new e,h=/</g,y=/>/g,m=/"/g,g=/&quot;/g,v=/&#([a-zA-Z0-9]*);?/gim,b=/&colon;?/gim,w=/&newline;?/gim,S=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a)\:/gi,_=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,x=/u\s*r\s*l\s*\(.*/gi,O=/\x3c!--[\s\S]*?--\x3e/g;t.whiteList={a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","loop","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],sup:[],strong:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:"autoplay controls loop preload src height width".split(" ")},t.getDefaultWhiteList=function(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","loop","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],sup:[],strong:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:"autoplay controls loop preload src height width".split(" ")}},t.onTag=function(e,t,r){},t.onIgnoreTag=function(e,t,r){},t.onTagAttr=function(e,t,r){},t.onIgnoreTagAttr=function(e,t,r){},t.safeAttrValue=function(e,t,r,n){if(r=u(r),"href"===t||"src"===t){if("#"===(r=d.trim(r)))return"#";if("http://"!==r.substr(0,7)&&"https://"!==r.substr(0,8)&&"mailto:"!==r.substr(0,7)&&"tel:"!==r.substr(0,4)&&"#"!==r[0]&&"/"!==r[0])return""}else if("background"===t){if(S.lastIndex=0,S.test(r))return""}else if("style"===t){if(_.lastIndex=0,_.test(r)||(x.lastIndex=0,x.test(r)&&(S.lastIndex=0,S.test(r))))return"";!1!==n&&(r=(n=n||f).process(r))}return r=c(r)},t.escapeHtml=n,t.escapeQuote=o,t.unescapeQuote=i,t.escapeHtmlEntities=a,t.escapeDangerHtml5Entities=s,t.clearNonPrintableCharacter=l,t.friendlyAttrValue=u,t.escapeAttrValue=c,t.onIgnoreTagStripAll=function(){return""},t.StripTagBody=function(e,t){"function"!=typeof t&&(t=function(){});var r=!Array.isArray(e),n=[],o=!1;return{onIgnoreTag:function(i,a,s){return r||-1!==d.indexOf(e,i)?s.isClosing?(n.push([!1!==o?o:s.position,s.position+10]),o=!1,"[/removed]"):(o||(o=s.position),"[removed]"):t(i,a,s)},remove:function(e){var t="",r=0;return d.forEach(n,function(n){t+=e.slice(r,n[0]),r=n[1]}),t+=e.slice(r)}}},t.stripCommentTag=function(e){return e.replace(O,"")},t.stripBlankChar=function(e){return e=e.split(""),(e=e.filter(function(e){return!(127===(e=e.charCodeAt(0))||31>=e&&10!==e&&13!==e)})).join("")},t.cssFilter=f,t.getDefaultCSSWhiteList=p},function(e,t){function r(){return{"align-content":!1,"align-items":!1,"align-self":!1,"alignment-adjust":!1,"alignment-baseline":!1,all:!1,"anchor-point":!1,animation:!1,"animation-delay":!1,"animation-direction":!1,"animation-duration":!1,"animation-fill-mode":!1,"animation-iteration-count":!1,"animation-name":!1,"animation-play-state":!1,"animation-timing-function":!1,azimuth:!1,"backface-visibility":!1,background:!0,"background-attachment":!0,"background-clip":!0,"background-color":!0,"background-image":!0,"background-origin":!0,"background-position":!0,"background-repeat":!0,"background-size":!0,"baseline-shift":!1,binding:!1,bleed:!1,"bookmark-label":!1,"bookmark-level":!1,"bookmark-state":!1,border:!0,"border-bottom":!0,"border-bottom-color":!0,"border-bottom-left-radius":!0,"border-bottom-right-radius":!0,"border-bottom-style":!0,"border-bottom-width":!0,"border-collapse":!0,"border-color":!0,"border-image":!0,"border-image-outset":!0,"border-image-repeat":!0,"border-image-slice":!0,"border-image-source":!0,"border-image-width":!0,"border-left":!0,"border-left-color":!0,"border-left-style":!0,"border-left-width":!0,"border-radius":!0,"border-right":!0,"border-right-color":!0,"border-right-style":!0,"border-right-width":!0,"border-spacing":!0,"border-style":!0,"border-top":!0,"border-top-color":!0,"border-top-left-radius":!0,"border-top-right-radius":!0,"border-top-style":!0,"border-top-width":!0,"border-width":!0,bottom:!1,"box-decoration-break":!0,"box-shadow":!0,"box-sizing":!0,"box-snap":!0,"box-suppress":!0,"break-after":!0,"break-before":!0,"break-inside":!0,"caption-side":!1,chains:!1,clear:!0,clip:!1,"clip-path":!1,"clip-rule":!1,color:!0,"color-interpolation-filters":!0,"column-count":!1,"column-fill":!1,"column-gap":!1,"column-rule":!1,"column-rule-color":!1,"column-rule-style":!1,"column-rule-width":!1,"column-span":!1,"column-width":!1,columns:!1,contain:!1,content:!1,"counter-increment":!1,"counter-reset":!1,"counter-set":!1,crop:!1,cue:!1,"cue-after":!1,"cue-before":!1,cursor:!1,direction:!1,display:!0,"display-inside":!0,"display-list":!0,"display-outside":!0,"dominant-baseline":!1,elevation:!1,"empty-cells":!1,filter:!1,flex:!1,"flex-basis":!1,"flex-direction":!1,"flex-flow":!1,"flex-grow":!1,"flex-shrink":!1,"flex-wrap":!1,float:!1,"float-offset":!1,"flood-color":!1,"flood-opacity":!1,"flow-from":!1,"flow-into":!1,font:!0,"font-family":!0,"font-feature-settings":!0,"font-kerning":!0,"font-language-override":!0,"font-size":!0,"font-size-adjust":!0,"font-stretch":!0,"font-style":!0,"font-synthesis":!0,"font-variant":!0,"font-variant-alternates":!0,"font-variant-caps":!0,"font-variant-east-asian":!0,"font-variant-ligatures":!0,"font-variant-numeric":!0,"font-variant-position":!0,"font-weight":!0,grid:!1,"grid-area":!1,"grid-auto-columns":!1,"grid-auto-flow":!1,"grid-auto-rows":!1,"grid-column":!1,"grid-column-end":!1,"grid-column-start":!1,"grid-row":!1,"grid-row-end":!1,"grid-row-start":!1,"grid-template":!1,"grid-template-areas":!1,"grid-template-columns":!1,"grid-template-rows":!1,"hanging-punctuation":!1,height:!0,hyphens:!1,icon:!1,"image-orientation":!1,"image-resolution":!1,"ime-mode":!1,"initial-letters":!1,"inline-box-align":!1,"justify-content":!1,"justify-items":!1,"justify-self":!1,left:!1,"letter-spacing":!0,"lighting-color":!0,"line-box-contain":!1,"line-break":!1,"line-grid":!1,"line-height":!1,"line-snap":!1,"line-stacking":!1,"line-stacking-ruby":!1,"line-stacking-shift":!1,"line-stacking-strategy":!1,"list-style":!0,"list-style-image":!0,"list-style-position":!0,"list-style-type":!0,margin:!0,"margin-bottom":!0,"margin-left":!0,"margin-right":!0,"margin-top":!0,"marker-offset":!1,"marker-side":!1,marks:!1,mask:!1,"mask-box":!1,"mask-box-outset":!1,"mask-box-repeat":!1,"mask-box-slice":!1,"mask-box-source":!1,"mask-box-width":!1,"mask-clip":!1,"mask-image":!1,"mask-origin":!1,"mask-position":!1,"mask-repeat":!1,"mask-size":!1,"mask-source-type":!1,"mask-type":!1,"max-height":!0,"max-lines":!1,"max-width":!0,"min-height":!0,"min-width":!0,"move-to":!1,"nav-down":!1,"nav-index":!1,"nav-left":!1,"nav-right":!1,"nav-up":!1,"object-fit":!1,"object-position":!1,opacity:!1,order:!1,orphans:!1,outline:!1,"outline-color":!1,"outline-offset":!1,"outline-style":!1,"outline-width":!1,overflow:!1,"overflow-wrap":!1,"overflow-x":!1,"overflow-y":!1,padding:!0,"padding-bottom":!0,"padding-left":!0,"padding-right":!0,"padding-top":!0,page:!1,"page-break-after":!1,"page-break-before":!1,"page-break-inside":!1,"page-policy":!1,pause:!1,"pause-after":!1,"pause-before":!1,perspective:!1,"perspective-origin":!1,pitch:!1,"pitch-range":!1,"play-during":!1,position:!1,"presentation-level":!1,quotes:!1,"region-fragment":!1,resize:!1,rest:!1,"rest-after":!1,"rest-before":!1,richness:!1,right:!1,rotation:!1,"rotation-point":!1,"ruby-align":!1,"ruby-merge":!1,"ruby-position":!1,"shape-image-threshold":!1,"shape-outside":!1,"shape-margin":!1,size:!1,speak:!1,"speak-as":!1,"speak-header":!1,"speak-numeral":!1,"speak-punctuation":!1,"speech-rate":!1,stress:!1,"string-set":!1,"tab-size":!1,"table-layout":!1,"text-align":!0,"text-align-last":!0,"text-combine-upright":!0,"text-decoration":!0,"text-decoration-color":!0,"text-decoration-line":!0,"text-decoration-skip":!0,"text-decoration-style":!0,"text-emphasis":!0,"text-emphasis-color":!0,"text-emphasis-position":!0,"text-emphasis-style":!0,"text-height":!0,"text-indent":!0,"text-justify":!0,"text-orientation":!0,"text-overflow":!0,"text-shadow":!0,"text-space-collapse":!0,"text-transform":!0,"text-underline-position":!0,"text-wrap":!0,top:!1,transform:!1,"transform-origin":!1,"transform-style":!1,transition:!1,"transition-delay":!1,"transition-duration":!1,"transition-property":!1,"transition-timing-function":!1,"unicode-bidi":!1,"vertical-align":!1,visibility:!1,"voice-balance":!1,"voice-duration":!1,"voice-family":!1,"voice-pitch":!1,"voice-range":!1,"voice-rate":!1,"voice-stress":!1,"voice-volume":!1,volume:!1,"white-space":!1,widows:!1,width:!0,"will-change":!1,"word-break":!0,"word-spacing":!0,"word-wrap":!0,"wrap-flow":!1,"wrap-through":!1,"writing-mode":!1,"z-index":!1}}var n=/javascript\s*\:/gim;t.whiteList=r(),t.getDefaultWhiteList=r,t.onAttr=function(e,t,r){},t.onIgnoreAttr=function(e,t,r){},t.safeAttrValue=function(e,t){return n.test(t)?"":t}},function(e,t){e.exports={indexOf:function(e,t){var r,n;if(Array.prototype.indexOf)return e.indexOf(t);for(r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1},forEach:function(e,t,r){var n,o;if(Array.prototype.forEach)return e.forEach(t,r);for(n=0,o=e.length;n<o;n++)t.call(r,e[n],n,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(e){return String.prototype.trimRight?e.trimRight():e.replace(/(\s*$)/g,"")}}},function(e,t,r){function n(e,t){for(;t<e.length;t++){var r=e[t];if(" "!==r)return"="===r?t:-1}}function o(e,t){for(;0<t;t--){var r=e[t];if(" "!==r)return"="===r?t:-1}}function i(e){return'"'===e[0]&&'"'===e[e.length-1]||"'"===e[0]&&"'"===e[e.length-1]?e.substr(1,e.length-2):e}var a=r(2),s=/[^a-zA-Z0-9_:\.\-]/gim;t.parseTag=function(e,t,r){for(var n="",o=0,i=!1,s=!1,l=0,u=e.length,c="",p="",l=0;l<u;l++)p=e.charAt(l),!1===i?"<"===p&&(i=l):!1===s?"<"===p?(n+=r(e.slice(o,l)),o=i=l):">"===p?(n+=r(e.slice(o,i)),o=p=e.slice(i,l+1),c=a.spaceIndex(o),o=-1===c?o.slice(1,-1):o.slice(1,c+1),"/"===(o=a.trim(o).toLowerCase()).slice(0,1)&&(o=o.slice(1)),"/"===o.slice(-1)&&(o=o.slice(0,-1)),c=o,n+=t(i,n.length,c,p,"</"===p.slice(0,2)),o=l+1,i=!1):'"'!==p&&"'"!==p||"="!==e.charAt(l-1)||(s=p):p===s&&(s=!1);return o<e.length&&(n+=r(e.substr(o))),n},t.parseAttr=function(e,t){function r(e,r){1>(e=(e=a.trim(e)).replace(s,"").toLowerCase()).length||(e=t(e,r||""))&&u.push(e)}for(var l=0,u=[],c=!1,p=e.length,d=0;d<p;d++){var f;if(f=e.charAt(d),!1!==c||"="!==f)if(!1===c||d!==l||'"'!==f&&"'"!==f||"="!==e.charAt(d-1))/\s|\n|\t/.test(f)&&(e=e.replace(/\s|\n|\t/g," "),!1===c?-1===(f=n(e,d))?(r(a.trim(e.slice(l,d))),c=!1,l=d+1):d=f-1:-1===(f=o(e,d-1))&&(r(c,i(a.trim(e.slice(l,d)))),c=!1,l=d+1));else{if(-1===(f=e.indexOf(f,d+1)))break;r(c,a.trim(e.slice(l+1,f))),c=!1,l=(d=f)+1}else c=e.slice(l,d),l=d+1}return l<e.length&&(!1===c?r(e.slice(l)):r(c,i(a.trim(e.slice(l))))),a.trim(u.join(" "))}},function(e,t){var r,n;t=Object.prototype;var o=Function.prototype.toString,i=t.hasOwnProperty,a=o.call(Object),s=t.toString,l=(r=Object.getPrototypeOf,n=Object,function(e){return r(n(e))});e.exports=function(e){var t;if(!(t=!e||"object"!=typeof e||"[object Object]"!=s.call(e))&&(t=!1,null!=e&&"function"!=typeof e.toString))try{t=!!(e+"")}catch(e){}return!t&&(null===(e=l(e))||"function"==typeof(e=i.call(e,"constructor")&&e.constructor)&&e instanceof e&&o.call(e)==a)}},function(e,t,r){r.r(t),r.d(t,"Sanitizer",function(){return i}),e=r(7);var n=r.n(e);e=r(0);var o=r.n(e),i=function(){function e(e,t){var r,n=this;this.arcgisWhiteList={a:["href","target","style"],img:"src width height border alt style".split(" "),video:"autoplay controls height loop muted poster preload src width".split(" "),audio:"autoplay controls loop muted preload src".split(" "),span:["style"],table:"width height cellpadding cellspacing border style".split(" "),div:["style","align"],font:["size","color","style"],tr:["height","valign","align","style"],td:"height width valign align colspan rowspan nowrap style".split(" "),th:"height width valign align colspan rowspan nowrap style".split(" "),p:["style"],b:[],strong:[],i:[],em:[],u:[],br:[],li:[],ul:[],ol:[],hr:[],tbody:[]},this.allowedProtocols="http https mailto iform tel flow lfmobile arcgis-navigator arcgis-appstudio-player arcgis-survey123 arcgis-collector arcgis-workforce arcgis-explorer arcgis-trek2there mspbi comgooglemaps pdfefile pdfehttp pdfehttps boxapp boxemm awb awbs gropen radarscope".split(" "),this.arcgisFilterOptions={allowCommentTag:!0,safeAttrValue:function(e,t,r,i){return"a"===e&&"href"===t||("img"===e||"audio"===e||"video"===e)&&"src"===t?n.sanitizeUrl(r):o.a.safeAttrValue(e,t,r,i)}},e&&!t?r=e:e&&t?(r=Object.create(this.arcgisFilterOptions),Object.keys(e).forEach(function(t){"whiteList"===t?r.whiteList=n._extendObjectOfArrays([n.arcgisWhiteList,e.whiteList||{}]):r[t]=e[t]})):(r=Object.create(this.arcgisFilterOptions)).whiteList=this.arcgisWhiteList,this.xssFilterOptions=r,this._xssFilter=new o.a.FilterXSS(r)}return e.prototype.sanitize=function(e){switch(typeof e){case"number":return isNaN(e)||!isFinite(e)?null:e;case"boolean":return e;case"string":return this._xssFilter.process(e);case"object":return this._iterateOverObject(e);default:return null}},e.prototype.sanitizeUrl=function(e){var t=this._trim(e.substring(0,e.indexOf(":")));return"/"===e||"#"===e||"#"===e[0]||-1<this.allowedProtocols.indexOf(t.toLowerCase())?o.a.escapeAttrValue(e):""},e.prototype.validate=function(e){var t=this.sanitize(e);return{isValid:e===t,sanitized:t}},e.prototype._extendObjectOfArrays=function(e){var t={};return e.forEach(function(e){Object.keys(e).forEach(function(r){Array.isArray(e[r])&&Array.isArray(t[r])?t[r]=t[r].concat(e[r]):t[r]=e[r]})}),t},e.prototype._iterateOverObject=function(e){var t=this;try{var r=!1,o=void 0;if(Array.isArray(e))o=e.reduce(function(e,n){var o=t.validate(n);return o.isValid?e.concat([n]):(r=!0,e.concat([o.sanitized]))},[]);else{if(!n()(e))return null;o=Object.keys(e).reduce(function(n,o){var i=e[o],a=t.validate(i);return a.isValid?n[o]=i:(r=!0,n[o]=a.sanitized),n},{})}return r?o:e}catch(e){return null}},e.prototype._trim=function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},e}()},function(e,t,r){function n(e){var t,r=e||{},n={};for(t in r)n[t]=r[t];(e=n).whiteList=e.whiteList||o.whiteList,e.onAttr=e.onAttr||o.onAttr,e.onIgnoreAttr=e.onIgnoreAttr||o.onIgnoreAttr,e.safeAttrValue=e.safeAttrValue||o.safeAttrValue,this.options=e}var o=r(4),i=r(10);r(5),n.prototype.process=function(e){if(!(e=(e=e||"").toString()))return"";var t=this.options,r=t.whiteList,n=t.onAttr,o=t.onIgnoreAttr,a=t.safeAttrValue;return i(e,function(e,t,i,s,l){var u=r[i],c=!1;if(!0===u?c=u:"function"==typeof u?c=u(s):u instanceof RegExp&&(c=u.test(s)),!0!==c&&(c=!1),s=a(i,s)){var p;return e={position:t,sourcePosition:e,source:l,isWhite:c},c?null==(p=n(i,s,e))?i+":"+s:p:null==(p=o(i,s,e))?void 0:p}})},e.exports=n},function(e,t,r){var n=r(5);e.exports=function(e,t){function r(){if(!i){var r=n.trim(e.slice(a,s)),o=r.indexOf(":");if(-1!==o){var u=n.trim(r.slice(0,o)),o=n.trim(r.slice(o+1));u&&(r=t(a,l.length,u,o,r))&&(l+=r+"; ")}}a=s+1}";"!==(e=n.trimRight(e))[e.length-1]&&(e+=";");for(var o=e.length,i=!1,a=0,s=0,l="";s<o;s++){var u=e[s];if("/"===u&&"*"===e[s+1]){if(-1===(u=e.indexOf("*/",s+2)))break;a=(s=u+1)+1,i=!1}else"("===u?i=!0:")"===u?i=!1:";"===u?i||r():"\n"===u&&r()}return n.trim(l)}},function(e,t,r){function n(e){var t,r=e||{},n={};for(t in r)n[t]=r[t];(e=n).stripIgnoreTag&&(e.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),e.onIgnoreTag=i.onIgnoreTagStripAll),e.whiteList=e.whiteList||i.whiteList,e.onTag=e.onTag||i.onTag,e.onTagAttr=e.onTagAttr||i.onTagAttr,e.onIgnoreTag=e.onIgnoreTag||i.onIgnoreTag,e.onIgnoreTagAttr=e.onIgnoreTagAttr||i.onIgnoreTagAttr,e.safeAttrValue=e.safeAttrValue||i.safeAttrValue,e.escapeHtml=e.escapeHtml||i.escapeHtml,this.options=e,!1===e.css?this.cssFilter=!1:(e.css=e.css||{},this.cssFilter=new o(e.css))}var o=r(1).FilterCSS,i=r(3);t=r(6);var a=t.parseTag,s=t.parseAttr,l=r(2);n.prototype.process=function(e){if(!(e=(e=e||"").toString()))return"";var t=this.options,r=t.whiteList,n=t.onTag,o=t.onIgnoreTag,u=t.onTagAttr,c=t.onIgnoreTagAttr,p=t.safeAttrValue,d=t.escapeHtml,f=this.cssFilter;t.stripBlankChar&&(e=i.stripBlankChar(e)),t.allowCommentTag||(e=i.stripCommentTag(e));var h=!1;return t.stripIgnoreTagBody&&(h=i.StripTagBody(t.stripIgnoreTagBody,o),o=h.onIgnoreTag),e=a(e,function(e,t,i,a,h){if(t={sourcePosition:e,position:t,isClosing:h,isWhite:r.hasOwnProperty(i)},null!=(e=n(i,a,t)))return e;if(t.isWhite){if(t.isClosing)return"</"+i+">";e=function(e){var t=l.spaceIndex(e);return-1===t?{html:"",closing:"/"===e[e.length-2]}:(t="/"===(e=l.trim(e.slice(t+1,-1)))[e.length-1],t&&(e=l.trim(e.slice(0,-1))),{html:e,closing:t})}(a);var y=r[i];return t=s(e.html,function(e,t){var r,n=-1!==l.indexOf(y,e);return null==(r=u(i,e,t,n))?n?(t=p(i,e,t,f))?e+'="'+t+'"':e:null==(r=c(i,e,t,n))?void 0:r:r}),a="<"+i,t&&(a+=" "+t),e.closing&&(a+=" /"),a+=">"}return null==(e=o(i,a,t))?d(a):e},d),h&&(e=h.remove(e)),e},e.exports=n}]).Sanitizer})},"maquette-css-transitions/dist/maquette-css-transitions.umd":function(){!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):(e=e||self,t(e.maquetteCssTransitions={}))}(this,function(e){var t,r,n=function(e){if("WebkitTransition"in e.style)t="webkitTransitionEnd",r="webkitAnimationEnd";else{if(!("transition"in e.style))throw Error("Your browser is not supported!");t="transitionend",r="animationend"}};e.createEnterCssTransition=function(e,o){return void 0===o&&(o=e+"-active"),function(i){t||n(i);var a=!1,s=function(n){a||(a=!0,i.removeEventListener(t,s),i.removeEventListener(r,s),i.classList.remove(e),i.classList.remove(o))};i.classList.add(e),i.addEventListener(t,s),i.addEventListener(r,s),requestAnimationFrame(function(){i.classList.add(o)})}},e.createExitCssTransition=function(e,o){return void 0===o&&(o=e+"-active"),function(i,a){t||n(i);var s=!1,l=function(e){s||(s=!0,i.removeEventListener(t,l),i.removeEventListener(r,l),a())};i.classList.add(e),i.addEventListener(t,l),i.addEventListener(r,l),requestAnimationFrame(function(){i.classList.add(o)})}},Object.defineProperty(e,"__esModule",{value:!0})})},"esri/widgets/support/shim/SVGElement":function(){define(["require","exports","../../../core/has"],function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),r.add("esri-svg-classlist","classList"in SVGElement.prototype);var n=function(){function e(e){this._node=e}return e.prototype.add=function(e){var t=this._node;t.className.baseVal=(t.className.baseVal+" "+e).trim()},e.prototype.contains=function(e){return-1<this._node.className.baseVal.split(" ").indexOf(e)},e.prototype.remove=function(e){for(var t=this._node,r="",n=0,o=t.className.baseVal.split(" ");n<o.length;n++){var i=o[n];i!==e&&(r+=i+" ")}t.className.baseVal=r.trim()},e.prototype.toggle=function(e,t){var r,n=this.contains(e);return(r=n?!0!==t&&"remove":!1!==t&&"add")&&this[r](e),void 0!==t?t:!n},e}();t.DOMTokenListSubset=n,r("esri-svg-classlist")||Object.defineProperty(SVGElement.prototype,"classList",{get:function(){return new n(this)}})})},"esri/views/overlay/ViewOverlay":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/Collection ../../core/accessorSupport/decorators ../../libs/maquette/index ../support/WatchUpdatingTracking".split(" "),function(e,t,r,n,o,i,a,s,l){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.items=new i,t._watchUpdatingTracking=new l.WatchUpdatingTracking,t._callbacks=new Map,t._projector=s.createProjector(),t._hiddenProjector=s.createProjector(),t}return r(t,e),Object.defineProperty(t.prototype,"needsRender",{get:function(){return 0<this.items.length},enumerable:!0,configurable:!0}),t.prototype.initialize=function(){var e=this,t=document.createElement("div");t.className="esri-overlay-surface",this._set("surface",t),this._hiddenSurface=document.createElement("div"),this._hiddenSurface.setAttribute("style","visibility: hidden;"),t.appendChild(this._hiddenSurface),this._watchUpdatingTracking.addOnCollectionChange(this.items,function(t){t.added.map(function(t){var r=function(){return t.render()};e._callbacks.set(t,r),e._projector.append(e.surface,r)}),t.removed.map(function(t){var r=e._projector.detach(e._callbacks.get(t));e.surface.removeChild(r.domNode),e._callbacks.delete(t)})})},t.prototype.addItem=function(e){this.items.add(e)},t.prototype.removeItem=function(e){this.items.remove(e)},t.prototype.destroy=function(){this.items.removeAll(),this._projector=this._callbacks=null,this._watchUpdatingTracking.destroy()},t.prototype.render=function(){this._projector.renderNow()},t.prototype.computeBoundingRect=function(e){var t=this._hiddenSurface,r=this._hiddenProjector,n=null,o=function(){return n=e.render()};r.append(t,o),r.renderNow();var i={left:0,top:0,right:0,bottom:0};if(n&&n.domNode){var a=n.domNode.getBoundingClientRect();i.left=a.left,i.top=a.top,i.right=a.right,i.bottom=a.bottom}for(r.detach(o);t.firstChild;)t.removeChild(t.firstChild);return i},t.prototype.overlaps=function(e,t){return e=this.computeBoundingRect(e),t=this.computeBoundingRect(t),Math.max(e.left,t.left)<=Math.min(e.right,t.right)&&Math.max(e.top,t.top)<=Math.min(e.bottom,t.bottom)},Object.defineProperty(t.prototype,"hasVisibleItems",{get:function(){return this.items.some(function(e){return e.visible})},enumerable:!0,configurable:!0}),t.prototype.renderCanvas=function(e){if(this.items.some(function(e){return e.visible})){var t=e.getContext("2d");t.save(),t.font="10px "+getComputedStyle(this.surface).fontFamily,this.items.forEach(function(e){t.save(),e.renderCanvas(t),t.restore()}),t.restore()}},n([a.property({readOnly:!0})],t.prototype,"surface",void 0),n([a.property({readOnly:!0})],t.prototype,"items",void 0),n([a.property({readOnly:!0,dependsOn:["items.length"]})],t.prototype,"needsRender",null),n([a.property({readOnly:!0})],t.prototype,"_watchUpdatingTracking",void 0),n([a.property({readOnly:!0,aliasOf:"_watchUpdatingTracking.updating"})],t.prototype,"updating",void 0),t=n([a.subclass("esri.views.overlay.ViewOverlay")],t)}(a.declared(o))})},"esri/libs/maquette/index":function(){define("require exports ./dom ./h ./projector ./cache ./mapping".split(" "),function(e,t,r,n,o,i,a){Object.defineProperty(t,"__esModule",{value:!0}),t.dom=r.dom,t.h=n.h,t.createProjector=o.createProjector,t.createCache=i.createCache,t.createMapping=a.createMapping})},"esri/libs/maquette/dom":function(){define(["require","exports","./projection"],function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n={namespace:void 0,performanceLogger:function(){},eventHandlerInterceptor:void 0,styleApplyer:function(e,t,r){e.style[t]=r}};t.applyDefaultProjectionOptions=function(e){return r.extend(n,e)},t.dom={create:function(e,n){return n=t.applyDefaultProjectionOptions(n),r.createDom(e,document.createElement("div"),void 0,n),r.createProjection(e,n)},append:function(e,n,o){return o=t.applyDefaultProjectionOptions(o),r.createDom(n,e,void 0,o),r.createProjection(n,o)},insertBefore:function(e,n,o){return o=t.applyDefaultProjectionOptions(o),r.createDom(n,e.parentNode,e,o),r.createProjection(n,o)},merge:function(e,n,o){return o=t.applyDefaultProjectionOptions(o),n.domNode=e,r.initPropertiesAndChildren(e,n,o),r.createProjection(n,o)},replace:function(e,n,o){return o=t.applyDefaultProjectionOptions(o),r.createDom(n,e.parentNode,e,o),e.parentNode.removeChild(e),r.createProjection(n,o)}}})},"esri/libs/maquette/projection":function(){define(["require","exports","../../widgets/support/widgetUtils"],function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=[];t.extend=function(e,t){var r={};return Object.keys(e).forEach(function(t){r[t]=e[t]}),t&&Object.keys(t).forEach(function(e){r[e]=t[e]}),r};var o=function(e,t){return e.vnodeSelector===t.vnodeSelector&&(e.properties&&t.properties?e.properties.key===t.properties.key&&e.properties.bind===t.properties.bind:!e.properties&&!t.properties)},i=function(e){if("string"!=typeof e)throw Error("Style values must be strings")},a=function(e,t,r,n){var i=e[t];if(""!==i.vnodeSelector){var a=i.properties;if(!(a&&(void 0===a.key?a.bind:a.key)))for(a=0;a<e.length;a++)if(a!==t&&o(e[a],i))throw Error(r.vnodeSelector+" had a "+i.vnodeSelector+" child "+("added"===n?n:"removed")+", but there is now more than one. You must add unique key properties to make them distinguishable.")}},s=[],l=!1,u=function(e){(e.children||[]).forEach(u),e.properties&&e.properties.afterRemoved&&e.properties.afterRemoved.apply(e.properties.bind||e.properties,[e.domNode])},c=function(){l=!1,s.forEach(u),s.length=0},p=function(e){s.push(e),l||(l=!0,"undefined"!=typeof window&&"requestIdleCallback"in window?window.requestIdleCallback(c,{timeout:16}):setTimeout(c,16))},d=function(e){var t=e.domNode;if(e.properties){var r=e.properties.exitAnimation;if(r)return t.style.pointerEvents="none",void r(t,function(){t.parentNode&&(t.parentNode.removeChild(t),p(e))},e.properties)}t.parentNode&&(t.parentNode.removeChild(t),p(e))},f=function(e,t,n){if(t)for(var o=n.eventHandlerInterceptor,a=Object.keys(t),s=a.length,l=function(s){s=a[s];var l=t[s];if("className"===s)throw Error('Property "className" is not supported, use "class".');if("class"===s)y(e,l,!0);else if("classes"===s){var u=Object.keys(l),c=u.length;for(s=0;s<c;s++){var p=u[s];l[p]&&e.classList.add(p)}}else if("styles"===s)for(u=Object.keys(l),c=u.length,s=0;s<c;s++){var p=u[s],d=l[p];d&&(i(d),n.styleApplyer(e,p,d))}else"key"!==s&&null!==l&&void 0!==l&&(u=typeof l,"function"===u?0===s.lastIndexOf("on",0)&&(o&&(l=o(s,l,e,t)),"oninput"===s&&function(){var e=l;l=function(t){e.apply(this,[t]),t.target["oninput-value"]=t.target.value}}(),e[s]=l):"http://www.w3.org/2000/svg"===n.namespace?"href"===s?e.setAttributeNS("http://www.w3.org/1999/xlink",s,l):e.setAttribute(s,l):"string"===u&&"value"!==s?"innerHTML"===s?e[s]=r.sanitizer.sanitize(l):e.setAttribute(s,l):e[s]=l)},u=0;u<s;u++)l(u)};t.initPropertiesAndChildren=function(e,r,n){var o=r.children;if(o)for(var i=0;i<o.length;i++)t.createDom(o[i],e,void 0,n);r.text&&(e.textContent=r.text),f(e,r.properties,n),r.properties&&r.properties.afterCreate&&r.properties.afterCreate.apply(r.properties.bind||r.properties,[e,n,r.vnodeSelector,r.properties,r.children])},t.createDom=function(e,r,n,o){var i,a=0,s=e.vnodeSelector,l=r.ownerDocument;if(""===s)i=e.domNode=l.createTextNode(e.text),void 0!==n?r.insertBefore(i,n):r.appendChild(i);else{for(var u=0;u<=s.length;++u){var c=s.charAt(u);u!==s.length&&"."!==c&&"#"!==c||(c=s.charAt(a-1),a=s.slice(a,u),"."===c?i.classList.add(a):"#"===c?i.id=a:("svg"===a&&(o=t.extend(o,{namespace:"http://www.w3.org/2000/svg"})),void 0!==o.namespace?i=e.domNode=l.createElementNS(o.namespace,a):(i=e.domNode=e.domNode||l.createElement(a),"input"===a&&e.properties&&void 0!==e.properties.type&&i.setAttribute("type",e.properties.type)),void 0!==n?r.insertBefore(i,n):i.parentNode!==r&&r.appendChild(i)),a=u+1)}t.initPropertiesAndChildren(i,e,o)}};var h,y=function(e,t,r){t&&t.split(" ").forEach(function(t){t&&e.classList.toggle(t,r)})};h=function(e,s,l){var u=e.domNode;if(e===s)return!1;var c=!1;if(""===s.vnodeSelector){if(s.text!==e.text)return e=u.ownerDocument.createTextNode(s.text),u.parentNode.replaceChild(e,u),s.domNode=e,!0;s.domNode=u}else{0===s.vnodeSelector.lastIndexOf("svg",0)&&(l=t.extend(l,{namespace:"http://www.w3.org/2000/svg"})),e.text!==s.text&&(c=!0,void 0===s.text?u.removeChild(u.firstChild):u.textContent=s.text),s.domNode=u;var p;p=e.children;var f=s.children,m=l;if(p===f)p=!1;else{p=p||n;for(var f=f||n,g=p.length,v=f.length,b=0,w=0,S=!1;w<v;){var _=b<g?p[b]:void 0,x=f[w];if(void 0!==_&&o(_,x))S=h(_,x,m)||S,b++;else{e:{var _=p,O=x;if(""!==O.vnodeSelector)for(var C=b+1;C<_.length;C++)if(o(_[C],O)){_=C;break e}_=-1}if(0<=_){for(;b<_;b++)d(p[b]),a(p,b,s,"removed");S=h(p[_],x,m)||S,b=_+1}else t.createDom(x,u,b<g?p[b].domNode:void 0,m),x.properties&&(_=x.properties.enterAnimation)&&_(x.domNode,x.properties),a(f,w,s,"added")}w++}if(g>b)for(;b<g;b++)d(p[b]),a(p,b,s,"removed");p=S}if(c=p||c,p=e.properties,f=s.properties,m=l,f){for(g=!1,v=Object.keys(f),w=v.length,S=0;S<w;S++)if(_=v[S],x=f[_],b=p[_],"class"===_)b!==x&&(y(u,b,!1),y(u,x,!0));else if("classes"===_)for(var O=u.classList,C=Object.keys(x),M=C.length,_=0;_<M;_++){var T=C[_],P=!!x[T];P!==!!b[T]&&(g=!0,P?O.add(T):O.remove(T))}else if("styles"===_)for(O=Object.keys(x),C=O.length,_=0;_<C;_++)M=O[_],(T=x[M])!==b[M]&&(g=!0,T?(i(T),m.styleApplyer(u,M,T)):m.styleApplyer(u,M,""));else x||"string"!=typeof b||(x=""),"value"===_?(O=u[_],O!==x&&(u["oninput-value"]?O===u["oninput-value"]:x!==b)&&(u[_]=x,u["oninput-value"]=void 0),x!==b&&(g=!0)):x!==b&&("function"===(b=typeof x)&&m.eventHandlerInterceptor||("http://www.w3.org/2000/svg"===m.namespace?"href"===_?u.setAttributeNS("http://www.w3.org/1999/xlink",_,x):u.setAttribute(_,x):"string"===b?"innerHTML"===_?u[_]=r.sanitizer.sanitize(x):"role"===_&&""===x?u.removeAttribute(_):u.setAttribute(_,x):u[_]!==x&&(u[_]=x),g=!0));p=g}else p=void 0;c=p||c,s.properties&&s.properties.afterUpdate&&s.properties.afterUpdate.apply(s.properties.bind||s.properties,[u,l,s.vnodeSelector,s.properties,s.children])}return c&&s.properties&&s.properties.updateAnimation&&s.properties.updateAnimation(u,s.properties,e.properties),!1},t.createProjection=function(e,t){return{getLastRender:function(){return e},update:function(r){if(e.vnodeSelector!==r.vnodeSelector)throw Error("The selector for the root VNode may not be changed. (consider using dom.merge and add one extra level to the virtual DOM)");var n=e;e=r,h(n,r,t)},domNode:e.domNode}}})},"esri/libs/maquette/h":function(){define(["require","exports"],function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t,n){for(var o=0,i=t.length;o<i;o++){var a=t[o];Array.isArray(a)?r(e,a,n):null!==a&&void 0!==a&&!1!==a&&("string"==typeof a&&(a={vnodeSelector:"",properties:void 0,children:void 0,text:a.toString(),domNode:null}),n.push(a))}};t.h=function(e,t,n){if(Array.isArray(t))n=t,t=void 0;else if(t&&("string"==typeof t||t.hasOwnProperty("vnodeSelector"))||n&&("string"==typeof n||n.hasOwnProperty("vnodeSelector")))throw Error("h called with invalid arguments");var o,i;return n&&1===n.length&&"string"==typeof n[0]?o=n[0]:n&&(i=[],r(e,n,i),0===i.length&&(i=void 0)),{vnodeSelector:e,properties:t,children:i,text:""===o?void 0:o,domNode:null}}})},"esri/libs/maquette/projector":function(){define(["require","exports","./dom"],function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n;n=Array.prototype.find?function(e,t){return e.find(t)}:function(e,t){return e.filter(t)[0]};var o=function(e,t){var r=e;return t.forEach(function(e){r=r&&r.children?n(r.children,function(t){return t.domNode===e}):void 0}),r},i=function(e,t,r){var n=function(n){r("domEvent",n);var i,a=t();i=n.currentTarget;for(var s=a.domNode,l=[];i!==s;)l.push(i),i=i.parentNode;i=l,i.reverse(),a=o(a.getLastRender(),i),e.scheduleRender();var u;return a&&(u=a.properties["on"+n.type].apply(a.properties.bind||this,arguments)),r("domEventProcessed",n),u};return function(e,t,r,o){return n}};t.createProjector=function(e){var t,n,o=r.applyDefaultProjectionOptions(e),a=o.performanceLogger,s=!0,l=!1,u=[],c=[],p=function(e,r,n){var s;o.eventHandlerInterceptor=i(t,function(){return s},a),s=e(r,n(),o),u.push(s),c.push(n)},d=function(){if(n=void 0,s){s=!1,a("renderStart",void 0);for(var e=0;e<u.length;e++){var t=c[e]();a("rendered",void 0),u[e].update(t),a("patched",void 0)}a("renderDone",void 0),s=!0}};return t={renderNow:d,scheduleRender:function(){n||l||(n=requestAnimationFrame(d))},stop:function(){n&&(cancelAnimationFrame(n),n=void 0),l=!0},resume:function(){l=!1,s=!0,t.scheduleRender()},append:function(e,t){p(r.dom.append,e,t)},insertBefore:function(e,t){p(r.dom.insertBefore,e,t)},merge:function(e,t){p(r.dom.merge,e,t)},replace:function(e,t){p(r.dom.replace,e,t)},detach:function(e){for(var t=0;t<c.length;t++)if(c[t]===e)return c.splice(t,1),u.splice(t,1)[0];throw Error("renderFunction was not found")}}}})},"esri/libs/maquette/cache":function(){define(["require","exports"],function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.createCache=function(){var e,t;return{invalidate:function(){e=t=void 0},result:function(r,n){if(e)for(var o=0;o<r.length;o++)e[o]!==r[o]&&(t=void 0);return t||(t=n(),e=r),t}}}})},"esri/libs/maquette/mapping":function(){define(["require","exports"],function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.createMapping=function(e,t,r){var n=[],o=[];return{results:o,map:function(i){for(var a=i.map(e),s=o.slice(),l=0,u=0;u<i.length;u++){var c=i[u],p=a[u];if(p===n[l])o[u]=s[l],r(c,s[l],u),l++;else{for(var d=!1,f=1;f<n.length+1;f++){var h=(l+f)%n.length;if(n[h]===p){o[u]=s[h],r(i[u],s[h],u),l=h+1,d=!0;break}}d||(o[u]=t(c,u))}}o.length=i.length,n=a}}}})},"esri/widgets/Popup":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/assignHelper ../core/tsSupport/generatorHelper ../core/tsSupport/awaiterHelper dojo/i18n!../nls/common dojo/i18n!./Popup/nls/Popup ../intl ../core/events ../core/Handles ../core/Logger ../core/promiseUtils ../core/watchUtils ../core/accessorSupport/decorators ./Spinner ./Widget ./Popup/PopupViewModel ./support/widget ./support/widgetUtils".split(" "),function(e,t,r,n,o,i,a,s,l,u,c,p,d,f,h,y,m,g,v,b,w){function S(e,t){return void 0===t?"esri-popup__"+e:"esri-popup__"+e+"-"+t}function _(){return a(this,void 0,void 0,function(){return i(this,function(t){return[2,f.create(function(t){e(["./Feature"],function(e){t(e)})})]})})}var x={buttonEnabled:!0,position:"auto",breakpoint:{width:544}},O=d.getLogger("esri.widgets.Popup");return function(e){function t(t){var r=e.call(this,t)||this;return r._blurContainer=!1,r._containerNode=null,r._mainContainerNode=null,r._featureMenuNode=null,r._actionsMenuNode=null,r._focusContainer=!1,r._focusDockButton=!1,r._focusFeatureMenuButton=!1,r._focusActionsMenuButton=!1,r._focusFirstFeature=!1,r._focusFirstAction=!1,r._handles=new p,r._pointerOffsetInPx=16,r._spinner=null,r.actions=null,r.alignment="auto",r.autoCloseEnabled=null,r.autoOpenEnabled=null,r.defaultPopupTemplateEnabled=null,r.content=null,r.collapsed=!1,r.collapseEnabled=!0,r.dockEnabled=!1,r.featureCount=null,r.featureMenuOpen=!1,r.features=null,r.featureNavigationEnabled=!0,r.goToOverride=null,r.highlightEnabled=null,r.location=null,r.featureWidgets=[],r.label=l.widgetLabel,r.promises=null,r.selectedFeature=null,r.selectedFeatureIndex=null,r.selectedFeatureWidget=null,r.spinnerEnabled=!0,r.title=null,r.updateLocationEnabled=null,r.view=null,r.viewModel=new v,r.visible=null,r._addSelectedFeatureIndexHandle(),r.own([h.watch(r,"viewModel.screenLocation",function(){return r._positionContainer()}),h.whenFalse(r,"viewModel.visible",function(){return r.selectedFeatureWidget&&r.selectedFeatureWidget.destroyCharts()}),h.watch(r,["viewModel.visible","dockEnabled"],function(){return r._toggleScreenLocationEnabled()}),h.watch(r,"viewModel.screenLocation",function(e,t){!!e!=!!t&&r.reposition()}),h.watch(r,"viewModel.features",function(){return r._updateFeatureWidgets()}),h.watch(r,"viewModel.view.padding viewModel.view.size viewModel.visible viewModel.waitingForResult viewModel.location alignment".split(" "),function(){return r.reposition()}),h.watch(r,"spinnerEnabled",function(e){return r._spinnerEnabledChange(e)}),h.watch(r,"viewModel.view.size",function(e,t){return r._updateDockEnabledForViewSize(e,t)}),h.watch(r,"viewModel.view",function(e,t){return r._viewChange(e,t)}),h.watch(r,"viewModel.view.ready",function(e,t){return r._viewReadyChange(e,t)}),h.watch(r,["viewModel.waitingForResult","viewModel.location"],function(){return r._displaySpinner()}),h.watch(r,["featureWidgets","viewModel.selectedFeatureIndex"],function(){return r._updateFeatureWidget()}),h.watch(r,"selectedFeatureWidget.viewModel.title",function(e){return r._setTitleFromFeatureWidget(e)}),h.watch(r,["selectedFeatureWidget.viewModel.content","selectedFeatureWidget.viewModel.waitingForContent"],function(){return r._setContentFromFeatureWidget()}),h.whenFalse(r,"collapsed",function(){"xsmall"===r.get("viewModel.view.widthBreakpoint")&&r.visible&&r.collapseEnabled&&r.viewModel.centerAtLocation()}),h.on(r,"viewModel.allActions","change",function(){return r._watchActions()}),h.init(r,"viewModel.allActions",function(){return r._watchActions()})]),r}return r(t,e),t.prototype.destroy=function(){this._destroyFeatureWidgets(),this._destroySpinner(),this._handles&&this._handles.destroy(),this._handles=null},Object.defineProperty(t.prototype,"actionsMenuOpen",{get:function(){return!!this.viewModel.visible&&this._get("actionsMenuOpen")},set:function(e){this._set("actionsMenuOpen",!!e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentAlignment",{get:function(){return this._getCurrentAlignment()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentDockPosition",{get:function(){return this._getCurrentDockPosition()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dockOptions",{get:function(){return this._get("dockOptions")||x},set:function(e){var t=o({},x),r=this.get("viewModel.view.breakpoints"),n={};r&&(n.width=r.xsmall,n.height=r.xsmall),e=o({},t,e),t=o({},t.breakpoint,n),n=e.breakpoint,!0===n?e.breakpoint=t:"object"==typeof n&&(e.breakpoint=o({},t,n)),this._set("dockOptions",e),this._setCurrentDockPosition(),this.reposition()},enumerable:!0,configurable:!0}),t.prototype.blur=function(){this.visible||O.warn("Popup cannot be blurred while visible is false"),this._blurContainer=!0,this.scheduleRender()},t.prototype.clear=function(){this.viewModel.clear()},t.prototype.close=function(){this.visible=!1},t.prototype.focus=function(){this.visible||O.warn("Popup cannot be focused while visible is false"),this._focusContainer=!0,this.scheduleRender()},t.prototype.next=function(){return this.viewModel.next()},t.prototype.open=function(e){this._handles.remove("selected-index");var t={collapsed:!!e&&!!e.collapsed,actionsMenuOpen:!!e&&!!e.actionsMenuOpen,featureMenuOpen:!!e&&!!e.featureMenuOpen};"xsmall"===this.get("viewModel.view.widthBreakpoint")&&(t.collapsed=!0),this.set(t),this.viewModel.open(e),this._addSelectedFeatureIndexHandle()},t.prototype.previous=function(){return this.viewModel.previous()},t.prototype.reposition=function(){this.renderNow(),this._positionContainer(),this._setCurrentAlignment()},t.prototype.triggerAction=function(e){this.viewModel.triggerAction(e)},t.prototype.render=function(){var e,t,r,n,o,i,a,c=this,p=this.actionsMenuOpen,d=this.collapsed,f=this.collapseEnabled,h=this.dockEnabled,y=this.featureMenuOpen,m=this.featureNavigationEnabled,g=this.featureWidgets,v=this.visible,_=this.viewModel,x=_.content,O=_.featureCount,C=_.pendingPromisesCount,M=_.selectedFeatureIndex,T=_.title,P=v&&1<O&&m,I=P?2:3,m=this._divideActions(I),E=m.inlineActions,j=m.menuActions,m=P&&y,_=1<j.length&&p,k=P&&this._getPageText(O,M),A=this._renderContent(),L=w.isRTL(),F=!!(this.get("selectedFeatureWidget")?this.get("selectedFeatureWidget.viewModel.waitingForContent")||this.get("selectedFeatureWidget.viewModel.content"):A),N=(f=!!(f&&T&&F))&&!m&&d,R=this.get("viewModel.view.widthBreakpoint"),D=h?l.undock:l.dock,d=this.currentAlignment,O=this.currentDockPosition,C=C?b.tsx("div",{key:S("loading-container"),role:"presentation",class:"esri-popup__loading-container","aria-label":s.loading,title:s.loading},b.tsx("span",{"aria-hidden":"true",class:this.classes("esri-popup__icon","esri-icon-loading-indicator","esri-rotating")})):null,U=(e={},e["esri-icon-right-triangle-arrow"]=L,e["esri-popup__pagination-previous-icon--rtl"]=L,e["esri-icon-left-triangle-arrow"]=!L,e["esri-popup__pagination-previous-icon"]=!L,e);return e=b.tsx("span",{"aria-hidden":"true",class:this.classes("esri-popup__icon",U)}),U=b.tsx("div",{role:"button",tabIndex:0,bind:this,onclick:this._previous,onkeydown:this._previous,class:this.classes("esri-popup__button","esri-popup__pagination-previous"),"aria-label":l.previous,title:l.previous},e),t={},t["esri-icon-left-triangle-arrow"]=L,t["esri-popup__pagination-next-icon--rtl"]=L,t["esri-icon-right-triangle-arrow"]=!L,t["esri-popup__pagination-next-icon"]=!L,e=t,t=b.tsx("span",{"aria-hidden":"true",class:this.classes("esri-popup__icon",e)}),L=b.tsx("div",{role:"button",tabIndex:0,bind:this,onclick:this._next,onkeydown:this._next,class:this.classes("esri-popup__button","esri-popup__pagination-next"),"aria-label":l.next,title:l.next},t),e=w.cssTransition("enter","esri-popup--feature-updated"),t=this.id+"-feature-menu",y=b.tsx("div",{role:"button",tabIndex:0,bind:this,onclick:this._toggleFeatureMenu,onkeydown:this._toggleFeatureMenu,afterCreate:this._focusFeatureMenuButtonNode,afterUpdate:this._focusFeatureMenuButtonNode,class:this.classes("esri-popup__button","esri-popup__feature-menu-button"),"aria-haspopup":"true","aria-controls":t,"aria-expanded":y,"aria-label":s.menu,title:s.menu},k),k=P?[U,C||y,L]:null,y=this._wouldDockTo(),r={},r["esri-icon-minimize"]=h,r["esri-popup__icon--dock-icon"]=!h,r["esri-icon-dock-right"]=!h&&("top-right"===y||"bottom-right"===y),r["esri-icon-dock-left"]=!h&&("top-left"===y||"bottom-left"===y),r["esri-icon-maximize"]=!h&&"top-center"===y,r["esri-icon-dock-bottom"]=!h&&"bottom-center"===y,y=r,r=b.tsx("span",{"aria-hidden":"true",class:this.classes(y,"esri-popup__icon")}),r="xsmall"!==R&&this.get("dockOptions.buttonEnabled")?b.tsx("div",{role:"button","aria-label":D,title:D,tabIndex:0,bind:this,onclick:this._toggleDockEnabled,onkeydown:this._toggleDockEnabled,afterCreate:this._focusDockButtonNode,afterUpdate:this._focusDockButtonNode,class:this.classes("esri-popup__button","esri-popup__button--dock")},r):null,n={},n["esri-popup__header-container--button"]=f,y=n,R=f?"button":"heading",D=f?N?s.expand:s.collapse:"",n=this.id+"-popup-title",T=T?b.tsx("div",{class:this.classes("esri-popup__header-container",y),key:T,enterAnimation:e,id:n,role:R,"aria-label":D,title:D,tabIndex:f?0:-1,bind:this,onclick:this._toggleCollapsed,onkeydown:this._toggleCollapsed},b.tsx("h2",{class:"esri-popup__header-title",innerHTML:T})):null,y=b.tsx("span",{"aria-hidden":"true",class:this.classes("esri-popup__icon","esri-icon-close")}),y=b.tsx("div",{role:"button",tabIndex:0,bind:this,onclick:this._close,onkeydown:this._close,class:"esri-popup__button","aria-label":s.close,title:s.close},y),r=b.tsx("header",{class:"esri-popup__header"},T,b.tsx("div",{class:"esri-popup__header-buttons"},r,y)),y=this.id+"-popup-content",x=!F||f&&N?null:b.tsx("article",{key:x,enterAnimation:e,id:y,class:"esri-popup__content"},A),F="bottom-left"===d||"bottom-center"===d||"bottom-right"===d||"top-left"===O||"top-center"===O||"top-right"===O,A="top-left"===d||"top-center"===d||"top-right"===d||"bottom-left"===O||"bottom-center"===O||"bottom-right"===O,e=p?s.close:s.open,e=j.length?b.tsx("div",{key:S("actions-menu-button"),class:this.classes("esri-popup__button","esri-popup__actions-menu-button"),role:"button",id:this.id+"-actions-menu-button","aria-haspopup":"true","aria-controls":p?this.id+"-actions-menu":null,tabIndex:0,bind:this,onclick:this._toggleActionsMenu,onkeydown:this._toggleActionsMenu,afterCreate:this._focusActionsMenuButtonNode,afterUpdate:this._focusActionsMenuButtonNode,"aria-label":e,title:e},b.tsx("span",{"aria-hidden":"true",class:"esri-icon-handle-horizontal"})):null,R=E.length&&E.toArray().map(function(e,t){return c._renderAction({action:e,index:t,type:"inline"})}),p=j.length&&p?b.tsx("ul",{id:this.id+"-actions-menu",role:"menu","aria-labelledby":this.id+"-actions-menu-button",key:S("actions"),class:"esri-popup__actions",bind:this,onkeyup:this._handleActionMenuKeyup,afterCreate:this._actionsMenuNodeUpdated,afterUpdate:this._actionsMenuNodeUpdated},j.toArray().map(function(e,t){return c._renderAction({action:e,index:t+I,type:"menu-item"})})):null,p=R?b.tsx("div",{key:"inline-actions-container",class:"esri-popup__inline-actions-container"},R,e,p):null,k=P?b.tsx("section",{key:S("navigation"),class:this.classes("esri-popup__navigation")},k):null,o={},o["esri-popup__footer--has-pagination"]=P,o["esri-popup__footer--has-actions"]=!!E.length,o["esri-popup__footer--has-actions-menu"]=!!j.length,j=o,o=P||E.length?b.tsx("div",{key:S("feature-buttons"),class:this.classes("esri-popup__footer",j)},p,k):null,M=this._renderFeatureMenuNode(g,M,t),g=u.substitute(l.selectedFeatures,{total:g.length}),E=b.tsx("section",{key:S("menu"),class:"esri-popup__feature-menu"},b.tsx("h2",{class:"esri-popup__feature-menu-header"},g),b.tsx("nav",{class:"esri-popup__feature-menu-viewport",afterCreate:this._featureMenuViewportNodeUpdated,afterUpdate:this._featureMenuViewportNodeUpdated},M)),g=h?null:b.tsx("div",{key:S("pointer"),class:"esri-popup__pointer",role:"presentation"},b.tsx("div",{class:this.classes("esri-popup__pointer-direction","esri-popup--shadow")})),M=this.get("selectedFeature.layer.title"),P=this.get("selectedFeature.layer.id"),i={},i["esri-popup--shadow"]=h,i["esri-popup--is-collapsible"]=f,i["esri-popup--is-collapsed"]=N,f=i,a={},a["esri-popup--aligned-top-center"]=v&&"top-center"===d,a["esri-popup--aligned-bottom-center"]=v&&"bottom-center"===d,a["esri-popup--aligned-top-left"]=v&&"top-left"===d,a["esri-popup--aligned-bottom-left"]=v&&"bottom-left"===d,a["esri-popup--aligned-top-right"]=v&&"top-right"===d,a["esri-popup--aligned-bottom-right"]="bottom-right"===d,a["esri-popup--is-docked"]=v&&h,a["esri-popup--shadow"]=v&&!h,a["esri-popup--is-docked-top-left"]=v&&"top-left"===O,a["esri-popup--is-docked-top-center"]=v&&"top-center"===O,a["esri-popup--is-docked-top-right"]=v&&"top-right"===O,a["esri-popup--is-docked-bottom-left"]=v&&"bottom-left"===O,a["esri-popup--is-docked-bottom-center"]=v&&"bottom-center"===O,a["esri-popup--is-docked-bottom-right"]=v&&"bottom-right"===O,a["esri-popup--feature-menu-open"]=v&&m,a["esri-popup--actions-menu-open"]=v&&_,i=a,a=F?E:null,h=A?E:null,m=F?o:null,_=A?o:null,a=b.tsx("div",{class:this.classes("esri-popup__main-container","esri-widget",f),tabIndex:-1,role:"dialog","aria-labelledby":T?n:"","aria-describedby":x?y:"",bind:this,onkeyup:this._handleMainKeyup,afterCreate:this._mainContainerNodeUpdated,afterUpdate:this._mainContainerNodeUpdated},m,a,r,x,_,h),b.tsx("div",{key:S("base"),class:this.classes("esri-popup",i),role:"presentation","data-layer-title":M,"data-layer-id":P,bind:this,afterCreate:this._positionContainer,afterUpdate:this._positionContainer},v?[a,g]:null)},t.prototype._watchActions=function(){var e=this,t=this.viewModel.allActions;this._handles.remove("actions"),t&&t.forEach(function(t){e._handles.add(h.watch(t,"active className disabled id title image visible".split(" "),function(){return e.scheduleRender()}),"actions")})},t.prototype._divideActions=function(e){var t=this.viewModel.allActions;return{inlineActions:t.slice(0,e),menuActions:t.slice(e)}},t.prototype._featureMenuOpenChanged=function(e){e?this._focusFirstFeature=!0:this._focusFeatureMenuButton=!0},t.prototype._actionsMenuOpenChanged=function(e){e?this._focusFirstAction=!0:this._focusActionsMenuButton=!0},t.prototype._setTitleFromFeatureWidget=function(e){this.selectedFeatureWidget&&(this.viewModel.title=e||"")},t.prototype._setContentFromFeatureWidget=function(){var e=this.selectedFeatureWidget;e&&(this.viewModel.content=e)},t.prototype._handleFeatureMenuKeyup=function(e){"Escape"===c.eventKey(e)&&(e.stopPropagation(),this._focusFeatureMenuButton=!0,this.featureMenuOpen=!1,this.scheduleRender())},t.prototype._handleActionMenuKeyup=function(e){"Escape"===c.eventKey(e)&&(e.stopPropagation(),this._focusActionsMenuButton=!0,this.actionsMenuOpen=!1,this.scheduleRender())},t.prototype._handleFeatureMenuItemKeyup=function(e){var t=c.eventKey(e),r=this._featureMenuNode,n=e.currentTarget["data-feature-index"];if(r){var r=r.querySelectorAll("li"),o=r.length;"ArrowUp"===t?(e.stopPropagation(),r[(n-1+o)%o].focus()):"ArrowDown"===t?(e.stopPropagation(),r[(n+1+o)%o].focus()):"Home"===t?(e.stopPropagation(),r[0].focus()):"End"===t&&(e.stopPropagation(),r[r.length-1].focus())}},t.prototype._handleActionMenuItemKeyup=function(e){var t=c.eventKey(e),r=this._actionsMenuNode,n=e.currentTarget["data-action-index"];if(r){var r=r.querySelectorAll("li"),o=r.length;"ArrowUp"===t?(e.stopPropagation(),r[(n-1+o)%o].focus()):"ArrowDown"===t?(e.stopPropagation(),r[(n+1+o)%o].focus()):"Home"===t?(e.stopPropagation(),r[0].focus()):"End"===t&&(e.stopPropagation(),r[r.length-1].focus())}},t.prototype._handleMainKeyup=function(e){var t=c.eventKey(e);"ArrowLeft"===t&&(e.stopPropagation(),this.previous()),"ArrowRight"===t&&(e.stopPropagation(),this.next())},t.prototype._spinnerEnabledChange=function(e){this._destroySpinner(),e&&(e=this.get("viewModel.view"),this._createSpinner(e))},t.prototype._displaySpinner=function(){var e=this._spinner;if(e){var t=this.viewModel,r=t.location;t.waitingForResult?e.show({location:r}):e.hide()}},t.prototype._getIconStyles=function(e){return{"background-image":e?"url("+e+")":""}},t.prototype._renderAction=function(e){var t,r,n=e.action,o=e.index;e=e.type;var i=this.get("selectedFeature.attributes"),a=n.title,s=n.className,l=n.image,s=l||s?s:"esri-icon-default-action",a=a&&i?u.substitute(a,i):a,c=s&&i?u.substitute(s,i):s,i=l&&i?u.substitute(l,i):l,l=(t={},t["esri-icon-loading-indicator"]=n.active,t["esri-rotating"]=n.active,t["esri-popup__icon"]=!!s,t["esri-popup__action-image"]=!n.active&&!!i,t);return c&&(l[c]=!n.active),r={},r["esri-popup__action"]="toggle"!==n.type,r["esri-popup__action-toggle"]="toggle"===n.type,r["esri-popup__action-toggle--on"]="toggle"===n.type&&n.value,r["esri-popup__button--disabled"]=n.disabled,t=r,r=b.tsx("span",{key:"text",class:"esri-popup__action-text"},a),r=[b.tsx("span",{key:"icon","aria-hidden":"true",class:this.classes("esri-popup__icon",l),styles:this._getIconStyles(i)}),r],o="menu-item"===e?b.tsx("li",{key:n,role:"menuitem",tabIndex:0,title:a,"aria-label":a,class:this.classes("esri-popup__button",t),onkeyup:this._handleActionMenuItemKeyup,bind:this,"data-action-index":o,onclick:this._triggerAction,onkeydown:this._triggerAction},r):b.tsx("div",{key:n,role:"button",tabIndex:0,title:a,"aria-label":a,class:this.classes("esri-popup__button",t),onkeyup:this._handleActionMenuItemKeyup,bind:this,"data-action-index":o,onclick:this._triggerAction,onkeydown:this._triggerAction},r),n.visible?o:null},t.prototype._addSelectedFeatureIndexHandle=function(){var e=this,t=h.watch(this,"viewModel.selectedFeatureIndex",function(t,r){return e._selectedFeatureIndexUpdated(t,r)});this._handles.add(t,"selected-index")},t.prototype._selectedFeatureIndexUpdated=function(e,t){this.featureCount&&e!==t&&-1!==e&&(this.featureMenuOpen=this.actionsMenuOpen=!1)},t.prototype._updateFeatureWidget=function(){var e=this.featureWidgets,t=this.selectedFeatureWidget;t&&t.destroyCharts(),this._set("selectedFeatureWidget",e[this.viewModel.selectedFeatureIndex]||null)},t.prototype._destroyFeatureWidgets=function(){this.featureWidgets.forEach(function(e){return e.destroy()}),this._set("featureWidgets",[])},t.prototype._updateFeatureWidgets=function(){return a(this,void 0,void 0,function(){var e,t,r,n,a,s,l=this;return i(this,function(i){switch(i.label){case 0:return e=this,t=e.features,r=e.featureWidgets,t&&t.length?[4,_()]:(this._destroyFeatureWidgets(),[2]);case 1:return n=i.sent(),a=r.slice(0),s=[],t.forEach(function(e,t){if(e){var r=null;if(a.some(function(t,n){return t&&t.graphic===e&&(r=t,a.splice(n,1)),!!r}),r)s[t]=r;else{var i=new n({defaultPopupTemplateEnabled:l.defaultPopupTemplateEnabled,graphic:e,spatialReference:l.get("view.spatialReference"),map:l.get("view.map")});i.visibleElements=o({},i.visibleElements,{title:!1}),s[t]=i}}}),a.forEach(function(e){return e&&e.destroy()}),this._set("featureWidgets",s),[2]}})})},t.prototype._isScreenLocationWithinView=function(e,t){return-1<e.x&&-1<e.y&&e.x<=t.width&&e.y<=t.height},t.prototype._isOutsideView=function(e){var t=e.popupHeight,r=e.popupWidth,n=e.screenLocation,o=e.side;if(e=e.view,isNaN(r)||isNaN(t)||!e||!n)return!1;var i=e.padding;return"right"===o&&n.x+r/2>e.width-i.right||"left"===o&&n.x-r/2<i.left||"top"===o&&n.y-t<i.top||"bottom"===o&&n.y+t>e.height-i.bottom},t.prototype._determineCurrentAlignment=function(){var e=this._pointerOffsetInPx,t=this._containerNode,r=this._mainContainerNode,n=this.viewModel,o=n.screenLocation,n=n.view;if(!o||!n||!t)return"top-center";if(!this._isScreenLocationWithinView(o,n))return this._get("currentAlignment")||"top-center";var i=r?window.getComputedStyle(r,null):null,r=i?parseInt(i.getPropertyValue("max-height").replace(/[^-\d\.]/g,""),10):0,i=i?parseInt(i.getPropertyValue("height").replace(/[^-\d\.]/g,""),10):0,a=t.getBoundingClientRect(),t=a.width+e,a=Math.max(a.height,r,i)+e,e=this._isOutsideView({popupHeight:a,popupWidth:t,screenLocation:o,side:"right",view:n}),r=this._isOutsideView({popupHeight:a,popupWidth:t,screenLocation:o,side:"left",view:n}),i=this._isOutsideView({popupHeight:a,popupWidth:t,screenLocation:o,side:"top",view:n}),o=this._isOutsideView({popupHeight:a,popupWidth:t,screenLocation:o,side:"bottom",view:n});return r?i?"bottom-right":"top-right":e?i?"bottom-left":"top-left":i?o?"top-center":"bottom-center":"top-center"},t.prototype._getCurrentAlignment=function(){var e=this.alignment;return this.dockEnabled?null:"auto"===e?this._determineCurrentAlignment():"function"==typeof e?e.call(this):e},t.prototype._setCurrentAlignment=function(){this._set("currentAlignment",this._getCurrentAlignment())},t.prototype._setCurrentDockPosition=function(){this._set("currentDockPosition",this._getCurrentDockPosition())},t.prototype._getDockPosition=function(){var e=this.get("dockOptions.position");return"auto"===e?this._determineCurrentDockPosition():"function"==typeof e?e.call(this):e},t.prototype._getCurrentDockPosition=function(){return this.dockEnabled?this._getDockPosition():null},t.prototype._wouldDockTo=function(){return this.dockEnabled?null:this._getDockPosition()},t.prototype._renderFeatureMenuItemNode=function(e,t,r){var n,o=t===r,i=(n={},n["esri-popup__feature-menu-item--selected"]=o,n);return n=o?b.tsx("span",{key:S("feature-menu-selected-feature-"+r),title:l.selectedFeature,"aria-label":l.selectedFeature,class:"esri-icon-check-mark"}):null,e=b.tsx("span",{innerHTML:e.title||s.untitled}),b.tsx("li",{role:"menuitem",tabIndex:-1,key:S("feature-menu-feature-"+r),class:this.classes(i,"esri-popup__feature-menu-item"),bind:this,"data-feature-index":t,onkeyup:this._handleFeatureMenuItemKeyup,onclick:this._selectFeature,onkeydown:this._selectFeature},b.tsx("span",{class:"esri-popup__feature-menu-title"},e,n))},t.prototype._renderFeatureMenuNode=function(e,t,r){var n=this;return 1<e.length?b.tsx("ol",{class:"esri-popup__feature-menu-list",id:r,bind:this,afterCreate:this._featureMenuNodeUpdated,afterUpdate:this._featureMenuNodeUpdated,onkeyup:this._handleFeatureMenuKeyup,role:"menu"},e.map(function(e,r){return n._renderFeatureMenuItemNode(e,r,t)})):null},t.prototype._determineCurrentDockPosition=function(){var e=this.get("viewModel.view"),t=w.isRTL()?"top-left":"top-right";if(!e)return t;var r=e.padding||{left:0,right:0,top:0,bottom:0},r=e.width-r.left-r.right;return(e=e.get("breakpoints"))&&r<=e.xsmall?"bottom-center":t},t.prototype._renderContent=function(){var e=this.get("viewModel.content");return e?"string"==typeof e?b.tsx("div",{key:e,innerHTML:e}):b.isWidget(e)&&!e.destroyed?b.tsx("div",{key:e},e.render()):e instanceof HTMLElement?b.tsx("div",{key:e,bind:e,afterCreate:this._attachToNode}):b.isWidgetBase(e)?b.tsx("div",{key:e,bind:e.domNode,afterCreate:this._attachToNode}):void 0:null},t.prototype._attachToNode=function(e){e.appendChild(this)},t.prototype._positionContainer=function(e){if(void 0===e&&(e=this._containerNode),e&&(this._containerNode=e),e){var t=this.viewModel.screenLocation,r=e.getBoundingClientRect().width;(t=this._calculatePositionStyle(t,r))&&(e.style.top=t.top,e.style.left=t.left,e.style.bottom=t.bottom,e.style.right=t.right)}},t.prototype._calculateFullWidth=function(e){var t=this.currentAlignment,r=this._pointerOffsetInPx;return"top-left"===t||"bottom-left"===t||"top-right"===t||"bottom-right"===t?e+r:e},t.prototype._calculateAlignmentPosition=function(e,t,r,n){var o=this.currentAlignment,i=this._pointerOffsetInPx;n/=2;var a=r.height-t;r=r.width-e;var s=this.view.padding;return"bottom-center"===o?{top:t+i-s.top,left:e-n-s.left}:"top-left"===o?{bottom:a+i-s.bottom,right:r+i-s.right}:"bottom-left"===o?{top:t+i-s.top,right:r+i-s.right}:"top-right"===o?{bottom:a+i-s.bottom,left:e+i-s.left}:"bottom-right"===o?{top:t+i-s.top,left:e+i-s.left}:"top-center"===o?{bottom:a+i-s.bottom,left:e-n-s.left}:void 0},t.prototype._calculatePositionStyle=function(e,t){var r=this.view;if(r){if(this.dockEnabled)return{left:"",top:"",right:"",bottom:""};if(e&&t&&(t=this._calculateFullWidth(t),e=this._calculateAlignmentPosition(e.x,e.y,r,t)))return{top:void 0!==e.top?e.top+"px":"auto",left:void 0!==e.left?e.left+"px":"auto",bottom:void 0!==e.bottom?e.bottom+"px":"auto",right:void 0!==e.right?e.right+"px":"auto"}}},t.prototype._viewChange=function(e,t){e&&t&&(this.close(),this.clear())},t.prototype._viewReadyChange=function(e,t){e?(e=this.get("viewModel.view"),this._wireUpView(e)):t&&(this.close(),this.clear())},t.prototype._wireUpView=function(e){this._destroySpinner(),e&&(this.spinnerEnabled&&this._createSpinner(e),this._setDockEnabledForViewSize(this.dockOptions))},t.prototype._dockingThresholdCrossed=function(e,t,r){var n=e[0];e=e[1];var o=t[0];t=t[1];var i=r.width;return r=r.height,n<=i&&o>i||n>i&&o<=i||e<=r&&t>r||e>r&&t<=r},t.prototype._updateDockEnabledForViewSize=function(e,t){if(e&&t){var r=this.get("viewModel.view.padding")||{left:0,right:0,top:0,bottom:0},n=r.left+r.right,o=r.top+r.bottom,r=[],i=[];r[0]=e[0]-n,r[1]=e[1]-o,i[0]=t[0]-n,i[1]=t[1]-o,e=this.dockOptions,this._dockingThresholdCrossed(r,i,e.breakpoint)&&this._setDockEnabledForViewSize(e),this._setCurrentDockPosition()}},t.prototype._focusDockButtonNode=function(e){this._focusDockButton&&(this._focusDockButton=!1,e.focus())},t.prototype._mainContainerNodeUpdated=function(e){this._mainContainerNode=e,this._focusContainer?(this._focusContainer=!1,e.focus()):this._blurContainer&&(this._blurContainer=!1,e.blur())},t.prototype._featureMenuNodeUpdated=function(e){(this._featureMenuNode=e)&&this._focusFirstFeature&&(this._focusFirstFeature=!1,e=e.querySelectorAll("li"),e.length&&e[0].focus())},t.prototype._actionsMenuNodeUpdated=function(e){(this._actionsMenuNode=e)&&this._focusFirstAction&&(this._focusFirstAction=!1,e=e.querySelectorAll("li"),e.length&&e[0].focus())},t.prototype._focusFeatureMenuButtonNode=function(e){this._focusFeatureMenuButton&&(this._focusFeatureMenuButton=!1,e.focus())},t.prototype._focusActionsMenuButtonNode=function(e){this._focusActionsMenuButton&&(this._focusActionsMenuButton=!1,e.focus())},t.prototype._featureMenuViewportNodeUpdated=function(e){e&&(e.scrollTop=0)},t.prototype._toggleScreenLocationEnabled=function(){var e=this.dockEnabled,t=this.viewModel;t&&(t.screenLocationEnabled=this.visible&&!e)},t.prototype._shouldDockAtCurrentViewSize=function(e){e=e.breakpoint;var t=this.get("viewModel.view.ui"),r=t.width,t=t.height;return!isNaN(r)&&!isNaN(t)&&(r=e.hasOwnProperty("width")&&r<=e.width,e=e.hasOwnProperty("height")&&t<=e.height,r||e)},t.prototype._setDockEnabledForViewSize=function(e){e.breakpoint&&(this.dockEnabled=this._shouldDockAtCurrentViewSize(e))},t.prototype._getPageText=function(e,t){return u.substitute(l.pageText,{index:t+1,total:e})},t.prototype._destroySpinner=function(){var e=this._spinner,t=this.view;e&&(t&&t.ui&&t.ui.remove(this._spinner,"popup-spinner"),e.destroy(),this._spinner=null)},t.prototype._createSpinner=function(e){e&&(this._spinner=new m({view:e}),e.ui.add(this._spinner,{key:"popup-spinner",position:"manual"}))},t.prototype._toggleCollapsed=function(){this.collapsed=!this.collapsed},t.prototype._close=function(){this.close(),this.view&&this.view.focus()},t.prototype._toggleDockEnabled=function(){this.dockEnabled=!this.dockEnabled,this._focusDockButton=!0,this.scheduleRender()},t.prototype._toggleFeatureMenu=function(){var e=!this.featureMenuOpen;this._featureMenuOpenChanged(e),this.actionsMenuOpen=!1,this.featureMenuOpen=e},t.prototype._toggleActionsMenu=function(){var e=!this.actionsMenuOpen;this._actionsMenuOpenChanged(e),this.featureMenuOpen=!1,this.actionsMenuOpen=e},t.prototype._triggerAction=function(e){e=e.currentTarget["data-action-index"];var t=this.viewModel.allActions.getItemAt(e);t&&"toggle"===t.type&&(t.value=!t.value),this.actionsMenuOpen=!1,this.viewModel.triggerAction(e)},t.prototype._selectFeature=function(e){e=e.currentTarget["data-feature-index"],isNaN(e)||(this.viewModel.selectedFeatureIndex=e),this.featureMenuOpen=!1,this._focusFeatureMenuButton=!0,this.scheduleRender()},t.prototype._next=function(){this.next()},t.prototype._previous=function(){this.previous()},n([y.aliasOf("viewModel.actions"),b.renderable()],t.prototype,"actions",void 0),n([y.property({dependsOn:["viewModel.visible"]}),b.renderable()],t.prototype,"actionsMenuOpen",null),n([y.property()],t.prototype,"alignment",void 0),n([y.aliasOf("viewModel.autoCloseEnabled")],t.prototype,"autoCloseEnabled",void 0),n([y.aliasOf("viewModel.autoOpenEnabled")],t.prototype,"autoOpenEnabled",void 0),n([y.aliasOf("viewModel.defaultPopupTemplateEnabled")],t.prototype,"defaultPopupTemplateEnabled",void 0),n([y.aliasOf("viewModel.content"),b.renderable()],t.prototype,"content",void 0),n([y.property(),b.renderable()],t.prototype,"collapsed",void 0),n([y.property(),b.renderable()],t.prototype,"collapseEnabled",void 0),n([y.property({readOnly:!0,dependsOn:["dockEnabled","alignment"]}),b.renderable()],t.prototype,"currentAlignment",null),n([y.property({readOnly:!0,dependsOn:["viewModel.view.ready","dockEnabled","dockOptions"]}),b.renderable()],t.prototype,"currentDockPosition",null),n([y.property(),b.renderable()],t.prototype,"dockOptions",null),n([y.property(),b.renderable()],t.prototype,"dockEnabled",void 0),n([y.aliasOf("viewModel.featureCount"),b.renderable()],t.prototype,"featureCount",void 0),n([y.property(),b.renderable()],t.prototype,"featureMenuOpen",void 0),n([y.aliasOf("viewModel.features"),b.renderable()],t.prototype,"features",void 0),n([y.property(),b.renderable()],t.prototype,"featureNavigationEnabled",void 0),n([y.aliasOf("viewModel.goToOverride")],t.prototype,"goToOverride",void 0),n([y.aliasOf("viewModel.highlightEnabled")],t.prototype,"highlightEnabled",void 0),n([y.aliasOf("viewModel.location"),b.renderable()],t.prototype,"location",void 0),n([y.property({readOnly:!0}),b.renderable()],t.prototype,"featureWidgets",void 0),n([y.property()],t.prototype,"label",void 0),n([y.aliasOf("viewModel.promises")],t.prototype,"promises",void 0),n([y.aliasOf("viewModel.selectedFeature"),b.renderable()],t.prototype,"selectedFeature",void 0),n([y.aliasOf("viewModel.selectedFeatureIndex"),b.renderable()],t.prototype,"selectedFeatureIndex",void 0),n([y.property({readOnly:!0}),b.renderable()],t.prototype,"selectedFeatureWidget",void 0),n([y.property()],t.prototype,"spinnerEnabled",void 0),n([y.aliasOf("viewModel.title"),b.renderable()],t.prototype,"title",void 0),n([y.aliasOf("viewModel.updateLocationEnabled")],t.prototype,"updateLocationEnabled",void 0),n([y.aliasOf("viewModel.view")],t.prototype,"view",void 0),n([y.property({type:v}),b.renderable("viewModel.view.widthBreakpoint viewModel.allActions viewModel.screenLocation viewModel.screenLocationEnabled viewModel.state viewModel.pendingPromisesCount viewModel.promiseCount viewModel.waitingForResult".split(" ")),b.vmEvent(["triggerAction","trigger-action"])],t.prototype,"viewModel",void 0),n([y.aliasOf("viewModel.visible"),b.renderable()],t.prototype,"visible",void 0),n([b.accessibleHandler()],t.prototype,"_toggleCollapsed",null),n([b.accessibleHandler()],t.prototype,"_close",null),n([b.accessibleHandler()],t.prototype,"_toggleDockEnabled",null),n([b.accessibleHandler()],t.prototype,"_toggleFeatureMenu",null),n([b.accessibleHandler()],t.prototype,"_toggleActionsMenu",null),n([b.accessibleHandler()],t.prototype,"_triggerAction",null),n([b.accessibleHandler()],t.prototype,"_selectFeature",null),n([b.accessibleHandler()],t.prototype,"_next",null),n([b.accessibleHandler()],t.prototype,"_previous",null),t=n([y.subclass("esri.widgets.Popup")],t)}(y.declared(g))})},"esri/widgets/Spinner":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/promiseUtils ../core/watchUtils ../core/accessorSupport/decorators ./Widget ./Spinner/SpinnerViewModel ./support/widget".split(" "),function(e,t,r,n,o,i,a,s,l,u){return function(e){function t(t){return t=e.call(this,t)||this,t._animationDelay=500,t._animationPromise=null,t.location=null,t.view=null,t.viewModel=new l,t.visible=!1,t}return r(t,e),t.prototype.postInitialize=function(){var e=this;this.own([i.watch(this,"visible",function(t){return e._visibleChange(t)})])},t.prototype.destroy=function(){this._animationPromise=null},t.prototype.show=function(e){var t=this,r=e.location;e=e.promise,r&&(this.viewModel.location=r),this.visible=!0,r=function(){return t.hide()},e&&e.catch(function(){}).then(r)},t.prototype.hide=function(){this.visible=!1},t.prototype.render=function(){var e,t=this.visible,r=!!this.viewModel.screenLocation,t=(e={},e["esri-spinner--start"]=t&&r,e["esri-spinner--finish"]=!t&&r,e);return e=this._getPositionStyles(),u.tsx("div",{class:this.classes("esri-spinner",t),styles:e})},t.prototype._visibleChange=function(e){var t=this;if(e)this.viewModel.screenLocationEnabled=!0;else{var r=o.after(this._animationDelay);this._animationPromise=r,r.catch(function(){}).then(function(){t._animationPromise===r&&(t.viewModel.screenLocationEnabled=!1,t._animationPromise=null)})}},t.prototype._getPositionStyles=function(){var e=this.viewModel,t=e.screenLocation,e=e.view;return e&&t?(e=e.padding,{left:t.x-e.left+"px",top:t.y-e.top+"px"}):{}},n([a.aliasOf("viewModel.location")],t.prototype,"location",void 0),n([a.aliasOf("viewModel.view")],t.prototype,"view",void 0),n([a.property({type:l}),u.renderable(["viewModel.screenLocation","viewModel.screenLocationEnabled"])],t.prototype,"viewModel",void 0),n([a.aliasOf("viewModel.visible")],t.prototype,"visible",void 0),t=n([a.subclass("esri.widgets.Spinner")],t)}(a.declared(s))})},"esri/widgets/Widget":function(){define("require exports ../core/tsSupport/assignHelper ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Collection ../core/domUtils ../core/Evented ../core/Handles ../core/Logger ../core/watchUtils ../core/accessorSupport/decorators ../libs/maquette/index ./support/widget".split(" "),function(e,t,r,n,o,i,a,s,l,u,c,p,d,f){var h=u.getLogger("esri.widgets.Widget"),y=0;return function(e){function t(t,r){return t=e.call(this,t,r)||this,t._attached=!1,t.destroyed=!1,t.domNode=null,t.iconClass="esri-icon-checkbox-unchecked",t.label=t.declaredClass.split(".").pop(),t.visible=!0,t._internalHandles=new l,t.render=t.render.bind(t),t}return n(t,e),t.prototype.normalizeCtorArgs=function(e,t){return e=r({},e),t&&(e.container=t),e},t.prototype.initialize=function(){var e=this;this._internalHandles.add(this._renderableProps.map(function(t){return c.init(e,t,function(e,r){var n=this;i.isCollection(r)&&this._internalHandles.remove(this.declaredClass+":"+t+"-collection-change-event-listener"),i.isCollection(e)&&(e=e.on("change",function(){return n.scheduleRender()}),this._internalHandles.add(e,this.declaredClass+":"+t+"-collection-change-event-listener")),this.scheduleRender()})})),this._delegatedEventNames.length&&this._internalHandles.add(c.init(this,"viewModel",function(){e._get("viewModel")&&e._internalHandles.remove("delegated-events"),e._delegatedEventNames.map(function(t){return e.viewModel.on(t,function(r){e.emit(t,r)})})}),"delegated-events"),this.postInitialize(),this._internalHandles.add(c.whenOnce(this,"container",function(t){return e._attach(t)}))},t.prototype.postInitialize=function(){},t.prototype.destroy=function(){this.destroyed||(this.viewModel&&(this.viewModel.destroy(),this.viewModel=null),this._detach(this.container),this._internalHandles.destroy(),this._emitter.clear(),this._set("destroyed",!0))},t.prototype.startup=function(){h.warn("Widget.startup() is deprecated and no longer needed")},Object.defineProperty(t.prototype,"container",{set:function(e){this._get("container")||this._set("container",e)},enumerable:!0,configurable:!0}),t.prototype.castContainer=function(e){return a.byId(e)},Object.defineProperty(t.prototype,"id",{get:function(){return this._get("id")||this.get("container.id")||Date.now().toString(16)+"-widget-"+y++},set:function(e){e&&this._set("id",e)},enumerable:!0,configurable:!0}),t.prototype.render=function(){throw Error("not implemented")},t.prototype.scheduleRender=function(){this._projector.scheduleRender()},t.prototype.classes=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return f.classes.apply(this,e)},t.prototype.own=function(e){1<arguments.length&&(e=Array.prototype.slice.call(arguments)),this._internalHandles.add(e)},t.prototype.renderNow=function(){this._projector.renderNow()},t.prototype._attach=function(e){e&&(this._projector.merge(e,this.render),this._attached=!0)},t.prototype._detach=function(e){e&&this._attached&&(this._projector.detach(this.render),e.parentNode&&e.parentNode.removeChild(e),this._attached=!1)},o([p.shared(d.createProjector())],t.prototype,"_projector",void 0),o([p.shared([])],t.prototype,"_renderableProps",void 0),o([p.shared([])],t.prototype,"_delegatedEventNames",void 0),o([p.property({value:null})],t.prototype,"container",null),o([p.cast("container")],t.prototype,"castContainer",null),o([p.property({readOnly:!0})],t.prototype,"destroyed",void 0),o([p.property({aliasOf:"container"})],t.prototype,"domNode",void 0),o([p.property()],t.prototype,"iconClass",void 0),o([p.property({dependsOn:["container"]})],t.prototype,"id",null),o([p.property()],t.prototype,"label",void 0),o([p.property()],t.prototype,"viewModel",void 0),o([p.property()],t.prototype,"visible",void 0),t=o([p.subclass("esri.widgets.Widget")],t)}(p.declared(s.EventedAccessor))})},"esri/widgets/Spinner/SpinnerViewModel":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../support/AnchorElementViewModel".split(" "),function(e,t,r,n,o,i){return function(e){function t(t){return t=e.call(this,t)||this,t.visible=!1,t}return r(t,e),n([o.property()],t.prototype,"visible",void 0),t=n([o.subclass("esri.widgets.CompassViewModel")],t)}(o.declared(i))})},"esri/widgets/support/AnchorElementViewModel":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Evented ../../core/Handles ../../core/watchUtils ../../core/watchUtils ../../core/accessorSupport/decorators".split(" "),function(e,t,r,n,o,i,a,s,l){return function(e){function t(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=e.apply(this,t)||this;return n._anchorHandles=new i,n.location=null,n.screenLocation=null,n.screenLocationEnabled=!1,n.view=null,n._anchorHandles.add([s.watch(n,["screenLocationEnabled","location","view.size","view.stationary"],function(){return n._updateScreenPointAndHandle()}),s.watch(n,["view","view.ready"],function(){return n._wireUpView()})]),n}return r(t,e),t.prototype.destroy=function(){this.view=null,this._anchorHandles&&this._anchorHandles.destroy(),this._viewpointHandle=this._anchorHandles=null},t.prototype._wireUpView=function(){var e=this;if(this._anchorHandles.remove("view"),this._viewpointHandle=null,this.get("view.ready")){this._setScreenLocation();var t=this.view,t=a.pausable(t,"3d"===t.type?"camera":"viewpoint",function(){return e._viewpointChange()});this._anchorHandles.add(t,"view"),this._viewpointHandle=t,this._toggleWatchingViewpoint()}},t.prototype._viewpointChange=function(){this._setScreenLocation(),this.emit("view-change")},t.prototype._updateScreenPointAndHandle=function(){this._setScreenLocation(),this._toggleWatchingViewpoint()},t.prototype._toggleWatchingViewpoint=function(){var e=this._viewpointHandle,t=this.screenLocationEnabled;e&&(this.location&&t?e.resume():e.pause())},t.prototype._setScreenLocation=function(){var e=this.location,t=this.view,r=this.screenLocationEnabled,n=this.get("view.ready"),e=r&&e&&n?t.toScreen(e):null;this._set("screenLocation",e)},n([l.property()],t.prototype,"location",void 0),n([l.property({readOnly:!0})],t.prototype,"screenLocation",void 0),n([l.property()],t.prototype,"screenLocationEnabled",void 0),n([l.property()],t.prototype,"view",void 0),t=n([l.subclass("esri.widgets.support.AnchorElementViewModel")],t)}(l.declared(o.EventedAccessor))})},"esri/widgets/Popup/PopupViewModel":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/tsSupport/assignHelper ../../core/tsSupport/generatorHelper ../../core/tsSupport/awaiterHelper ../../geometry ../../core/Collection ../../core/Error ../../core/Handles ../../core/Logger ../../core/maybe ../../core/promiseUtils ../../core/watchUtils ../../core/accessorSupport/decorators ../../geometry/support/webMercatorUtils ../../support/actions/ActionBase ../../support/actions/ActionButton ../../support/actions/ActionToggle ../../views/input/InputManager ../../views/support/layerViewUtils ./actions ../support/AnchorElementViewModel ../support/GoTo".split(" "),function(e,t,r,n,o,i,a,s,l,u,c,p,d,f,h,y,m,g,v,b,w,S,_,x,O){var C=l.ofType({key:"type",defaultKeyValue:"button",base:g,typeMap:{button:v,toggle:b}}),M=p.getLogger("esri.widgets.Popup.PopupViewModel");return function(e){function t(t){return t=e.call(this,t)||this,t._handles=new c,t._pendingPromises=new Set,t._zoomToLocation=null,t._fetchFeaturesController=null,t.actions=new C([_.zoomToFeature.clone()]),t.defaultPopupTemplateEnabled=!1,t.autoCloseEnabled=!1,t.autoOpenEnabled=!0,t.content=null,t.highlightEnabled=!0,t.title=null,t.updateLocationEnabled=!1,t.view=null,t.visible=!1,t.zoomFactor=4,t}return r(t,e),t.prototype.initialize=function(){var e=this;this._handles.add([h.init(this,["autoOpenEnabled","view"],this._autoOpenEnabledChange),this.on("view-change",this._autoClose),h.watch(this,["highlightEnabled","selectedFeature","visible","view"],this._highlightFeature),h.watch(this,"view.animation.state",function(t){e._zoomToLocation||(_.zoomToFeature.disabled="waiting-for-target"===t)}),h.watch(this,"location",function(t){var r=e.selectedFeature;e.updateLocationEnabled&&t&&(!r||r.geometry)&&e.centerAtLocation()}),h.watch(this,"selectedFeature",function(t){if(t){var r=e.location,n=e.updateLocationEnabled,o=e.view;!n&&r||!t.geometry?n&&!t.geometry&&e.centerAtLocation().then(function(){e.location=o.center.clone()}):e.location=d.unwrap(e._getPointFromGeometry(t.geometry))}}),this.on("trigger-action",function(t){return _.triggerAction({event:t,view:e.view})})])},t.prototype.destroy=function(){this._cancelFetchingFeatures(),this._handles.destroy(),this._handles=null,this._pendingPromises.clear(),this.view=null},Object.defineProperty(t.prototype,"allActions",{get:function(){var e=this._get("allActions")||new C;e.removeAll();var t=this.selectedFeature&&("function"==typeof this.selectedFeature.getEffectivePopupTemplate&&this.selectedFeature.getEffectivePopupTemplate(this.defaultPopupTemplateEnabled)||this.selectedFeature.popupTemplate),r=t&&t.actions;return(t=t&&t.overwriteActions?r:r?r.concat(this.actions):this.actions)&&t.filter(Boolean).forEach(function(t){return e.add(t)}),e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"featureCount",{get:function(){return this.features.length},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"features",{get:function(){return this._get("features")||[]},set:function(e){e=e||[],this._set("features",e);var t=this.pendingPromisesCount,r=this.selectedFeatureIndex,n=this.promiseCount&&e.length;n&&t&&-1===r?this.selectedFeatureIndex=0:n&&-1!==r||(this.selectedFeatureIndex=e.length?0:-1)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"location",{get:function(){return this._get("location")||null},set:function(e){var t=this.get("view.spatialReference.isWebMercator");e&&e.get("spatialReference.isWGS84")&&t&&(e=m.geographicToWebMercator(e)),this._set("location",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pendingPromisesCount",{get:function(){return this._pendingPromises.size},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"waitingForResult",{get:function(){return 0<this.pendingPromisesCount&&0===this.featureCount},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"promiseCount",{get:function(){return this.promises.length},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"promises",{get:function(){return this._get("promises")||[]},set:function(e){var t=this;this._pendingPromises.clear(),this.features=[],Array.isArray(e)&&e.length?(this._set("promises",e),e=e.slice(0),e.forEach(function(e){t._pendingPromises.add(e),e.then(function(r){t._pendingPromises.has(e)&&t._updateFeatures(r),t._updatePendingPromises(e)},function(){return t._updatePendingPromises(e)})})):this._set("promises",[]),this.notifyChange("pendingPromisesCount")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectedFeature",{get:function(){var e=this.selectedFeatureIndex;return-1===e?null:this.features[e]||null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectedFeatureIndex",{get:function(){var e=this._get("selectedFeatureIndex");return"number"==typeof e?e:-1},set:function(e){var t=this.featureCount;e=isNaN(e)||-1>e||!t?-1:(e+t)%t,this._set("selectedFeatureIndex",e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this.get("view.ready")?"ready":"disabled"},enumerable:!0,configurable:!0}),t.prototype.centerAtLocation=function(){var e=this.view,t=this._getSelectedTarget();return t?this.callGoTo({target:{target:t,scale:e.scale}}):(e=new u("center-at-location:invalid-target-or-view","Cannot center at a location without a target and view.",{target:t,view:e}),M.error(e),f.reject(e))},t.prototype.clear=function(){this.set({promises:[],features:[],content:null,title:null,location:null})},t.prototype.open=function(e){var t=this;e=o({updateLocationEnabled:!1,promises:[],fetchFeatures:!1,visible:!1},e);var r=e.fetchFeatures;delete e.fetchFeatures,r=r?this._fetchFeatures(e.location||this.location):f.resolve(),this.set(e),r.then(function(){t._setVisibleWhenContentExists()})},t.prototype.triggerAction=function(e){(e=this.allActions.getItemAt(e))&&this.emit("trigger-action",{action:e})},t.prototype.next=function(){return this.selectedFeatureIndex+=1,this},t.prototype.previous=function(){return--this.selectedFeatureIndex,this},t.prototype.zoomToLocation=function(){var e=this,t=this.location,r=this.selectedFeature,n=this.view,o=this.zoomFactor,i=this._getSelectedTarget();if(!i)return t=new u("zoom-to:invalid-target-or-view","Cannot zoom to location without a target and view.",{target:i,view:n}),M.error(t),f.reject(t);var n=n.scale/o,a=this.get("selectedFeature.geometry")||t,s=a&&"point"===a.type&&this._isScreenSize(r);return _.zoomToFeature.active=!0,_.zoomToFeature.disabled=!0,this._zoomToLocation=t=this.callGoTo({target:{target:i,scale:s?n:void 0}}).then(function(){s&&(e.location=a),_.zoomToFeature.active=!1,_.zoomToFeature.disabled=!1,e._zoomToLocation=null}).catch(function(){_.zoomToFeature.active=!1,_.zoomToFeature.disabled=!1,e._zoomToLocation=null})},t.prototype._getSelectedTarget=function(){var e=this.selectedFeature,t=this.location,r=this.view;if(!r)return null;var r="3d"===r.type,n=this.get("selectedFeature.geometry");return r?e||t:n||t},t.prototype._fetchPopupFeatures=function(e){var t=this.view;if(this._cancelFetchingFeatures(),!t||!e)return e=new u("fetch-features:invalid-screenPoint-or-view","Cannot fetch features without a screenPoint and view.",{screenPoint:e,view:t}),M.error(e),f.reject(e);var r=f.createAbortController();return this._fetchFeaturesController=r,t.fetchPopupFeatures(e,{defaultPopupTemplateEnabled:this.defaultPopupTemplateEnabled,signal:r.signal})},t.prototype._autoOpenEnabledChange=function(){var e=this,t=this._handles,r=this.autoOpenEnabled;t.remove("auto-fetch-features"),r&&this.view&&(r=this.view.on("click",function(t){"mouse"===t.pointerType&&0!==t.button||e._fetchFeaturesAndOpen(t)},w.ViewEventPriorities.WIDGET),t.add(r,"auto-fetch-features"))},t.prototype._cancelFetchingFeatures=function(){var e=this._fetchFeaturesController;e&&e.abort(),this._fetchFeaturesController=null},t.prototype._fetchFeatures=function(e){var t=this,r=this.view;return e&&r?(e="function"==typeof r.toScreen?r.toScreen(e):null,this._fetchPopupFeatures(e).then(function(e){t.promises=e.promises})):(e=new u("open:invalid-location-or-view","Cannot fetch content without a location and view.",{location:e,view:r}),M.error(e),f.reject(e))},t.prototype._fetchFeaturesAndOpen=function(e){var t=e.mapPoint,r=this.view;this._fetchPopupFeatures(e.screenPoint).then(function(e){return r.popup.open({location:e.location||t,promises:e.promises}),e})},t.prototype._updatePendingPromises=function(e){e&&this._pendingPromises.has(e)&&(this._pendingPromises.delete(e),this.notifyChange("pendingPromisesCount"))},t.prototype._setVisibleWhenContentExists=function(){var e=this,t=this._handles,r=this.promiseCount;t.remove("pendingVisible"),r?(r=h.init(this,"pendingPromisesCount",function(r){e.featureCount&&(e.set("visible",!0),t.remove("pendingVisible")),r||t.remove("pendingVisible")}),t.add(r,"pendingVisible")):this.set("visible",!0)},t.prototype._autoClose=function(){this.autoCloseEnabled&&(this.visible=!1)},t.prototype._isScreenSize=function(e){var t=this.view;if("3d"!==t.type||!e||"esri.Graphic"!==e.declaredClass)return!0;if((t=t.getViewForGraphic(e))&&"whenGraphicBounds"in t){var r=!1;return t.whenGraphicBounds(e,{useViewElevation:!0}).then(function(e){r=!e||!e.boundingBox||e.boundingBox[0]===e.boundingBox[3]&&e.boundingBox[1]===e.boundingBox[4]&&e.boundingBox[2]===e.boundingBox[5]}),r}return!0},t.prototype._getPointFromGeometry=function(e){return d.isNone(e)?null:"point"===e.type?e:"extent"===e.type?e.center:"polygon"===e.type?e.centroid:"multipoint"===e.type||"polyline"===e.type?e.extent.center:null},t.prototype._highlightFeature=function(){return a(this,void 0,void 0,function(){var e,t,r,n,o,a,s,l,u,c,p,d;return i(this,function(i){switch(i.label){case 0:return e="highlight",this._handles.remove(e),t=this,r=t.selectedFeature,n=t.highlightEnabled,o=t.view,a=t.visible,r&&o&&n&&a&&(s=r.layer)?[4,o.when()]:[2];case 1:return i.sent(),[4,o.whenLayerView(s)];case 2:return(l=i.sent())&&S.hasHighlight(l)?(u=s.objectIdField,p=(c=r.attributes)&&c[u],d=l.highlight(p||r),this._handles.add(d,e),[2]):[2]}})})},t.prototype._updateFeatures=function(e){var t=this.features;e&&e.length&&(t.length?(e=e.filter(function(e){return-1===t.indexOf(e)}),this.features=t.concat(e)):this.features=e)},n([y.property({type:C})],t.prototype,"actions",void 0),n([y.property({dependsOn:["actions.length","selectedFeature.sourceLayer.popupTemplate.actions.length","selectedFeature.sourceLayer.popupTemplate.overwriteActions","selectedFeature.popupTemplate.actions.length","selectedFeature.popupTemplate.overwriteActions"],readOnly:!0})],t.prototype,"allActions",null),n([y.property({type:Boolean})],t.prototype,"defaultPopupTemplateEnabled",void 0),n([y.property()],t.prototype,"autoCloseEnabled",void 0),n([y.property()],t.prototype,"autoOpenEnabled",void 0),n([y.property()],t.prototype,"content",void 0),n([y.property({readOnly:!0,dependsOn:["features"]})],t.prototype,"featureCount",null),n([y.property()],t.prototype,"features",null),n([y.property()],t.prototype,"highlightEnabled",void 0),n([y.property({type:s.Point})],t.prototype,"location",null),n([y.property({readOnly:!0,dependsOn:["promises"]})],t.prototype,"pendingPromisesCount",null),n([y.property({readOnly:!0,dependsOn:["featureCount","pendingPromisesCount"]})],t.prototype,"waitingForResult",null),n([y.property({readOnly:!0,dependsOn:["promises"]})],t.prototype,"promiseCount",null),n([y.property()],t.prototype,"promises",null),n([y.property({value:null,readOnly:!0,dependsOn:["features","selectedFeatureIndex","updateLocationEnabled"]})],t.prototype,"selectedFeature",null),n([y.property({value:-1})],t.prototype,"selectedFeatureIndex",null),n([y.property({readOnly:!0,dependsOn:["view.ready"]})],t.prototype,"state",null),n([y.property()],t.prototype,"title",void 0),n([y.property()],t.prototype,"updateLocationEnabled",void 0),n([y.property()],t.prototype,"view",void 0),n([y.property()],t.prototype,"visible",void 0),n([y.property()],t.prototype,"zoomFactor",void 0),n([y.property()],t.prototype,"centerAtLocation",null),n([y.property()],t.prototype,"zoomToLocation",null),t=n([y.subclass("esri.widgets.Popup.PopupViewModel")],t)}(y.declared(O.GoToMixin(x)))})},"esri/views/support/layerViewUtils":function(){define(["require","exports","../../core/maybe"],function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.hasHighlight=function(e){return e&&"function"==typeof e.highlight},t.scaleBoundsPredicate=function(e,t,n){return r.isNone(e)||e>n&&(0===t||e<t)},t.extractSafeScaleBounds=function(e){return{minScale:e.minScale||0,maxScale:e.maxScale||0}}})},"esri/widgets/Popup/actions":function(){define("require exports dojo/i18n!../../nls/common dojo/i18n!./nls/Popup ../../core/Error ../../core/promiseUtils ../../support/actions/ActionButton".split(" "),function(e,t,r,n,o,i,a){Object.defineProperty(t,"__esModule",{value:!0}),t.zoomToFeature=new a({id:"zoom-to-feature",title:n.zoom,className:"esri-icon-zoom-in-magnifying-glass"}),t.removeSelectedFeature=new a({id:"remove-selected-feature",title:r.remove,className:"esri-icon-trash"}),t.all=[t.zoomToFeature,t.removeSelectedFeature],t.triggerAction=function(e){var r=e.view;e=e.event.action;var n=r&&r.popup;if(!e)return i.reject(new o("trigger-action:missing-arguments","Event has no action"));if(!n)return i.reject(new o("trigger-action:missing-arguments","view.popup is missing"));var a=e.disabled,s=e.id;return s?a?i.reject(new o("trigger-action:invalid-action","Action is disabled")):s===t.zoomToFeature.id?n.viewModel.zoomToLocation():s===t.removeSelectedFeature.id?(n.close(),(e=n.selectedFeature)?((n=e.sourceLayer)?n.remove(e):r.graphics.remove(e),i.resolve()):i.reject(new o("trigger-action:"+t.removeSelectedFeature.id,"selectedFeature is required",{selectedFeature:e}))):i.reject(new o("trigger-action:unknown-action","Unable to identify action to perform",{action:e,popup:n})):i.reject(new o("trigger-action:invalid-action","action.id is missing"))}})},"esri/widgets/support/GoTo":function(){define(["require","exports","../../core/tsSupport/declareExtendsHelper","../../core/tsSupport/decorateHelper","../../core/accessorSupport/decorators"],function(e,t,r,n,o){Object.defineProperty(t,"__esModule",{value:!0}),t.GoToMixin=function(e){return function(e){function t(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return t=e.apply(this,t)||this,t.goToOverride=null,t.view=null,t}return r(t,e),t.prototype.callGoTo=function(e){var t=this.view;return this.goToOverride?this.goToOverride(t,e):t.goTo(e.target,e.options)},n([o.property()],t.prototype,"goToOverride",void 0),n([o.property()],t.prototype,"view",void 0),t=n([o.subclass("esri.widgets.support.GoTo")],t)}(o.declared(e))}})},"esri/views/interactive/ToolViewManagerManipulatorState":function(){define("require exports ../../core/iteratorUtils ../../core/mathUtils ../../core/maybe ../../core/screenUtils ./interactiveToolUtils".split(" "),function(e,t,r,n,o,i,a){Object.defineProperty(t,"__esModule",{value:!0}),e=function(){function e(){this._hoveredManipulators=new Map,this._grabbedManipulators=new Map,this._draggedManipulators=new Map,this._stopDrag=!1,this._cursor=this._revertToActiveTool=null}return Object.defineProperty(e.prototype,"cursor",{get:function(){return this._cursor},enumerable:!0,configurable:!0}),e.prototype.handleInputEvent=function(e,t){var r=function(){return e.stopPropagation()};switch(e.type){case"drag":0<this._grabbedManipulators.size&&(this._stopDrag=!0),this._stopDrag&&(r(),"end"===e.action&&(this._stopDrag=!1));break;case"pointer-down":if("mouse"===e.pointerType&&0!==e.button||e.native.shiftKey)break;var a=i.createScreenPointFromEvent(e),l=this._intersect(a,e.pointerType,t.forEachTool);if(o.isNone(l))break;var u=this._findManipulatorByKey(l,t.forEachTool);o.isSome(u)&&u.interactive&&!u.grabbing&&(this._grabbedManipulators.set(e.pointerId,{key:l,start:a}),1===this._grabbedManipulators.size&&(this._revertToActiveTool=t.activeTool,t.setActiveTool(l.tool)),u.grabbing=!0,u.events.emit("grab",{action:"start",screenPoint:a}),r());break;case"pointer-up":this._handlePointerEnd(e,t);break;case"pointer-drag":if("mouse"===e.pointerType&&0!==e.button)break;var c=this._grabbedManipulators.get(e.pointerId),u=this._draggedManipulators.get(e.pointerId),l=o.applySome(c||u,function(e){return e.key}),p=this._findManipulatorByKey(l,t.forEachTool);if(o.isNone(p))break;switch(a=i.createScreenPointFromEvent(e),a.x=n.clamp(a.x,0,t.view.width),a.y=n.clamp(a.y,0,t.view.height),c=o.expect(c||u).start,a={action:e.action,start:c,screenPoint:a},e.action){case"start":case"update":"update"!==a.action&&1!==this._grabbedManipulators.size||(p.dragging=!0,u||(a.action="start"),p.events.emit("drag",a),this._draggedManipulators.set(e.pointerId,{key:o.expect(l),start:c}));break;case"end":u&&p.events.emit("drag",a),p.dragging=!1,this._draggedManipulators.delete(e.pointerId),this._handlePointerEnd(e,t)}r();break;case"immediate-click":if(a=i.createScreenPointFromEvent(e),l=this._intersect(a,e.pointerType,t.forEachTool),u=this._findToolAndManipulatorByKey(l,t.forEachTool,s),e.native.shiftKey||t.forEachTool(function(e){if(e.manipulators){var t=!1;e.manipulators.forEach(function(e){e=e.manipulator,e.selected&&(e.selected=!1,t=!0)}),t&&e.manipulatorSelectionChanged&&e.manipulatorSelectionChanged()}}),!u)break;if(u=s.manipulator,l=s.tool,!u.interactive)break;u.selectable&&(u.selected=!u.selected,l.manipulatorSelectionChanged&&l.manipulatorSelectionChanged()),l=e.native.shiftKey,u.events.emit("immediate-click",{screenPoint:a,button:e.button,pointerType:e.pointerType,shiftKey:l,stopPropagation:r});break;case"click":if(a=i.createScreenPointFromEvent(e),l=this._intersect(a,e.pointerType,t.forEachTool),u=this._findManipulatorByKey(l,t.forEachTool),o.isNone(u)||!u.interactive)break;l=e.native.shiftKey,u.events.emit(e.type,{screenPoint:a,button:e.button,pointerType:e.pointerType,shiftKey:l}),r();break;case"double-click":a=i.createScreenPointFromEvent(e),l=this._intersect(a,e.pointerType,t.forEachTool),u=this._findManipulatorByKey(l,t.forEachTool),!o.isNone(u)&&u.interactive&&(l=e.native.shiftKey,u.events.emit("double-click",{screenPoint:a,button:e.button,pointerType:e.pointerType,shiftKey:l,stopPropagation:r}))}this._updateCursor(t.forEachTool)},e.prototype._handlePointerEnd=function(e,t){var r=o.applySome(this._grabbedManipulators.get(e.pointerId),function(e){return e.key}),n=this._findManipulatorByKey(r,t.forEachTool);o.isSome(n)&&!n.dragging&&(r=o.isSome(t.creatingTool)&&t.creatingTool===o.expect(r).tool,1!==this._grabbedManipulators.size||0!==this._draggedManipulators.size||r||(t.setActiveTool(this._revertToActiveTool),this._revertToActiveTool=null),n.grabbing&&(n.grabbing=!1,n.events.emit("grab",{action:"end",screenPoint:i.createScreenPointFromEvent(e)})),this._grabbedManipulators.delete(e.pointerId))},e.prototype._cursorFromMap=function(e,t){var n=this,i=null;return r.someMap(e,function(e){return e=n._findManipulatorByKey(e.key,t),!!(o.isSome(e)&&e.interactive&&"cursor"in e&&e.cursor)&&(i=e.cursor,!0)}),i},e.prototype._updateCursor=function(e){this._cursor=0<this._grabbedManipulators.size?this._cursorFromMap(this._grabbedManipulators,e)||"grabbing":0<this._hoveredManipulators.size?this._cursorFromMap(this._hoveredManipulators,e)||"pointer":null},e.prototype.clearPointers=function(e,t,r,n){var i=this;void 0===r&&(r=!0);var a=function(t){return t.tool===e&&(o.isNone(n)||t.manipulatorId===n)};this._grabbedManipulators.forEach(function(e,r){e=e.key,a(e)&&(i._grabbedManipulators.delete(r),r=i._findManipulatorByKey(e,t),o.isSome(r)&&(r.grabbing=!1,r.events.emit("grab",{action:"end",screenPoint:null})))}),this._draggedManipulators.forEach(function(e,r){e=e.key,a(e)&&(i._draggedManipulators.delete(r),r=i._findManipulatorByKey(e,t),o.isSome(r)&&(r.dragging=!1))}),r&&this._hoveredManipulators.forEach(function(e,r){e=e.key,a(e)&&(i._hoveredManipulators.delete(r),r=i._findManipulatorByKey(e,t),o.isSome(r)&&(r.hovering=!1))}),this._updateCursor(t)},e.prototype._intersect=function(e,t,r){var n=null;return r(function(r){if(null==r.manipulators||!a.areToolManipulatorsEditable(r))return!1;var i=r.manipulators.intersect(e,t);return!o.isNone(i)&&(n={manipulatorId:i,tool:r},!0)}),n},e.prototype.handleHoverEvent=function(e,t){if(("pointer-up"===e.type||"immediate-click"===e.type||"pointer-move"===e.type)&&"touch"!==e.pointerType){var r=o.applySome(this._hoveredManipulators.get(e.pointerId),function(e){return e.key}),r=this._findManipulatorByKey(r,t),n=this._intersect(i.createScreenPointFromEvent(e),e.pointerType,t),a=this._findManipulatorByKey(n,t);o.isSome(a)&&!a.interactive&&(a=null),r!==a&&(o.isSome(r)&&(r.hovering=!1),o.isSome(a)?(a.hovering=!0,this._hoveredManipulators.set(e.pointerId,{key:o.expect(n)})):this._hoveredManipulators.delete(e.pointerId),this._updateCursor(t))}},e.prototype._findManipulatorByKey=function(e,t){return this._findToolAndManipulatorByKey(e,t,s)?s.manipulator:null},e.prototype._findToolAndManipulatorByKey=function(e,t,r){return o.isNone(e)?null:(r.tool=null,r.manipulator=null,t(function(t){if(t!==e.tool||null==t.manipulators||!a.areToolManipulatorsEditable(t))return!1;var n=t.manipulators.findById(e.manipulatorId);return!!o.isSome(n)&&(r.manipulator=n,r.tool=t,!0)}),null!=r.manipulator)},e}(),t.default=e;var s={manipulator:null,tool:null}})},"esri/views/input/Input":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/accessorSupport/decorators ./gamepad/GamepadSettings".split(" "),function(e,t,r,n,o,i,a){return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.gamepad=new a,t}return r(t,e),n([i.property({readOnly:!0})],t.prototype,"gamepad",void 0),t=n([i.subclass("esri.views.input.Input")],t)}(i.declared(o))})},"esri/views/input/gamepad/GamepadSettings":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/Accessor ../../../core/Collection ../../../core/accessorSupport/decorators ./GamepadInputDevice".split(" "),function(e,t,r,n,o,i,a,s){return function(e){function t(){var t=e.call(this)||this;return t.devices=new i,t.enabledFocusMode="document",t}return r(t,e),n([a.property({type:i.ofType(s),readOnly:!0})],t.prototype,"devices",void 0),n([a.property({type:["document","view","none"]})],t.prototype,"enabledFocusMode",void 0),t=n([a.subclass("esri.views.input.gamepad.GamepadSettings")],t)}(a.declared(o))})},"esri/views/input/gamepad/GamepadInputDevice":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/Accessor ../../../core/accessorSupport/decorators".split(" "),function(e,t,r,n,o,i){var a=/^(3dconnexion|space(mouse|navigator|pilot|explorer))/i,s={standard:.15,spacemouse:.025,unknown:0};return function(e){function t(t){var r=e.call(this)||this;return r.nativeIndex=null,r._detectedDeviceType="unknown","standard"===t.mapping?r._detectedDeviceType="standard":a.test(t.id)?r._detectedDeviceType="spacemouse":r._detectedDeviceType="unknown",r.nativeIndex=t.index,r}return r(t,e),Object.defineProperty(t.prototype,"native",{get:function(){return(navigator.getGamepads?navigator.getGamepads():[])[this.nativeIndex]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"deviceType",{get:function(){return this._detectedDeviceType},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"axisThreshold",{get:function(){return s[this.deviceType]},enumerable:!0,configurable:!0}),n([i.property({nonNullable:!0,readOnly:!0})],t.prototype,"nativeIndex",void 0),n([i.property({type:String,readOnly:!0})],t.prototype,"deviceType",null),n([i.property({type:Number,readOnly:!0})],t.prototype,"axisThreshold",null),t=n([i.subclass("esri.views.input.gamepad.GamepadInputDevice")],t)}(i.declared(o))})},"esri/views/navigation/Navigation":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/accessorSupport/decorators ./gamepad/GamepadSettings".split(" "),function(e,t,r,n,o,i,a){return function(e){function t(t){return t=e.call(this,t)||this,t.browserTouchPanEnabled=!0,t.gamepad=new a,t.momentumEnabled=!0,t.mouseWheelZoomEnabled=!0,t}return r(t,e),n([i.property({type:Boolean})],t.prototype,"browserTouchPanEnabled",void 0),n([i.property({type:a,nonNullable:!0})],t.prototype,"gamepad",void 0),n([i.property({type:Boolean})],t.prototype,"momentumEnabled",void 0),n([i.property({type:Boolean})],t.prototype,"mouseWheelZoomEnabled",void 0),t=n([i.subclass("esri.views.navigation.Navigation")],t)}(i.declared(o))})},"esri/views/navigation/gamepad/GamepadSettings":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/Accessor ../../../core/accessorSupport/decorators ../../input/gamepad/GamepadInputDevice".split(" "),function(e,t,r,n,o,i,a){return function(e){function t(t){return t=e.call(this,t)||this,t.enabled=!0,t.device=null,t.mode="pan",t.tiltDirection="forward-down",t.velocityFactor=1,t}return r(t,e),n([i.property({type:Boolean,nonNullable:!0})],t.prototype,"enabled",void 0),n([i.property({type:a})],t.prototype,"device",void 0),n([i.property({type:["pan","zoom"],nonNullable:!0})],t.prototype,"mode",void 0),n([i.property({type:["forward-down","forward-up"],nonNullable:!0})],t.prototype,"tiltDirection",void 0),n([i.property({type:Number,nonNullable:!0})],t.prototype,"velocityFactor",void 0),t=n([i.subclass("esri.views.navigation.gamepad.GamepadSettings")],t)}(i.declared(o))})},"esri/views/support/DefaultsFromMap":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/tsSupport/generatorHelper ../../core/tsSupport/awaiterHelper ../../core/Accessor ../../core/arrayUtils ../../core/Handles ../../core/Logger ../../core/promiseUtils ../../core/watchUtils ../../core/accessorSupport/decorators ../../geometry/support/heightModelInfoUtils ../../geometry/support/webMercatorUtils @dojo/framework/shim/Promise".split(" "),function(e,t,r,n,o,i,a,s,l,u,c,p,d,f,h){function y(e){return e?JSON.stringify(e.toJSON()):"undefined"}function m(e){switch(e){case 0:return"Waiting";case 1:return"Found";case 2:return"Exhausted"}return"Unknown: "+e}var g=u.getLogger("esri.views.support.DefaultsFromMap");return function(t){function a(){var e=null!==t&&t.apply(this,arguments)||this;return e._handles=new l,e._waitTask=null,e._extentProjectController=null,e._spatialReferenceCandidates=null,e._extentCandidates=null,e.logDebugInformation=!1,e.isSpatialReferenceDone=!1,e.isTileInfoDone=!1,e.isHeightModelInfoSearching=!1,e.spatialReference=null,e.extent=null,e.heightModelInfo=null,e.vcsWkid=null,e.latestVcsWkid=null,e.mapCollectionPaths=u.DefaultMapCollectionPaths.slice(),e.tileInfo=null,e}r(a,t),u=a,a.prototype.initialize=function(){var e=this;this.watch("mapCollectionPaths",function(){e._running&&(e.reset(),e.start())})},a.prototype.destroy=function(){this._set("view",null),this._handles&&(this._handles.destroy(),this._handles=null),this._cancelLoading()},Object.defineProperty(a.prototype,"_running",{get:function(){return!!(this._handles&&0<this._handles.size)},enumerable:!0,configurable:!0}),a.prototype.reset=function(){this._handles.removeAll(),this._set("isSpatialReferenceDone",!1),this._set("isTileInfoDone",!1),this._set("isHeightModelInfoSearching",!1),this._set("spatialReference",null),this._set("extent",null),this._set("heightModelInfo",null),this._set("vcsWkid",null),this._set("latestVcsWkid",null),this._set("tileInfo",null),this._extentCandidates=this._spatialReferenceCandidates=null},a.prototype.start=function(){var e=this;this._handles.removeAll();for(var t=this._updateLayerChange.bind(this),r=0,n=this.mapCollectionPaths;r<n.length;r++)this._handles.add(p.on(this.view,"map."+n[r],"change",t,t,t,!0));this._handles.add(p.when(this,"isSpatialReferenceDone",function(){return e._updateTileInfo()},!0))},a.prototype._ownerNameFromCollectionName=function(e){var t=e.lastIndexOf(".");return-1===t?"view":"view."+e.slice(0,t)},a.prototype._ensureLoadedOwnersFromCollectionName=function(e){for(var t,r=this._ownerNameFromCollectionName(e).split("."),n=0;n<r.length&&(t=this.get(r.slice(0,n+1).join(".")));n++)if(t.load&&!t.isFulfilled())return{collectionName:e,owner:null,loading:t.load()};return{collectionName:e,owner:t}},a.prototype._cancelLoading=function(){this._waitTask=null,this._extentProjectController&&(this._extentProjectController.abort(),this._extentProjectController=null)},a.prototype._updateWhen=function(e){var t=this,r=!0,n=!1,o=e.catch(function(){}).then(function(){r?n=!0:o===t._waitTask&&t._update()}),r=!1;return n||(this._waitTask=o),n},a.prototype._updateLayerChange=function(){this.isSpatialReferenceDone&&!this.spatialReference&&this._set("isSpatialReferenceDone",!1),this._update()},a.prototype._update=function(){var e=this;if(this._cancelLoading(),this.view){if(!this.isSpatialReferenceDone){this._debugLog("Starting search for spatial reference...");var t=this._processMapCollections(function(t){return e._processSpatialReferenceSource(t)});if(this._debugLog("Search ended with status '"+m(t)+"'"),0!==t){var r=null,t=this._spatialReferenceCandidates;!t||1>t.length?(r=this.defaultSpatialReference,this._debugLog("No spatial reference found, locking to default ("+y(r)+")")):(this.defaultSpatialReference&&1<t.length&&-1<s.findIndex(t,function(t){return t.equals(e.defaultSpatialReference)})&&(t=[this.defaultSpatialReference]),r=t[0],this._debugLog("Locking to "+y(r))),this._set("spatialReference",r),r?this.extent?this._set("isSpatialReferenceDone",!0):(t=this.logDebugInformation,this.logDebugInformation=!1,this._processMapCollections(function(t){return e._findExtent(t,r)}),this.logDebugInformation=t,this._projectExtentCandidate().catch().then(function(){return e._set("isSpatialReferenceDone",!0)})):this._set("isSpatialReferenceDone",!0)}}null==this.heightModelInfo&&this.view.isHeightModelInfoRequired&&(this._debugLog("Starting search for height model info..."),t=this._processMapCollections(function(t){return e._processHeightModelInfoSource(t)},function(e){return f.mayHaveHeightModelInfo(e)}),this._debugLog("Search ended with status "+m(t)),this._set("isHeightModelInfoSearching",0===t)),this._updateTileInfo()}},a.prototype._processMapCollections=function(e,t){var r=this;this._preloadMapCollections(t);var n=2;return this._forAllMapCollectionSources(function(e){return 2===n&&(r._debugLog("Processing collection "+e.collectionName+"..."),!(e.loading&&!r._updateWhen(e.loading))||(r._debugLog("Collection "+e.collectionName+" owner is loading -> wait"),n=0,!1))},function(o){return 2===n&&(null==t||t(o)?!o.load||o.isFulfilled()||r._updateWhen(o.load())?!((!o.load||o.isResolved())&&e(o))||(n=1,!1):(r._debugLog("Source "+o.id+" is loading -> wait"),n=0,!1):(r._debugLog("Source "+o.id+" is skipped due to predicate"),!1))}),n},a.prototype._preloadMapCollections=function(e){var t=this,r=10,n=this.logDebugInformation;this.logDebugInformation=!1,this._forAllMapCollectionSources(function(){return!0},function(o){return!(0===r||null!=e&&!e(o))&&(o.load&&!o.isFulfilled()&&(t.logDebugInformation=n,t._debugLog("Pre-loading source "+o.id),t.logDebugInformation=!1,o.load(),r--),!0)}),this.logDebugInformation=n},a.prototype._forAllMapCollectionSources=function(e,t){for(var r=0,n=this.mapCollectionPaths;r<n.length;r++){var o="map."+n[r],i=this._ensureLoadedOwnersFromCollectionName(o);!1!==e(i)&&(i=i.owner,!i||i.isRejected&&i.isRejected()?this._debugLog("Collection "+o+" owner is invalid or rejected -> skip"):(i=this.view.get(o))?this._forEachSource(i,t):this._debugLog("Collection "+o+" does not exist -> skip"))}},a.prototype._forEachSource=function(e,t){var r=0;for(e=e.items;r<e.length;r++){var n=e[r];!1!==t(n)&&"layers"in n&&n.layers&&this._forEachSource(n.layers,t)}},a.prototype._processSpatialReferenceSource=function(e){var t=this._getSupportedSpatialReferences(e);return 0!==t.length&&(this._spatialReferenceCandidates?(t=s.intersect(t,this._spatialReferenceCandidates,function(e,t){return e.equals(t)}),0<t.length?this._spatialReferenceCandidates=t:this._debugLog("Layer "+e.id+" is ignored because its supported spatial\n          references are not compatible with the previous candidates")):this._spatialReferenceCandidates=t,1===this._spatialReferenceCandidates.length)},a.prototype._findExtent=function(e,t){var r="fullExtents"in e&&e.fullExtents||(e.fullExtent?[e.fullExtent]:[]),n=s.find(r,function(e){return e.spatialReference.equals(t)});return n?(this._set("extent",n),!0):(0<this._getSupportedSpatialReferences(e).length&&(r=r.map(function(t){return{extent:t,layer:e}}),this._extentCandidates=(this._extentCandidates||[]).concat(r)),!1)},a.prototype._projectExtentCandidate=function(){return i(this,void 0,void 0,function(){var t,r,n,i,a;return o(this,function(o){switch(o.label){case 0:return this._extentCandidates&&this._extentCandidates.length?(t=this.spatialReference,(r=s.find(this._extentCandidates,function(e){return h.canProject(e.extent.spatialReference,t)}))?(this._set("extent",h.project(r.extent,t)),[3,7]):[3,1]):[2];case 1:return n=this._extentCandidates[0],this._extentProjectController=c.createAbortController(),[4,new Promise(function(t,r){e(["../../portal/support/geometryServiceUtils"],t,r)})];case 2:i=o.sent(),o.label=3;case 3:return o.trys.push([3,5,,6]),[4,i.projectGeometry(n.extent,t,n.layer.portalItem,this._extentProjectController.signal)];case 4:return a=o.sent(),this._set("extent",a),[3,6];case 5:return o.sent(),[3,6];case 6:this._extentProjectController=null,o.label=7;case 7:return[2]}})})},a.prototype._getSupportedSpatialReferences=function(e){var t=this,r="supportedSpatialReferences"in e&&e.supportedSpatialReferences||(e.spatialReference?[e.spatialReference]:[]);return 0===r.length?(this._debugLog("Layer "+e.id+" is ignored because it does not have any spatial references"),[]):(r=r.filter(function(r){return t.view.isSpatialReferenceSupported(r,e,function(e){return t._debugLog(e)})}),0===r.length?this._debugLog("Layer "+e.id+" has spatial references but none of them are supported (or layer doesn't require locking)"):this._debugLog("Layer "+e.id+" has spatial references. Resulting candidate set: "+r.map(y).join(", ")),r)},a.prototype._processHeightModelInfoSource=function(e){var t=f.deriveHeightModelInfoFromLayer(e);return!!t&&(this._set("heightModelInfo",t),this._set("isHeightModelInfoSearching",!1),e.spatialReference&&(this._set("vcsWkid",e.spatialReference.vcsWkid),this._set("latestVcsWkid",e.spatialReference.latestVcsWkid)),!0)},a.prototype._updateTileInfo=function(){if(null==this.tileInfo)if(this.view.isTileInfoRequired()){if(this.isSpatialReferenceDone){var e=this.get("view.map");if(e){var t=e.basemap,e=e.get("layers.0"),r=null;if(t&&"failed"!==t.loadStatus){if(!t.loaded)return this._updateWhen(t.load()),void this._debugLog("updateTileInfo: basemap still loading");if((t=t&&t.get("baseLayers.0"))&&"failed"!==t.loadStatus){if(!t.loaded)return this._updateWhen(t.load()),void this._debugLog("updateTileInfo: first basemap layer still loading");r="tileInfo"in t&&t.tileInfo}else{if(!e||"failed"===e.loadStatus)return;if(!e.loaded)return this._updateWhen(e.load()),void this._debugLog("updateTileInfo: first operational layer still loading");r="tileInfo"in e&&e.tileInfo}}else if(e&&"failed"!==e.loadStatus){if(!e.loaded)return this._updateWhen(e.load()),void this._debugLog("updateTileInfo: first operational layer still loading");r="tileInfo"in e&&e.tileInfo}r&&!r.spatialReference.equals(this.spatialReference)&&(r=null),this._debugLog("updateTileInfo: setting "+r),this._set("tileInfo",r),this._set("isTileInfoDone",!0)}else this._debugLog("updateTileInfo: no map")}}else this._set("isTileInfoDone",!0)},a.prototype._debugLog=function(e){this.logDebugInformation&&g.info(e)};var u;return a.DefaultMapCollectionPaths=["basemap.baseLayers","layers","ground.layers","basemap.referenceLayers"],n([d.property()],a.prototype,"logDebugInformation",void 0),n([d.property({readOnly:!0})],a.prototype,"isSpatialReferenceDone",void 0),n([d.property({readOnly:!0})],a.prototype,"isTileInfoDone",void 0),n([d.property({readOnly:!0})],a.prototype,"isHeightModelInfoSearching",void 0),n([d.property({constructOnly:!0})],a.prototype,"view",void 0),n([d.property({readOnly:!0})],a.prototype,"spatialReference",void 0),n([d.property({readOnly:!0})],a.prototype,"extent",void 0),n([d.property({readOnly:!0})],a.prototype,"heightModelInfo",void 0),n([d.property({readOnly:!0})],a.prototype,"vcsWkid",void 0),n([d.property({readOnly:!0})],a.prototype,"latestVcsWkid",void 0),n([d.property()],a.prototype,"mapCollectionPaths",void 0),n([d.property()],a.prototype,"defaultSpatialReference",void 0),n([d.property({readOnly:!0})],a.prototype,"tileInfo",void 0),a=u=n([d.subclass("esri.views.support.DefaultsFromMap")],a)}(d.declared(a))})},"esri/geometry/support/heightModelInfoUtils":function(){define("require exports ../../core/compilerUtils ../../core/Error ../HeightModelInfo ../../layers/support/arcgisLayerUrl".split(" "),function(e,t,r,n,o,i){function a(e,t,r){if(!s(e)||!s(t))return 4;if(null==e||null==t)return 0;if(!r&&e.heightUnit!==t.heightUnit)return 1;if(e.heightModel!==t.heightModel)return 2;switch(e.heightModel){case"gravity-related-height":return 0;case"ellipsoidal":return e.vertCRS===t.vertCRS?0:3;default:return 4}}function s(e){return null==e||null!=e.heightModel&&null!=e.heightUnit}function l(e){var t=e.url&&i.parse(e.url);return(null!=(e.spatialReference&&e.spatialReference.vcsWkid)||!t||"ImageServer"!==t.serverType)&&"heightModelInfo"in e&&e.heightModelInfo?e.heightModelInfo:c(e)?o.deriveUnitFromSR(d,e.spatialReference):null}function u(e){if("unknown"===e.type||!("capabilities"in e))return!1;switch(e.type){case"csv":case"feature":case"geojson":case"stream":return!0;case"imagery":case"map-image":case"tile":case"vector-tile":case null:return!1;default:return r.neverReached(e),!1}}function c(e){return u(e)?!!(e.capabilities&&e.capabilities.data&&e.capabilities.data.supportsZ):p(e)}function p(e){switch(e.type){case"building-scene":case"elevation":case"integrated-mesh":case"point-cloud":case"scene":return!0;case"base-dynamic":case"base-elevation":case"base-tile":case"bing-maps":case"csv":case"geojson":case"feature":case"geo-rss":case"graphics":case"group":case"imagery":case"kml":case"map-image":case"map-notes":case"open-street-map":case"stream":case"tile":case"unknown":case"unsupported":case"vector-tile":case"web-tile":case"wms":case"wmts":case null:break;default:r.neverReached(e)}return!1}Object.defineProperty(t,"__esModule",{value:!0}),t.validateWebSceneError=function(e,t){if(!e)return null;if(!s(e))return new n("webscene:unsupported-height-model-info","The vertical coordinate system of the scene is not supported",{heightModelInfo:e});var r=e.heightUnit;return e=o.deriveUnitFromSR(e,t).heightUnit,r!==e?new n("webscene:incompatible-height-unit","The vertical units of the scene ("+r+") must match the horizontal units of the scene ("+e+")",{verticalUnit:r,horizontalUnit:e}):null},t.rejectLayerError=function(e,t,r){var i=l(e),s=a(i,t,r),u=null;if(i){var p=o.deriveUnitFromSR(i,e.spatialReference).heightUnit;r||p===i.heightUnit||(u=new n("layerview:unmatched-height-unit","The vertical units of the layer must match the horizontal units ("+p+")",{horizontalUnit:p}))}if(!("heightModelInfo"in e&&null!=e.heightModelInfo||null!=e.spatialReference)&&c(e)||4===s||u)return new n("layerview:unsupported-height-model-info","The vertical coordinate system of the layer is not supported",{heightModelInfo:i,error:u});switch(u=null,s){case 1:e=i.heightUnit||"unknown",r=t.heightUnit||"unknown",u=new n("layerview:incompatible-height-unit","The vertical units of the layer ("+e+") must match the vertical units of the scene ("+r+")",{layerUnit:e,sceneUnit:r});break;case 2:e=i.heightModel||"unknown",r=t.heightModel||"unknown",u=new n("layerview:incompatible-height-model","The height model of the layer ("+e+") must match the height model of the scene ("+r+")",{layerHeightModel:e,sceneHeightModel:r});break;case 3:e=i.vertCRS||"unknown",r=t.vertCRS||"unknown",u=new n("layerview:incompatible-vertical-datum","The vertical datum of the layer ("+e+") must match the vertical datum of the scene ("+r+")",{layerDatum:e,sceneDatum:r})}return u?new n("layerview:incompatible-height-model-info","The vertical coordinate system of the layer is incompatible with the scene",{layerHeightModelInfo:i,sceneHeightModelInfo:t,error:u}):null},t.deriveHeightModelInfoFromLayer=l,t.mayHaveHeightModelInfo=function(e){return null!=e.layers||p(e)||u(e)||"heightModelInfo"in e};var d=new o({heightModel:"gravity-related-height"})})},"esri/views/ViewAnimation":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Error ../core/has ../core/Promise ../core/promiseUtils ../core/promiseUtils ../core/scheduling ../core/accessorSupport/decorators".split(" "),function(e,t,r,n,o,i,a,s,l,u,c){return e=function(e){function t(t){return t=e.call(this,t)||this,t.state="running",t.target=null,t}return r(t,e),t.prototype.initialize=function(){var e=this;this.addResolvingPromise(s.create(function(t,r){return e._dfd={resolve:t,reject:r}}))},Object.defineProperty(t.prototype,"done",{get:function(){return"finished"===this.state||"stopped"===this.state},enumerable:!0,configurable:!0}),t.prototype.stop=function(){var e=this;"stopped"!==this.state&&"finished"!==this.state&&(this._set("state","stopped"),i("esri-native-promise")?this._dfd.reject(new o("ViewAnimation stopped")):u.schedule(function(){return e._dfd.reject(new o("ViewAnimation stopped"))}))},t.prototype.finish=function(){"stopped"!==this.state&&"finished"!==this.state&&(this._set("state","finished"),i("esri-native-promise")?this._dfd.resolve():u.schedule(this._dfd.resolve))},t.prototype.update=function(e,t){t||(t=l.isPromiseLike(e)?"waiting-for-target":"running"),this._set("target",e),this._set("state",t)},n([c.property({readOnly:!0,dependsOn:["state"]})],t.prototype,"done",null),n([c.property({readOnly:!0,type:String})],t.prototype,"state",void 0),n([c.property()],t.prototype,"target",void 0),t=n([c.subclass("esri.views.ViewAnimation")],t)}(c.declared(a.EsriPromise)),(e||(e={})).State={RUNNING:"running",STOPPED:"stopped",FINISHED:"finished",WAITING_FOR_TARGET:"waiting-for-target"},e})},"esri/views/layers/LayerView":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/Evented ../../core/HandleOwner ../../core/Identifiable ../../core/Logger ../../core/Promise ../../core/accessorSupport/decorators".split(" "),function(e,t,r,n,o,i,a,s,l,u,c){return function(e){function t(t){return t=e.call(this,t)||this,t.layer=null,t.parent=null,t}return r(t,e),t.prototype.initialize=function(){var e=this;this.addResolvingPromise(this.layer),this.when().catch(function(t){if("layerview:create-error"!==t.name){var r=e.layer&&e.layer.id||"no id",n=e.layer&&e.layer.title||"no title";throw l.getLogger(e.declaredClass).error("#resolve()","Failed to resolve layer view (layer title: '"+n+"', id: '"+r+"')",t),t}})},t.prototype.destroy=function(){this.layer=this.parent=null},Object.defineProperty(t.prototype,"fullOpacity",{get:function(){var e=this.get("layer.opacity"),e=null==e?1:e,t=this.get("parent.fullOpacity");return e*(null==t?1:t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"suspended",{get:function(){return!this.canResume()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"updating",{get:function(){return!!(this.updatingHandles&&this.updatingHandles.updating||this.isUpdating())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"visible",{get:function(){return!0===this.get("layer.visible")},set:function(e){void 0===e?this._clearOverride("visible"):this._override("visible",e)},enumerable:!0,configurable:!0}),t.prototype.canResume=function(){return!this.get("parent.suspended")&&this.get("view.ready")&&this.get("layer.loaded")&&this.visible||!1},t.prototype.isUpdating=function(){return!1},n([c.property({dependsOn:["layer.opacity","parent.fullOpacity"]})],t.prototype,"fullOpacity",null),n([c.property()],t.prototype,"layer",void 0),n([c.property()],t.prototype,"parent",void 0),n([c.property({readOnly:!0,dependsOn:["visible","layer.loaded","parent.suspended"]})],t.prototype,"suspended",null),n([c.property({type:Boolean,dependsOn:["updatingHandles.updating"],readOnly:!0})],t.prototype,"updating",null),n([c.property({dependsOn:["layer.visible"]})],t.prototype,"visible",null),t=n([c.subclass("esri.views.layers.LayerView")],t)}(c.declared(a.HandleOwnerMixin(s.IdentifiableMixin(u.EsriPromiseMixin(i.EventedMixin(o))))))})},"*now":function(e){e(['dojo/i18n!*preload*dojo/nls/dojo*["ar","bs","ca","cs","da","de","el","en-au","en-ca","en-gb","en-us","es","es-mx","et","fi","fr","he","hr","hu","id","it","ja","ko","lt","lv","nl","nb","pl","pt","pt-br","pt-pt","ro","ru","sl","sr","sv","th","tr","uk","vi","zh-cn","zh-hk","zh-tw","ROOT"]'])},"*noref":1}}),require.boot&&require.apply(null,require.boot);